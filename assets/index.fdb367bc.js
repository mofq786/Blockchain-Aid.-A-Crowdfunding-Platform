import{c as Pe,s as cs,a as di}from"./index.03de1614.js";import{r as gt}from"./___vite-browser-external_commonjs-proxy.c0daa527.js";import{k as us,s as hs,r as fs,t as ds,c as _t,E as ps}from"./index.79799d66.js";import{i as Hn}from"./index.b52b46e6.js";import{b as gs}from"./index.7b9745c7.js";import{d as _s}from"./dijkstra.e1aa8e0e.js";var $n={},V={};Object.defineProperty(V,"__esModule",{value:!0});var pi=V.getLocalStorage=Si=V.getLocalStorageOrThrow=xi=V.getCrypto=Ei=V.getCryptoOrThrow=Mi=V.getLocation=bi=V.getLocationOrThrow=yi=V.getNavigator=wi=V.getNavigatorOrThrow=vi=V.getDocument=mi=V.getDocumentOrThrow=_i=V.getFromWindowOrThrow=gi=V.getFromWindow=void 0;function Ve(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}var gi=V.getFromWindow=Ve;function it(t){const e=Ve(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}var _i=V.getFromWindowOrThrow=it;function ms(){return it("document")}var mi=V.getDocumentOrThrow=ms;function vs(){return Ve("document")}var vi=V.getDocument=vs;function ws(){return it("navigator")}var wi=V.getNavigatorOrThrow=ws;function ys(){return Ve("navigator")}var yi=V.getNavigator=ys;function bs(){return it("location")}var bi=V.getLocationOrThrow=bs;function Ms(){return Ve("location")}var Mi=V.getLocation=Ms;function Es(){return it("crypto")}var Ei=V.getCryptoOrThrow=Es;function xs(){return Ve("crypto")}var xi=V.getCrypto=xs;function Ss(){return it("localStorage")}var Si=V.getLocalStorageOrThrow=Ss;function Cs(){return Ve("localStorage")}pi=V.getLocalStorage=Cs;Object.defineProperty($n,"__esModule",{value:!0});var Ci=$n.getWindowMetadata=void 0;const Ar=V;function ks(){let t,e;try{t=Ar.getDocumentOrThrow(),e=Ar.getLocationOrThrow()}catch{return null}function n(){const C=t.getElementsByTagName("link"),R=[];for(let I=0;I<C.length;I++){const T=C[I],O=T.getAttribute("rel");if(O&&O.toLowerCase().indexOf("icon")>-1){const b=T.getAttribute("href");if(b)if(b.toLowerCase().indexOf("https:")===-1&&b.toLowerCase().indexOf("http:")===-1&&b.indexOf("//")!==0){let E=e.protocol+"//"+e.host;if(b.indexOf("/")===0)E+=b;else{const S=e.pathname.split("/");S.pop();const x=S.join("/");E+=x+"/"+b}R.push(E)}else if(b.indexOf("//")===0){const E=e.protocol+b;R.push(E)}else R.push(b)}}return R}function r(...C){const R=t.getElementsByTagName("meta");for(let I=0;I<R.length;I++){const T=R[I],O=["itemprop","property","name"].map(b=>T.getAttribute(b)).filter(b=>b?C.includes(b):!1);if(O.length&&O){const b=T.getAttribute("content");if(b)return b}}return""}function s(){let C=r("name","og:site_name","og:title","twitter:title");return C||(C=t.title),C}function i(){return r("description","og:description","twitter:description","keywords")}const u=s(),f=i(),_=e.origin,y=n();return{description:f,url:_,icons:y,name:u}}Ci=$n.getWindowMetadata=ks;var Rs=globalThis&&globalThis.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],u=0,f=i.length;u<f;u++,s++)r[s]=i[u];return r},Ts=function(){function t(e,n,r){this.name=e,this.version=n,this.os=r,this.type="browser"}return t}(),Is=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),As=function(){function t(e,n,r,s){this.name=e,this.version=n,this.os=r,this.bot=s,this.type="bot-device"}return t}(),Os=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),Ns=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),Bs=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,Ls=/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Or=3,Ps=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FBAV\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["searchbot",Bs]],Nr=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function qs(t){return t?Br(t):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new Ns:typeof navigator<"u"?Br(navigator.userAgent):Hs()}function Us(t){return t!==""&&Ps.reduce(function(e,n){var r=n[0],s=n[1];if(e)return e;var i=s.exec(t);return!!i&&[r,i]},!1)}function Br(t){var e=Us(t);if(!e)return null;var n=e[0],r=e[1];if(n==="searchbot")return new Os;var s=r[1]&&r[1].split(/[._]/).slice(0,3);s?s.length<Or&&(s=Rs(s,$s(Or-s.length))):s=[];var i=s.join("."),u=Ds(t),f=Ls.exec(t);return f&&f[1]?new As(n,i,u,f[1]):new Ts(n,i,u)}function Ds(t){for(var e=0,n=Nr.length;e<n;e++){var r=Nr[e],s=r[0],i=r[1],u=i.exec(t);if(u)return s}return null}function Hs(){var t=typeof process<"u"&&process.version;return t?new Is(process.version.slice(1)):null}function $s(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}function Lt(t){return qs(t)}function Pt(){const t=Lt();return t&&t.os?t.os:void 0}function ki(){const t=Pt();return t?t.toLowerCase().includes("android"):!1}function Ri(){const t=Pt();return t?t.toLowerCase().includes("ios")||t.toLowerCase().includes("mac")&&navigator.maxTouchPoints>1:!1}function Ti(){return Pt()?ki()||Ri():!1}function Ii(){const t=Lt();return t&&t.name?t.name.toLowerCase()==="node":!1}function Ai(){return!Ii()&&!!Ni()}const Oi=gi,Fs=_i,Ws=mi,zs=vi,js=wi,Ni=yi,Vs=bi,Bi=Mi,Js=Ei,Ks=xi,Gs=Si,qt=pi;function Sn(){return Ci()}function Qs(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return JSON.parse(t)}catch{return t}}function Ys(t){return typeof t=="string"?t:JSON.stringify(t)}const Li=Qs,Pi=Ys;function Fn(t,e){const n=Pi(e),r=qt();r&&r.setItem(t,n)}function Wn(t){let e=null,n=null;const r=qt();return r&&(n=r.getItem(t)),e=n&&Li(n),e}function zn(t){const e=qt();e&&e.removeItem(t)}const kt="WALLETCONNECT_DEEPLINK_CHOICE";function Xs(t,e){const n=encodeURIComponent(t);return e.universalLink?`${e.universalLink}/wc?uri=${n}`:e.deepLink?`${e.deepLink}${e.deepLink.endsWith(":")?"//":"/"}wc?uri=${n}`:""}function Zs(t){const e=t.href.split("?")[0];Fn(kt,Object.assign(Object.assign({},t),{href:e}))}function qi(t,e){return t.filter(n=>n.name.toLowerCase().includes(e.toLowerCase()))[0]}function ea(t,e){let n=t;return e&&(n=e.map(r=>qi(t,r)).filter(Boolean)),n}const Ui="https://registry.walletconnect.com";function ta(){return Ui+"/api/v2/wallets"}function na(){return Ui+"/api/v2/dapps"}function Di(t,e="mobile"){var n;return{name:t.name||"",shortName:t.metadata.shortName||"",color:t.metadata.colors.primary||"",logo:(n=t.image_url.sm)!==null&&n!==void 0?n:"",universalLink:t[e].universal||"",deepLink:t[e].native||""}}function ra(t,e="mobile"){return Object.values(t).filter(n=>!!n[e].universal||!!n[e].native).map(n=>Di(n,e))}const ia=Object.freeze(Object.defineProperty({__proto__:null,detectEnv:Lt,detectOS:Pt,isAndroid:ki,isIOS:Ri,isMobile:Ti,isNode:Ii,isBrowser:Ai,getFromWindow:Oi,getFromWindowOrThrow:Fs,getDocumentOrThrow:Ws,getDocument:zs,getNavigatorOrThrow:js,getNavigator:Ni,getLocationOrThrow:Vs,getLocation:Bi,getCryptoOrThrow:Js,getCrypto:Ks,getLocalStorageOrThrow:Gs,getLocalStorage:qt,getClientMeta:Sn,safeJsonParse:Li,safeJsonStringify:Pi,setLocal:Fn,getLocal:Wn,removeLocal:zn,mobileLinkChoiceKey:kt,formatIOSMobile:Xs,saveMobileLinkInfo:Zs,getMobileRegistryEntry:qi,getMobileLinkRegistry:ea,getWalletRegistryUrl:ta,getDappRegistryUrl:na,formatMobileRegistryEntry:Di,formatMobileRegistry:ra},Symbol.toStringTag,{value:"Module"})),oa=["session_request","session_update","exchange_key","connect","disconnect","display_uri","modal_closed","transport_open","transport_close","transport_error"],jn=["eth_sendTransaction","eth_signTransaction","eth_sign","eth_signTypedData","eth_signTypedData_v1","eth_signTypedData_v2","eth_signTypedData_v3","eth_signTypedData_v4","personal_sign","wallet_addEthereumChain","wallet_switchEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],sa={1:"mainnet",3:"ropsten",4:"rinkeby",5:"goerli",42:"kovan"};var Hi={exports:{}};(function(t){(function(e,n){function r(m,o){if(!m)throw new Error(o||"Assertion failed")}function s(m,o){m.super_=o;var l=function(){};l.prototype=o.prototype,m.prototype=new l,m.prototype.constructor=m}function i(m,o,l){if(i.isBN(m))return m;this.negative=0,this.words=null,this.length=0,this.red=null,m!==null&&((o==="le"||o==="be")&&(l=o,o=10),this._init(m||0,o||10,l||"be"))}typeof e=="object"?e.exports=i:n.BN=i,i.BN=i,i.wordSize=26;var u;try{u=gt.Buffer}catch{}i.isBN=function(o){return o instanceof i?!0:o!==null&&typeof o=="object"&&o.constructor.wordSize===i.wordSize&&Array.isArray(o.words)},i.max=function(o,l){return o.cmp(l)>0?o:l},i.min=function(o,l){return o.cmp(l)<0?o:l},i.prototype._init=function(o,l,c){if(typeof o=="number")return this._initNumber(o,l,c);if(typeof o=="object")return this._initArray(o,l,c);l==="hex"&&(l=16),r(l===(l|0)&&l>=2&&l<=36),o=o.toString().replace(/\s+/g,"");var h=0;o[0]==="-"&&h++,l===16?this._parseHex(o,h):this._parseBase(o,l,h),o[0]==="-"&&(this.negative=1),this.strip(),c==="le"&&this._initArray(this.toArray(),l,c)},i.prototype._initNumber=function(o,l,c){o<0&&(this.negative=1,o=-o),o<67108864?(this.words=[o&67108863],this.length=1):o<4503599627370496?(this.words=[o&67108863,o/67108864&67108863],this.length=2):(r(o<9007199254740992),this.words=[o&67108863,o/67108864&67108863,1],this.length=3),c==="le"&&this._initArray(this.toArray(),l,c)},i.prototype._initArray=function(o,l,c){if(r(typeof o.length=="number"),o.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(o.length/3),this.words=new Array(this.length);for(var h=0;h<this.length;h++)this.words[h]=0;var g,w,M=0;if(c==="be")for(h=o.length-1,g=0;h>=0;h-=3)w=o[h]|o[h-1]<<8|o[h-2]<<16,this.words[g]|=w<<M&67108863,this.words[g+1]=w>>>26-M&67108863,M+=24,M>=26&&(M-=26,g++);else if(c==="le")for(h=0,g=0;h<o.length;h+=3)w=o[h]|o[h+1]<<8|o[h+2]<<16,this.words[g]|=w<<M&67108863,this.words[g+1]=w>>>26-M&67108863,M+=24,M>=26&&(M-=26,g++);return this.strip()};function f(m,o,l){for(var c=0,h=Math.min(m.length,l),g=o;g<h;g++){var w=m.charCodeAt(g)-48;c<<=4,w>=49&&w<=54?c|=w-49+10:w>=17&&w<=22?c|=w-17+10:c|=w&15}return c}i.prototype._parseHex=function(o,l){this.length=Math.ceil((o.length-l)/6),this.words=new Array(this.length);for(var c=0;c<this.length;c++)this.words[c]=0;var h,g,w=0;for(c=o.length-6,h=0;c>=l;c-=6)g=f(o,c,c+6),this.words[h]|=g<<w&67108863,this.words[h+1]|=g>>>26-w&4194303,w+=24,w>=26&&(w-=26,h++);c+6!==l&&(g=f(o,l,c+6),this.words[h]|=g<<w&67108863,this.words[h+1]|=g>>>26-w&4194303),this.strip()};function _(m,o,l,c){for(var h=0,g=Math.min(m.length,l),w=o;w<g;w++){var M=m.charCodeAt(w)-48;h*=c,M>=49?h+=M-49+10:M>=17?h+=M-17+10:h+=M}return h}i.prototype._parseBase=function(o,l,c){this.words=[0],this.length=1;for(var h=0,g=1;g<=67108863;g*=l)h++;h--,g=g/l|0;for(var w=o.length-c,M=w%h,d=Math.min(w,w-M)+c,a=0,p=c;p<d;p+=h)a=_(o,p,p+h,l),this.imuln(g),this.words[0]+a<67108864?this.words[0]+=a:this._iaddn(a);if(M!==0){var B=1;for(a=_(o,p,o.length,l),p=0;p<M;p++)B*=l;this.imuln(B),this.words[0]+a<67108864?this.words[0]+=a:this._iaddn(a)}},i.prototype.copy=function(o){o.words=new Array(this.length);for(var l=0;l<this.length;l++)o.words[l]=this.words[l];o.length=this.length,o.negative=this.negative,o.red=this.red},i.prototype.clone=function(){var o=new i(null);return this.copy(o),o},i.prototype._expand=function(o){for(;this.length<o;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var y=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],v=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],C=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(o,l){o=o||10,l=l|0||1;var c;if(o===16||o==="hex"){c="";for(var h=0,g=0,w=0;w<this.length;w++){var M=this.words[w],d=((M<<h|g)&16777215).toString(16);g=M>>>24-h&16777215,g!==0||w!==this.length-1?c=y[6-d.length]+d+c:c=d+c,h+=2,h>=26&&(h-=26,w--)}for(g!==0&&(c=g.toString(16)+c);c.length%l!==0;)c="0"+c;return this.negative!==0&&(c="-"+c),c}if(o===(o|0)&&o>=2&&o<=36){var a=v[o],p=C[o];c="";var B=this.clone();for(B.negative=0;!B.isZero();){var P=B.modn(p).toString(o);B=B.idivn(p),B.isZero()?c=P+c:c=y[a-P.length]+P+c}for(this.isZero()&&(c="0"+c);c.length%l!==0;)c="0"+c;return this.negative!==0&&(c="-"+c),c}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var o=this.words[0];return this.length===2?o+=this.words[1]*67108864:this.length===3&&this.words[2]===1?o+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-o:o},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(o,l){return r(typeof u<"u"),this.toArrayLike(u,o,l)},i.prototype.toArray=function(o,l){return this.toArrayLike(Array,o,l)},i.prototype.toArrayLike=function(o,l,c){var h=this.byteLength(),g=c||Math.max(1,h);r(h<=g,"byte array longer than desired length"),r(g>0,"Requested array length <= 0"),this.strip();var w=l==="le",M=new o(g),d,a,p=this.clone();if(w){for(a=0;!p.isZero();a++)d=p.andln(255),p.iushrn(8),M[a]=d;for(;a<g;a++)M[a]=0}else{for(a=0;a<g-h;a++)M[a]=0;for(a=0;!p.isZero();a++)d=p.andln(255),p.iushrn(8),M[g-a-1]=d}return M},Math.clz32?i.prototype._countBits=function(o){return 32-Math.clz32(o)}:i.prototype._countBits=function(o){var l=o,c=0;return l>=4096&&(c+=13,l>>>=13),l>=64&&(c+=7,l>>>=7),l>=8&&(c+=4,l>>>=4),l>=2&&(c+=2,l>>>=2),c+l},i.prototype._zeroBits=function(o){if(o===0)return 26;var l=o,c=0;return(l&8191)===0&&(c+=13,l>>>=13),(l&127)===0&&(c+=7,l>>>=7),(l&15)===0&&(c+=4,l>>>=4),(l&3)===0&&(c+=2,l>>>=2),(l&1)===0&&c++,c},i.prototype.bitLength=function(){var o=this.words[this.length-1],l=this._countBits(o);return(this.length-1)*26+l};function R(m){for(var o=new Array(m.bitLength()),l=0;l<o.length;l++){var c=l/26|0,h=l%26;o[l]=(m.words[c]&1<<h)>>>h}return o}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var o=0,l=0;l<this.length;l++){var c=this._zeroBits(this.words[l]);if(o+=c,c!==26)break}return o},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(o){return this.negative!==0?this.abs().inotn(o).iaddn(1):this.clone()},i.prototype.fromTwos=function(o){return this.testn(o-1)?this.notn(o).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(o){for(;this.length<o.length;)this.words[this.length++]=0;for(var l=0;l<o.length;l++)this.words[l]=this.words[l]|o.words[l];return this.strip()},i.prototype.ior=function(o){return r((this.negative|o.negative)===0),this.iuor(o)},i.prototype.or=function(o){return this.length>o.length?this.clone().ior(o):o.clone().ior(this)},i.prototype.uor=function(o){return this.length>o.length?this.clone().iuor(o):o.clone().iuor(this)},i.prototype.iuand=function(o){var l;this.length>o.length?l=o:l=this;for(var c=0;c<l.length;c++)this.words[c]=this.words[c]&o.words[c];return this.length=l.length,this.strip()},i.prototype.iand=function(o){return r((this.negative|o.negative)===0),this.iuand(o)},i.prototype.and=function(o){return this.length>o.length?this.clone().iand(o):o.clone().iand(this)},i.prototype.uand=function(o){return this.length>o.length?this.clone().iuand(o):o.clone().iuand(this)},i.prototype.iuxor=function(o){var l,c;this.length>o.length?(l=this,c=o):(l=o,c=this);for(var h=0;h<c.length;h++)this.words[h]=l.words[h]^c.words[h];if(this!==l)for(;h<l.length;h++)this.words[h]=l.words[h];return this.length=l.length,this.strip()},i.prototype.ixor=function(o){return r((this.negative|o.negative)===0),this.iuxor(o)},i.prototype.xor=function(o){return this.length>o.length?this.clone().ixor(o):o.clone().ixor(this)},i.prototype.uxor=function(o){return this.length>o.length?this.clone().iuxor(o):o.clone().iuxor(this)},i.prototype.inotn=function(o){r(typeof o=="number"&&o>=0);var l=Math.ceil(o/26)|0,c=o%26;this._expand(l),c>0&&l--;for(var h=0;h<l;h++)this.words[h]=~this.words[h]&67108863;return c>0&&(this.words[h]=~this.words[h]&67108863>>26-c),this.strip()},i.prototype.notn=function(o){return this.clone().inotn(o)},i.prototype.setn=function(o,l){r(typeof o=="number"&&o>=0);var c=o/26|0,h=o%26;return this._expand(c+1),l?this.words[c]=this.words[c]|1<<h:this.words[c]=this.words[c]&~(1<<h),this.strip()},i.prototype.iadd=function(o){var l;if(this.negative!==0&&o.negative===0)return this.negative=0,l=this.isub(o),this.negative^=1,this._normSign();if(this.negative===0&&o.negative!==0)return o.negative=0,l=this.isub(o),o.negative=1,l._normSign();var c,h;this.length>o.length?(c=this,h=o):(c=o,h=this);for(var g=0,w=0;w<h.length;w++)l=(c.words[w]|0)+(h.words[w]|0)+g,this.words[w]=l&67108863,g=l>>>26;for(;g!==0&&w<c.length;w++)l=(c.words[w]|0)+g,this.words[w]=l&67108863,g=l>>>26;if(this.length=c.length,g!==0)this.words[this.length]=g,this.length++;else if(c!==this)for(;w<c.length;w++)this.words[w]=c.words[w];return this},i.prototype.add=function(o){var l;return o.negative!==0&&this.negative===0?(o.negative=0,l=this.sub(o),o.negative^=1,l):o.negative===0&&this.negative!==0?(this.negative=0,l=o.sub(this),this.negative=1,l):this.length>o.length?this.clone().iadd(o):o.clone().iadd(this)},i.prototype.isub=function(o){if(o.negative!==0){o.negative=0;var l=this.iadd(o);return o.negative=1,l._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(o),this.negative=1,this._normSign();var c=this.cmp(o);if(c===0)return this.negative=0,this.length=1,this.words[0]=0,this;var h,g;c>0?(h=this,g=o):(h=o,g=this);for(var w=0,M=0;M<g.length;M++)l=(h.words[M]|0)-(g.words[M]|0)+w,w=l>>26,this.words[M]=l&67108863;for(;w!==0&&M<h.length;M++)l=(h.words[M]|0)+w,w=l>>26,this.words[M]=l&67108863;if(w===0&&M<h.length&&h!==this)for(;M<h.length;M++)this.words[M]=h.words[M];return this.length=Math.max(this.length,M),h!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(o){return this.clone().isub(o)};function I(m,o,l){l.negative=o.negative^m.negative;var c=m.length+o.length|0;l.length=c,c=c-1|0;var h=m.words[0]|0,g=o.words[0]|0,w=h*g,M=w&67108863,d=w/67108864|0;l.words[0]=M;for(var a=1;a<c;a++){for(var p=d>>>26,B=d&67108863,P=Math.min(a,o.length-1),q=Math.max(0,a-m.length+1);q<=P;q++){var $=a-q|0;h=m.words[$]|0,g=o.words[q]|0,w=h*g+B,p+=w/67108864|0,B=w&67108863}l.words[a]=B|0,d=p|0}return d!==0?l.words[a]=d|0:l.length--,l.strip()}var T=function(o,l,c){var h=o.words,g=l.words,w=c.words,M=0,d,a,p,B=h[0]|0,P=B&8191,q=B>>>13,$=h[1]|0,W=$&8191,z=$>>>13,Ue=h[2]|0,j=Ue&8191,J=Ue>>>13,pr=h[3]|0,G=pr&8191,Q=pr>>>13,gr=h[4]|0,Y=gr&8191,X=gr>>>13,_r=h[5]|0,Z=_r&8191,ee=_r>>>13,mr=h[6]|0,te=mr&8191,ne=mr>>>13,vr=h[7]|0,re=vr&8191,ie=vr>>>13,wr=h[8]|0,oe=wr&8191,se=wr>>>13,yr=h[9]|0,ae=yr&8191,le=yr>>>13,br=g[0]|0,ce=br&8191,ue=br>>>13,Mr=g[1]|0,he=Mr&8191,fe=Mr>>>13,Er=g[2]|0,de=Er&8191,pe=Er>>>13,xr=g[3]|0,ge=xr&8191,_e=xr>>>13,Sr=g[4]|0,me=Sr&8191,ve=Sr>>>13,Cr=g[5]|0,we=Cr&8191,ye=Cr>>>13,kr=g[6]|0,be=kr&8191,Me=kr>>>13,Rr=g[7]|0,Ee=Rr&8191,xe=Rr>>>13,Tr=g[8]|0,Se=Tr&8191,Ce=Tr>>>13,Ir=g[9]|0,ke=Ir&8191,Re=Ir>>>13;c.negative=o.negative^l.negative,c.length=19,d=Math.imul(P,ce),a=Math.imul(P,ue),a=a+Math.imul(q,ce)|0,p=Math.imul(q,ue);var Kt=(M+d|0)+((a&8191)<<13)|0;M=(p+(a>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,d=Math.imul(W,ce),a=Math.imul(W,ue),a=a+Math.imul(z,ce)|0,p=Math.imul(z,ue),d=d+Math.imul(P,he)|0,a=a+Math.imul(P,fe)|0,a=a+Math.imul(q,he)|0,p=p+Math.imul(q,fe)|0;var Gt=(M+d|0)+((a&8191)<<13)|0;M=(p+(a>>>13)|0)+(Gt>>>26)|0,Gt&=67108863,d=Math.imul(j,ce),a=Math.imul(j,ue),a=a+Math.imul(J,ce)|0,p=Math.imul(J,ue),d=d+Math.imul(W,he)|0,a=a+Math.imul(W,fe)|0,a=a+Math.imul(z,he)|0,p=p+Math.imul(z,fe)|0,d=d+Math.imul(P,de)|0,a=a+Math.imul(P,pe)|0,a=a+Math.imul(q,de)|0,p=p+Math.imul(q,pe)|0;var Qt=(M+d|0)+((a&8191)<<13)|0;M=(p+(a>>>13)|0)+(Qt>>>26)|0,Qt&=67108863,d=Math.imul(G,ce),a=Math.imul(G,ue),a=a+Math.imul(Q,ce)|0,p=Math.imul(Q,ue),d=d+Math.imul(j,he)|0,a=a+Math.imul(j,fe)|0,a=a+Math.imul(J,he)|0,p=p+Math.imul(J,fe)|0,d=d+Math.imul(W,de)|0,a=a+Math.imul(W,pe)|0,a=a+Math.imul(z,de)|0,p=p+Math.imul(z,pe)|0,d=d+Math.imul(P,ge)|0,a=a+Math.imul(P,_e)|0,a=a+Math.imul(q,ge)|0,p=p+Math.imul(q,_e)|0;var Yt=(M+d|0)+((a&8191)<<13)|0;M=(p+(a>>>13)|0)+(Yt>>>26)|0,Yt&=67108863,d=Math.imul(Y,ce),a=Math.imul(Y,ue),a=a+Math.imul(X,ce)|0,p=Math.imul(X,ue),d=d+Math.imul(G,he)|0,a=a+Math.imul(G,fe)|0,a=a+Math.imul(Q,he)|0,p=p+Math.imul(Q,fe)|0,d=d+Math.imul(j,de)|0,a=a+Math.imul(j,pe)|0,a=a+Math.imul(J,de)|0,p=p+Math.imul(J,pe)|0,d=d+Math.imul(W,ge)|0,a=a+Math.imul(W,_e)|0,a=a+Math.imul(z,ge)|0,p=p+Math.imul(z,_e)|0,d=d+Math.imul(P,me)|0,a=a+Math.imul(P,ve)|0,a=a+Math.imul(q,me)|0,p=p+Math.imul(q,ve)|0;var Xt=(M+d|0)+((a&8191)<<13)|0;M=(p+(a>>>13)|0)+(Xt>>>26)|0,Xt&=67108863,d=Math.imul(Z,ce),a=Math.imul(Z,ue),a=a+Math.imul(ee,ce)|0,p=Math.imul(ee,ue),d=d+Math.imul(Y,he)|0,a=a+Math.imul(Y,fe)|0,a=a+Math.imul(X,he)|0,p=p+Math.imul(X,fe)|0,d=d+Math.imul(G,de)|0,a=a+Math.imul(G,pe)|0,a=a+Math.imul(Q,de)|0,p=p+Math.imul(Q,pe)|0,d=d+Math.imul(j,ge)|0,a=a+Math.imul(j,_e)|0,a=a+Math.imul(J,ge)|0,p=p+Math.imul(J,_e)|0,d=d+Math.imul(W,me)|0,a=a+Math.imul(W,ve)|0,a=a+Math.imul(z,me)|0,p=p+Math.imul(z,ve)|0,d=d+Math.imul(P,we)|0,a=a+Math.imul(P,ye)|0,a=a+Math.imul(q,we)|0,p=p+Math.imul(q,ye)|0;var Zt=(M+d|0)+((a&8191)<<13)|0;M=(p+(a>>>13)|0)+(Zt>>>26)|0,Zt&=67108863,d=Math.imul(te,ce),a=Math.imul(te,ue),a=a+Math.imul(ne,ce)|0,p=Math.imul(ne,ue),d=d+Math.imul(Z,he)|0,a=a+Math.imul(Z,fe)|0,a=a+Math.imul(ee,he)|0,p=p+Math.imul(ee,fe)|0,d=d+Math.imul(Y,de)|0,a=a+Math.imul(Y,pe)|0,a=a+Math.imul(X,de)|0,p=p+Math.imul(X,pe)|0,d=d+Math.imul(G,ge)|0,a=a+Math.imul(G,_e)|0,a=a+Math.imul(Q,ge)|0,p=p+Math.imul(Q,_e)|0,d=d+Math.imul(j,me)|0,a=a+Math.imul(j,ve)|0,a=a+Math.imul(J,me)|0,p=p+Math.imul(J,ve)|0,d=d+Math.imul(W,we)|0,a=a+Math.imul(W,ye)|0,a=a+Math.imul(z,we)|0,p=p+Math.imul(z,ye)|0,d=d+Math.imul(P,be)|0,a=a+Math.imul(P,Me)|0,a=a+Math.imul(q,be)|0,p=p+Math.imul(q,Me)|0;var en=(M+d|0)+((a&8191)<<13)|0;M=(p+(a>>>13)|0)+(en>>>26)|0,en&=67108863,d=Math.imul(re,ce),a=Math.imul(re,ue),a=a+Math.imul(ie,ce)|0,p=Math.imul(ie,ue),d=d+Math.imul(te,he)|0,a=a+Math.imul(te,fe)|0,a=a+Math.imul(ne,he)|0,p=p+Math.imul(ne,fe)|0,d=d+Math.imul(Z,de)|0,a=a+Math.imul(Z,pe)|0,a=a+Math.imul(ee,de)|0,p=p+Math.imul(ee,pe)|0,d=d+Math.imul(Y,ge)|0,a=a+Math.imul(Y,_e)|0,a=a+Math.imul(X,ge)|0,p=p+Math.imul(X,_e)|0,d=d+Math.imul(G,me)|0,a=a+Math.imul(G,ve)|0,a=a+Math.imul(Q,me)|0,p=p+Math.imul(Q,ve)|0,d=d+Math.imul(j,we)|0,a=a+Math.imul(j,ye)|0,a=a+Math.imul(J,we)|0,p=p+Math.imul(J,ye)|0,d=d+Math.imul(W,be)|0,a=a+Math.imul(W,Me)|0,a=a+Math.imul(z,be)|0,p=p+Math.imul(z,Me)|0,d=d+Math.imul(P,Ee)|0,a=a+Math.imul(P,xe)|0,a=a+Math.imul(q,Ee)|0,p=p+Math.imul(q,xe)|0;var tn=(M+d|0)+((a&8191)<<13)|0;M=(p+(a>>>13)|0)+(tn>>>26)|0,tn&=67108863,d=Math.imul(oe,ce),a=Math.imul(oe,ue),a=a+Math.imul(se,ce)|0,p=Math.imul(se,ue),d=d+Math.imul(re,he)|0,a=a+Math.imul(re,fe)|0,a=a+Math.imul(ie,he)|0,p=p+Math.imul(ie,fe)|0,d=d+Math.imul(te,de)|0,a=a+Math.imul(te,pe)|0,a=a+Math.imul(ne,de)|0,p=p+Math.imul(ne,pe)|0,d=d+Math.imul(Z,ge)|0,a=a+Math.imul(Z,_e)|0,a=a+Math.imul(ee,ge)|0,p=p+Math.imul(ee,_e)|0,d=d+Math.imul(Y,me)|0,a=a+Math.imul(Y,ve)|0,a=a+Math.imul(X,me)|0,p=p+Math.imul(X,ve)|0,d=d+Math.imul(G,we)|0,a=a+Math.imul(G,ye)|0,a=a+Math.imul(Q,we)|0,p=p+Math.imul(Q,ye)|0,d=d+Math.imul(j,be)|0,a=a+Math.imul(j,Me)|0,a=a+Math.imul(J,be)|0,p=p+Math.imul(J,Me)|0,d=d+Math.imul(W,Ee)|0,a=a+Math.imul(W,xe)|0,a=a+Math.imul(z,Ee)|0,p=p+Math.imul(z,xe)|0,d=d+Math.imul(P,Se)|0,a=a+Math.imul(P,Ce)|0,a=a+Math.imul(q,Se)|0,p=p+Math.imul(q,Ce)|0;var nn=(M+d|0)+((a&8191)<<13)|0;M=(p+(a>>>13)|0)+(nn>>>26)|0,nn&=67108863,d=Math.imul(ae,ce),a=Math.imul(ae,ue),a=a+Math.imul(le,ce)|0,p=Math.imul(le,ue),d=d+Math.imul(oe,he)|0,a=a+Math.imul(oe,fe)|0,a=a+Math.imul(se,he)|0,p=p+Math.imul(se,fe)|0,d=d+Math.imul(re,de)|0,a=a+Math.imul(re,pe)|0,a=a+Math.imul(ie,de)|0,p=p+Math.imul(ie,pe)|0,d=d+Math.imul(te,ge)|0,a=a+Math.imul(te,_e)|0,a=a+Math.imul(ne,ge)|0,p=p+Math.imul(ne,_e)|0,d=d+Math.imul(Z,me)|0,a=a+Math.imul(Z,ve)|0,a=a+Math.imul(ee,me)|0,p=p+Math.imul(ee,ve)|0,d=d+Math.imul(Y,we)|0,a=a+Math.imul(Y,ye)|0,a=a+Math.imul(X,we)|0,p=p+Math.imul(X,ye)|0,d=d+Math.imul(G,be)|0,a=a+Math.imul(G,Me)|0,a=a+Math.imul(Q,be)|0,p=p+Math.imul(Q,Me)|0,d=d+Math.imul(j,Ee)|0,a=a+Math.imul(j,xe)|0,a=a+Math.imul(J,Ee)|0,p=p+Math.imul(J,xe)|0,d=d+Math.imul(W,Se)|0,a=a+Math.imul(W,Ce)|0,a=a+Math.imul(z,Se)|0,p=p+Math.imul(z,Ce)|0,d=d+Math.imul(P,ke)|0,a=a+Math.imul(P,Re)|0,a=a+Math.imul(q,ke)|0,p=p+Math.imul(q,Re)|0;var rn=(M+d|0)+((a&8191)<<13)|0;M=(p+(a>>>13)|0)+(rn>>>26)|0,rn&=67108863,d=Math.imul(ae,he),a=Math.imul(ae,fe),a=a+Math.imul(le,he)|0,p=Math.imul(le,fe),d=d+Math.imul(oe,de)|0,a=a+Math.imul(oe,pe)|0,a=a+Math.imul(se,de)|0,p=p+Math.imul(se,pe)|0,d=d+Math.imul(re,ge)|0,a=a+Math.imul(re,_e)|0,a=a+Math.imul(ie,ge)|0,p=p+Math.imul(ie,_e)|0,d=d+Math.imul(te,me)|0,a=a+Math.imul(te,ve)|0,a=a+Math.imul(ne,me)|0,p=p+Math.imul(ne,ve)|0,d=d+Math.imul(Z,we)|0,a=a+Math.imul(Z,ye)|0,a=a+Math.imul(ee,we)|0,p=p+Math.imul(ee,ye)|0,d=d+Math.imul(Y,be)|0,a=a+Math.imul(Y,Me)|0,a=a+Math.imul(X,be)|0,p=p+Math.imul(X,Me)|0,d=d+Math.imul(G,Ee)|0,a=a+Math.imul(G,xe)|0,a=a+Math.imul(Q,Ee)|0,p=p+Math.imul(Q,xe)|0,d=d+Math.imul(j,Se)|0,a=a+Math.imul(j,Ce)|0,a=a+Math.imul(J,Se)|0,p=p+Math.imul(J,Ce)|0,d=d+Math.imul(W,ke)|0,a=a+Math.imul(W,Re)|0,a=a+Math.imul(z,ke)|0,p=p+Math.imul(z,Re)|0;var on=(M+d|0)+((a&8191)<<13)|0;M=(p+(a>>>13)|0)+(on>>>26)|0,on&=67108863,d=Math.imul(ae,de),a=Math.imul(ae,pe),a=a+Math.imul(le,de)|0,p=Math.imul(le,pe),d=d+Math.imul(oe,ge)|0,a=a+Math.imul(oe,_e)|0,a=a+Math.imul(se,ge)|0,p=p+Math.imul(se,_e)|0,d=d+Math.imul(re,me)|0,a=a+Math.imul(re,ve)|0,a=a+Math.imul(ie,me)|0,p=p+Math.imul(ie,ve)|0,d=d+Math.imul(te,we)|0,a=a+Math.imul(te,ye)|0,a=a+Math.imul(ne,we)|0,p=p+Math.imul(ne,ye)|0,d=d+Math.imul(Z,be)|0,a=a+Math.imul(Z,Me)|0,a=a+Math.imul(ee,be)|0,p=p+Math.imul(ee,Me)|0,d=d+Math.imul(Y,Ee)|0,a=a+Math.imul(Y,xe)|0,a=a+Math.imul(X,Ee)|0,p=p+Math.imul(X,xe)|0,d=d+Math.imul(G,Se)|0,a=a+Math.imul(G,Ce)|0,a=a+Math.imul(Q,Se)|0,p=p+Math.imul(Q,Ce)|0,d=d+Math.imul(j,ke)|0,a=a+Math.imul(j,Re)|0,a=a+Math.imul(J,ke)|0,p=p+Math.imul(J,Re)|0;var sn=(M+d|0)+((a&8191)<<13)|0;M=(p+(a>>>13)|0)+(sn>>>26)|0,sn&=67108863,d=Math.imul(ae,ge),a=Math.imul(ae,_e),a=a+Math.imul(le,ge)|0,p=Math.imul(le,_e),d=d+Math.imul(oe,me)|0,a=a+Math.imul(oe,ve)|0,a=a+Math.imul(se,me)|0,p=p+Math.imul(se,ve)|0,d=d+Math.imul(re,we)|0,a=a+Math.imul(re,ye)|0,a=a+Math.imul(ie,we)|0,p=p+Math.imul(ie,ye)|0,d=d+Math.imul(te,be)|0,a=a+Math.imul(te,Me)|0,a=a+Math.imul(ne,be)|0,p=p+Math.imul(ne,Me)|0,d=d+Math.imul(Z,Ee)|0,a=a+Math.imul(Z,xe)|0,a=a+Math.imul(ee,Ee)|0,p=p+Math.imul(ee,xe)|0,d=d+Math.imul(Y,Se)|0,a=a+Math.imul(Y,Ce)|0,a=a+Math.imul(X,Se)|0,p=p+Math.imul(X,Ce)|0,d=d+Math.imul(G,ke)|0,a=a+Math.imul(G,Re)|0,a=a+Math.imul(Q,ke)|0,p=p+Math.imul(Q,Re)|0;var an=(M+d|0)+((a&8191)<<13)|0;M=(p+(a>>>13)|0)+(an>>>26)|0,an&=67108863,d=Math.imul(ae,me),a=Math.imul(ae,ve),a=a+Math.imul(le,me)|0,p=Math.imul(le,ve),d=d+Math.imul(oe,we)|0,a=a+Math.imul(oe,ye)|0,a=a+Math.imul(se,we)|0,p=p+Math.imul(se,ye)|0,d=d+Math.imul(re,be)|0,a=a+Math.imul(re,Me)|0,a=a+Math.imul(ie,be)|0,p=p+Math.imul(ie,Me)|0,d=d+Math.imul(te,Ee)|0,a=a+Math.imul(te,xe)|0,a=a+Math.imul(ne,Ee)|0,p=p+Math.imul(ne,xe)|0,d=d+Math.imul(Z,Se)|0,a=a+Math.imul(Z,Ce)|0,a=a+Math.imul(ee,Se)|0,p=p+Math.imul(ee,Ce)|0,d=d+Math.imul(Y,ke)|0,a=a+Math.imul(Y,Re)|0,a=a+Math.imul(X,ke)|0,p=p+Math.imul(X,Re)|0;var ln=(M+d|0)+((a&8191)<<13)|0;M=(p+(a>>>13)|0)+(ln>>>26)|0,ln&=67108863,d=Math.imul(ae,we),a=Math.imul(ae,ye),a=a+Math.imul(le,we)|0,p=Math.imul(le,ye),d=d+Math.imul(oe,be)|0,a=a+Math.imul(oe,Me)|0,a=a+Math.imul(se,be)|0,p=p+Math.imul(se,Me)|0,d=d+Math.imul(re,Ee)|0,a=a+Math.imul(re,xe)|0,a=a+Math.imul(ie,Ee)|0,p=p+Math.imul(ie,xe)|0,d=d+Math.imul(te,Se)|0,a=a+Math.imul(te,Ce)|0,a=a+Math.imul(ne,Se)|0,p=p+Math.imul(ne,Ce)|0,d=d+Math.imul(Z,ke)|0,a=a+Math.imul(Z,Re)|0,a=a+Math.imul(ee,ke)|0,p=p+Math.imul(ee,Re)|0;var cn=(M+d|0)+((a&8191)<<13)|0;M=(p+(a>>>13)|0)+(cn>>>26)|0,cn&=67108863,d=Math.imul(ae,be),a=Math.imul(ae,Me),a=a+Math.imul(le,be)|0,p=Math.imul(le,Me),d=d+Math.imul(oe,Ee)|0,a=a+Math.imul(oe,xe)|0,a=a+Math.imul(se,Ee)|0,p=p+Math.imul(se,xe)|0,d=d+Math.imul(re,Se)|0,a=a+Math.imul(re,Ce)|0,a=a+Math.imul(ie,Se)|0,p=p+Math.imul(ie,Ce)|0,d=d+Math.imul(te,ke)|0,a=a+Math.imul(te,Re)|0,a=a+Math.imul(ne,ke)|0,p=p+Math.imul(ne,Re)|0;var un=(M+d|0)+((a&8191)<<13)|0;M=(p+(a>>>13)|0)+(un>>>26)|0,un&=67108863,d=Math.imul(ae,Ee),a=Math.imul(ae,xe),a=a+Math.imul(le,Ee)|0,p=Math.imul(le,xe),d=d+Math.imul(oe,Se)|0,a=a+Math.imul(oe,Ce)|0,a=a+Math.imul(se,Se)|0,p=p+Math.imul(se,Ce)|0,d=d+Math.imul(re,ke)|0,a=a+Math.imul(re,Re)|0,a=a+Math.imul(ie,ke)|0,p=p+Math.imul(ie,Re)|0;var hn=(M+d|0)+((a&8191)<<13)|0;M=(p+(a>>>13)|0)+(hn>>>26)|0,hn&=67108863,d=Math.imul(ae,Se),a=Math.imul(ae,Ce),a=a+Math.imul(le,Se)|0,p=Math.imul(le,Ce),d=d+Math.imul(oe,ke)|0,a=a+Math.imul(oe,Re)|0,a=a+Math.imul(se,ke)|0,p=p+Math.imul(se,Re)|0;var fn=(M+d|0)+((a&8191)<<13)|0;M=(p+(a>>>13)|0)+(fn>>>26)|0,fn&=67108863,d=Math.imul(ae,ke),a=Math.imul(ae,Re),a=a+Math.imul(le,ke)|0,p=Math.imul(le,Re);var dn=(M+d|0)+((a&8191)<<13)|0;return M=(p+(a>>>13)|0)+(dn>>>26)|0,dn&=67108863,w[0]=Kt,w[1]=Gt,w[2]=Qt,w[3]=Yt,w[4]=Xt,w[5]=Zt,w[6]=en,w[7]=tn,w[8]=nn,w[9]=rn,w[10]=on,w[11]=sn,w[12]=an,w[13]=ln,w[14]=cn,w[15]=un,w[16]=hn,w[17]=fn,w[18]=dn,M!==0&&(w[19]=M,c.length++),c};Math.imul||(T=I);function O(m,o,l){l.negative=o.negative^m.negative,l.length=m.length+o.length;for(var c=0,h=0,g=0;g<l.length-1;g++){var w=h;h=0;for(var M=c&67108863,d=Math.min(g,o.length-1),a=Math.max(0,g-m.length+1);a<=d;a++){var p=g-a,B=m.words[p]|0,P=o.words[a]|0,q=B*P,$=q&67108863;w=w+(q/67108864|0)|0,$=$+M|0,M=$&67108863,w=w+($>>>26)|0,h+=w>>>26,w&=67108863}l.words[g]=M,c=w,w=h}return c!==0?l.words[g]=c:l.length--,l.strip()}function b(m,o,l){var c=new E;return c.mulp(m,o,l)}i.prototype.mulTo=function(o,l){var c,h=this.length+o.length;return this.length===10&&o.length===10?c=T(this,o,l):h<63?c=I(this,o,l):h<1024?c=O(this,o,l):c=b(this,o,l),c};function E(m,o){this.x=m,this.y=o}E.prototype.makeRBT=function(o){for(var l=new Array(o),c=i.prototype._countBits(o)-1,h=0;h<o;h++)l[h]=this.revBin(h,c,o);return l},E.prototype.revBin=function(o,l,c){if(o===0||o===c-1)return o;for(var h=0,g=0;g<l;g++)h|=(o&1)<<l-g-1,o>>=1;return h},E.prototype.permute=function(o,l,c,h,g,w){for(var M=0;M<w;M++)h[M]=l[o[M]],g[M]=c[o[M]]},E.prototype.transform=function(o,l,c,h,g,w){this.permute(w,o,l,c,h,g);for(var M=1;M<g;M<<=1)for(var d=M<<1,a=Math.cos(2*Math.PI/d),p=Math.sin(2*Math.PI/d),B=0;B<g;B+=d)for(var P=a,q=p,$=0;$<M;$++){var W=c[B+$],z=h[B+$],Ue=c[B+$+M],j=h[B+$+M],J=P*Ue-q*j;j=P*j+q*Ue,Ue=J,c[B+$]=W+Ue,h[B+$]=z+j,c[B+$+M]=W-Ue,h[B+$+M]=z-j,$!==d&&(J=a*P-p*q,q=a*q+p*P,P=J)}},E.prototype.guessLen13b=function(o,l){var c=Math.max(l,o)|1,h=c&1,g=0;for(c=c/2|0;c;c=c>>>1)g++;return 1<<g+1+h},E.prototype.conjugate=function(o,l,c){if(!(c<=1))for(var h=0;h<c/2;h++){var g=o[h];o[h]=o[c-h-1],o[c-h-1]=g,g=l[h],l[h]=-l[c-h-1],l[c-h-1]=-g}},E.prototype.normalize13b=function(o,l){for(var c=0,h=0;h<l/2;h++){var g=Math.round(o[2*h+1]/l)*8192+Math.round(o[2*h]/l)+c;o[h]=g&67108863,g<67108864?c=0:c=g/67108864|0}return o},E.prototype.convert13b=function(o,l,c,h){for(var g=0,w=0;w<l;w++)g=g+(o[w]|0),c[2*w]=g&8191,g=g>>>13,c[2*w+1]=g&8191,g=g>>>13;for(w=2*l;w<h;++w)c[w]=0;r(g===0),r((g&-8192)===0)},E.prototype.stub=function(o){for(var l=new Array(o),c=0;c<o;c++)l[c]=0;return l},E.prototype.mulp=function(o,l,c){var h=2*this.guessLen13b(o.length,l.length),g=this.makeRBT(h),w=this.stub(h),M=new Array(h),d=new Array(h),a=new Array(h),p=new Array(h),B=new Array(h),P=new Array(h),q=c.words;q.length=h,this.convert13b(o.words,o.length,M,h),this.convert13b(l.words,l.length,p,h),this.transform(M,w,d,a,h,g),this.transform(p,w,B,P,h,g);for(var $=0;$<h;$++){var W=d[$]*B[$]-a[$]*P[$];a[$]=d[$]*P[$]+a[$]*B[$],d[$]=W}return this.conjugate(d,a,h),this.transform(d,a,q,w,h,g),this.conjugate(q,w,h),this.normalize13b(q,h),c.negative=o.negative^l.negative,c.length=o.length+l.length,c.strip()},i.prototype.mul=function(o){var l=new i(null);return l.words=new Array(this.length+o.length),this.mulTo(o,l)},i.prototype.mulf=function(o){var l=new i(null);return l.words=new Array(this.length+o.length),b(this,o,l)},i.prototype.imul=function(o){return this.clone().mulTo(o,this)},i.prototype.imuln=function(o){r(typeof o=="number"),r(o<67108864);for(var l=0,c=0;c<this.length;c++){var h=(this.words[c]|0)*o,g=(h&67108863)+(l&67108863);l>>=26,l+=h/67108864|0,l+=g>>>26,this.words[c]=g&67108863}return l!==0&&(this.words[c]=l,this.length++),this},i.prototype.muln=function(o){return this.clone().imuln(o)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(o){var l=R(o);if(l.length===0)return new i(1);for(var c=this,h=0;h<l.length&&l[h]===0;h++,c=c.sqr());if(++h<l.length)for(var g=c.sqr();h<l.length;h++,g=g.sqr())l[h]!==0&&(c=c.mul(g));return c},i.prototype.iushln=function(o){r(typeof o=="number"&&o>=0);var l=o%26,c=(o-l)/26,h=67108863>>>26-l<<26-l,g;if(l!==0){var w=0;for(g=0;g<this.length;g++){var M=this.words[g]&h,d=(this.words[g]|0)-M<<l;this.words[g]=d|w,w=M>>>26-l}w&&(this.words[g]=w,this.length++)}if(c!==0){for(g=this.length-1;g>=0;g--)this.words[g+c]=this.words[g];for(g=0;g<c;g++)this.words[g]=0;this.length+=c}return this.strip()},i.prototype.ishln=function(o){return r(this.negative===0),this.iushln(o)},i.prototype.iushrn=function(o,l,c){r(typeof o=="number"&&o>=0);var h;l?h=(l-l%26)/26:h=0;var g=o%26,w=Math.min((o-g)/26,this.length),M=67108863^67108863>>>g<<g,d=c;if(h-=w,h=Math.max(0,h),d){for(var a=0;a<w;a++)d.words[a]=this.words[a];d.length=w}if(w!==0)if(this.length>w)for(this.length-=w,a=0;a<this.length;a++)this.words[a]=this.words[a+w];else this.words[0]=0,this.length=1;var p=0;for(a=this.length-1;a>=0&&(p!==0||a>=h);a--){var B=this.words[a]|0;this.words[a]=p<<26-g|B>>>g,p=B&M}return d&&p!==0&&(d.words[d.length++]=p),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(o,l,c){return r(this.negative===0),this.iushrn(o,l,c)},i.prototype.shln=function(o){return this.clone().ishln(o)},i.prototype.ushln=function(o){return this.clone().iushln(o)},i.prototype.shrn=function(o){return this.clone().ishrn(o)},i.prototype.ushrn=function(o){return this.clone().iushrn(o)},i.prototype.testn=function(o){r(typeof o=="number"&&o>=0);var l=o%26,c=(o-l)/26,h=1<<l;if(this.length<=c)return!1;var g=this.words[c];return!!(g&h)},i.prototype.imaskn=function(o){r(typeof o=="number"&&o>=0);var l=o%26,c=(o-l)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=c)return this;if(l!==0&&c++,this.length=Math.min(c,this.length),l!==0){var h=67108863^67108863>>>l<<l;this.words[this.length-1]&=h}return this.strip()},i.prototype.maskn=function(o){return this.clone().imaskn(o)},i.prototype.iaddn=function(o){return r(typeof o=="number"),r(o<67108864),o<0?this.isubn(-o):this.negative!==0?this.length===1&&(this.words[0]|0)<o?(this.words[0]=o-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(o),this.negative=1,this):this._iaddn(o)},i.prototype._iaddn=function(o){this.words[0]+=o;for(var l=0;l<this.length&&this.words[l]>=67108864;l++)this.words[l]-=67108864,l===this.length-1?this.words[l+1]=1:this.words[l+1]++;return this.length=Math.max(this.length,l+1),this},i.prototype.isubn=function(o){if(r(typeof o=="number"),r(o<67108864),o<0)return this.iaddn(-o);if(this.negative!==0)return this.negative=0,this.iaddn(o),this.negative=1,this;if(this.words[0]-=o,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var l=0;l<this.length&&this.words[l]<0;l++)this.words[l]+=67108864,this.words[l+1]-=1;return this.strip()},i.prototype.addn=function(o){return this.clone().iaddn(o)},i.prototype.subn=function(o){return this.clone().isubn(o)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(o,l,c){var h=o.length+c,g;this._expand(h);var w,M=0;for(g=0;g<o.length;g++){w=(this.words[g+c]|0)+M;var d=(o.words[g]|0)*l;w-=d&67108863,M=(w>>26)-(d/67108864|0),this.words[g+c]=w&67108863}for(;g<this.length-c;g++)w=(this.words[g+c]|0)+M,M=w>>26,this.words[g+c]=w&67108863;if(M===0)return this.strip();for(r(M===-1),M=0,g=0;g<this.length;g++)w=-(this.words[g]|0)+M,M=w>>26,this.words[g]=w&67108863;return this.negative=1,this.strip()},i.prototype._wordDiv=function(o,l){var c=this.length-o.length,h=this.clone(),g=o,w=g.words[g.length-1]|0,M=this._countBits(w);c=26-M,c!==0&&(g=g.ushln(c),h.iushln(c),w=g.words[g.length-1]|0);var d=h.length-g.length,a;if(l!=="mod"){a=new i(null),a.length=d+1,a.words=new Array(a.length);for(var p=0;p<a.length;p++)a.words[p]=0}var B=h.clone()._ishlnsubmul(g,1,d);B.negative===0&&(h=B,a&&(a.words[d]=1));for(var P=d-1;P>=0;P--){var q=(h.words[g.length+P]|0)*67108864+(h.words[g.length+P-1]|0);for(q=Math.min(q/w|0,67108863),h._ishlnsubmul(g,q,P);h.negative!==0;)q--,h.negative=0,h._ishlnsubmul(g,1,P),h.isZero()||(h.negative^=1);a&&(a.words[P]=q)}return a&&a.strip(),h.strip(),l!=="div"&&c!==0&&h.iushrn(c),{div:a||null,mod:h}},i.prototype.divmod=function(o,l,c){if(r(!o.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var h,g,w;return this.negative!==0&&o.negative===0?(w=this.neg().divmod(o,l),l!=="mod"&&(h=w.div.neg()),l!=="div"&&(g=w.mod.neg(),c&&g.negative!==0&&g.iadd(o)),{div:h,mod:g}):this.negative===0&&o.negative!==0?(w=this.divmod(o.neg(),l),l!=="mod"&&(h=w.div.neg()),{div:h,mod:w.mod}):(this.negative&o.negative)!==0?(w=this.neg().divmod(o.neg(),l),l!=="div"&&(g=w.mod.neg(),c&&g.negative!==0&&g.isub(o)),{div:w.div,mod:g}):o.length>this.length||this.cmp(o)<0?{div:new i(0),mod:this}:o.length===1?l==="div"?{div:this.divn(o.words[0]),mod:null}:l==="mod"?{div:null,mod:new i(this.modn(o.words[0]))}:{div:this.divn(o.words[0]),mod:new i(this.modn(o.words[0]))}:this._wordDiv(o,l)},i.prototype.div=function(o){return this.divmod(o,"div",!1).div},i.prototype.mod=function(o){return this.divmod(o,"mod",!1).mod},i.prototype.umod=function(o){return this.divmod(o,"mod",!0).mod},i.prototype.divRound=function(o){var l=this.divmod(o);if(l.mod.isZero())return l.div;var c=l.div.negative!==0?l.mod.isub(o):l.mod,h=o.ushrn(1),g=o.andln(1),w=c.cmp(h);return w<0||g===1&&w===0?l.div:l.div.negative!==0?l.div.isubn(1):l.div.iaddn(1)},i.prototype.modn=function(o){r(o<=67108863);for(var l=(1<<26)%o,c=0,h=this.length-1;h>=0;h--)c=(l*c+(this.words[h]|0))%o;return c},i.prototype.idivn=function(o){r(o<=67108863);for(var l=0,c=this.length-1;c>=0;c--){var h=(this.words[c]|0)+l*67108864;this.words[c]=h/o|0,l=h%o}return this.strip()},i.prototype.divn=function(o){return this.clone().idivn(o)},i.prototype.egcd=function(o){r(o.negative===0),r(!o.isZero());var l=this,c=o.clone();l.negative!==0?l=l.umod(o):l=l.clone();for(var h=new i(1),g=new i(0),w=new i(0),M=new i(1),d=0;l.isEven()&&c.isEven();)l.iushrn(1),c.iushrn(1),++d;for(var a=c.clone(),p=l.clone();!l.isZero();){for(var B=0,P=1;(l.words[0]&P)===0&&B<26;++B,P<<=1);if(B>0)for(l.iushrn(B);B-- >0;)(h.isOdd()||g.isOdd())&&(h.iadd(a),g.isub(p)),h.iushrn(1),g.iushrn(1);for(var q=0,$=1;(c.words[0]&$)===0&&q<26;++q,$<<=1);if(q>0)for(c.iushrn(q);q-- >0;)(w.isOdd()||M.isOdd())&&(w.iadd(a),M.isub(p)),w.iushrn(1),M.iushrn(1);l.cmp(c)>=0?(l.isub(c),h.isub(w),g.isub(M)):(c.isub(l),w.isub(h),M.isub(g))}return{a:w,b:M,gcd:c.iushln(d)}},i.prototype._invmp=function(o){r(o.negative===0),r(!o.isZero());var l=this,c=o.clone();l.negative!==0?l=l.umod(o):l=l.clone();for(var h=new i(1),g=new i(0),w=c.clone();l.cmpn(1)>0&&c.cmpn(1)>0;){for(var M=0,d=1;(l.words[0]&d)===0&&M<26;++M,d<<=1);if(M>0)for(l.iushrn(M);M-- >0;)h.isOdd()&&h.iadd(w),h.iushrn(1);for(var a=0,p=1;(c.words[0]&p)===0&&a<26;++a,p<<=1);if(a>0)for(c.iushrn(a);a-- >0;)g.isOdd()&&g.iadd(w),g.iushrn(1);l.cmp(c)>=0?(l.isub(c),h.isub(g)):(c.isub(l),g.isub(h))}var B;return l.cmpn(1)===0?B=h:B=g,B.cmpn(0)<0&&B.iadd(o),B},i.prototype.gcd=function(o){if(this.isZero())return o.abs();if(o.isZero())return this.abs();var l=this.clone(),c=o.clone();l.negative=0,c.negative=0;for(var h=0;l.isEven()&&c.isEven();h++)l.iushrn(1),c.iushrn(1);do{for(;l.isEven();)l.iushrn(1);for(;c.isEven();)c.iushrn(1);var g=l.cmp(c);if(g<0){var w=l;l=c,c=w}else if(g===0||c.cmpn(1)===0)break;l.isub(c)}while(!0);return c.iushln(h)},i.prototype.invm=function(o){return this.egcd(o).a.umod(o)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(o){return this.words[0]&o},i.prototype.bincn=function(o){r(typeof o=="number");var l=o%26,c=(o-l)/26,h=1<<l;if(this.length<=c)return this._expand(c+1),this.words[c]|=h,this;for(var g=h,w=c;g!==0&&w<this.length;w++){var M=this.words[w]|0;M+=g,g=M>>>26,M&=67108863,this.words[w]=M}return g!==0&&(this.words[w]=g,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(o){var l=o<0;if(this.negative!==0&&!l)return-1;if(this.negative===0&&l)return 1;this.strip();var c;if(this.length>1)c=1;else{l&&(o=-o),r(o<=67108863,"Number is too big");var h=this.words[0]|0;c=h===o?0:h<o?-1:1}return this.negative!==0?-c|0:c},i.prototype.cmp=function(o){if(this.negative!==0&&o.negative===0)return-1;if(this.negative===0&&o.negative!==0)return 1;var l=this.ucmp(o);return this.negative!==0?-l|0:l},i.prototype.ucmp=function(o){if(this.length>o.length)return 1;if(this.length<o.length)return-1;for(var l=0,c=this.length-1;c>=0;c--){var h=this.words[c]|0,g=o.words[c]|0;if(h!==g){h<g?l=-1:h>g&&(l=1);break}}return l},i.prototype.gtn=function(o){return this.cmpn(o)===1},i.prototype.gt=function(o){return this.cmp(o)===1},i.prototype.gten=function(o){return this.cmpn(o)>=0},i.prototype.gte=function(o){return this.cmp(o)>=0},i.prototype.ltn=function(o){return this.cmpn(o)===-1},i.prototype.lt=function(o){return this.cmp(o)===-1},i.prototype.lten=function(o){return this.cmpn(o)<=0},i.prototype.lte=function(o){return this.cmp(o)<=0},i.prototype.eqn=function(o){return this.cmpn(o)===0},i.prototype.eq=function(o){return this.cmp(o)===0},i.red=function(o){return new D(o)},i.prototype.toRed=function(o){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),o.convertTo(this)._forceRed(o)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(o){return this.red=o,this},i.prototype.forceRed=function(o){return r(!this.red,"Already a number in reduction context"),this._forceRed(o)},i.prototype.redAdd=function(o){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,o)},i.prototype.redIAdd=function(o){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,o)},i.prototype.redSub=function(o){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,o)},i.prototype.redISub=function(o){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,o)},i.prototype.redShl=function(o){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,o)},i.prototype.redMul=function(o){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,o),this.red.mul(this,o)},i.prototype.redIMul=function(o){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,o),this.red.imul(this,o)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(o){return r(this.red&&!o.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,o)};var S={k256:null,p224:null,p192:null,p25519:null};function x(m,o){this.name=m,this.p=new i(o,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}x.prototype._tmp=function(){var o=new i(null);return o.words=new Array(Math.ceil(this.n/13)),o},x.prototype.ireduce=function(o){var l=o,c;do this.split(l,this.tmp),l=this.imulK(l),l=l.iadd(this.tmp),c=l.bitLength();while(c>this.n);var h=c<this.n?-1:l.ucmp(this.p);return h===0?(l.words[0]=0,l.length=1):h>0?l.isub(this.p):l.strip(),l},x.prototype.split=function(o,l){o.iushrn(this.n,0,l)},x.prototype.imulK=function(o){return o.imul(this.k)};function k(){x.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(k,x),k.prototype.split=function(o,l){for(var c=4194303,h=Math.min(o.length,9),g=0;g<h;g++)l.words[g]=o.words[g];if(l.length=h,o.length<=9){o.words[0]=0,o.length=1;return}var w=o.words[9];for(l.words[l.length++]=w&c,g=10;g<o.length;g++){var M=o.words[g]|0;o.words[g-10]=(M&c)<<4|w>>>22,w=M}w>>>=22,o.words[g-10]=w,w===0&&o.length>10?o.length-=10:o.length-=9},k.prototype.imulK=function(o){o.words[o.length]=0,o.words[o.length+1]=0,o.length+=2;for(var l=0,c=0;c<o.length;c++){var h=o.words[c]|0;l+=h*977,o.words[c]=l&67108863,l=h*64+(l/67108864|0)}return o.words[o.length-1]===0&&(o.length--,o.words[o.length-1]===0&&o.length--),o};function L(){x.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(L,x);function N(){x.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(N,x);function H(){x.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(H,x),H.prototype.imulK=function(o){for(var l=0,c=0;c<o.length;c++){var h=(o.words[c]|0)*19+l,g=h&67108863;h>>>=26,o.words[c]=g,l=h}return l!==0&&(o.words[o.length++]=l),o},i._prime=function(o){if(S[o])return S[o];var l;if(o==="k256")l=new k;else if(o==="p224")l=new L;else if(o==="p192")l=new N;else if(o==="p25519")l=new H;else throw new Error("Unknown prime "+o);return S[o]=l,l};function D(m){if(typeof m=="string"){var o=i._prime(m);this.m=o.p,this.prime=o}else r(m.gtn(1),"modulus must be greater than 1"),this.m=m,this.prime=null}D.prototype._verify1=function(o){r(o.negative===0,"red works only with positives"),r(o.red,"red works only with red numbers")},D.prototype._verify2=function(o,l){r((o.negative|l.negative)===0,"red works only with positives"),r(o.red&&o.red===l.red,"red works only with red numbers")},D.prototype.imod=function(o){return this.prime?this.prime.ireduce(o)._forceRed(this):o.umod(this.m)._forceRed(this)},D.prototype.neg=function(o){return o.isZero()?o.clone():this.m.sub(o)._forceRed(this)},D.prototype.add=function(o,l){this._verify2(o,l);var c=o.add(l);return c.cmp(this.m)>=0&&c.isub(this.m),c._forceRed(this)},D.prototype.iadd=function(o,l){this._verify2(o,l);var c=o.iadd(l);return c.cmp(this.m)>=0&&c.isub(this.m),c},D.prototype.sub=function(o,l){this._verify2(o,l);var c=o.sub(l);return c.cmpn(0)<0&&c.iadd(this.m),c._forceRed(this)},D.prototype.isub=function(o,l){this._verify2(o,l);var c=o.isub(l);return c.cmpn(0)<0&&c.iadd(this.m),c},D.prototype.shl=function(o,l){return this._verify1(o),this.imod(o.ushln(l))},D.prototype.imul=function(o,l){return this._verify2(o,l),this.imod(o.imul(l))},D.prototype.mul=function(o,l){return this._verify2(o,l),this.imod(o.mul(l))},D.prototype.isqr=function(o){return this.imul(o,o.clone())},D.prototype.sqr=function(o){return this.mul(o,o)},D.prototype.sqrt=function(o){if(o.isZero())return o.clone();var l=this.m.andln(3);if(r(l%2===1),l===3){var c=this.m.add(new i(1)).iushrn(2);return this.pow(o,c)}for(var h=this.m.subn(1),g=0;!h.isZero()&&h.andln(1)===0;)g++,h.iushrn(1);r(!h.isZero());var w=new i(1).toRed(this),M=w.redNeg(),d=this.m.subn(1).iushrn(1),a=this.m.bitLength();for(a=new i(2*a*a).toRed(this);this.pow(a,d).cmp(M)!==0;)a.redIAdd(M);for(var p=this.pow(a,h),B=this.pow(o,h.addn(1).iushrn(1)),P=this.pow(o,h),q=g;P.cmp(w)!==0;){for(var $=P,W=0;$.cmp(w)!==0;W++)$=$.redSqr();r(W<q);var z=this.pow(p,new i(1).iushln(q-W-1));B=B.redMul(z),p=z.redSqr(),P=P.redMul(p),q=W}return B},D.prototype.invm=function(o){var l=o._invmp(this.m);return l.negative!==0?(l.negative=0,this.imod(l).redNeg()):this.imod(l)},D.prototype.pow=function(o,l){if(l.isZero())return new i(1).toRed(this);if(l.cmpn(1)===0)return o.clone();var c=4,h=new Array(1<<c);h[0]=new i(1).toRed(this),h[1]=o;for(var g=2;g<h.length;g++)h[g]=this.mul(h[g-1],o);var w=h[0],M=0,d=0,a=l.bitLength()%26;for(a===0&&(a=26),g=l.length-1;g>=0;g--){for(var p=l.words[g],B=a-1;B>=0;B--){var P=p>>B&1;if(w!==h[0]&&(w=this.sqr(w)),P===0&&M===0){d=0;continue}M<<=1,M|=P,d++,!(d!==c&&(g!==0||B!==0))&&(w=this.mul(w,h[M]),d=0,M=0)}a=26}return w},D.prototype.convertTo=function(o){var l=o.umod(this.m);return l===o?l.clone():l},D.prototype.convertFrom=function(o){var l=o.clone();return l.red=null,l},i.mont=function(o){return new K(o)};function K(m){D.call(this,m),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(K,D),K.prototype.convertTo=function(o){return this.imod(o.ushln(this.shift))},K.prototype.convertFrom=function(o){var l=this.imod(o.mul(this.rinv));return l.red=null,l},K.prototype.imul=function(o,l){if(o.isZero()||l.isZero())return o.words[0]=0,o.length=1,o;var c=o.imul(l),h=c.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),g=c.isub(h).iushrn(this.shift),w=g;return g.cmp(this.m)>=0?w=g.isub(this.m):g.cmpn(0)<0&&(w=g.iadd(this.m)),w._forceRed(this)},K.prototype.mul=function(o,l){if(o.isZero()||l.isZero())return new i(0)._forceRed(this);var c=o.mul(l),h=c.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),g=c.isub(h).iushrn(this.shift),w=g;return g.cmp(this.m)>=0?w=g.isub(this.m):g.cmpn(0)<0&&(w=g.iadd(this.m)),w._forceRed(this)},K.prototype.invm=function(o){var l=this.imod(o._invmp(this.m).mul(this.r2));return l._forceRed(this)}})(t,Pe)})(Hi);const aa=Hi.exports;var la=Vn;Vn.strict=$i;Vn.loose=Fi;var ca=Object.prototype.toString,ua={"[object Int8Array]":!0,"[object Int16Array]":!0,"[object Int32Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Uint16Array]":!0,"[object Uint32Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0};function Vn(t){return $i(t)||Fi(t)}function $i(t){return t instanceof Int8Array||t instanceof Int16Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Uint16Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array}function Fi(t){return ua[ca.call(t)]}var ha=la.strict,fa=function(e){if(ha(e)){var n=Buffer.from(e.buffer);return e.byteLength!==e.buffer.byteLength&&(n=n.slice(e.byteOffset,e.byteOffset+e.byteLength)),n}else return Buffer.from(e)};const Wi="hex",zi="utf8",Ut="0";function Ye(t){return new Uint8Array(t)}function ji(t,e=!1){const n=t.toString(Wi);return e?ot(n):n}function da(t){return t.toString(zi)}function Dt(t){return fa(t)}function Ge(t,e=!1){return ji(Dt(t),e)}function pa(t){return da(Dt(t))}function ga(t){return Buffer.from($e(t),Wi)}function Qe(t){return Ye(ga(t))}function Jn(t){return Buffer.from(t,zi)}function _a(t){return Ye(Jn(t))}function ma(t,e=!1){return ji(Jn(t),e)}function va(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||e&&t.length!==2+2*e)}function Vi(...t){let e=[];return t.forEach(n=>e=e.concat(Array.from(n))),new Uint8Array([...e])}function wa(t,e=8){const n=t%e;return n?(t-n)/e*e+e:t}function ya(t,e=8,n=Ut){return ba(t,wa(t.length,e),n)}function ba(t,e,n=Ut){return Ea(t,e,!0,n)}function $e(t){return t.replace(/^0x/,"")}function ot(t){return t.startsWith("0x")?t:`0x${t}`}function Ji(t){return t=$e(t),t=ya(t,2),t&&(t=ot(t)),t}function Ma(t){const e=t.startsWith("0x");return t=$e(t),t=t.startsWith(Ut)?t.substring(1):t,e?ot(t):t}function Ea(t,e,n,r=Ut){const s=e-t.length;let i=t;if(s>0){const u=r.repeat(s);i=n?u+t:t+u}return i}function Cn(t){return Dt(new Uint8Array(t))}function xa(t,e){return Ge(new Uint8Array(t),!e)}function Sa(t){return Ye(t).buffer}function Ca(t){return Jn(t)}function ka(t,e){return ma(t,!e)}function Ra(t){return Qe(t).buffer}function Ki(t,e){const n=$e(Ji(new aa(t).toString(16)));return e?n:ot(n)}function bt(t){return Ji(t)}function Ta(t){return Ma(ot(t))}const kn=us;function pn(){return((e,n)=>{for(n=e="";e++<36;n+=e*51&52?(e^15?8^Math.random()*(e^20?16:4):4).toString(16):"-");return n})()}function Ia(t,e){let n;const r=sa[t];return r&&(n=`https://${r}.infura.io/v3/${e}`),n}function Aa(t,e){let n;const r=Ia(t,e.infuraId);return e.custom&&e.custom[t]?n=e.custom[t]:r&&(n=r),n}function Oa(t){return t===""||typeof t=="string"&&t.trim()===""}function Na(t){return!(t&&t.length)}function Gi(t,e){return va(t,e)}function Ba(t){return typeof t.method<"u"}function lt(t){return typeof t.result<"u"}function Rt(t){return typeof t.error<"u"}function Lr(t){return typeof t.event<"u"}function La(t){return oa.includes(t)||t.startsWith("wc_")}function Pa(t){return t.method.startsWith("wc_")?!0:!jn.includes(t.method)}function qa(t){t=$e(t.toLowerCase());const e=$e(cs.exports.keccak_256(Ca(t)));let n="";for(let r=0;r<t.length;r++)parseInt(e[r],16)>7?n+=t[r].toUpperCase():n+=t[r];return ot(n)}const Ua=t=>t?t.toLowerCase().substring(0,2)!=="0x"?!1:/^(0x)?[0-9a-f]{40}$/i.test(t)?/^(0x)?[0-9a-f]{40}$/.test(t)||/^(0x)?[0-9A-F]{40}$/.test(t)?!0:t===qa(t):!1:!1;function Tt(t){return!Na(t)&&!Gi(t[0])&&(t[0]=ka(t[0])),t}function gn(t){if(typeof t.type<"u"&&t.type!=="0")return t;if(typeof t.from>"u"||!Ua(t.from))throw new Error("Transaction object must include a valid 'from' value.");function e(s){let i=s;return(typeof s=="number"||typeof s=="string"&&!Oa(s))&&(Gi(s)?typeof s=="string"&&(i=bt(s)):i=Ki(s)),typeof i=="string"&&(i=Ta(i)),i}const n={from:bt(t.from),to:typeof t.to>"u"?void 0:bt(t.to),gasPrice:typeof t.gasPrice>"u"?"":e(t.gasPrice),gas:typeof t.gas>"u"?typeof t.gasLimit>"u"?"":e(t.gasLimit):e(t.gas),value:typeof t.value>"u"?"":e(t.value),nonce:typeof t.nonce>"u"?"":e(t.nonce),data:typeof t.data>"u"?"":bt(t.data)||"0x"},r=["gasPrice","gas","value","nonce"];return Object.keys(n).forEach(s=>{(typeof n[s]>"u"||typeof n[s]=="string"&&!n[s].trim().length)&&r.includes(s)&&delete n[s]}),n}function Da(t){const e=t.message||"Failed or Rejected Request";let n=-32e3;if(t&&!t.code)switch(e){case"Parse error":n=-32700;break;case"Invalid request":n=-32600;break;case"Method not found":n=-32601;break;case"Invalid params":n=-32602;break;case"Internal error":n=-32603;break;default:n=-32e3;break}const r={code:n,message:e};return t.data&&(r.data=t.data),r}var Kn={};(function(t){const e=fs,n=ds,r=hs,s=b=>b==null;function i(b){switch(b.arrayFormat){case"index":return E=>(S,x)=>{const k=S.length;return x===void 0||b.skipNull&&x===null||b.skipEmptyString&&x===""?S:x===null?[...S,[_(E,b),"[",k,"]"].join("")]:[...S,[_(E,b),"[",_(k,b),"]=",_(x,b)].join("")]};case"bracket":return E=>(S,x)=>x===void 0||b.skipNull&&x===null||b.skipEmptyString&&x===""?S:x===null?[...S,[_(E,b),"[]"].join("")]:[...S,[_(E,b),"[]=",_(x,b)].join("")];case"comma":case"separator":return E=>(S,x)=>x==null||x.length===0?S:S.length===0?[[_(E,b),"=",_(x,b)].join("")]:[[S,_(x,b)].join(b.arrayFormatSeparator)];default:return E=>(S,x)=>x===void 0||b.skipNull&&x===null||b.skipEmptyString&&x===""?S:x===null?[...S,_(E,b)]:[...S,[_(E,b),"=",_(x,b)].join("")]}}function u(b){let E;switch(b.arrayFormat){case"index":return(S,x,k)=>{if(E=/\[(\d*)\]$/.exec(S),S=S.replace(/\[\d*\]$/,""),!E){k[S]=x;return}k[S]===void 0&&(k[S]={}),k[S][E[1]]=x};case"bracket":return(S,x,k)=>{if(E=/(\[\])$/.exec(S),S=S.replace(/\[\]$/,""),!E){k[S]=x;return}if(k[S]===void 0){k[S]=[x];return}k[S]=[].concat(k[S],x)};case"comma":case"separator":return(S,x,k)=>{const N=typeof x=="string"&&x.split("").indexOf(b.arrayFormatSeparator)>-1?x.split(b.arrayFormatSeparator).map(H=>y(H,b)):x===null?x:y(x,b);k[S]=N};default:return(S,x,k)=>{if(k[S]===void 0){k[S]=x;return}k[S]=[].concat(k[S],x)}}}function f(b){if(typeof b!="string"||b.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function _(b,E){return E.encode?E.strict?e(b):encodeURIComponent(b):b}function y(b,E){return E.decode?n(b):b}function v(b){return Array.isArray(b)?b.sort():typeof b=="object"?v(Object.keys(b)).sort((E,S)=>Number(E)-Number(S)).map(E=>b[E]):b}function C(b){const E=b.indexOf("#");return E!==-1&&(b=b.slice(0,E)),b}function R(b){let E="";const S=b.indexOf("#");return S!==-1&&(E=b.slice(S)),E}function I(b){b=C(b);const E=b.indexOf("?");return E===-1?"":b.slice(E+1)}function T(b,E){return E.parseNumbers&&!Number.isNaN(Number(b))&&typeof b=="string"&&b.trim()!==""?b=Number(b):E.parseBooleans&&b!==null&&(b.toLowerCase()==="true"||b.toLowerCase()==="false")&&(b=b.toLowerCase()==="true"),b}function O(b,E){E=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},E),f(E.arrayFormatSeparator);const S=u(E),x=Object.create(null);if(typeof b!="string"||(b=b.trim().replace(/^[?#&]/,""),!b))return x;for(const k of b.split("&")){let[L,N]=r(E.decode?k.replace(/\+/g," "):k,"=");N=N===void 0?null:["comma","separator"].includes(E.arrayFormat)?N:y(N,E),S(y(L,E),N,x)}for(const k of Object.keys(x)){const L=x[k];if(typeof L=="object"&&L!==null)for(const N of Object.keys(L))L[N]=T(L[N],E);else x[k]=T(L,E)}return E.sort===!1?x:(E.sort===!0?Object.keys(x).sort():Object.keys(x).sort(E.sort)).reduce((k,L)=>{const N=x[L];return Boolean(N)&&typeof N=="object"&&!Array.isArray(N)?k[L]=v(N):k[L]=N,k},Object.create(null))}t.extract=I,t.parse=O,t.stringify=(b,E)=>{if(!b)return"";E=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},E),f(E.arrayFormatSeparator);const S=N=>E.skipNull&&s(b[N])||E.skipEmptyString&&b[N]==="",x=i(E),k={};for(const N of Object.keys(b))S(N)||(k[N]=b[N]);const L=Object.keys(k);return E.sort!==!1&&L.sort(E.sort),L.map(N=>{const H=b[N];return H===void 0?"":H===null?_(N,E):Array.isArray(H)?H.reduce(x(N),[]).join("&"):_(N,E)+"="+_(H,E)}).filter(N=>N.length>0).join("&")},t.parseUrl=(b,E)=>{E=Object.assign({decode:!0},E);const[S,x]=r(b,"#");return Object.assign({url:S.split("?")[0]||"",query:O(I(b),E)},E&&E.parseFragmentIdentifier&&x?{fragmentIdentifier:y(x,E)}:{})},t.stringifyUrl=(b,E)=>{E=Object.assign({encode:!0,strict:!0},E);const S=C(b.url).split("?")[0]||"",x=t.extract(b.url),k=t.parse(x,{sort:!1}),L=Object.assign(k,b.query);let N=t.stringify(L,E);N&&(N=`?${N}`);let H=R(b.url);return b.fragmentIdentifier&&(H=`#${_(b.fragmentIdentifier,E)}`),`${S}${N}${H}`}})(Kn);function Ha(t){const e=t.indexOf("?")!==-1?t.indexOf("?"):void 0;return typeof e<"u"?t.substr(e):""}function $a(t,e){let n=Qi(t);return n=Object.assign(Object.assign({},n),e),t=Fa(n),t}function Qi(t){return Kn.parse(t)}function Fa(t){return Kn.stringify(t)}function Wa(t){return typeof t.bridge<"u"}function za(t){const e=t.indexOf(":"),n=t.indexOf("?")!==-1?t.indexOf("?"):void 0,r=t.substring(0,e),s=t.substring(e+1,n);function i(C){const R="@",I=C.split(R);return{handshakeTopic:I[0],version:parseInt(I[1],10)}}const u=i(s),f=typeof n<"u"?t.substr(n):"";function _(C){const R=Qi(C);return{key:R.key||"",bridge:R.bridge||""}}const y=_(f);return Object.assign(Object.assign({protocol:r},u),y)}class ja{constructor(){this._eventEmitters=[],typeof window<"u"&&typeof window.addEventListener<"u"&&(window.addEventListener("online",()=>this.trigger("online")),window.addEventListener("offline",()=>this.trigger("offline")))}on(e,n){this._eventEmitters.push({event:e,callback:n})}trigger(e){let n=[];e&&(n=this._eventEmitters.filter(r=>r.event===e)),n.forEach(r=>{r.callback()})}}const Va=typeof global.WebSocket<"u"?global.WebSocket:require("ws");class Ja{constructor(e){if(this.opts=e,this._queue=[],this._events=[],this._subscriptions=[],this._protocol=e.protocol,this._version=e.version,this._url="",this._netMonitor=null,this._socket=null,this._nextSocket=null,this._subscriptions=e.subscriptions||[],this._netMonitor=e.netMonitor||new ja,!e.url||typeof e.url!="string")throw new Error("Missing or invalid WebSocket url");this._url=e.url,this._netMonitor.on("online",()=>this._socketCreate())}set readyState(e){}get readyState(){return this._socket?this._socket.readyState:-1}set connecting(e){}get connecting(){return this.readyState===0}set connected(e){}get connected(){return this.readyState===1}set closing(e){}get closing(){return this.readyState===2}set closed(e){}get closed(){return this.readyState===3}open(){this._socketCreate()}close(){this._socketClose()}send(e,n,r){if(!n||typeof n!="string")throw new Error("Missing or invalid topic field");this._socketSend({topic:n,type:"pub",payload:e,silent:!!r})}subscribe(e){this._socketSend({topic:e,type:"sub",payload:"",silent:!0})}on(e,n){this._events.push({event:e,callback:n})}_socketCreate(){if(this._nextSocket)return;const e=Ka(this._url,this._protocol,this._version);if(this._nextSocket=new Va(e),!this._nextSocket)throw new Error("Failed to create socket");this._nextSocket.onmessage=n=>this._socketReceive(n),this._nextSocket.onopen=()=>this._socketOpen(),this._nextSocket.onerror=n=>this._socketError(n),this._nextSocket.onclose=()=>{setTimeout(()=>{this._nextSocket=null,this._socketCreate()},1e3)}}_socketOpen(){this._socketClose(),this._socket=this._nextSocket,this._nextSocket=null,this._queueSubscriptions(),this._pushQueue()}_socketClose(){this._socket&&(this._socket.onclose=()=>{},this._socket.close())}_socketSend(e){const n=JSON.stringify(e);this._socket&&this._socket.readyState===1?this._socket.send(n):(this._setToQueue(e),this._socketCreate())}async _socketReceive(e){let n;try{n=JSON.parse(e.data)}catch{return}if(this._socketSend({topic:n.topic,type:"ack",payload:"",silent:!0}),this._socket&&this._socket.readyState===1){const r=this._events.filter(s=>s.event==="message");r&&r.length&&r.forEach(s=>s.callback(n))}}_socketError(e){const n=this._events.filter(r=>r.event==="error");n&&n.length&&n.forEach(r=>r.callback(e))}_queueSubscriptions(){this._subscriptions.forEach(n=>this._queue.push({topic:n,type:"sub",payload:"",silent:!0})),this._subscriptions=this.opts.subscriptions||[]}_setToQueue(e){this._queue.push(e)}_pushQueue(){this._queue.forEach(n=>this._socketSend(n)),this._queue=[]}}function Ka(t,e,n){var r,s;const u=(t.startsWith("https")?t.replace("https","wss"):t.startsWith("http")?t.replace("http","ws"):t).split("?"),f=Ai()?{protocol:e,version:n,env:"browser",host:((r=Bi())===null||r===void 0?void 0:r.host)||""}:{protocol:e,version:n,env:((s=Lt())===null||s===void 0?void 0:s.name)||""},_=$a(Ha(u[1]||""),f);return u[0]+"?"+_}const _n="Session currently connected",je="Session currently disconnected",Ga="Session Rejected",Qa="Missing JSON RPC response",Ya='JSON-RPC success response must include "result" field',Xa='JSON-RPC error response must include "error" field',Za='JSON RPC request must have valid "method" value',el='JSON RPC request must have valid "id" value',tl="Missing one of the required parameters: bridge / uri / session",Pr="JSON RPC response format is invalid",nl="URI format is invalid",rl="QRCode Modal not provided",qr="User close QRCode Modal";class il{constructor(){this._eventEmitters=[]}subscribe(e){this._eventEmitters.push(e)}unsubscribe(e){this._eventEmitters=this._eventEmitters.filter(n=>n.event!==e)}trigger(e){let n=[],r;Ba(e)?r=e.method:lt(e)||Rt(e)?r=`response:${e.id}`:Lr(e)?r=e.event:r="",r&&(n=this._eventEmitters.filter(s=>s.event===r)),(!n||!n.length)&&!La(r)&&!Lr(r)&&(n=this._eventEmitters.filter(s=>s.event==="call_request")),n.forEach(s=>{if(Rt(e)){const i=new Error(e.error.message);s.callback(i,null)}else s.callback(null,e)})}}class ol{constructor(e="walletconnect"){this.storageId=e}getSession(){let e=null;const n=Wn(this.storageId);return n&&Wa(n)&&(e=n),e}setSession(e){return Fn(this.storageId,e),e}removeSession(){zn(this.storageId)}}const sl="walletconnect.org",al="abcdefghijklmnopqrstuvwxyz0123456789",Yi=al.split("").map(t=>`https://${t}.bridge.walletconnect.org`);function ll(t){let e=t.indexOf("//")>-1?t.split("/")[2]:t.split("/")[0];return e=e.split(":")[0],e=e.split("?")[0],e}function cl(t){return ll(t).split(".").slice(-2).join(".")}function ul(){return Math.floor(Math.random()*Yi.length)}function hl(){return Yi[ul()]}function fl(t){return cl(t)===sl}function dl(t){return fl(t)?hl():t}class pl{constructor(e){if(this.protocol="wc",this.version=1,this._bridge="",this._key=null,this._clientId="",this._clientMeta=null,this._peerId="",this._peerMeta=null,this._handshakeId=0,this._handshakeTopic="",this._connected=!1,this._accounts=[],this._chainId=0,this._networkId=0,this._rpcUrl="",this._eventManager=new il,this._clientMeta=Sn()||e.connectorOpts.clientMeta||null,this._cryptoLib=e.cryptoLib,this._sessionStorage=e.sessionStorage||new ol(e.connectorOpts.storageId),this._qrcodeModal=e.connectorOpts.qrcodeModal,this._qrcodeModalOptions=e.connectorOpts.qrcodeModalOptions,this._signingMethods=[...jn,...e.connectorOpts.signingMethods||[]],!e.connectorOpts.bridge&&!e.connectorOpts.uri&&!e.connectorOpts.session)throw new Error(tl);e.connectorOpts.bridge&&(this.bridge=dl(e.connectorOpts.bridge)),e.connectorOpts.uri&&(this.uri=e.connectorOpts.uri);const n=e.connectorOpts.session||this._getStorageSession();n&&(this.session=n),this.handshakeId&&this._subscribeToSessionResponse(this.handshakeId,"Session request rejected"),this._transport=e.transport||new Ja({protocol:this.protocol,version:this.version,url:this.bridge,subscriptions:[this.clientId]}),this._subscribeToInternalEvents(),this._initTransport(),e.connectorOpts.uri&&this._subscribeToSessionRequest(),e.pushServerOpts&&this._registerPushServer(e.pushServerOpts)}set bridge(e){!e||(this._bridge=e)}get bridge(){return this._bridge}set key(e){if(!e)return;const n=Ra(e);this._key=n}get key(){return this._key?xa(this._key,!0):""}set clientId(e){!e||(this._clientId=e)}get clientId(){let e=this._clientId;return e||(e=this._clientId=pn()),this._clientId}set peerId(e){!e||(this._peerId=e)}get peerId(){return this._peerId}set clientMeta(e){}get clientMeta(){let e=this._clientMeta;return e||(e=this._clientMeta=Sn()),e}set peerMeta(e){this._peerMeta=e}get peerMeta(){return this._peerMeta}set handshakeTopic(e){!e||(this._handshakeTopic=e)}get handshakeTopic(){return this._handshakeTopic}set handshakeId(e){!e||(this._handshakeId=e)}get handshakeId(){return this._handshakeId}get uri(){return this._formatUri()}set uri(e){if(!e)return;const{handshakeTopic:n,bridge:r,key:s}=this._parseUri(e);this.handshakeTopic=n,this.bridge=r,this.key=s}set chainId(e){this._chainId=e}get chainId(){return this._chainId}set networkId(e){this._networkId=e}get networkId(){return this._networkId}set accounts(e){this._accounts=e}get accounts(){return this._accounts}set rpcUrl(e){this._rpcUrl=e}get rpcUrl(){return this._rpcUrl}set connected(e){}get connected(){return this._connected}set pending(e){}get pending(){return!!this._handshakeTopic}get session(){return{connected:this.connected,accounts:this.accounts,chainId:this.chainId,bridge:this.bridge,key:this.key,clientId:this.clientId,clientMeta:this.clientMeta,peerId:this.peerId,peerMeta:this.peerMeta,handshakeId:this.handshakeId,handshakeTopic:this.handshakeTopic}}set session(e){!e||(this._connected=e.connected,this.accounts=e.accounts,this.chainId=e.chainId,this.bridge=e.bridge,this.key=e.key,this.clientId=e.clientId,this.clientMeta=e.clientMeta,this.peerId=e.peerId,this.peerMeta=e.peerMeta,this.handshakeId=e.handshakeId,this.handshakeTopic=e.handshakeTopic)}on(e,n){const r={event:e,callback:n};this._eventManager.subscribe(r)}off(e){this._eventManager.unsubscribe(e)}async createInstantRequest(e){this._key=await this._generateKey();const n=this._formatRequest({method:"wc_instantRequest",params:[{peerId:this.clientId,peerMeta:this.clientMeta,request:this._formatRequest(e)}]});this.handshakeId=n.id,this.handshakeTopic=pn(),this._eventManager.trigger({event:"display_uri",params:[this.uri]}),this.on("modal_closed",()=>{throw new Error(qr)});const r=()=>{this.killSession()};try{const s=await this._sendCallRequest(n);return s&&r(),s}catch(s){throw r(),s}}async connect(e){if(!this._qrcodeModal)throw new Error(rl);return this.connected?{chainId:this.chainId,accounts:this.accounts}:(await this.createSession(e),new Promise(async(n,r)=>{this.on("modal_closed",()=>r(new Error(qr))),this.on("connect",(s,i)=>{if(s)return r(s);n(i.params[0])})}))}async createSession(e){if(this._connected)throw new Error(_n);if(this.pending)return;this._key=await this._generateKey();const n=this._formatRequest({method:"wc_sessionRequest",params:[{peerId:this.clientId,peerMeta:this.clientMeta,chainId:e&&e.chainId?e.chainId:null}]});this.handshakeId=n.id,this.handshakeTopic=pn(),this._sendSessionRequest(n,"Session update rejected",{topic:this.handshakeTopic}),this._eventManager.trigger({event:"display_uri",params:[this.uri]})}approveSession(e){if(this._connected)throw new Error(_n);this.chainId=e.chainId,this.accounts=e.accounts,this.networkId=e.networkId||0,this.rpcUrl=e.rpcUrl||"";const n={approved:!0,chainId:this.chainId,networkId:this.networkId,accounts:this.accounts,rpcUrl:this.rpcUrl,peerId:this.clientId,peerMeta:this.clientMeta},r={id:this.handshakeId,jsonrpc:"2.0",result:n};this._sendResponse(r),this._connected=!0,this._setStorageSession(),this._eventManager.trigger({event:"connect",params:[{peerId:this.peerId,peerMeta:this.peerMeta,chainId:this.chainId,accounts:this.accounts}]})}rejectSession(e){if(this._connected)throw new Error(_n);const n=e&&e.message?e.message:Ga,r=this._formatResponse({id:this.handshakeId,error:{message:n}});this._sendResponse(r),this._connected=!1,this._eventManager.trigger({event:"disconnect",params:[{message:n}]}),this._removeStorageSession()}updateSession(e){if(!this._connected)throw new Error(je);this.chainId=e.chainId,this.accounts=e.accounts,this.networkId=e.networkId||0,this.rpcUrl=e.rpcUrl||"";const n={approved:!0,chainId:this.chainId,networkId:this.networkId,accounts:this.accounts,rpcUrl:this.rpcUrl},r=this._formatRequest({method:"wc_sessionUpdate",params:[n]});this._sendSessionRequest(r,"Session update rejected"),this._eventManager.trigger({event:"session_update",params:[{chainId:this.chainId,accounts:this.accounts}]}),this._manageStorageSession()}async killSession(e){const n=e?e.message:"Session Disconnected",r={approved:!1,chainId:null,networkId:null,accounts:null},s=this._formatRequest({method:"wc_sessionUpdate",params:[r]});await this._sendRequest(s),this._handleSessionDisconnect(n)}async sendTransaction(e){if(!this._connected)throw new Error(je);const n=gn(e),r=this._formatRequest({method:"eth_sendTransaction",params:[n]});return await this._sendCallRequest(r)}async signTransaction(e){if(!this._connected)throw new Error(je);const n=gn(e),r=this._formatRequest({method:"eth_signTransaction",params:[n]});return await this._sendCallRequest(r)}async signMessage(e){if(!this._connected)throw new Error(je);const n=this._formatRequest({method:"eth_sign",params:e});return await this._sendCallRequest(n)}async signPersonalMessage(e){if(!this._connected)throw new Error(je);e=Tt(e);const n=this._formatRequest({method:"personal_sign",params:e});return await this._sendCallRequest(n)}async signTypedData(e){if(!this._connected)throw new Error(je);const n=this._formatRequest({method:"eth_signTypedData",params:e});return await this._sendCallRequest(n)}async updateChain(e){if(!this._connected)throw new Error("Session currently disconnected");const n=this._formatRequest({method:"wallet_updateChain",params:[e]});return await this._sendCallRequest(n)}unsafeSend(e,n){return this._sendRequest(e,n),this._eventManager.trigger({event:"call_request_sent",params:[{request:e,options:n}]}),new Promise((r,s)=>{this._subscribeToResponse(e.id,(i,u)=>{if(i){s(i);return}if(!u)throw new Error(Qa);r(u)})})}async sendCustomRequest(e,n){if(!this._connected)throw new Error(je);switch(e.method){case"eth_accounts":return this.accounts;case"eth_chainId":return Ki(this.chainId);case"eth_sendTransaction":case"eth_signTransaction":e.params&&(e.params[0]=gn(e.params[0]));break;case"personal_sign":e.params&&(e.params=Tt(e.params));break}const r=this._formatRequest(e);return await this._sendCallRequest(r,n)}approveRequest(e){if(lt(e)){const n=this._formatResponse(e);this._sendResponse(n)}else throw new Error(Ya)}rejectRequest(e){if(Rt(e)){const n=this._formatResponse(e);this._sendResponse(n)}else throw new Error(Xa)}transportClose(){this._transport.close()}async _sendRequest(e,n){const r=this._formatRequest(e),s=await this._encrypt(r),i=typeof n?.topic<"u"?n.topic:this.peerId,u=JSON.stringify(s),f=typeof n?.forcePushNotification<"u"?!n.forcePushNotification:Pa(r);this._transport.send(u,i,f)}async _sendResponse(e){const n=await this._encrypt(e),r=this.peerId,s=JSON.stringify(n),i=!0;this._transport.send(s,r,i)}async _sendSessionRequest(e,n,r){this._sendRequest(e,r),this._subscribeToSessionResponse(e.id,n)}_sendCallRequest(e,n){return this._sendRequest(e,n),this._eventManager.trigger({event:"call_request_sent",params:[{request:e,options:n}]}),this._subscribeToCallResponse(e.id)}_formatRequest(e){if(typeof e.method>"u")throw new Error(Za);return{id:typeof e.id>"u"?kn():e.id,jsonrpc:"2.0",method:e.method,params:typeof e.params>"u"?[]:e.params}}_formatResponse(e){if(typeof e.id>"u")throw new Error(el);const n={id:e.id,jsonrpc:"2.0"};if(Rt(e)){const r=Da(e.error);return Object.assign(Object.assign(Object.assign({},n),e),{error:r})}else if(lt(e))return Object.assign(Object.assign({},n),e);throw new Error(Pr)}_handleSessionDisconnect(e){const n=e||"Session Disconnected";this._connected||(this._qrcodeModal&&this._qrcodeModal.close(),zn(kt)),this._connected&&(this._connected=!1),this._handshakeId&&(this._handshakeId=0),this._handshakeTopic&&(this._handshakeTopic=""),this._peerId&&(this._peerId=""),this._eventManager.trigger({event:"disconnect",params:[{message:n}]}),this._removeStorageSession(),this.transportClose()}_handleSessionResponse(e,n){n?n.approved?(this._connected?(n.chainId&&(this.chainId=n.chainId),n.accounts&&(this.accounts=n.accounts),this._eventManager.trigger({event:"session_update",params:[{chainId:this.chainId,accounts:this.accounts}]})):(this._connected=!0,n.chainId&&(this.chainId=n.chainId),n.accounts&&(this.accounts=n.accounts),n.peerId&&!this.peerId&&(this.peerId=n.peerId),n.peerMeta&&!this.peerMeta&&(this.peerMeta=n.peerMeta),this._eventManager.trigger({event:"connect",params:[{peerId:this.peerId,peerMeta:this.peerMeta,chainId:this.chainId,accounts:this.accounts}]})),this._manageStorageSession()):this._handleSessionDisconnect(e):this._handleSessionDisconnect(e)}async _handleIncomingMessages(e){if(![this.clientId,this.handshakeTopic].includes(e.topic))return;let r;try{r=JSON.parse(e.payload)}catch{return}const s=await this._decrypt(r);s&&this._eventManager.trigger(s)}_subscribeToSessionRequest(){this._transport.subscribe(this.handshakeTopic)}_subscribeToResponse(e,n){this.on(`response:${e}`,n)}_subscribeToSessionResponse(e,n){this._subscribeToResponse(e,(r,s)=>{if(r){this._handleSessionResponse(r.message);return}lt(s)?this._handleSessionResponse(n,s.result):s.error&&s.error.message?this._handleSessionResponse(s.error.message):this._handleSessionResponse(n)})}_subscribeToCallResponse(e){return new Promise((n,r)=>{this._subscribeToResponse(e,(s,i)=>{if(s){r(s);return}lt(i)?n(i.result):i.error&&i.error.message?r(i.error):r(new Error(Pr))})})}_subscribeToInternalEvents(){this.on("display_uri",()=>{this._qrcodeModal&&this._qrcodeModal.open(this.uri,()=>{this._eventManager.trigger({event:"modal_closed",params:[]})},this._qrcodeModalOptions)}),this.on("connect",()=>{this._qrcodeModal&&this._qrcodeModal.close()}),this.on("call_request_sent",(e,n)=>{const{request:r}=n.params[0];if(Ti()&&this._signingMethods.includes(r.method)){const s=Wn(kt);s&&(window.location.href=s.href)}}),this.on("wc_sessionRequest",(e,n)=>{e&&this._eventManager.trigger({event:"error",params:[{code:"SESSION_REQUEST_ERROR",message:e.toString()}]}),this.handshakeId=n.id,this.peerId=n.params[0].peerId,this.peerMeta=n.params[0].peerMeta;const r=Object.assign(Object.assign({},n),{method:"session_request"});this._eventManager.trigger(r)}),this.on("wc_sessionUpdate",(e,n)=>{e&&this._handleSessionResponse(e.message),this._handleSessionResponse("Session disconnected",n.params[0])})}_initTransport(){this._transport.on("message",e=>this._handleIncomingMessages(e)),this._transport.on("open",()=>this._eventManager.trigger({event:"transport_open",params:[]})),this._transport.on("close",()=>this._eventManager.trigger({event:"transport_close",params:[]})),this._transport.on("error",()=>this._eventManager.trigger({event:"transport_error",params:["Websocket connection failed"]})),this._transport.open()}_formatUri(){const e=this.protocol,n=this.handshakeTopic,r=this.version,s=encodeURIComponent(this.bridge),i=this.key;return`${e}:${n}@${r}?bridge=${s}&key=${i}`}_parseUri(e){const n=za(e);if(n.protocol===this.protocol){if(!n.handshakeTopic)throw Error("Invalid or missing handshakeTopic parameter value");const r=n.handshakeTopic;if(!n.bridge)throw Error("Invalid or missing bridge url parameter value");const s=decodeURIComponent(n.bridge);if(!n.key)throw Error("Invalid or missing key parameter value");const i=n.key;return{handshakeTopic:r,bridge:s,key:i}}else throw new Error(nl)}async _generateKey(){return this._cryptoLib?await this._cryptoLib.generateKey():null}async _encrypt(e){const n=this._key;return this._cryptoLib&&n?await this._cryptoLib.encrypt(e,n):null}async _decrypt(e){const n=this._key;return this._cryptoLib&&n?await this._cryptoLib.decrypt(e,n):null}_getStorageSession(){let e=null;return this._sessionStorage&&(e=this._sessionStorage.getSession()),e}_setStorageSession(){this._sessionStorage&&this._sessionStorage.setSession(this.session)}_removeStorageSession(){this._sessionStorage&&this._sessionStorage.removeSession()}_manageStorageSession(){this._connected?this._setStorageSession():this._removeStorageSession()}_registerPushServer(e){if(!e.url||typeof e.url!="string")throw Error("Invalid or missing pushServerOpts.url parameter value");if(!e.type||typeof e.type!="string")throw Error("Invalid or missing pushServerOpts.type parameter value");if(!e.token||typeof e.token!="string")throw Error("Invalid or missing pushServerOpts.token parameter value");const n={bridge:this.bridge,topic:this.clientId,type:e.type,token:e.token,peerName:"",language:e.language||""};this.on("connect",async(r,s)=>{if(r)throw r;if(e.peerMeta){const i=s.params[0].peerMeta.name;n.peerName=i}try{if(!(await(await fetch(`${e.url}/new`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)})).json()).success)throw Error("Failed to register in Push Server")}catch{throw Error("Failed to register in Push Server")}})}}function gl(t){return _t.getBrowerCrypto().getRandomValues(new Uint8Array(t))}const Xi=256,Zi=Xi,_l=Xi,Fe="AES-CBC",ml=`SHA-${Zi}`,Rn="HMAC",vl="encrypt",wl="decrypt",yl="sign",bl="verify";function Ml(t){return t===Fe?{length:Zi,name:Fe}:{hash:{name:ml},name:Rn}}function El(t){return t===Fe?[vl,wl]:[yl,bl]}async function Gn(t,e=Fe){return _t.getSubtleCrypto().importKey("raw",t,Ml(e),!0,El(e))}async function xl(t,e,n){const r=_t.getSubtleCrypto(),s=await Gn(e,Fe),i=await r.encrypt({iv:t,name:Fe},s,n);return new Uint8Array(i)}async function Sl(t,e,n){const r=_t.getSubtleCrypto(),s=await Gn(e,Fe),i=await r.decrypt({iv:t,name:Fe},s,n);return new Uint8Array(i)}async function Cl(t,e){const n=_t.getSubtleCrypto(),r=await Gn(t,Rn),s=await n.sign({length:_l,name:Rn},r,e);return new Uint8Array(s)}function kl(t,e,n){return xl(t,e,n)}function Rl(t,e,n){return Sl(t,e,n)}async function eo(t,e){return await Cl(t,e)}async function to(t){const e=(t||256)/8,n=gl(e);return Sa(Dt(n))}async function no(t,e){const n=Qe(t.data),r=Qe(t.iv),s=Qe(t.hmac),i=Ge(s,!1),u=Vi(n,r),f=await eo(e,u),_=Ge(f,!1);return $e(i)===$e(_)}async function Tl(t,e,n){const r=Ye(Cn(e)),s=n||await to(128),i=Ye(Cn(s)),u=Ge(i,!1),f=JSON.stringify(t),_=_a(f),y=await kl(i,r,_),v=Ge(y,!1),C=Vi(y,i),R=await eo(r,C),I=Ge(R,!1);return{data:v,hmac:I,iv:u}}async function Il(t,e){const n=Ye(Cn(e));if(!n)throw new Error("Missing key: required for decryption");if(!await no(t,n))return null;const s=Qe(t.data),i=Qe(t.iv),u=await Rl(i,n,s),f=pa(u);let _;try{_=JSON.parse(f)}catch{return null}return _}const Al=Object.freeze(Object.defineProperty({__proto__:null,generateKey:to,verifyHmac:no,encrypt:Tl,decrypt:Il},Symbol.toStringTag,{value:"Module"}));class Ol extends pl{constructor(e,n){super({cryptoLib:Al,connectorOpts:e,pushServerOpts:n})}}const Nl=di(ia);var mt={},Bl=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},ro={},We={},Ll=Hn;function Pl(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},t.foo()===42}catch{return!1}}F.TYPED_ARRAY_SUPPORT=Pl();var Ur=F.TYPED_ARRAY_SUPPORT?2147483647:1073741823;function F(t,e,n){return!F.TYPED_ARRAY_SUPPORT&&!(this instanceof F)?new F(t,e,n):typeof t=="number"?io(this,t):Wl(this,t,e,n)}F.TYPED_ARRAY_SUPPORT&&(F.prototype.__proto__=Uint8Array.prototype,F.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&F[Symbol.species]===F&&Object.defineProperty(F,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}));function Qn(t){if(t>=Ur)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Ur.toString(16)+" bytes");return t|0}function ql(t){return t!==t}function Xe(t,e){var n;return F.TYPED_ARRAY_SUPPORT?(n=new Uint8Array(e),n.__proto__=F.prototype):(n=t,n===null&&(n=new F(e)),n.length=e),n}function io(t,e){var n=Xe(t,e<0?0:Qn(e)|0);if(!F.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)n[r]=0;return n}function Ul(t,e){var n=so(e)|0,r=Xe(t,n),s=r.write(e);return s!==n&&(r=r.slice(0,s)),r}function Tn(t,e){for(var n=e.length<0?0:Qn(e.length)|0,r=Xe(t,n),s=0;s<n;s+=1)r[s]=e[s]&255;return r}function Dl(t,e,n,r){if(n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");var s;return n===void 0&&r===void 0?s=new Uint8Array(e):r===void 0?s=new Uint8Array(e,n):s=new Uint8Array(e,n,r),F.TYPED_ARRAY_SUPPORT?s.__proto__=F.prototype:s=Tn(t,s),s}function Hl(t,e){if(F.isBuffer(e)){var n=Qn(e.length)|0,r=Xe(t,n);return r.length===0||e.copy(r,0,0,n),r}if(e){if(typeof ArrayBuffer<"u"&&e.buffer instanceof ArrayBuffer||"length"in e)return typeof e.length!="number"||ql(e.length)?Xe(t,0):Tn(t,e);if(e.type==="Buffer"&&Array.isArray(e.data))return Tn(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function oo(t,e){e=e||1/0;for(var n,r=t.length,s=null,i=[],u=0;u<r;++u){if(n=t.charCodeAt(u),n>55295&&n<57344){if(!s){if(n>56319){(e-=3)>-1&&i.push(239,191,189);continue}else if(u+1===r){(e-=3)>-1&&i.push(239,191,189);continue}s=n;continue}if(n<56320){(e-=3)>-1&&i.push(239,191,189),s=n;continue}n=(s-55296<<10|n-56320)+65536}else s&&(e-=3)>-1&&i.push(239,191,189);if(s=null,n<128){if((e-=1)<0)break;i.push(n)}else if(n<2048){if((e-=2)<0)break;i.push(n>>6|192,n&63|128)}else if(n<65536){if((e-=3)<0)break;i.push(n>>12|224,n>>6&63|128,n&63|128)}else if(n<1114112){if((e-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,n&63|128)}else throw new Error("Invalid code point")}return i}function so(t){if(F.isBuffer(t))return t.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;typeof t!="string"&&(t=""+t);var e=t.length;return e===0?0:oo(t).length}function $l(t,e,n,r){for(var s=0;s<r&&!(s+n>=e.length||s>=t.length);++s)e[s+n]=t[s];return s}function Fl(t,e,n,r){return $l(oo(e,t.length-n),t,n,r)}function Wl(t,e,n,r){if(typeof e=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer?Dl(t,e,n,r):typeof e=="string"?Ul(t,e):Hl(t,e)}F.prototype.write=function(e,n,r){n===void 0?(r=this.length,n=0):r===void 0&&typeof n=="string"?(r=this.length,n=0):isFinite(n)&&(n=n|0,isFinite(r)?r=r|0:r=void 0);var s=this.length-n;if((r===void 0||r>s)&&(r=s),e.length>0&&(r<0||n<0)||n>this.length)throw new RangeError("Attempt to write outside buffer bounds");return Fl(this,e,n,r)};F.prototype.slice=function(e,n){var r=this.length;e=~~e,n=n===void 0?r:~~n,e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),n<0?(n+=r,n<0&&(n=0)):n>r&&(n=r),n<e&&(n=e);var s;if(F.TYPED_ARRAY_SUPPORT)s=this.subarray(e,n),s.__proto__=F.prototype;else{var i=n-e;s=new F(i,void 0);for(var u=0;u<i;++u)s[u]=this[u+e]}return s};F.prototype.copy=function(e,n,r,s){if(r||(r=0),!s&&s!==0&&(s=this.length),n>=e.length&&(n=e.length),n||(n=0),s>0&&s<r&&(s=r),s===r||e.length===0||this.length===0)return 0;if(n<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(s<0)throw new RangeError("sourceEnd out of bounds");s>this.length&&(s=this.length),e.length-n<s-r&&(s=e.length-n+r);var i=s-r,u;if(this===e&&r<n&&n<s)for(u=i-1;u>=0;--u)e[u+n]=this[u+r];else if(i<1e3||!F.TYPED_ARRAY_SUPPORT)for(u=0;u<i;++u)e[u+n]=this[u+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+i),n);return i};F.prototype.fill=function(e,n,r){if(typeof e=="string"){if(typeof n=="string"?(n=0,r=this.length):typeof r=="string"&&(r=this.length),e.length===1){var s=e.charCodeAt(0);s<256&&(e=s)}}else typeof e=="number"&&(e=e&255);if(n<0||this.length<n||this.length<r)throw new RangeError("Out of range index");if(r<=n)return this;n=n>>>0,r=r===void 0?this.length:r>>>0,e||(e=0);var i;if(typeof e=="number")for(i=n;i<r;++i)this[i]=e;else{var u=F.isBuffer(e)?e:new F(e),f=u.length;for(i=0;i<r-n;++i)this[i+n]=u[i%f]}return this};F.concat=function(e,n){if(!Ll(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return Xe(null,0);var r;if(n===void 0)for(n=0,r=0;r<e.length;++r)n+=e[r].length;var s=io(null,n),i=0;for(r=0;r<e.length;++r){var u=e[r];if(!F.isBuffer(u))throw new TypeError('"list" argument must be an Array of Buffers');u.copy(s,i),i+=u.length}return s};F.byteLength=so;F.prototype._isBuffer=!0;F.isBuffer=function(e){return!!(e!=null&&e._isBuffer)};We.alloc=function(t){var e=new F(t);return e.fill(0),e};We.from=function(t){return new F(t)};var Ae={},Yn,zl=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];Ae.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};Ae.getSymbolTotalCodewords=function(e){return zl[e]};Ae.getBCHDigit=function(t){for(var e=0;t!==0;)e++,t>>>=1;return e};Ae.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');Yn=e};Ae.isKanjiModeEnabled=function(){return typeof Yn<"u"};Ae.toSJIS=function(e){return Yn(e)};var Ht={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(n){if(typeof n!="string")throw new Error("Param is not a string");var r=n.toLowerCase();switch(r){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+n)}}t.isValid=function(r){return r&&typeof r.bit<"u"&&r.bit>=0&&r.bit<4},t.from=function(r,s){if(t.isValid(r))return r;try{return e(r)}catch{return s}}})(Ht);function ao(){this.buffer=[],this.length=0}ao.prototype={get:function(t){var e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)===1},put:function(t,e){for(var n=0;n<e;n++)this.putBit((t>>>e-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var jl=ao,Dr=We;function vt(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=Dr.alloc(t*t),this.reservedBit=Dr.alloc(t*t)}vt.prototype.set=function(t,e,n,r){var s=t*this.size+e;this.data[s]=n,r&&(this.reservedBit[s]=!0)};vt.prototype.get=function(t,e){return this.data[t*this.size+e]};vt.prototype.xor=function(t,e,n){this.data[t*this.size+e]^=n};vt.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};var Vl=vt,lo={};(function(t){var e=Ae.getSymbolSize;t.getRowColCoords=function(r){if(r===1)return[];for(var s=Math.floor(r/7)+2,i=e(r),u=i===145?26:Math.ceil((i-13)/(2*s-2))*2,f=[i-7],_=1;_<s-1;_++)f[_]=f[_-1]-u;return f.push(6),f.reverse()},t.getPositions=function(r){for(var s=[],i=t.getRowColCoords(r),u=i.length,f=0;f<u;f++)for(var _=0;_<u;_++)f===0&&_===0||f===0&&_===u-1||f===u-1&&_===0||s.push([i[f],i[_]]);return s}})(lo);var co={},Jl=Ae.getSymbolSize,Hr=7;co.getPositions=function(e){var n=Jl(e);return[[0,0],[n-Hr,0],[0,n-Hr]]};var uo={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(s){return s!=null&&s!==""&&!isNaN(s)&&s>=0&&s<=7},t.from=function(s){return t.isValid(s)?parseInt(s,10):void 0},t.getPenaltyN1=function(s){for(var i=s.size,u=0,f=0,_=0,y=null,v=null,C=0;C<i;C++){f=_=0,y=v=null;for(var R=0;R<i;R++){var I=s.get(C,R);I===y?f++:(f>=5&&(u+=e.N1+(f-5)),y=I,f=1),I=s.get(R,C),I===v?_++:(_>=5&&(u+=e.N1+(_-5)),v=I,_=1)}f>=5&&(u+=e.N1+(f-5)),_>=5&&(u+=e.N1+(_-5))}return u},t.getPenaltyN2=function(s){for(var i=s.size,u=0,f=0;f<i-1;f++)for(var _=0;_<i-1;_++){var y=s.get(f,_)+s.get(f,_+1)+s.get(f+1,_)+s.get(f+1,_+1);(y===4||y===0)&&u++}return u*e.N2},t.getPenaltyN3=function(s){for(var i=s.size,u=0,f=0,_=0,y=0;y<i;y++){f=_=0;for(var v=0;v<i;v++)f=f<<1&2047|s.get(y,v),v>=10&&(f===1488||f===93)&&u++,_=_<<1&2047|s.get(v,y),v>=10&&(_===1488||_===93)&&u++}return u*e.N3},t.getPenaltyN4=function(s){for(var i=0,u=s.data.length,f=0;f<u;f++)i+=s.data[f];var _=Math.abs(Math.ceil(i*100/u/5)-10);return _*e.N4};function n(r,s,i){switch(r){case t.Patterns.PATTERN000:return(s+i)%2===0;case t.Patterns.PATTERN001:return s%2===0;case t.Patterns.PATTERN010:return i%3===0;case t.Patterns.PATTERN011:return(s+i)%3===0;case t.Patterns.PATTERN100:return(Math.floor(s/2)+Math.floor(i/3))%2===0;case t.Patterns.PATTERN101:return s*i%2+s*i%3===0;case t.Patterns.PATTERN110:return(s*i%2+s*i%3)%2===0;case t.Patterns.PATTERN111:return(s*i%3+(s+i)%2)%2===0;default:throw new Error("bad maskPattern:"+r)}}t.applyMask=function(s,i){for(var u=i.size,f=0;f<u;f++)for(var _=0;_<u;_++)i.isReserved(_,f)||i.xor(_,f,n(s,_,f))},t.getBestMask=function(s,i){for(var u=Object.keys(t.Patterns).length,f=0,_=1/0,y=0;y<u;y++){i(y),t.applyMask(y,s);var v=t.getPenaltyN1(s)+t.getPenaltyN2(s)+t.getPenaltyN3(s)+t.getPenaltyN4(s);t.applyMask(y,s),v<_&&(_=v,f=y)}return f}})(uo);var $t={},De=Ht,Mt=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Et=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];$t.getBlocksCount=function(e,n){switch(n){case De.L:return Mt[(e-1)*4+0];case De.M:return Mt[(e-1)*4+1];case De.Q:return Mt[(e-1)*4+2];case De.H:return Mt[(e-1)*4+3];default:return}};$t.getTotalCodewordsCount=function(e,n){switch(n){case De.L:return Et[(e-1)*4+0];case De.M:return Et[(e-1)*4+1];case De.Q:return Et[(e-1)*4+2];case De.H:return Et[(e-1)*4+3];default:return}};var ho={},Ft={},fo=We,ct=fo.alloc(512),It=fo.alloc(256);(function(){for(var e=1,n=0;n<255;n++)ct[n]=e,It[e]=n,e<<=1,e&256&&(e^=285);for(n=255;n<512;n++)ct[n]=ct[n-255]})();Ft.log=function(e){if(e<1)throw new Error("log("+e+")");return It[e]};Ft.exp=function(e){return ct[e]};Ft.mul=function(e,n){return e===0||n===0?0:ct[It[e]+It[n]]};(function(t){var e=We,n=Ft;t.mul=function(s,i){for(var u=e.alloc(s.length+i.length-1),f=0;f<s.length;f++)for(var _=0;_<i.length;_++)u[f+_]^=n.mul(s[f],i[_]);return u},t.mod=function(s,i){for(var u=e.from(s);u.length-i.length>=0;){for(var f=u[0],_=0;_<i.length;_++)u[_]^=n.mul(i[_],f);for(var y=0;y<u.length&&u[y]===0;)y++;u=u.slice(y)}return u},t.generateECPolynomial=function(s){for(var i=e.from([1]),u=0;u<s;u++)i=t.mul(i,[1,n.exp(u)]);return i}})(ho);var $r=We,po=ho,Kl=gs.Buffer;function Xn(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}Xn.prototype.initialize=function(e){this.degree=e,this.genPoly=po.generateECPolynomial(this.degree)};Xn.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");var n=$r.alloc(this.degree),r=Kl.concat([e,n],e.length+this.degree),s=po.mod(r,this.genPoly),i=this.degree-s.length;if(i>0){var u=$r.alloc(this.degree);return s.copy(u,i),u}return s};var Gl=Xn,go={},ze={},Zn={};Zn.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var Ne={},_o="[0-9]+",Ql="[A-Z $%*+\\-./:]+",ft="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";ft=ft.replace(/u/g,"\\u");var Yl="(?:(?![A-Z0-9 $%*+\\-./:]|"+ft+`)(?:.|[\r
]))+`;Ne.KANJI=new RegExp(ft,"g");Ne.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");Ne.BYTE=new RegExp(Yl,"g");Ne.NUMERIC=new RegExp(_o,"g");Ne.ALPHANUMERIC=new RegExp(Ql,"g");var Xl=new RegExp("^"+ft+"$"),Zl=new RegExp("^"+_o+"$"),ec=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Ne.testKanji=function(e){return Xl.test(e)};Ne.testNumeric=function(e){return Zl.test(e)};Ne.testAlphanumeric=function(e){return ec.test(e)};(function(t){var e=Zn,n=Ne;t.NUMERIC={id:"Numeric",bit:1<<0,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:1<<1,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:1<<2,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:1<<3,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(i,u){if(!i.ccBits)throw new Error("Invalid mode: "+i);if(!e.isValid(u))throw new Error("Invalid version: "+u);return u>=1&&u<10?i.ccBits[0]:u<27?i.ccBits[1]:i.ccBits[2]},t.getBestModeForData=function(i){return n.testNumeric(i)?t.NUMERIC:n.testAlphanumeric(i)?t.ALPHANUMERIC:n.testKanji(i)?t.KANJI:t.BYTE},t.toString=function(i){if(i&&i.id)return i.id;throw new Error("Invalid mode")},t.isValid=function(i){return i&&i.bit&&i.ccBits};function r(s){if(typeof s!="string")throw new Error("Param is not a string");var i=s.toLowerCase();switch(i){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+s)}}t.from=function(i,u){if(t.isValid(i))return i;try{return r(i)}catch{return u}}})(ze);(function(t){var e=Ae,n=$t,r=Ht,s=ze,i=Zn,u=Hn,f=1<<12|1<<11|1<<10|1<<9|1<<8|1<<5|1<<2|1<<0,_=e.getBCHDigit(f);function y(I,T,O){for(var b=1;b<=40;b++)if(T<=t.getCapacity(b,O,I))return b}function v(I,T){return s.getCharCountIndicator(I,T)+4}function C(I,T){var O=0;return I.forEach(function(b){var E=v(b.mode,T);O+=E+b.getBitsLength()}),O}function R(I,T){for(var O=1;O<=40;O++){var b=C(I,O);if(b<=t.getCapacity(O,T,s.MIXED))return O}}t.from=function(T,O){return i.isValid(T)?parseInt(T,10):O},t.getCapacity=function(T,O,b){if(!i.isValid(T))throw new Error("Invalid QR Code version");typeof b>"u"&&(b=s.BYTE);var E=e.getSymbolTotalCodewords(T),S=n.getTotalCodewordsCount(T,O),x=(E-S)*8;if(b===s.MIXED)return x;var k=x-v(b,T);switch(b){case s.NUMERIC:return Math.floor(k/10*3);case s.ALPHANUMERIC:return Math.floor(k/11*2);case s.KANJI:return Math.floor(k/13);case s.BYTE:default:return Math.floor(k/8)}},t.getBestVersionForData=function(T,O){var b,E=r.from(O,r.M);if(u(T)){if(T.length>1)return R(T,E);if(T.length===0)return 1;b=T[0]}else b=T;return y(b.mode,b.getLength(),E)},t.getEncodedBits=function(T){if(!i.isValid(T)||T<7)throw new Error("Invalid QR Code version");for(var O=T<<12;e.getBCHDigit(O)-_>=0;)O^=f<<e.getBCHDigit(O)-_;return T<<12|O}})(go);var mo={},In=Ae,vo=1<<10|1<<8|1<<5|1<<4|1<<2|1<<1|1<<0,tc=1<<14|1<<12|1<<10|1<<4|1<<1,Fr=In.getBCHDigit(vo);mo.getEncodedBits=function(e,n){for(var r=e.bit<<3|n,s=r<<10;In.getBCHDigit(s)-Fr>=0;)s^=vo<<In.getBCHDigit(s)-Fr;return(r<<10|s)^tc};var wo={},nc=ze;function Ze(t){this.mode=nc.NUMERIC,this.data=t.toString()}Ze.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};Ze.prototype.getLength=function(){return this.data.length};Ze.prototype.getBitsLength=function(){return Ze.getBitsLength(this.data.length)};Ze.prototype.write=function(e){var n,r,s;for(n=0;n+3<=this.data.length;n+=3)r=this.data.substr(n,3),s=parseInt(r,10),e.put(s,10);var i=this.data.length-n;i>0&&(r=this.data.substr(n),s=parseInt(r,10),e.put(s,i*3+1))};var rc=Ze,ic=ze,mn=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function et(t){this.mode=ic.ALPHANUMERIC,this.data=t}et.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};et.prototype.getLength=function(){return this.data.length};et.prototype.getBitsLength=function(){return et.getBitsLength(this.data.length)};et.prototype.write=function(e){var n;for(n=0;n+2<=this.data.length;n+=2){var r=mn.indexOf(this.data[n])*45;r+=mn.indexOf(this.data[n+1]),e.put(r,11)}this.data.length%2&&e.put(mn.indexOf(this.data[n]),6)};var oc=et,sc=We,ac=ze;function tt(t){this.mode=ac.BYTE,this.data=sc.from(t)}tt.getBitsLength=function(e){return e*8};tt.prototype.getLength=function(){return this.data.length};tt.prototype.getBitsLength=function(){return tt.getBitsLength(this.data.length)};tt.prototype.write=function(t){for(var e=0,n=this.data.length;e<n;e++)t.put(this.data[e],8)};var lc=tt,cc=ze,uc=Ae;function nt(t){this.mode=cc.KANJI,this.data=t}nt.getBitsLength=function(e){return e*13};nt.prototype.getLength=function(){return this.data.length};nt.prototype.getBitsLength=function(){return nt.getBitsLength(this.data.length)};nt.prototype.write=function(t){var e;for(e=0;e<this.data.length;e++){var n=uc.toSJIS(this.data[e]);if(n>=33088&&n<=40956)n-=33088;else if(n>=57408&&n<=60351)n-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);n=(n>>>8&255)*192+(n&255),t.put(n,13)}};var hc=nt;(function(t){var e=ze,n=rc,r=oc,s=lc,i=hc,u=Ne,f=Ae,_=_s.exports;function y(E){return unescape(encodeURIComponent(E)).length}function v(E,S,x){for(var k=[],L;(L=E.exec(x))!==null;)k.push({data:L[0],index:L.index,mode:S,length:L[0].length});return k}function C(E){var S=v(u.NUMERIC,e.NUMERIC,E),x=v(u.ALPHANUMERIC,e.ALPHANUMERIC,E),k,L;f.isKanjiModeEnabled()?(k=v(u.BYTE,e.BYTE,E),L=v(u.KANJI,e.KANJI,E)):(k=v(u.BYTE_KANJI,e.BYTE,E),L=[]);var N=S.concat(x,k,L);return N.sort(function(H,D){return H.index-D.index}).map(function(H){return{data:H.data,mode:H.mode,length:H.length}})}function R(E,S){switch(S){case e.NUMERIC:return n.getBitsLength(E);case e.ALPHANUMERIC:return r.getBitsLength(E);case e.KANJI:return i.getBitsLength(E);case e.BYTE:return s.getBitsLength(E)}}function I(E){return E.reduce(function(S,x){var k=S.length-1>=0?S[S.length-1]:null;return k&&k.mode===x.mode?(S[S.length-1].data+=x.data,S):(S.push(x),S)},[])}function T(E){for(var S=[],x=0;x<E.length;x++){var k=E[x];switch(k.mode){case e.NUMERIC:S.push([k,{data:k.data,mode:e.ALPHANUMERIC,length:k.length},{data:k.data,mode:e.BYTE,length:k.length}]);break;case e.ALPHANUMERIC:S.push([k,{data:k.data,mode:e.BYTE,length:k.length}]);break;case e.KANJI:S.push([k,{data:k.data,mode:e.BYTE,length:y(k.data)}]);break;case e.BYTE:S.push([{data:k.data,mode:e.BYTE,length:y(k.data)}])}}return S}function O(E,S){for(var x={},k={start:{}},L=["start"],N=0;N<E.length;N++){for(var H=E[N],D=[],K=0;K<H.length;K++){var m=H[K],o=""+N+K;D.push(o),x[o]={node:m,lastCount:0},k[o]={};for(var l=0;l<L.length;l++){var c=L[l];x[c]&&x[c].node.mode===m.mode?(k[c][o]=R(x[c].lastCount+m.length,m.mode)-R(x[c].lastCount,m.mode),x[c].lastCount+=m.length):(x[c]&&(x[c].lastCount=m.length),k[c][o]=R(m.length,m.mode)+4+e.getCharCountIndicator(m.mode,S))}}L=D}for(l=0;l<L.length;l++)k[L[l]].end=0;return{map:k,table:x}}function b(E,S){var x,k=e.getBestModeForData(E);if(x=e.from(S,k),x!==e.BYTE&&x.bit<k.bit)throw new Error('"'+E+'" cannot be encoded with mode '+e.toString(x)+`.
 Suggested mode is: `+e.toString(k));switch(x===e.KANJI&&!f.isKanjiModeEnabled()&&(x=e.BYTE),x){case e.NUMERIC:return new n(E);case e.ALPHANUMERIC:return new r(E);case e.KANJI:return new i(E);case e.BYTE:return new s(E)}}t.fromArray=function(S){return S.reduce(function(x,k){return typeof k=="string"?x.push(b(k,null)):k.data&&x.push(b(k.data,k.mode)),x},[])},t.fromString=function(S,x){for(var k=C(S,f.isKanjiModeEnabled()),L=T(k),N=O(L,x),H=_.find_path(N.map,"start","end"),D=[],K=1;K<H.length-1;K++)D.push(N.table[H[K]].node);return t.fromArray(I(D))},t.rawSplit=function(S){return t.fromArray(C(S,f.isKanjiModeEnabled()))}})(wo);var Wr=We,Wt=Ae,vn=Ht,fc=jl,dc=Vl,pc=lo,gc=co,An=uo,On=$t,_c=Gl,At=go,mc=mo,vc=ze,wn=wo,wc=Hn;function yc(t,e){for(var n=t.size,r=gc.getPositions(e),s=0;s<r.length;s++)for(var i=r[s][0],u=r[s][1],f=-1;f<=7;f++)if(!(i+f<=-1||n<=i+f))for(var _=-1;_<=7;_++)u+_<=-1||n<=u+_||(f>=0&&f<=6&&(_===0||_===6)||_>=0&&_<=6&&(f===0||f===6)||f>=2&&f<=4&&_>=2&&_<=4?t.set(i+f,u+_,!0,!0):t.set(i+f,u+_,!1,!0))}function bc(t){for(var e=t.size,n=8;n<e-8;n++){var r=n%2===0;t.set(n,6,r,!0),t.set(6,n,r,!0)}}function Mc(t,e){for(var n=pc.getPositions(e),r=0;r<n.length;r++)for(var s=n[r][0],i=n[r][1],u=-2;u<=2;u++)for(var f=-2;f<=2;f++)u===-2||u===2||f===-2||f===2||u===0&&f===0?t.set(s+u,i+f,!0,!0):t.set(s+u,i+f,!1,!0)}function Ec(t,e){for(var n=t.size,r=At.getEncodedBits(e),s,i,u,f=0;f<18;f++)s=Math.floor(f/3),i=f%3+n-8-3,u=(r>>f&1)===1,t.set(s,i,u,!0),t.set(i,s,u,!0)}function yn(t,e,n){var r=t.size,s=mc.getEncodedBits(e,n),i,u;for(i=0;i<15;i++)u=(s>>i&1)===1,i<6?t.set(i,8,u,!0):i<8?t.set(i+1,8,u,!0):t.set(r-15+i,8,u,!0),i<8?t.set(8,r-i-1,u,!0):i<9?t.set(8,15-i-1+1,u,!0):t.set(8,15-i-1,u,!0);t.set(r-8,8,1,!0)}function xc(t,e){for(var n=t.size,r=-1,s=n-1,i=7,u=0,f=n-1;f>0;f-=2)for(f===6&&f--;;){for(var _=0;_<2;_++)if(!t.isReserved(s,f-_)){var y=!1;u<e.length&&(y=(e[u]>>>i&1)===1),t.set(s,f-_,y),i--,i===-1&&(u++,i=7)}if(s+=r,s<0||n<=s){s-=r,r=-r;break}}}function Sc(t,e,n){var r=new fc;n.forEach(function(y){r.put(y.mode.bit,4),r.put(y.getLength(),vc.getCharCountIndicator(y.mode,t)),y.write(r)});var s=Wt.getSymbolTotalCodewords(t),i=On.getTotalCodewordsCount(t,e),u=(s-i)*8;for(r.getLengthInBits()+4<=u&&r.put(0,4);r.getLengthInBits()%8!==0;)r.putBit(0);for(var f=(u-r.getLengthInBits())/8,_=0;_<f;_++)r.put(_%2?17:236,8);return Cc(r,t,e)}function Cc(t,e,n){for(var r=Wt.getSymbolTotalCodewords(e),s=On.getTotalCodewordsCount(e,n),i=r-s,u=On.getBlocksCount(e,n),f=r%u,_=u-f,y=Math.floor(r/u),v=Math.floor(i/u),C=v+1,R=y-v,I=new _c(R),T=0,O=new Array(u),b=new Array(u),E=0,S=Wr.from(t.buffer),x=0;x<u;x++){var k=x<_?v:C;O[x]=S.slice(T,T+k),b[x]=I.encode(O[x]),T+=k,E=Math.max(E,k)}var L=Wr.alloc(r),N=0,H,D;for(H=0;H<E;H++)for(D=0;D<u;D++)H<O[D].length&&(L[N++]=O[D][H]);for(H=0;H<R;H++)for(D=0;D<u;D++)L[N++]=b[D][H];return L}function kc(t,e,n,r){var s;if(wc(t))s=wn.fromArray(t);else if(typeof t=="string"){var i=e;if(!i){var u=wn.rawSplit(t);i=At.getBestVersionForData(u,n)}s=wn.fromString(t,i||40)}else throw new Error("Invalid data");var f=At.getBestVersionForData(s,n);if(!f)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=f;else if(e<f)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+f+`.
`);var _=Sc(e,n,s),y=Wt.getSymbolSize(e),v=new dc(y);return yc(v,e),bc(v),Mc(v,e),yn(v,n,0),e>=7&&Ec(v,e),xc(v,_),isNaN(r)&&(r=An.getBestMask(v,yn.bind(null,v,n))),An.applyMask(r,v),yn(v,n,r),{modules:v,version:e,errorCorrectionLevel:n,maskPattern:r,segments:s}}ro.create=function(e,n){if(typeof e>"u"||e==="")throw new Error("No input text");var r=vn.M,s,i;return typeof n<"u"&&(r=vn.from(n.errorCorrectionLevel,vn.M),s=At.from(n.version),i=An.from(n.maskPattern),n.toSJISFunc&&Wt.setToSJISFunction(n.toSJISFunc)),kc(e,s,r,i)};var yo={},er={};(function(t){function e(n){if(typeof n=="number"&&(n=n.toString()),typeof n!="string")throw new Error("Color should be defined as hex string");var r=n.slice().replace("#","").split("");if(r.length<3||r.length===5||r.length>8)throw new Error("Invalid hex color: "+n);(r.length===3||r.length===4)&&(r=Array.prototype.concat.apply([],r.map(function(i){return[i,i]}))),r.length===6&&r.push("F","F");var s=parseInt(r.join(""),16);return{r:s>>24&255,g:s>>16&255,b:s>>8&255,a:s&255,hex:"#"+r.slice(0,6).join("")}}t.getOptions=function(r){r||(r={}),r.color||(r.color={});var s=typeof r.margin>"u"||r.margin===null||r.margin<0?4:r.margin,i=r.width&&r.width>=21?r.width:void 0,u=r.scale||4;return{width:i,scale:i?4:u,margin:s,color:{dark:e(r.color.dark||"#000000ff"),light:e(r.color.light||"#ffffffff")},type:r.type,rendererOpts:r.rendererOpts||{}}},t.getScale=function(r,s){return s.width&&s.width>=r+s.margin*2?s.width/(r+s.margin*2):s.scale},t.getImageWidth=function(r,s){var i=t.getScale(r,s);return Math.floor((r+s.margin*2)*i)},t.qrToImageData=function(r,s,i){for(var u=s.modules.size,f=s.modules.data,_=t.getScale(u,i),y=Math.floor((u+i.margin*2)*_),v=i.margin*_,C=[i.color.light,i.color.dark],R=0;R<y;R++)for(var I=0;I<y;I++){var T=(R*y+I)*4,O=i.color.light;if(R>=v&&I>=v&&R<y-v&&I<y-v){var b=Math.floor((R-v)/_),E=Math.floor((I-v)/_);O=C[f[b*u+E]?1:0]}r[T++]=O.r,r[T++]=O.g,r[T++]=O.b,r[T]=O.a}}})(er);(function(t){var e=er;function n(s,i,u){s.clearRect(0,0,i.width,i.height),i.style||(i.style={}),i.height=u,i.width=u,i.style.height=u+"px",i.style.width=u+"px"}function r(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(i,u,f){var _=f,y=u;typeof _>"u"&&(!u||!u.getContext)&&(_=u,u=void 0),u||(y=r()),_=e.getOptions(_);var v=e.getImageWidth(i.modules.size,_),C=y.getContext("2d"),R=C.createImageData(v,v);return e.qrToImageData(R.data,i,_),n(C,y,v),C.putImageData(R,0,0),y},t.renderToDataURL=function(i,u,f){var _=f;typeof _>"u"&&(!u||!u.getContext)&&(_=u,u=void 0),_||(_={});var y=t.render(i,u,_),v=_.type||"image/png",C=_.rendererOpts||{};return y.toDataURL(v,C.quality)}})(yo);var bo={},Rc=er;function zr(t,e){var n=t.a/255,r=e+'="'+t.hex+'"';return n<1?r+" "+e+'-opacity="'+n.toFixed(2).slice(1)+'"':r}function bn(t,e,n){var r=t+e;return typeof n<"u"&&(r+=" "+n),r}function Tc(t,e,n){for(var r="",s=0,i=!1,u=0,f=0;f<t.length;f++){var _=Math.floor(f%e),y=Math.floor(f/e);!_&&!i&&(i=!0),t[f]?(u++,f>0&&_>0&&t[f-1]||(r+=i?bn("M",_+n,.5+y+n):bn("m",s,0),s=0,i=!1),_+1<e&&t[f+1]||(r+=bn("h",u),u=0)):s++}return r}bo.render=function(e,n,r){var s=Rc.getOptions(n),i=e.modules.size,u=e.modules.data,f=i+s.margin*2,_=s.color.light.a?"<path "+zr(s.color.light,"fill")+' d="M0 0h'+f+"v"+f+'H0z"/>':"",y="<path "+zr(s.color.dark,"stroke")+' d="'+Tc(u,i,s.margin)+'"/>',v='viewBox="0 0 '+f+" "+f+'"',C=s.width?'width="'+s.width+'" height="'+s.width+'" ':"",R='<svg xmlns="http://www.w3.org/2000/svg" '+C+v+' shape-rendering="crispEdges">'+_+y+`</svg>
`;return typeof r=="function"&&r(null,R),R};var Ic=Bl,Nn=ro,Mo=yo,Ac=bo;function tr(t,e,n,r,s){var i=[].slice.call(arguments,1),u=i.length,f=typeof i[u-1]=="function";if(!f&&!Ic())throw new Error("Callback required as last argument");if(f){if(u<2)throw new Error("Too few arguments provided");u===2?(s=n,n=e,e=r=void 0):u===3&&(e.getContext&&typeof s>"u"?(s=r,r=void 0):(s=r,r=n,n=e,e=void 0))}else{if(u<1)throw new Error("Too few arguments provided");return u===1?(n=e,e=r=void 0):u===2&&!e.getContext&&(r=n,n=e,e=void 0),new Promise(function(y,v){try{var C=Nn.create(n,r);y(t(C,e,r))}catch(R){v(R)}})}try{var _=Nn.create(n,r);s(null,t(_,e,r))}catch(y){s(y)}}mt.create=Nn.create;mt.toCanvas=tr.bind(null,Mo.render);mt.toDataURL=tr.bind(null,Mo.renderToDataURL);mt.toString=tr.bind(null,function(t,e,n){return Ac.render(t,n)});var Oc=function(){var t=document.getSelection();if(!t.rangeCount)return function(){};for(var e=document.activeElement,n=[],r=0;r<t.rangeCount;r++)n.push(t.getRangeAt(r));switch(e.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":e.blur();break;default:e=null;break}return t.removeAllRanges(),function(){t.type==="Caret"&&t.removeAllRanges(),t.rangeCount||n.forEach(function(s){t.addRange(s)}),e&&e.focus()}},Nc=Oc,jr={"text/plain":"Text","text/html":"Url",default:"Text"},Bc="Copy to clipboard: #{key}, Enter";function Lc(t){var e=(/mac os x/i.test(navigator.userAgent)?"\u2318":"Ctrl")+"+C";return t.replace(/#{\s*key\s*}/g,e)}function Pc(t,e){var n,r,s,i,u,f,_=!1;e||(e={}),n=e.debug||!1;try{s=Nc(),i=document.createRange(),u=document.getSelection(),f=document.createElement("span"),f.textContent=t,f.ariaHidden="true",f.style.all="unset",f.style.position="fixed",f.style.top=0,f.style.clip="rect(0, 0, 0, 0)",f.style.whiteSpace="pre",f.style.webkitUserSelect="text",f.style.MozUserSelect="text",f.style.msUserSelect="text",f.style.userSelect="text",f.addEventListener("copy",function(v){if(v.stopPropagation(),e.format)if(v.preventDefault(),typeof v.clipboardData>"u"){n&&console.warn("unable to use e.clipboardData"),n&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var C=jr[e.format]||jr.default;window.clipboardData.setData(C,t)}else v.clipboardData.clearData(),v.clipboardData.setData(e.format,t);e.onCopy&&(v.preventDefault(),e.onCopy(v.clipboardData))}),document.body.appendChild(f),i.selectNodeContents(f),u.addRange(i);var y=document.execCommand("copy");if(!y)throw new Error("copy command was unsuccessful");_=!0}catch(v){n&&console.error("unable to copy using execCommand: ",v),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(e.format||"text",t),e.onCopy&&e.onCopy(window.clipboardData),_=!0}catch(C){n&&console.error("unable to copy using clipboardData: ",C),n&&console.error("falling back to prompt"),r=Lc("message"in e?e.message:Bc),window.prompt(r,t)}}finally{u&&(typeof u.removeRange=="function"?u.removeRange(i):u.removeAllRanges()),f&&document.body.removeChild(f),s()}return _}var qc=Pc,U,ut,nr,Eo,Vr,rr,xo,Le={},zt=[],Uc=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord/i;function Be(t,e){for(var n in e)t[n]=e[n];return t}function So(t){var e=t.parentNode;e&&e.removeChild(t)}function qe(t,e,n){var r,s=arguments,i={};for(r in e)r!=="key"&&r!=="ref"&&(i[r]=e[r]);if(arguments.length>3)for(n=[n],r=3;r<arguments.length;r++)n.push(s[r]);if(n!=null&&(i.children=n),typeof t=="function"&&t.defaultProps!=null)for(r in t.defaultProps)i[r]===void 0&&(i[r]=t.defaultProps[r]);return Ot(t,i,e&&e.key,e&&e.ref,null)}function Ot(t,e,n,r,s){var i={type:t,props:e,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:s};return s==null&&(i.__v=i),U.vnode&&U.vnode(i),i}function Co(){return{}}function wt(t){return t.children}function Oe(t,e){this.props=t,this.context=e}function dt(t,e){if(e==null)return t.__?dt(t.__,t.__.__k.indexOf(t)+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?dt(t):null}function ko(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return ko(t)}}function St(t){(!t.__d&&(t.__d=!0)&&ut.push(t)&&!nr++||Vr!==U.debounceRendering)&&((Vr=U.debounceRendering)||Eo)(Dc)}function Dc(){for(var t;nr=ut.length;)t=ut.sort(function(e,n){return e.__v.__b-n.__v.__b}),ut=[],t.some(function(e){var n,r,s,i,u,f,_;e.__d&&(f=(u=(n=e).__v).__e,(_=n.__P)&&(r=[],(s=Be({},u)).__v=s,i=ir(_,u,s,n.__n,_.ownerSVGElement!==void 0,null,r,f??dt(u)),To(r,u),i!=f&&ko(u)))})}function Ro(t,e,n,r,s,i,u,f,_){var y,v,C,R,I,T,O,b=n&&n.__k||zt,E=b.length;if(f==Le&&(f=i!=null?i[0]:E?dt(n,0):null),y=0,e.__k=He(e.__k,function(S){if(S!=null){if(S.__=e,S.__b=e.__b+1,(C=b[y])===null||C&&S.key==C.key&&S.type===C.type)b[y]=void 0;else for(v=0;v<E;v++){if((C=b[v])&&S.key==C.key&&S.type===C.type){b[v]=void 0;break}C=null}if(R=ir(t,S,C=C||Le,r,s,i,u,f,_),(v=S.ref)&&C.ref!=v&&(O||(O=[]),C.ref&&O.push(C.ref,null,S),O.push(v,S.__c||R,S)),R!=null){var x;if(T==null&&(T=R),S.__d!==void 0)x=S.__d,S.__d=void 0;else if(i==C||R!=f||R.parentNode==null){e:if(f==null||f.parentNode!==t)t.appendChild(R),x=null;else{for(I=f,v=0;(I=I.nextSibling)&&v<E;v+=2)if(I==R)break e;t.insertBefore(R,f),x=f}e.type=="option"&&(t.value="")}f=x!==void 0?x:R.nextSibling,typeof e.type=="function"&&(e.__d=f)}else f&&C.__e==f&&f.parentNode!=t&&(f=dt(C))}return y++,S}),e.__e=T,i!=null&&typeof e.type!="function")for(y=i.length;y--;)i[y]!=null&&So(i[y]);for(y=E;y--;)b[y]!=null&&ht(b[y],b[y]);if(O)for(y=0;y<O.length;y++)Io(O[y],O[++y],O[++y])}function He(t,e,n){if(n==null&&(n=[]),t==null||typeof t=="boolean")e&&n.push(e(null));else if(Array.isArray(t))for(var r=0;r<t.length;r++)He(t[r],e,n);else n.push(e?e(typeof t=="string"||typeof t=="number"?Ot(null,t,null,null,t):t.__e!=null||t.__c!=null?Ot(t.type,t.props,t.key,null,t.__v):t):t);return n}function Hc(t,e,n,r,s){var i;for(i in n)i==="children"||i==="key"||i in e||Nt(t,i,null,n[i],r);for(i in e)s&&typeof e[i]!="function"||i==="children"||i==="key"||i==="value"||i==="checked"||n[i]===e[i]||Nt(t,i,e[i],n[i],r)}function Jr(t,e,n){e[0]==="-"?t.setProperty(e,n):t[e]=typeof n=="number"&&Uc.test(e)===!1?n+"px":n??""}function Nt(t,e,n,r,s){var i,u,f,_,y;if(s?e==="className"&&(e="class"):e==="class"&&(e="className"),e==="style")if(i=t.style,typeof n=="string")i.cssText=n;else{if(typeof r=="string"&&(i.cssText="",r=null),r)for(_ in r)n&&_ in n||Jr(i,_,"");if(n)for(y in n)r&&n[y]===r[y]||Jr(i,y,n[y])}else e[0]==="o"&&e[1]==="n"?(u=e!==(e=e.replace(/Capture$/,"")),f=e.toLowerCase(),e=(f in t?f:e).slice(2),n?(r||t.addEventListener(e,Kr,u),(t.l||(t.l={}))[e]=n):t.removeEventListener(e,Kr,u)):e!=="list"&&e!=="tagName"&&e!=="form"&&e!=="type"&&e!=="size"&&!s&&e in t?t[e]=n??"":typeof n!="function"&&e!=="dangerouslySetInnerHTML"&&(e!==(e=e.replace(/^xlink:?/,""))?n==null||n===!1?t.removeAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase()):t.setAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase(),n):n==null||n===!1&&!/^ar/.test(e)?t.removeAttribute(e):t.setAttribute(e,n))}function Kr(t){this.l[t.type](U.event?U.event(t):t)}function ir(t,e,n,r,s,i,u,f,_){var y,v,C,R,I,T,O,b,E,S,x=e.type;if(e.constructor!==void 0)return null;(y=U.__b)&&y(e);try{e:if(typeof x=="function"){if(b=e.props,E=(y=x.contextType)&&r[y.__c],S=y?E?E.props.value:y.__:r,n.__c?O=(v=e.__c=n.__c).__=v.__E:("prototype"in x&&x.prototype.render?e.__c=v=new x(b,S):(e.__c=v=new Oe(b,S),v.constructor=x,v.render=Fc),E&&E.sub(v),v.props=b,v.state||(v.state={}),v.context=S,v.__n=r,C=v.__d=!0,v.__h=[]),v.__s==null&&(v.__s=v.state),x.getDerivedStateFromProps!=null&&(v.__s==v.state&&(v.__s=Be({},v.__s)),Be(v.__s,x.getDerivedStateFromProps(b,v.__s))),R=v.props,I=v.state,C)x.getDerivedStateFromProps==null&&v.componentWillMount!=null&&v.componentWillMount(),v.componentDidMount!=null&&v.__h.push(v.componentDidMount);else{if(x.getDerivedStateFromProps==null&&b!==R&&v.componentWillReceiveProps!=null&&v.componentWillReceiveProps(b,S),!v.__e&&v.shouldComponentUpdate!=null&&v.shouldComponentUpdate(b,v.__s,S)===!1||e.__v===n.__v&&!v.__){for(v.props=b,v.state=v.__s,e.__v!==n.__v&&(v.__d=!1),v.__v=e,e.__e=n.__e,e.__k=n.__k,v.__h.length&&u.push(v),y=0;y<e.__k.length;y++)e.__k[y]&&(e.__k[y].__=e);break e}v.componentWillUpdate!=null&&v.componentWillUpdate(b,v.__s,S),v.componentDidUpdate!=null&&v.__h.push(function(){v.componentDidUpdate(R,I,T)})}v.context=S,v.props=b,v.state=v.__s,(y=U.__r)&&y(e),v.__d=!1,v.__v=e,v.__P=t,y=v.render(v.props,v.state,v.context),e.__k=y!=null&&y.type==wt&&y.key==null?y.props.children:Array.isArray(y)?y:[y],v.getChildContext!=null&&(r=Be(Be({},r),v.getChildContext())),C||v.getSnapshotBeforeUpdate==null||(T=v.getSnapshotBeforeUpdate(R,I)),Ro(t,e,n,r,s,i,u,f,_),v.base=e.__e,v.__h.length&&u.push(v),O&&(v.__E=v.__=null),v.__e=!1}else i==null&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=$c(n.__e,e,n,r,s,i,u,_);(y=U.diffed)&&y(e)}catch(k){e.__v=null,U.__e(k,e,n)}return e.__e}function To(t,e){U.__c&&U.__c(e,t),t.some(function(n){try{t=n.__h,n.__h=[],t.some(function(r){r.call(n)})}catch(r){U.__e(r,n.__v)}})}function $c(t,e,n,r,s,i,u,f){var _,y,v,C,R,I=n.props,T=e.props;if(s=e.type==="svg"||s,i!=null){for(_=0;_<i.length;_++)if((y=i[_])!=null&&((e.type===null?y.nodeType===3:y.localName===e.type)||t==y)){t=y,i[_]=null;break}}if(t==null){if(e.type===null)return document.createTextNode(T);t=s?document.createElementNS("http://www.w3.org/2000/svg",e.type):document.createElement(e.type,T.is&&{is:T.is}),i=null,f=!1}if(e.type===null)I!==T&&t.data!=T&&(t.data=T);else{if(i!=null&&(i=zt.slice.call(t.childNodes)),v=(I=n.props||Le).dangerouslySetInnerHTML,C=T.dangerouslySetInnerHTML,!f){if(I===Le)for(I={},R=0;R<t.attributes.length;R++)I[t.attributes[R].name]=t.attributes[R].value;(C||v)&&(C&&v&&C.__html==v.__html||(t.innerHTML=C&&C.__html||""))}Hc(t,T,I,s,f),C?e.__k=[]:(e.__k=e.props.children,Ro(t,e,n,r,e.type!=="foreignObject"&&s,i,u,Le,f)),f||("value"in T&&(_=T.value)!==void 0&&_!==t.value&&Nt(t,"value",_,I.value,!1),"checked"in T&&(_=T.checked)!==void 0&&_!==t.checked&&Nt(t,"checked",_,I.checked,!1))}return t}function Io(t,e,n){try{typeof t=="function"?t(e):t.current=e}catch(r){U.__e(r,n)}}function ht(t,e,n){var r,s,i;if(U.unmount&&U.unmount(t),(r=t.ref)&&(r.current&&r.current!==t.__e||Io(r,null,e)),n||typeof t.type=="function"||(n=(s=t.__e)!=null),t.__e=t.__d=void 0,(r=t.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(u){U.__e(u,e)}r.base=r.__P=null}if(r=t.__k)for(i=0;i<r.length;i++)r[i]&&ht(r[i],e,n);s!=null&&So(s)}function Fc(t,e,n){return this.constructor(t,n)}function pt(t,e,n){var r,s,i;U.__&&U.__(t,e),s=(r=n===rr)?null:n&&n.__k||e.__k,t=qe(wt,null,[t]),i=[],ir(e,(r?e:n||e).__k=t,s||Le,Le,e.ownerSVGElement!==void 0,n&&!r?[n]:s?null:zt.slice.call(e.childNodes),i,n||Le,r),To(i,t)}function Ao(t,e){pt(t,e,rr)}function Wc(t,e){var n,r;for(r in e=Be(Be({},t.props),e),arguments.length>2&&(e.children=zt.slice.call(arguments,2)),n={},e)r!=="key"&&r!=="ref"&&(n[r]=e[r]);return Ot(t.type,n,e.key||t.key,e.ref||t.ref,null)}function Oo(t){var e={},n={__c:"__cC"+xo++,__:t,Consumer:function(r,s){return r.children(s)},Provider:function(r){var s,i=this;return this.getChildContext||(s=[],this.getChildContext=function(){return e[n.__c]=i,e},this.shouldComponentUpdate=function(u){i.props.value!==u.value&&s.some(function(f){f.context=u.value,St(f)})},this.sub=function(u){s.push(u);var f=u.componentWillUnmount;u.componentWillUnmount=function(){s.splice(s.indexOf(u),1),f&&f.call(u)}}),r.children}};return n.Consumer.contextType=n,n.Provider.__=n,n}U={__e:function(t,e){for(var n,r;e=e.__;)if((n=e.__c)&&!n.__)try{if(n.constructor&&n.constructor.getDerivedStateFromError!=null&&(r=!0,n.setState(n.constructor.getDerivedStateFromError(t))),n.componentDidCatch!=null&&(r=!0,n.componentDidCatch(t)),r)return St(n.__E=n)}catch(s){t=s}throw t}},Oe.prototype.setState=function(t,e){var n;n=this.__s!==this.state?this.__s:this.__s=Be({},this.state),typeof t=="function"&&(t=t(n,this.props)),t&&Be(n,t),t!=null&&this.__v&&(e&&this.__h.push(e),St(this))},Oe.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),St(this))},Oe.prototype.render=wt,ut=[],nr=0,Eo=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,rr=Le,xo=0;var Je,Ie,Gr,rt=0,Bn=[],Qr=U.__r,Yr=U.diffed,Xr=U.__c,Zr=U.unmount;function st(t,e){U.__h&&U.__h(Ie,t,rt||e),rt=0;var n=Ie.__H||(Ie.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function or(t){return rt=1,sr(Do,t)}function sr(t,e,n){var r=st(Je++,2);return r.__c||(r.__c=Ie,r.__=[n?n(e):Do(void 0,e),function(s){var i=t(r.__[0],s);r.__[0]!==i&&(r.__[0]=i,r.__c.setState({}))}]),r.__}function No(t,e){var n=st(Je++,3);!U.__s&&lr(n.__H,e)&&(n.__=t,n.__H=e,Ie.__H.__h.push(n))}function ar(t,e){var n=st(Je++,4);!U.__s&&lr(n.__H,e)&&(n.__=t,n.__H=e,Ie.__h.push(n))}function Bo(t){return rt=5,jt(function(){return{current:t}},[])}function Lo(t,e,n){rt=6,ar(function(){typeof t=="function"?t(e()):t&&(t.current=e())},n==null?n:n.concat(t))}function jt(t,e){var n=st(Je++,7);return lr(n.__H,e)?(n.__H=e,n.__h=t,n.__=t()):n.__}function Po(t,e){return rt=8,jt(function(){return t},e)}function qo(t){var e=Ie.context[t.__c],n=st(Je++,9);return n.__c=t,e?(n.__==null&&(n.__=!0,e.sub(Ie)),e.props.value):t.__}function Uo(t,e){U.useDebugValue&&U.useDebugValue(e?e(t):t)}function zc(t){var e=st(Je++,10),n=or();return e.__=t,Ie.componentDidCatch||(Ie.componentDidCatch=function(r){e.__&&e.__(r),n[1](r)}),[n[0],function(){n[1](void 0)}]}function jc(){Bn.some(function(t){if(t.__P)try{t.__H.__h.forEach(Ln),t.__H.__h.forEach(Pn),t.__H.__h=[]}catch(e){return t.__H.__h=[],U.__e(e,t.__v),!0}}),Bn=[]}function Ln(t){t.t&&t.t()}function Pn(t){var e=t.__();typeof e=="function"&&(t.t=e)}function lr(t,e){return!t||e.some(function(n,r){return n!==t[r]})}function Do(t,e){return typeof e=="function"?e(t):e}U.__r=function(t){Qr&&Qr(t),Je=0,(Ie=t.__c).__H&&(Ie.__H.__h.forEach(Ln),Ie.__H.__h.forEach(Pn),Ie.__H.__h=[])},U.diffed=function(t){Yr&&Yr(t);var e=t.__c;if(e){var n=e.__H;n&&n.__h.length&&(Bn.push(e)!==1&&Gr===U.requestAnimationFrame||((Gr=U.requestAnimationFrame)||function(r){var s,i=function(){clearTimeout(u),cancelAnimationFrame(s),setTimeout(r)},u=setTimeout(i,100);typeof window<"u"&&(s=requestAnimationFrame(i))})(jc))}},U.__c=function(t,e){e.some(function(n){try{n.__h.forEach(Ln),n.__h=n.__h.filter(function(r){return!r.__||Pn(r)})}catch(r){e.some(function(s){s.__h&&(s.__h=[])}),e=[],U.__e(r,n.__v)}}),Xr&&Xr(t,e)},U.unmount=function(t){Zr&&Zr(t);var e=t.__c;if(e){var n=e.__H;if(n)try{n.__.forEach(function(r){return r.t&&r.t()})}catch(r){U.__e(r,e.__v)}}};function cr(t,e){for(var n in e)t[n]=e[n];return t}function qn(t,e){for(var n in t)if(n!=="__source"&&!(n in e))return!0;for(var r in e)if(r!=="__source"&&t[r]!==e[r])return!0;return!1}var Ho=function(t){var e,n;function r(s){var i;return(i=t.call(this,s)||this).isPureReactComponent=!0,i}return n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n,r.prototype.shouldComponentUpdate=function(s,i){return qn(this.props,s)||qn(this.state,i)},r}(Oe);function $o(t,e){function n(s){var i=this.props.ref,u=i==s.ref;return!u&&i&&(i.call?i(null):i.current=null),e?!e(this.props,s)||!u:qn(this.props,s)}function r(s){return this.shouldComponentUpdate=n,qe(t,cr({},s))}return r.prototype.isReactComponent=!0,r.displayName="Memo("+(t.displayName||t.name)+")",r.t=!0,r}var ei=U.__b;function Fo(t){function e(n){var r=cr({},n);return delete r.ref,t(r,n.ref)}return e.prototype.isReactComponent=e.t=!0,e.displayName="ForwardRef("+(t.displayName||t.name)+")",e}U.__b=function(t){t.type&&t.type.t&&t.ref&&(t.props.ref=t.ref,t.ref=null),ei&&ei(t)};var ti=function(t,e){return t?He(t).reduce(function(n,r,s){return n.concat(e(r,s))},[]):null},Wo={map:ti,forEach:ti,count:function(t){return t?He(t).length:0},only:function(t){if((t=He(t)).length!==1)throw new Error("Children.only() expects only one child.");return t[0]},toArray:He},Vc=U.__e;function zo(t){return t&&((t=cr({},t)).__c=null,t.__k=t.__k&&t.__k.map(zo)),t}function Bt(){this.__u=0,this.o=null,this.__b=null}function jo(t){var e=t.__.__c;return e&&e.u&&e.u(t)}function Vo(t){var e,n,r;function s(i){if(e||(e=t()).then(function(u){n=u.default||u},function(u){r=u}),r)throw r;if(!n)throw e;return qe(n,i)}return s.displayName="Lazy",s.t=!0,s}function Ke(){this.i=null,this.l=null}U.__e=function(t,e,n){if(t.then){for(var r,s=e;s=s.__;)if((r=s.__c)&&r.__c)return r.__c(t,e.__c)}Vc(t,e,n)},(Bt.prototype=new Oe).__c=function(t,e){var n=this;n.o==null&&(n.o=[]),n.o.push(e);var r=jo(n.__v),s=!1,i=function(){s||(s=!0,r?r(u):u())};e.__c=e.componentWillUnmount,e.componentWillUnmount=function(){i(),e.__c&&e.__c()};var u=function(){var f;if(!--n.__u)for(n.__v.__k[0]=n.state.u,n.setState({u:n.__b=null});f=n.o.pop();)f.forceUpdate()};n.__u++||n.setState({u:n.__b=n.__v.__k[0]}),t.then(i,i)},Bt.prototype.render=function(t,e){return this.__b&&(this.__v.__k[0]=zo(this.__b),this.__b=null),[qe(Oe,null,e.u?null:t.children),e.u&&t.fallback]};var ni=function(t,e,n){if(++n[1]===n[0]&&t.l.delete(e),t.props.revealOrder&&(t.props.revealOrder[0]!=="t"||!t.l.size))for(n=t.i;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;t.i=n=n[2]}};(Ke.prototype=new Oe).u=function(t){var e=this,n=jo(e.__v),r=e.l.get(t);return r[0]++,function(s){var i=function(){e.props.revealOrder?(r.push(s),ni(e,t,r)):s()};n?n(i):i()}},Ke.prototype.render=function(t){this.i=null,this.l=new Map;var e=He(t.children);t.revealOrder&&t.revealOrder[0]==="b"&&e.reverse();for(var n=e.length;n--;)this.l.set(e[n],this.i=[1,0,this.i]);return t.children},Ke.prototype.componentDidUpdate=Ke.prototype.componentDidMount=function(){var t=this;t.l.forEach(function(e,n){ni(t,n,e)})};var Jc=function(){function t(){}var e=t.prototype;return e.getChildContext=function(){return this.props.context},e.render=function(n){return n.children},t}();function Kc(t){var e=this,n=t.container,r=qe(Jc,{context:e.context},t.vnode);return e.s&&e.s!==n&&(e.v.parentNode&&e.s.removeChild(e.v),ht(e.h),e.p=!1),t.vnode?e.p?(n.__k=e.__k,pt(r,n),e.__k=n.__k):(e.v=document.createTextNode(""),Ao("",n),n.appendChild(e.v),e.p=!0,e.s=n,pt(r,n,e.v),e.__k=e.v.__k):e.p&&(e.v.parentNode&&e.s.removeChild(e.v),ht(e.h)),e.h=r,e.componentWillUnmount=function(){e.v.parentNode&&e.s.removeChild(e.v),ht(e.h)},null}function Jo(t,e){return qe(Kc,{vnode:t,container:e})}var ri=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/;Oe.prototype.isReactComponent={};var Ko=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103;function Un(t,e,n){if(e.__k==null)for(;e.firstChild;)e.removeChild(e.firstChild);return pt(t,e),typeof n=="function"&&n(),t?t.__c:null}function Gc(t,e,n){return Ao(t,e),typeof n=="function"&&n(),t?t.__c:null}var ii=U.event;function Mn(t,e){t["UNSAFE_"+e]&&!t[e]&&Object.defineProperty(t,e,{configurable:!1,get:function(){return this["UNSAFE_"+e]},set:function(n){this["UNSAFE_"+e]=n}})}U.event=function(t){ii&&(t=ii(t)),t.persist=function(){};var e=!1,n=!1,r=t.stopPropagation;t.stopPropagation=function(){r.call(t),e=!0};var s=t.preventDefault;return t.preventDefault=function(){s.call(t),n=!0},t.isPropagationStopped=function(){return e},t.isDefaultPrevented=function(){return n},t.nativeEvent=t};var oi={configurable:!0,get:function(){return this.class}},si=U.vnode;U.vnode=function(t){t.$$typeof=Ko;var e=t.type,n=t.props;if(e){if(n.class!=n.className&&(oi.enumerable="className"in n,n.className!=null&&(n.class=n.className),Object.defineProperty(n,"className",oi)),typeof e!="function"){var r,s,i;for(i in n.defaultValue&&n.value!==void 0&&(n.value||n.value===0||(n.value=n.defaultValue),delete n.defaultValue),Array.isArray(n.value)&&n.multiple&&e==="select"&&(He(n.children).forEach(function(u){n.value.indexOf(u.props.value)!=-1&&(u.props.selected=!0)}),delete n.value),n)if(r=ri.test(i))break;if(r)for(i in s=t.props={},n)s[ri.test(i)?i.replace(/[A-Z0-9]/,"-$&").toLowerCase():i]=n[i]}(function(u){var f=t.type,_=t.props;if(_&&typeof f=="string"){var y={};for(var v in _)/^on(Ani|Tra|Tou)/.test(v)&&(_[v.toLowerCase()]=_[v],delete _[v]),y[v.toLowerCase()]=v;if(y.ondoubleclick&&(_.ondblclick=_[y.ondoubleclick],delete _[y.ondoubleclick]),y.onbeforeinput&&(_.onbeforeinput=_[y.onbeforeinput],delete _[y.onbeforeinput]),y.onchange&&(f==="textarea"||f.toLowerCase()==="input"&&!/^fil|che|ra/i.test(_.type))){var C=y.oninput||"oninput";_[C]||(_[C]=_[y.onchange],delete _[y.onchange])}}})(),typeof e=="function"&&!e.m&&e.prototype&&(Mn(e.prototype,"componentWillMount"),Mn(e.prototype,"componentWillReceiveProps"),Mn(e.prototype,"componentWillUpdate"),e.m=!0)}si&&si(t)};var Qc="16.8.0";function Go(t){return qe.bind(null,t)}function ur(t){return!!t&&t.$$typeof===Ko}function Qo(t){return ur(t)?Wc.apply(null,arguments):t}function Yo(t){return!!t.__k&&(pt(null,t),!0)}function Xo(t){return t&&(t.base||t.nodeType===1&&t)||null}var Zo=function(t,e){return t(e)};const Yc={useState:or,useReducer:sr,useEffect:No,useLayoutEffect:ar,useRef:Bo,useImperativeHandle:Lo,useMemo:jt,useCallback:Po,useContext:qo,useDebugValue:Uo,version:"16.8.0",Children:Wo,render:Un,hydrate:Un,unmountComponentAtNode:Yo,createPortal:Jo,createElement:qe,createContext:Oo,createFactory:Go,cloneElement:Qo,createRef:Co,Fragment:wt,isValidElement:ur,findDOMNode:Xo,Component:Oe,PureComponent:Ho,memo:$o,forwardRef:Fo,unstable_batchedUpdates:Zo,Suspense:Bt,SuspenseList:Ke,lazy:Vo},Xc=Object.freeze(Object.defineProperty({__proto__:null,default:Yc,version:Qc,Children:Wo,render:Un,hydrate:Gc,unmountComponentAtNode:Yo,createPortal:Jo,createFactory:Go,cloneElement:Qo,isValidElement:ur,findDOMNode:Xo,PureComponent:Ho,memo:$o,forwardRef:Fo,unstable_batchedUpdates:Zo,Suspense:Bt,SuspenseList:Ke,lazy:Vo,createElement:qe,createContext:Oo,createRef:Co,Fragment:wt,Component:Oe,useState:or,useReducer:sr,useEffect:No,useLayoutEffect:ar,useRef:Bo,useImperativeHandle:Lo,useMemo:jt,useCallback:Po,useContext:qo,useDebugValue:Uo,useErrorBoundary:zc},Symbol.toStringTag,{value:"Module"})),Zc=di(Xc);function es(t){return t&&typeof t=="object"&&"default"in t?t.default:t}var Te=Nl,ts=es(mt),eu=es(qc),A=Zc;function tu(t){ts.toString(t,{type:"terminal"}).then(console.log)}var nu=`:root {
  --animation-duration: 300ms;
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes fadeOut {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
}

.animated {
  animation-duration: var(--animation-duration);
  animation-fill-mode: both;
}

.fadeIn {
  animation-name: fadeIn;
}

.fadeOut {
  animation-name: fadeOut;
}

#walletconnect-wrapper {
  -webkit-user-select: none;
  align-items: center;
  display: flex;
  height: 100%;
  justify-content: center;
  left: 0;
  pointer-events: none;
  position: fixed;
  top: 0;
  user-select: none;
  width: 100%;
  z-index: 99999999999999;
}

.walletconnect-modal__headerLogo {
  height: 21px;
}

.walletconnect-modal__header p {
  color: #ffffff;
  font-size: 20px;
  font-weight: 600;
  margin: 0;
  align-items: flex-start;
  display: flex;
  flex: 1;
  margin-left: 5px;
}

.walletconnect-modal__close__wrapper {
  position: absolute;
  top: 0px;
  right: 0px;
  z-index: 10000;
  background: white;
  border-radius: 26px;
  padding: 6px;
  box-sizing: border-box;
  width: 26px;
  height: 26px;
  cursor: pointer;
}

.walletconnect-modal__close__icon {
  position: relative;
  top: 7px;
  right: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  transform: rotate(45deg);
}

.walletconnect-modal__close__line1 {
  position: absolute;
  width: 100%;
  border: 1px solid rgb(48, 52, 59);
}

.walletconnect-modal__close__line2 {
  position: absolute;
  width: 100%;
  border: 1px solid rgb(48, 52, 59);
  transform: rotate(90deg);
}

.walletconnect-qrcode__base {
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
  background: rgba(37, 41, 46, 0.95);
  height: 100%;
  left: 0;
  pointer-events: auto;
  position: fixed;
  top: 0;
  transition: 0.4s cubic-bezier(0.19, 1, 0.22, 1);
  width: 100%;
  will-change: opacity;
  padding: 40px;
  box-sizing: border-box;
}

.walletconnect-qrcode__text {
  color: rgba(60, 66, 82, 0.6);
  font-size: 16px;
  font-weight: 600;
  letter-spacing: 0;
  line-height: 1.1875em;
  margin: 10px 0 20px 0;
  text-align: center;
  width: 100%;
}

@media only screen and (max-width: 768px) {
  .walletconnect-qrcode__text {
    font-size: 4vw;
  }
}

@media only screen and (max-width: 320px) {
  .walletconnect-qrcode__text {
    font-size: 14px;
  }
}

.walletconnect-qrcode__image {
  width: calc(100% - 30px);
  box-sizing: border-box;
  cursor: none;
  margin: 0 auto;
}

.walletconnect-qrcode__notification {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  font-size: 16px;
  padding: 16px 20px;
  border-radius: 16px;
  text-align: center;
  transition: all 0.1s ease-in-out;
  background: white;
  color: black;
  margin-bottom: -60px;
  opacity: 0;
}

.walletconnect-qrcode__notification.notification__show {
  opacity: 1;
}

@media only screen and (max-width: 768px) {
  .walletconnect-modal__header {
    height: 130px;
  }
  .walletconnect-modal__base {
    overflow: auto;
  }
}

@media only screen and (min-device-width: 415px) and (max-width: 768px) {
  #content {
    max-width: 768px;
    box-sizing: border-box;
  }
}

@media only screen and (min-width: 375px) and (max-width: 415px) {
  #content {
    max-width: 414px;
    box-sizing: border-box;
  }
}

@media only screen and (min-width: 320px) and (max-width: 375px) {
  #content {
    max-width: 375px;
    box-sizing: border-box;
  }
}

@media only screen and (max-width: 320px) {
  #content {
    max-width: 320px;
    box-sizing: border-box;
  }
}

.walletconnect-modal__base {
  -webkit-font-smoothing: antialiased;
  background: #ffffff;
  border-radius: 24px;
  box-shadow: 0 10px 50px 5px rgba(0, 0, 0, 0.4);
  font-family: ui-rounded, "SF Pro Rounded", "SF Pro Text", medium-content-sans-serif-font,
    -apple-system, BlinkMacSystemFont, ui-sans-serif, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell,
    "Open Sans", "Helvetica Neue", sans-serif;
  margin-top: 41px;
  padding: 24px 24px 22px;
  pointer-events: auto;
  position: relative;
  text-align: center;
  transition: 0.4s cubic-bezier(0.19, 1, 0.22, 1);
  will-change: transform;
  overflow: visible;
  transform: translateY(-50%);
  top: 50%;
  max-width: 500px;
  margin: auto;
}

@media only screen and (max-width: 320px) {
  .walletconnect-modal__base {
    padding: 24px 12px;
  }
}

.walletconnect-modal__base .hidden {
  transform: translateY(150%);
  transition: 0.125s cubic-bezier(0.4, 0, 1, 1);
}

.walletconnect-modal__header {
  align-items: center;
  display: flex;
  height: 26px;
  left: 0;
  justify-content: space-between;
  position: absolute;
  top: -42px;
  width: 100%;
}

.walletconnect-modal__base .wc-logo {
  align-items: center;
  display: flex;
  height: 26px;
  margin-top: 15px;
  padding-bottom: 15px;
  pointer-events: auto;
}

.walletconnect-modal__base .wc-logo div {
  background-color: #3399ff;
  height: 21px;
  margin-right: 5px;
  mask-image: url("images/wc-logo.svg") center no-repeat;
  width: 32px;
}

.walletconnect-modal__base .wc-logo p {
  color: #ffffff;
  font-size: 20px;
  font-weight: 600;
  margin: 0;
}

.walletconnect-modal__base h2 {
  color: rgba(60, 66, 82, 0.6);
  font-size: 16px;
  font-weight: 600;
  letter-spacing: 0;
  line-height: 1.1875em;
  margin: 0 0 19px 0;
  text-align: center;
  width: 100%;
}

.walletconnect-modal__base__row {
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
  align-items: center;
  border-radius: 20px;
  cursor: pointer;
  display: flex;
  height: 56px;
  justify-content: space-between;
  padding: 0 15px;
  position: relative;
  margin: 0px 0px 8px;
  text-align: left;
  transition: 0.15s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  will-change: transform;
  text-decoration: none;
}

.walletconnect-modal__base__row:hover {
  background: rgba(60, 66, 82, 0.06);
}

.walletconnect-modal__base__row:active {
  background: rgba(60, 66, 82, 0.06);
  transform: scale(0.975);
  transition: 0.1s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

.walletconnect-modal__base__row__h3 {
  color: #25292e;
  font-size: 20px;
  font-weight: 700;
  margin: 0;
  padding-bottom: 3px;
}

.walletconnect-modal__base__row__right {
  align-items: center;
  display: flex;
  justify-content: center;
}

.walletconnect-modal__base__row__right__app-icon {
  border-radius: 8px;
  height: 34px;
  margin: 0 11px 2px 0;
  width: 34px;
  background-size: 100%;
  box-shadow: 0 4px 12px 0 rgba(37, 41, 46, 0.25);
}

.walletconnect-modal__base__row__right__caret {
  height: 18px;
  opacity: 0.3;
  transition: 0.1s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  width: 8px;
  will-change: opacity;
}

.walletconnect-modal__base__row:hover .caret,
.walletconnect-modal__base__row:active .caret {
  opacity: 0.6;
}

.walletconnect-modal__mobile__toggle {
  width: 80%;
  display: flex;
  margin: 0 auto;
  position: relative;
  overflow: hidden;
  border-radius: 8px;
  margin-bottom: 18px;
  background: #d4d5d9;
}

.walletconnect-modal__single_wallet {
  display: flex;
  justify-content: center;
  margin-top: 7px;
  margin-bottom: 18px;
}

.walletconnect-modal__single_wallet a {
  cursor: pointer;
  color: rgb(64, 153, 255);
  font-size: 21px;
  font-weight: 800;
  text-decoration: none !important;
  margin: 0 auto;
}

.walletconnect-modal__mobile__toggle_selector {
  width: calc(50% - 8px);
  background: white;
  position: absolute;
  border-radius: 5px;
  height: calc(100% - 8px);
  top: 4px;
  transition: all 0.2s ease-in-out;
  transform: translate3d(4px, 0, 0);
}

.walletconnect-modal__mobile__toggle.right__selected .walletconnect-modal__mobile__toggle_selector {
  transform: translate3d(calc(100% + 12px), 0, 0);
}

.walletconnect-modal__mobile__toggle a {
  font-size: 12px;
  width: 50%;
  text-align: center;
  padding: 8px;
  margin: 0;
  font-weight: 600;
  z-index: 1;
}

.walletconnect-modal__footer {
  display: flex;
  justify-content: center;
  margin-top: 20px;
}

@media only screen and (max-width: 768px) {
  .walletconnect-modal__footer {
    margin-top: 5vw;
  }
}

.walletconnect-modal__footer a {
  cursor: pointer;
  color: #898d97;
  font-size: 15px;
  margin: 0 auto;
}

@media only screen and (max-width: 320px) {
  .walletconnect-modal__footer a {
    font-size: 14px;
  }
}

.walletconnect-connect__buttons__wrapper {
  max-height: 44vh;
}

.walletconnect-connect__buttons__wrapper__android {
  margin: 50% 0;
}

.walletconnect-connect__buttons__wrapper__wrap {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  margin: 10px 0;
}

@media only screen and (min-width: 768px) {
  .walletconnect-connect__buttons__wrapper__wrap {
    margin-top: 40px;
  }
}

.walletconnect-connect__button {
  background-color: rgb(64, 153, 255);
  padding: 12px;
  border-radius: 8px;
  text-decoration: none;
  color: rgb(255, 255, 255);
  font-weight: 500;
}

.walletconnect-connect__button__icon_anchor {
  cursor: pointer;
  display: flex;
  justify-content: flex-start;
  align-items: center;
  margin: 8px;
  width: 42px;
  justify-self: center;
  flex-direction: column;
  text-decoration: none !important;
}

@media only screen and (max-width: 320px) {
  .walletconnect-connect__button__icon_anchor {
    margin: 4px;
  }
}

.walletconnect-connect__button__icon {
  border-radius: 10px;
  height: 42px;
  margin: 0;
  width: 42px;
  background-size: cover !important;
  box-shadow: 0 4px 12px 0 rgba(37, 41, 46, 0.25);
}

.walletconnect-connect__button__text {
  color: #424952;
  font-size: 2.7vw;
  text-decoration: none !important;
  padding: 0;
  margin-top: 1.8vw;
  font-weight: 600;
}

@media only screen and (min-width: 768px) {
  .walletconnect-connect__button__text {
    font-size: 16px;
    margin-top: 12px;
  }
}

.walletconnect-search__input {
  border: none;
  background: #d4d5d9;
  border-style: none;
  padding: 8px 16px;
  outline: none;
  font-style: normal;
  font-stretch: normal;
  font-size: 16px;
  font-style: normal;
  font-stretch: normal;
  line-height: normal;
  letter-spacing: normal;
  text-align: left;
  border-radius: 8px;
  width: calc(100% - 16px);
  margin: 0;
  margin-bottom: 8px;
}
`;typeof Symbol<"u"&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")));typeof Symbol<"u"&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));function ru(t,e){try{var n=t()}catch(r){return e(r)}return n&&n.then?n.then(void 0,e):n}var iu="data:image/svg+xml,%3Csvg height='185' viewBox='0 0 300 185' width='300' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='m61.4385429 36.2562612c48.9112241-47.8881663 128.2119871-47.8881663 177.1232091 0l5.886545 5.7634174c2.445561 2.3944081 2.445561 6.2765112 0 8.6709204l-20.136695 19.715503c-1.222781 1.1972051-3.2053 1.1972051-4.428081 0l-8.100584-7.9311479c-34.121692-33.4079817-89.443886-33.4079817-123.5655788 0l-8.6750562 8.4936051c-1.2227816 1.1972041-3.205301 1.1972041-4.4280806 0l-20.1366949-19.7155031c-2.4455612-2.3944092-2.4455612-6.2765122 0-8.6709204zm218.7677961 40.7737449 17.921697 17.546897c2.445549 2.3943969 2.445563 6.2764769.000031 8.6708899l-80.810171 79.121134c-2.445544 2.394426-6.410582 2.394453-8.85616.000062-.00001-.00001-.000022-.000022-.000032-.000032l-57.354143-56.154572c-.61139-.598602-1.60265-.598602-2.21404 0-.000004.000004-.000007.000008-.000011.000011l-57.3529212 56.154531c-2.4455368 2.394432-6.4105755 2.394472-8.8561612.000087-.0000143-.000014-.0000296-.000028-.0000449-.000044l-80.81241943-79.122185c-2.44556021-2.394408-2.44556021-6.2765115 0-8.6709197l17.92172963-17.5468673c2.4455602-2.3944082 6.4105989-2.3944082 8.8561602 0l57.3549775 56.155357c.6113908.598602 1.602649.598602 2.2140398 0 .0000092-.000009.0000174-.000017.0000265-.000024l57.3521031-56.155333c2.445505-2.3944633 6.410544-2.3945531 8.856161-.0002.000034.0000336.000068.0000673.000101.000101l57.354902 56.155432c.61139.598601 1.60265.598601 2.21404 0l57.353975-56.1543249c2.445561-2.3944092 6.410599-2.3944092 8.85616 0z' fill='%233b99fc'/%3E%3C/svg%3E",ou="WalletConnect",su=300,au="rgb(64, 153, 255)",ns="walletconnect-wrapper",ai="walletconnect-style-sheet",rs="walletconnect-qrcode-modal",lu="walletconnect-qrcode-close",is="walletconnect-qrcode-text",cu="walletconnect-connect-button";function uu(t){return A.createElement("div",{className:"walletconnect-modal__header"},A.createElement("img",{src:iu,className:"walletconnect-modal__headerLogo"}),A.createElement("p",null,ou),A.createElement("div",{className:"walletconnect-modal__close__wrapper",onClick:t.onClose},A.createElement("div",{id:lu,className:"walletconnect-modal__close__icon"},A.createElement("div",{className:"walletconnect-modal__close__line1"}),A.createElement("div",{className:"walletconnect-modal__close__line2"}))))}function hu(t){return A.createElement("a",{className:"walletconnect-connect__button",href:t.href,id:cu+"-"+t.name,onClick:t.onClick,rel:"noopener noreferrer",style:{backgroundColor:t.color},target:"_blank"},t.name)}var fu="data:image/svg+xml,%3Csvg fill='none' height='18' viewBox='0 0 8 18' width='8' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath clip-rule='evenodd' d='m.586301.213898c-.435947.33907-.5144813.967342-.175411 1.403292l4.87831 6.27212c.28087.36111.28087.86677 0 1.22788l-4.878311 6.27211c-.33907.436-.260536 1.0642.175412 1.4033.435949.3391 1.064219.2605 1.403289-.1754l4.87832-6.2721c.84259-1.08336.84259-2.60034 0-3.68367l-4.87832-6.27212c-.33907-.4359474-.96734-.514482-1.403289-.175412z' fill='%233c4252' fill-rule='evenodd'/%3E%3C/svg%3E";function du(t){var e=t.color,n=t.href,r=t.name,s=t.logo,i=t.onClick;return A.createElement("a",{className:"walletconnect-modal__base__row",href:n,onClick:i,rel:"noopener noreferrer",target:"_blank"},A.createElement("h3",{className:"walletconnect-modal__base__row__h3"},r),A.createElement("div",{className:"walletconnect-modal__base__row__right"},A.createElement("div",{className:"walletconnect-modal__base__row__right__app-icon",style:{background:"url('"+s+"') "+e,backgroundSize:"100%"}}),A.createElement("img",{src:fu,className:"walletconnect-modal__base__row__right__caret"})))}function pu(t){var e=t.color,n=t.href,r=t.name,s=t.logo,i=t.onClick,u=window.innerWidth<768?(r.length>8?2.5:2.7)+"vw":"inherit";return A.createElement("a",{className:"walletconnect-connect__button__icon_anchor",href:n,onClick:i,rel:"noopener noreferrer",target:"_blank"},A.createElement("div",{className:"walletconnect-connect__button__icon",style:{background:"url('"+s+"') "+e,backgroundSize:"100%"}}),A.createElement("div",{style:{fontSize:u},className:"walletconnect-connect__button__text"},r))}var gu=5,En=12;function _u(t){var e=Te.isAndroid(),n=A.useState(""),r=n[0],s=n[1],i=A.useState(""),u=i[0],f=i[1],_=A.useState(1),y=_[0],v=_[1],C=u?t.links.filter(function(k){return k.name.toLowerCase().includes(u.toLowerCase())}):t.links,R=t.errorMessage,I=u||C.length>gu,T=Math.ceil(C.length/En),O=[(y-1)*En+1,y*En],b=C.length?C.filter(function(k,L){return L+1>=O[0]&&L+1<=O[1]}):[],E=!e&&T>1,S=void 0;function x(k){s(k.target.value),clearTimeout(S),k.target.value?S=setTimeout(function(){f(k.target.value),v(1)},1e3):(s(""),f(""),v(1))}return A.createElement("div",null,A.createElement("p",{id:is,className:"walletconnect-qrcode__text"},e?t.text.connect_mobile_wallet:t.text.choose_preferred_wallet),!e&&A.createElement("input",{className:"walletconnect-search__input",placeholder:"Search",value:r,onChange:x}),A.createElement("div",{className:"walletconnect-connect__buttons__wrapper"+(e?"__android":I&&C.length?"__wrap":"")},e?A.createElement(hu,{name:t.text.connect,color:au,href:t.uri,onClick:A.useCallback(function(){Te.saveMobileLinkInfo({name:"Unknown",href:t.uri})},[])}):b.length?b.map(function(k){var L=k.color,N=k.name,H=k.shortName,D=k.logo,K=Te.formatIOSMobile(t.uri,k),m=A.useCallback(function(){Te.saveMobileLinkInfo({name:N,href:K})},[b]);return I?A.createElement(pu,{color:L,href:K,name:H||N,logo:D,onClick:m}):A.createElement(du,{color:L,href:K,name:N,logo:D,onClick:m})}):A.createElement(A.Fragment,null,A.createElement("p",null,R.length?t.errorMessage:!!t.links.length&&!C.length?t.text.no_wallets_found:t.text.loading))),E&&A.createElement("div",{className:"walletconnect-modal__footer"},Array(T).fill(0).map(function(k,L){var N=L+1,H=y===N;return A.createElement("a",{style:{margin:"auto 10px",fontWeight:H?"bold":"normal"},onClick:function(){return v(N)}},N)})))}function mu(t){var e=!!t.message.trim();return A.createElement("div",{className:"walletconnect-qrcode__notification"+(e?" notification__show":"")},t.message)}var vu=function(t){try{var e="";return Promise.resolve(ts.toString(t,{margin:0,type:"svg"})).then(function(n){return typeof n=="string"&&(e=n.replace("<svg",'<svg class="walletconnect-qrcode__image"')),e})}catch(n){return Promise.reject(n)}};function wu(t){var e=A.useState(""),n=e[0],r=e[1],s=A.useState(""),i=s[0],u=s[1];A.useEffect(function(){try{return Promise.resolve(vu(t.uri)).then(function(_){u(_)})}catch(_){Promise.reject(_)}},[]);var f=function(){var _=eu(t.uri);_?(r(t.text.copied_to_clipboard),setInterval(function(){return r("")},1200)):(r("Error"),setInterval(function(){return r("")},1200))};return A.createElement("div",null,A.createElement("p",{id:is,className:"walletconnect-qrcode__text"},t.text.scan_qrcode_with_wallet),A.createElement("div",{dangerouslySetInnerHTML:{__html:i}}),A.createElement("div",{className:"walletconnect-modal__footer"},A.createElement("a",{onClick:f},t.text.copy_to_clipboard)),A.createElement(mu,{message:n}))}function yu(t){var e=Te.isAndroid(),n=Te.isMobile(),r=n?t.qrcodeModalOptions&&t.qrcodeModalOptions.mobileLinks?t.qrcodeModalOptions.mobileLinks:void 0:t.qrcodeModalOptions&&t.qrcodeModalOptions.desktopLinks?t.qrcodeModalOptions.desktopLinks:void 0,s=A.useState(!1),i=s[0],u=s[1],f=A.useState(!1),_=f[0],y=f[1],v=A.useState(!n),C=v[0],R=v[1],I={mobile:n,text:t.text,uri:t.uri,qrcodeModalOptions:t.qrcodeModalOptions},T=A.useState(""),O=T[0],b=T[1],E=A.useState(!1),S=E[0],x=E[1],k=A.useState([]),L=k[0],N=k[1],H=A.useState(""),D=H[0],K=H[1],m=function(){_||i||r&&!r.length||L.length>0||A.useEffect(function(){var l=function(){try{if(e)return Promise.resolve();u(!0);var c=ru(function(){var h=t.qrcodeModalOptions&&t.qrcodeModalOptions.registryUrl?t.qrcodeModalOptions.registryUrl:Te.getWalletRegistryUrl();return Promise.resolve(fetch(h)).then(function(g){return Promise.resolve(g.json()).then(function(w){var M=w.listings,d=n?"mobile":"desktop",a=Te.getMobileLinkRegistry(Te.formatMobileRegistry(M,d),r);u(!1),y(!0),K(a.length?"":t.text.no_supported_wallets),N(a);var p=a.length===1;p&&(b(Te.formatIOSMobile(t.uri,a[0])),R(!0)),x(p)})})},function(h){u(!1),y(!0),K(t.text.something_went_wrong),console.error(h)});return Promise.resolve(c&&c.then?c.then(function(){}):void 0)}catch(h){return Promise.reject(h)}};l()})};m();var o=n?C:!C;return A.createElement("div",{id:rs,className:"walletconnect-qrcode__base animated fadeIn"},A.createElement("div",{className:"walletconnect-modal__base"},A.createElement(uu,{onClose:t.onClose}),S&&C?A.createElement("div",{className:"walletconnect-modal__single_wallet"},A.createElement("a",{onClick:function(){return Te.saveMobileLinkInfo({name:L[0].name,href:O})},href:O,rel:"noopener noreferrer",target:"_blank"},t.text.connect_with+" "+(S?L[0].name:"")+" \u203A")):e||i||!i&&L.length?A.createElement("div",{className:"walletconnect-modal__mobile__toggle"+(o?" right__selected":"")},A.createElement("div",{className:"walletconnect-modal__mobile__toggle_selector"}),n?A.createElement(A.Fragment,null,A.createElement("a",{onClick:function(){return R(!1),m()}},t.text.mobile),A.createElement("a",{onClick:function(){return R(!0)}},t.text.qrcode)):A.createElement(A.Fragment,null,A.createElement("a",{onClick:function(){return R(!0)}},t.text.qrcode),A.createElement("a",{onClick:function(){return R(!1),m()}},t.text.desktop))):null,A.createElement("div",null,C||!e&&!i&&!L.length?A.createElement(wu,Object.assign({},I)):A.createElement(_u,Object.assign({},I,{links:L,errorMessage:D})))))}var bu={choose_preferred_wallet:"W\xE4hle bevorzugte Wallet",connect_mobile_wallet:"Verbinde mit Mobile Wallet",scan_qrcode_with_wallet:"Scanne den QR-code mit einer WalletConnect kompatiblen Wallet",connect:"Verbinden",qrcode:"QR-Code",mobile:"Mobile",desktop:"Desktop",copy_to_clipboard:"In die Zwischenablage kopieren",copied_to_clipboard:"In die Zwischenablage kopiert!",connect_with:"Verbinden mit Hilfe von",loading:"Laden...",something_went_wrong:"Etwas ist schief gelaufen",no_supported_wallets:"Es gibt noch keine unterst\xFCtzten Wallet",no_wallets_found:"keine Wallet gefunden"},Mu={choose_preferred_wallet:"Choose your preferred wallet",connect_mobile_wallet:"Connect to Mobile Wallet",scan_qrcode_with_wallet:"Scan QR code with a WalletConnect-compatible wallet",connect:"Connect",qrcode:"QR Code",mobile:"Mobile",desktop:"Desktop",copy_to_clipboard:"Copy to clipboard",copied_to_clipboard:"Copied to clipboard!",connect_with:"Connect with",loading:"Loading...",something_went_wrong:"Something went wrong",no_supported_wallets:"There are no supported wallets yet",no_wallets_found:"No wallets found"},Eu={choose_preferred_wallet:"Elige tu billetera preferida",connect_mobile_wallet:"Conectar a billetera m\xF3vil",scan_qrcode_with_wallet:"Escanea el c\xF3digo QR con una billetera compatible con WalletConnect",connect:"Conectar",qrcode:"C\xF3digo QR",mobile:"M\xF3vil",desktop:"Desktop",copy_to_clipboard:"Copiar",copied_to_clipboard:"Copiado!",connect_with:"Conectar mediante",loading:"Cargando...",something_went_wrong:"Algo sali\xF3 mal",no_supported_wallets:"Todav\xEDa no hay billeteras compatibles",no_wallets_found:"No se encontraron billeteras"},xu={choose_preferred_wallet:"Choisissez votre portefeuille pr\xE9f\xE9r\xE9",connect_mobile_wallet:"Se connecter au portefeuille mobile",scan_qrcode_with_wallet:"Scannez le QR code avec un portefeuille compatible WalletConnect",connect:"Se connecter",qrcode:"QR Code",mobile:"Mobile",desktop:"Desktop",copy_to_clipboard:"Copier",copied_to_clipboard:"Copi\xE9!",connect_with:"Connectez-vous \xE0 l'aide de",loading:"Chargement...",something_went_wrong:"Quelque chose a mal tourn\xE9",no_supported_wallets:"Il n'y a pas encore de portefeuilles pris en charge",no_wallets_found:"Aucun portefeuille trouv\xE9"},Su={choose_preferred_wallet:"\uC6D0\uD558\uB294 \uC9C0\uAC11\uC744 \uC120\uD0DD\uD558\uC138\uC694",connect_mobile_wallet:"\uBAA8\uBC14\uC77C \uC9C0\uAC11\uACFC \uC5F0\uACB0",scan_qrcode_with_wallet:"WalletConnect \uC9C0\uC6D0 \uC9C0\uAC11\uC5D0\uC11C QR\uCF54\uB4DC\uB97C \uC2A4\uCE94\uD558\uC138\uC694",connect:"\uC5F0\uACB0",qrcode:"QR \uCF54\uB4DC",mobile:"\uBAA8\uBC14\uC77C",desktop:"\uB370\uC2A4\uD06C\uD0D1",copy_to_clipboard:"\uD074\uB9BD\uBCF4\uB4DC\uC5D0 \uBCF5\uC0AC",copied_to_clipboard:"\uD074\uB9BD\uBCF4\uB4DC\uC5D0 \uBCF5\uC0AC\uB418\uC5C8\uC2B5\uB2C8\uB2E4!",connect_with:"\uC640 \uC5F0\uACB0\uD558\uB2E4",loading:"\uB85C\uB4DC \uC911...",something_went_wrong:"\uBB38\uC81C\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.",no_supported_wallets:"\uC544\uC9C1 \uC9C0\uC6D0\uB418\uB294 \uC9C0\uAC11\uC774 \uC5C6\uC2B5\uB2C8\uB2E4",no_wallets_found:"\uC9C0\uAC11\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4"},Cu={choose_preferred_wallet:"Escolha sua carteira preferida",connect_mobile_wallet:"Conectar-se \xE0 carteira m\xF3vel",scan_qrcode_with_wallet:"Ler o c\xF3digo QR com uma carteira compat\xEDvel com WalletConnect",connect:"Conectar",qrcode:"C\xF3digo QR",mobile:"M\xF3vel",desktop:"Desktop",copy_to_clipboard:"Copiar",copied_to_clipboard:"Copiado!",connect_with:"Ligar por meio de",loading:"Carregamento...",something_went_wrong:"Algo correu mal",no_supported_wallets:"Ainda n\xE3o h\xE1 carteiras suportadas",no_wallets_found:"Nenhuma carteira encontrada"},ku={choose_preferred_wallet:"\u9009\u62E9\u4F60\u7684\u94B1\u5305",connect_mobile_wallet:"\u8FDE\u63A5\u81F3\u79FB\u52A8\u7AEF\u94B1\u5305",scan_qrcode_with_wallet:"\u4F7F\u7528\u517C\u5BB9 WalletConnect \u7684\u94B1\u5305\u626B\u63CF\u4E8C\u7EF4\u7801",connect:"\u8FDE\u63A5",qrcode:"\u4E8C\u7EF4\u7801",mobile:"\u79FB\u52A8",desktop:"\u684C\u9762",copy_to_clipboard:"\u590D\u5236\u5230\u526A\u8D34\u677F",copied_to_clipboard:"\u590D\u5236\u5230\u526A\u8D34\u677F\u6210\u529F\uFF01",connect_with:"\u901A\u8FC7\u4EE5\u4E0B\u65B9\u5F0F\u8FDE\u63A5",loading:"\u6B63\u5728\u52A0\u8F7D...",something_went_wrong:"\u51FA\u4E86\u95EE\u9898",no_supported_wallets:"\u76EE\u524D\u8FD8\u6CA1\u6709\u652F\u6301\u7684\u94B1\u5305",no_wallets_found:"\u6CA1\u6709\u627E\u5230\u94B1\u5305"},Ru={choose_preferred_wallet:"\u06A9\u06CC\u0641 \u067E\u0648\u0644 \u0645\u0648\u0631\u062F \u0646\u0638\u0631 \u062E\u0648\u062F \u0631\u0627 \u0627\u0646\u062A\u062E\u0627\u0628 \u06A9\u0646\u06CC\u062F",connect_mobile_wallet:"\u0628\u0647 \u06A9\u06CC\u0641 \u067E\u0648\u0644 \u0645\u0648\u0628\u0627\u06CC\u0644 \u0648\u0635\u0644 \u0634\u0648\u06CC\u062F",scan_qrcode_with_wallet:"\u06A9\u062F QR \u0631\u0627 \u0628\u0627 \u06CC\u06A9 \u06A9\u06CC\u0641 \u067E\u0648\u0644 \u0633\u0627\u0632\u06AF\u0627\u0631 \u0628\u0627 WalletConnect \u0627\u0633\u06A9\u0646 \u06A9\u0646\u06CC\u062F",connect:"\u0627\u062A\u0635\u0627\u0644",qrcode:"\u06A9\u062F QR",mobile:"\u0633\u06CC\u0627\u0631",desktop:"\u062F\u0633\u06A9\u062A\u0627\u067E",copy_to_clipboard:"\u06A9\u067E\u06CC \u0628\u0647 \u06A9\u0644\u06CC\u067E \u0628\u0648\u0631\u062F",copied_to_clipboard:"\u062F\u0631 \u06A9\u0644\u06CC\u067E \u0628\u0648\u0631\u062F \u06A9\u067E\u06CC \u0634\u062F!",connect_with:"\u0627\u0631\u062A\u0628\u0627\u0637 \u0628\u0627",loading:"...\u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC",something_went_wrong:"\u0645\u0634\u06A9\u0644\u06CC \u067E\u06CC\u0634 \u0622\u0645\u062F",no_supported_wallets:"\u0647\u0646\u0648\u0632 \u0647\u06CC\u0686 \u06A9\u06CC\u0641 \u067E\u0648\u0644 \u067E\u0634\u062A\u06CC\u0628\u0627\u0646\u06CC \u0634\u062F\u0647 \u0627\u06CC \u0648\u062C\u0648\u062F \u0646\u062F\u0627\u0631\u062F",no_wallets_found:"\u0647\u06CC\u0686 \u06A9\u06CC\u0641 \u067E\u0648\u0644\u06CC \u067E\u06CC\u062F\u0627 \u0646\u0634\u062F"},li={de:bu,en:Mu,es:Eu,fr:xu,ko:Su,pt:Cu,zh:ku,fa:Ru};function Tu(){var t=Te.getDocumentOrThrow(),e=t.getElementById(ai);e&&t.head.removeChild(e);var n=t.createElement("style");n.setAttribute("id",ai),n.innerText=nu,t.head.appendChild(n)}function Iu(){var t=Te.getDocumentOrThrow(),e=t.createElement("div");return e.setAttribute("id",ns),t.body.appendChild(e),e}function os(){var t=Te.getDocumentOrThrow(),e=t.getElementById(rs);e&&(e.className=e.className.replace("fadeIn","fadeOut"),setTimeout(function(){var n=t.getElementById(ns);n&&t.body.removeChild(n)},su))}function Au(t){return function(){os(),t&&t()}}function Ou(){var t=Te.getNavigatorOrThrow().language.split("-")[0]||"en";return li[t]||li.en}function Nu(t,e,n){Tu();var r=Iu();A.render(A.createElement(yu,{text:Ou(),uri:t,onClose:Au(e),qrcodeModalOptions:n}),r)}function Bu(){os()}var ss=function(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"};function Lu(t,e,n){console.log(t),ss()?tu(t):Nu(t,e,n)}function Pu(){ss()||Bu()}var qu={open:Lu,close:Pu},Uu=qu,as={},hr={},fr={};Object.defineProperty(fr,"__esModule",{value:!0});var Du=function(){function t(e){this.type=e,this.bubbles=!1,this.cancelable=!1,this.loaded=0,this.lengthComputable=!1,this.total=0}return t}();fr.ProgressEvent=Du;var at={},Vt=Pe&&Pe.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(at,"__esModule",{value:!0});var Hu=function(t){Vt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(Error);at.SecurityError=Hu;var $u=function(t){Vt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(Error);at.InvalidStateError=$u;var Fu=function(t){Vt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(Error);at.NetworkError=Fu;var Wu=function(t){Vt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(Error);at.SyntaxError=Wu;var yt={};Object.defineProperty(yt,"__esModule",{value:!0});var zu=function(){function t(){this.listeners={}}return t.prototype.addEventListener=function(e,n){e=e.toLowerCase(),this.listeners[e]=this.listeners[e]||[],this.listeners[e].push(n.handleEvent||n)},t.prototype.removeEventListener=function(e,n){if(e=e.toLowerCase(),!!this.listeners[e]){var r=this.listeners[e].indexOf(n.handleEvent||n);r<0||this.listeners[e].splice(r,1)}},t.prototype.dispatchEvent=function(e){var n=e.type.toLowerCase();if(e.target=this,this.listeners[n])for(var r=0,s=this.listeners[n];r<s.length;r++){var i=s[r];i.call(this,e)}var u=this["on"+n];return u&&u.call(this,e),!0},t}();yt.XMLHttpRequestEventTarget=zu;var dr={},ju=Pe&&Pe.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(dr,"__esModule",{value:!0});var Vu=yt,Ju=function(t){ju(e,t);function e(){var n=t.call(this)||this;return n._contentType=null,n._body=null,n._reset(),n}return e.prototype._reset=function(){this._contentType=null,this._body=null},e.prototype._setData=function(n){if(n!=null)if(typeof n=="string")n.length!==0&&(this._contentType="text/plain;charset=UTF-8"),this._body=new Buffer(n,"utf-8");else if(Buffer.isBuffer(n))this._body=n;else if(n instanceof ArrayBuffer){for(var r=new Buffer(n.byteLength),s=new Uint8Array(n),i=0;i<n.byteLength;i++)r[i]=s[i];this._body=r}else if(n.buffer&&n.buffer instanceof ArrayBuffer){for(var r=new Buffer(n.byteLength),u=n.byteOffset,s=new Uint8Array(n.buffer),i=0;i<n.byteLength;i++)r[i]=s[i+u];this._body=r}else throw new Error("Unsupported send() data "+n)},e.prototype._finalizeHeaders=function(n,r){this._contentType&&!r["content-type"]&&(n["Content-Type"]=this._contentType),this._body&&(n["Content-Length"]=this._body.length.toString())},e.prototype._startUpload=function(n){this._body&&n.write(this._body),n.end()},e}(Vu.XMLHttpRequestEventTarget);dr.XMLHttpRequestUpload=Ju;var Ct={};(function(){function t(s,i,u,f){return this instanceof t?(this.domain=s||void 0,this.path=i||"/",this.secure=!!u,this.script=!!f,this):new t(s,i,u,f)}t.All=Object.freeze(Object.create(null)),Ct.CookieAccessInfo=t;function e(s,i,u){return s instanceof e?s:this instanceof e?(this.name=null,this.value=null,this.expiration_date=1/0,this.path=String(u||"/"),this.explicit_path=!1,this.domain=i||null,this.explicit_domain=!1,this.secure=!1,this.noscript=!1,s&&this.parse(s,i,u),this):new e(s,i,u)}Ct.Cookie=e,e.prototype.toString=function(){var i=[this.name+"="+this.value];return this.expiration_date!==1/0&&i.push("expires="+new Date(this.expiration_date).toGMTString()),this.domain&&i.push("domain="+this.domain),this.path&&i.push("path="+this.path),this.secure&&i.push("secure"),this.noscript&&i.push("httponly"),i.join("; ")},e.prototype.toValueString=function(){return this.name+"="+this.value};var n=/[:](?=\s*[a-zA-Z0-9_\-]+\s*[=])/g;e.prototype.parse=function(i,u,f){if(this instanceof e){if(i.length>32768){console.warn("Cookie too long for parsing (>32768 characters)");return}var _=i.split(";").filter(function(I){return!!I}),y,v=_[0].match(/([^=]+)=([\s\S]*)/);if(!v){console.warn("Invalid cookie header encountered. Header: '"+i+"'");return}var C=v[1],R=v[2];if(typeof C!="string"||C.length===0||typeof R!="string"){console.warn("Unable to extract values from cookie header. Cookie: '"+i+"'");return}for(this.name=C,this.value=R,y=1;y<_.length;y+=1)switch(v=_[y].match(/([^=]+)(?:=([\s\S]*))?/),C=v[1].trim().toLowerCase(),R=v[2],C){case"httponly":this.noscript=!0;break;case"expires":this.expiration_date=R?Number(Date.parse(R)):1/0;break;case"path":this.path=R?R.trim():"",this.explicit_path=!0;break;case"domain":this.domain=R?R.trim():"",this.explicit_domain=!!this.domain;break;case"secure":this.secure=!0;break}return this.explicit_path||(this.path=f||"/"),this.explicit_domain||(this.domain=u),this}return new e().parse(i,u,f)},e.prototype.matches=function(i){return i===t.All?!0:!(this.noscript&&i.script||this.secure&&!i.secure||!this.collidesWith(i))},e.prototype.collidesWith=function(i){if(this.path&&!i.path||this.domain&&!i.domain||this.path&&i.path.indexOf(this.path)!==0||this.explicit_path&&i.path.indexOf(this.path)!==0)return!1;var u=i.domain&&i.domain.replace(/^[\.]/,""),f=this.domain&&this.domain.replace(/^[\.]/,"");if(f===u)return!0;if(f){if(!this.explicit_domain)return!1;var _=u.indexOf(f);return!(_===-1||_!==u.length-f.length)}return!0};function r(){var s,i,u;return this instanceof r?(s=Object.create(null),this.setCookie=function(_,y,v){var C,R;if(_=new e(_,y,v),C=_.expiration_date<=Date.now(),s[_.name]!==void 0){for(i=s[_.name],R=0;R<i.length;R+=1)if(u=i[R],u.collidesWith(_))return C?(i.splice(R,1),i.length===0&&delete s[_.name],!1):(i[R]=_,_);return C?!1:(i.push(_),_)}return C?!1:(s[_.name]=[_],s[_.name])},this.getCookie=function(_,y){var v,C;if(i=s[_],!!i)for(C=0;C<i.length;C+=1){if(v=i[C],v.expiration_date<=Date.now()){i.length===0&&delete s[v.name];continue}if(v.matches(y))return v}},this.getCookies=function(_){var y=[],v,C;for(v in s)C=this.getCookie(v,_),C&&y.push(C);return y.toString=function(){return y.join(":")},y.toValueString=function(){return y.map(function(I){return I.toValueString()}).join("; ")},y},this):new r}Ct.CookieJar=r,r.prototype.setCookies=function(i,u,f){i=Array.isArray(i)?i:i.split(n);var _=[],y,v;for(i=i.map(function(C){return new e(C,u,f)}),y=0;y<i.length;y+=1)v=i[y],this.setCookie(v,u,f)&&_.push(v);return _}})();var Ku=Pe&&Pe.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Gu=Pe&&Pe.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t};Object.defineProperty(hr,"__esModule",{value:!0});var Dn=gt,ls=gt,ci=gt,xn=gt,ui=fr,xt=at,Qu=yt,hi=dr,fi=Ct,Jt=function(t){Ku(e,t);function e(n){n===void 0&&(n={});var r=t.call(this)||this;return r.UNSENT=e.UNSENT,r.OPENED=e.OPENED,r.HEADERS_RECEIVED=e.HEADERS_RECEIVED,r.LOADING=e.LOADING,r.DONE=e.DONE,r.onreadystatechange=null,r.readyState=e.UNSENT,r.response=null,r.responseText="",r.responseType="",r.status=0,r.statusText="",r.timeout=0,r.upload=new hi.XMLHttpRequestUpload,r.responseUrl="",r.withCredentials=!1,r._method=null,r._url=null,r._sync=!1,r._headers={},r._loweredHeaders={},r._mimeOverride=null,r._request=null,r._response=null,r._responseParts=null,r._responseHeaders=null,r._aborting=null,r._error=null,r._loadedBytes=0,r._totalBytes=0,r._lengthComputable=!1,r._restrictedMethods={CONNECT:!0,TRACE:!0,TRACK:!0},r._restrictedHeaders={"accept-charset":!0,"accept-encoding":!0,"access-control-request-headers":!0,"access-control-request-method":!0,connection:!0,"content-length":!0,cookie:!0,cookie2:!0,date:!0,dnt:!0,expect:!0,host:!0,"keep-alive":!0,origin:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,via:!0},r._privateHeaders={"set-cookie":!0,"set-cookie2":!0},r._userAgent="Mozilla/5.0 ("+ci.type()+" "+ci.arch()+") node.js/"+process.versions.node+" v8/"+process.versions.v8,r._anonymous=n.anon||!1,r}return e.prototype.open=function(n,r,s,i,u){if(s===void 0&&(s=!0),n=n.toUpperCase(),this._restrictedMethods[n])throw new e.SecurityError("HTTP method "+n+" is not allowed in XHR");var f=this._parseUrl(r,i,u);this.readyState===e.HEADERS_RECEIVED||(this.readyState,e.LOADING),this._method=n,this._url=f,this._sync=!s,this._headers={},this._loweredHeaders={},this._mimeOverride=null,this._setReadyState(e.OPENED),this._request=null,this._response=null,this.status=0,this.statusText="",this._responseParts=[],this._responseHeaders=null,this._loadedBytes=0,this._totalBytes=0,this._lengthComputable=!1},e.prototype.setRequestHeader=function(n,r){if(this.readyState!==e.OPENED)throw new e.InvalidStateError("XHR readyState must be OPENED");var s=n.toLowerCase();if(this._restrictedHeaders[s]||/^sec-/.test(s)||/^proxy-/.test(s)){console.warn('Refused to set unsafe header "'+n+'"');return}r=r.toString(),this._loweredHeaders[s]!=null?(n=this._loweredHeaders[s],this._headers[n]=this._headers[n]+", "+r):(this._loweredHeaders[s]=n,this._headers[n]=r)},e.prototype.send=function(n){if(this.readyState!==e.OPENED)throw new e.InvalidStateError("XHR readyState must be OPENED");if(this._request)throw new e.InvalidStateError("send() already called");switch(this._url.protocol){case"file:":return this._sendFile(n);case"http:":case"https:":return this._sendHttp(n);default:throw new e.NetworkError("Unsupported protocol "+this._url.protocol)}},e.prototype.abort=function(){this._request!=null&&(this._request.abort(),this._setError(),this._dispatchProgress("abort"),this._dispatchProgress("loadend"))},e.prototype.getResponseHeader=function(n){if(this._responseHeaders==null||n==null)return null;var r=n.toLowerCase();return this._responseHeaders.hasOwnProperty(r)?this._responseHeaders[n.toLowerCase()]:null},e.prototype.getAllResponseHeaders=function(){var n=this;return this._responseHeaders==null?"":Object.keys(this._responseHeaders).map(function(r){return r+": "+n._responseHeaders[r]}).join(`\r
`)},e.prototype.overrideMimeType=function(n){if(this.readyState===e.LOADING||this.readyState===e.DONE)throw new e.InvalidStateError("overrideMimeType() not allowed in LOADING or DONE");this._mimeOverride=n.toLowerCase()},e.prototype.nodejsSet=function(n){if(this.nodejsHttpAgent=n.httpAgent||this.nodejsHttpAgent,this.nodejsHttpsAgent=n.httpsAgent||this.nodejsHttpsAgent,n.hasOwnProperty("baseUrl")){if(n.baseUrl!=null){var r=xn.parse(n.baseUrl,!1,!0);if(!r.protocol)throw new e.SyntaxError("baseUrl must be an absolute URL")}this.nodejsBaseUrl=n.baseUrl}},e.nodejsSet=function(n){e.prototype.nodejsSet(n)},e.prototype._setReadyState=function(n){this.readyState=n,this.dispatchEvent(new ui.ProgressEvent("readystatechange"))},e.prototype._sendFile=function(n){throw new Error("Protocol file: not implemented")},e.prototype._sendHttp=function(n){if(this._sync)throw new Error("Synchronous XHR processing not implemented");n&&(this._method==="GET"||this._method==="HEAD")?(console.warn("Discarding entity body for "+this._method+" requests"),n=null):n=n||"",this.upload._setData(n),this._finalizeHeaders(),this._sendHxxpRequest()},e.prototype._sendHxxpRequest=function(){var n=this;if(this.withCredentials){var r=e.cookieJar.getCookies(fi.CookieAccessInfo(this._url.hostname,this._url.pathname,this._url.protocol==="https:")).toValueString();this._headers.cookie=this._headers.cookie2=r}var s=this._url.protocol==="http:"?[Dn,this.nodejsHttpAgent]:[ls,this.nodejsHttpsAgent],i=s[0],u=s[1],f=i.request.bind(i),_=f({hostname:this._url.hostname,port:+this._url.port,path:this._url.path,auth:this._url.auth,method:this._method,headers:this._headers,agent:u});this._request=_,this.timeout&&_.setTimeout(this.timeout,function(){return n._onHttpTimeout(_)}),_.on("response",function(y){return n._onHttpResponse(_,y)}),_.on("error",function(y){return n._onHttpRequestError(_,y)}),this.upload._startUpload(_),this._request===_&&this._dispatchProgress("loadstart")},e.prototype._finalizeHeaders=function(){this._headers=Gu({},this._headers,{Connection:"keep-alive",Host:this._url.host,"User-Agent":this._userAgent},this._anonymous?{Referer:"about:blank"}:{}),this.upload._finalizeHeaders(this._headers,this._loweredHeaders)},e.prototype._onHttpResponse=function(n,r){var s=this;if(this._request===n){if(this.withCredentials&&(r.headers["set-cookie"]||r.headers["set-cookie2"])&&e.cookieJar.setCookies(r.headers["set-cookie"]||r.headers["set-cookie2"]),[301,302,303,307,308].indexOf(r.statusCode)>=0){this._url=this._parseUrl(r.headers.location),this._method="GET",this._loweredHeaders["content-type"]&&(delete this._headers[this._loweredHeaders["content-type"]],delete this._loweredHeaders["content-type"]),this._headers["Content-Type"]!=null&&delete this._headers["Content-Type"],delete this._headers["Content-Length"],this.upload._reset(),this._finalizeHeaders(),this._sendHxxpRequest();return}this._response=r,this._response.on("data",function(u){return s._onHttpResponseData(r,u)}),this._response.on("end",function(){return s._onHttpResponseEnd(r)}),this._response.on("close",function(){return s._onHttpResponseClose(r)}),this.responseUrl=this._url.href.split("#")[0],this.status=r.statusCode,this.statusText=Dn.STATUS_CODES[this.status],this._parseResponseHeaders(r);var i=this._responseHeaders["content-length"]||"";this._totalBytes=+i,this._lengthComputable=!!i,this._setReadyState(e.HEADERS_RECEIVED)}},e.prototype._onHttpResponseData=function(n,r){this._response===n&&(this._responseParts.push(new Buffer(r)),this._loadedBytes+=r.length,this.readyState!==e.LOADING&&this._setReadyState(e.LOADING),this._dispatchProgress("progress"))},e.prototype._onHttpResponseEnd=function(n){this._response===n&&(this._parseResponse(),this._request=null,this._response=null,this._setReadyState(e.DONE),this._dispatchProgress("load"),this._dispatchProgress("loadend"))},e.prototype._onHttpResponseClose=function(n){if(this._response===n){var r=this._request;this._setError(),r.abort(),this._setReadyState(e.DONE),this._dispatchProgress("error"),this._dispatchProgress("loadend")}},e.prototype._onHttpTimeout=function(n){this._request===n&&(this._setError(),n.abort(),this._setReadyState(e.DONE),this._dispatchProgress("timeout"),this._dispatchProgress("loadend"))},e.prototype._onHttpRequestError=function(n,r){this._request===n&&(this._setError(),n.abort(),this._setReadyState(e.DONE),this._dispatchProgress("error"),this._dispatchProgress("loadend"))},e.prototype._dispatchProgress=function(n){var r=new e.ProgressEvent(n);r.lengthComputable=this._lengthComputable,r.loaded=this._loadedBytes,r.total=this._totalBytes,this.dispatchEvent(r)},e.prototype._setError=function(){this._request=null,this._response=null,this._responseHeaders=null,this._responseParts=null},e.prototype._parseUrl=function(n,r,s){var i=this.nodejsBaseUrl==null?n:xn.resolve(this.nodejsBaseUrl,n),u=xn.parse(i,!1,!0);u.hash=null;var f=(u.auth||"").split(":"),_=f[0],y=f[1];return(_||y||r||s)&&(u.auth=(r||_||"")+":"+(s||y||"")),u},e.prototype._parseResponseHeaders=function(n){this._responseHeaders={};for(var r in n.headers){var s=r.toLowerCase();this._privateHeaders[s]||(this._responseHeaders[s]=n.headers[r])}this._mimeOverride!=null&&(this._responseHeaders["content-type"]=this._mimeOverride)},e.prototype._parseResponse=function(){var n=Buffer.concat(this._responseParts);switch(this._responseParts=null,this.responseType){case"json":this.responseText=null;try{this.response=JSON.parse(n.toString("utf-8"))}catch{this.response=null}return;case"buffer":this.responseText=null,this.response=n;return;case"arraybuffer":this.responseText=null;for(var r=new ArrayBuffer(n.length),s=new Uint8Array(r),i=0;i<n.length;i++)s[i]=n[i];this.response=r;return;case"text":default:try{this.responseText=n.toString(this._parseResponseEncoding())}catch{this.responseText=n.toString("binary")}this.response=this.responseText}},e.prototype._parseResponseEncoding=function(){return/;\s*charset=(.*)$/.exec(this._responseHeaders["content-type"]||"")[1]||"utf-8"},e.ProgressEvent=ui.ProgressEvent,e.InvalidStateError=xt.InvalidStateError,e.NetworkError=xt.NetworkError,e.SecurityError=xt.SecurityError,e.SyntaxError=xt.SyntaxError,e.XMLHttpRequestUpload=hi.XMLHttpRequestUpload,e.UNSENT=0,e.OPENED=1,e.HEADERS_RECEIVED=2,e.LOADING=3,e.DONE=4,e.cookieJar=fi.CookieJar(),e}(Qu.XMLHttpRequestEventTarget);hr.XMLHttpRequest=Jt;Jt.prototype.nodejsHttpAgent=Dn.globalAgent;Jt.prototype.nodejsHttpsAgent=ls.globalAgent;Jt.prototype.nodejsBaseUrl=null;(function(t){function e(r){for(var s in r)t.hasOwnProperty(s)||(t[s]=r[s])}Object.defineProperty(t,"__esModule",{value:!0}),e(hr);var n=yt;t.XMLHttpRequestEventTarget=n.XMLHttpRequestEventTarget})(as);const Yu=Oi("XMLHttpRequest")||as.XMLHttpRequest;class Xu extends ps{constructor(e){super(),this.url=e}formatError(e,n,r=-1){return{error:{message:n,code:r},id:e.id,jsonrpc:e.jsonrpc}}send(e,n){return new Promise(r=>{if(e.method==="eth_subscribe"){const f=this.formatError(e,"Subscriptions are not supported by this HTTP endpoint");return this.emit("error",f),r(f)}const s=new Yu;let i=!1;const u=(f,_)=>{if(!i)if(s.abort(),i=!0,n)n(f,_);else{const{id:y,jsonrpc:v}=e,C=f?{id:y,jsonrpc:v,error:{message:f.message,code:f.code}}:{id:y,jsonrpc:v,result:_};this.emit("payload",C),r(C)}};s.open("POST",this.url,!0),s.setRequestHeader("Content-Type","application/json"),s.timeout=60*1e3,s.onerror=u,s.ontimeout=u,s.onreadystatechange=()=>{if(s.readyState===4)try{const f=JSON.parse(s.responseText);u(f.error,f.result)}catch(f){u(f)}},s.send(JSON.stringify(e))})}}const Zu=require("web3-provider-engine"),eh=require("web3-provider-engine/subproviders/cache"),th=require("web3-provider-engine/subproviders/fixture"),nh=require("web3-provider-engine/subproviders/filters"),rh=require("web3-provider-engine/subproviders/hooked-wallet"),ih=require("web3-provider-engine/subproviders/nonce-tracker"),oh=require("web3-provider-engine/subproviders/subscriptions");class fh extends Zu{constructor(e){if(super({pollingInterval:e.pollingInterval||8e3}),this.bridge="https://bridge.walletconnect.org",this.qrcode=!0,this.qrcodeModal=Uu,this.qrcodeModalOptions=void 0,this.rpc=null,this.infuraId="",this.http=null,this.isConnecting=!1,this.connected=!1,this.connectCallbacks=[],this.accounts=[],this.chainId=1,this.rpcUrl="",this.enable=async()=>{const n=await this.getWalletConnector();if(n)return this.start(),this.subscribeWalletConnector(),n.accounts;throw new Error("Failed to connect to WalleConnect")},this.request=async n=>this.send(n),this.send=async(n,r)=>{var s;if(typeof n=="string"){const i=n;let u=r;return i==="personal_sign"&&(u=Tt(u)),this.sendAsyncPromise(i,u)}if(n=Object.assign({id:kn(),jsonrpc:"2.0"},n),n.method==="personal_sign"&&(n.params=Tt(n.params)),r){this.sendAsync(n,r);return}if(n.method==="eth_signTypedData_v4"&&((s=this.walletMeta)===null||s===void 0?void 0:s.name)==="MetaMask"){const{result:i}=await this.handleOtherRequests(n);return i}else return this.sendAsyncPromise(n.method,n.params)},this.onConnect=n=>{this.connectCallbacks.push(n)},this.triggerConnect=n=>{this.connectCallbacks&&this.connectCallbacks.length&&this.connectCallbacks.forEach(r=>r(n))},this.bridge=e.connector?e.connector.bridge:e.bridge||"https://bridge.walletconnect.org",this.qrcode=typeof e.qrcode>"u"||e.qrcode!==!1,this.qrcodeModal=e.qrcodeModal||this.qrcodeModal,this.qrcodeModalOptions=e.qrcodeModalOptions,this.wc=e.connector||new Ol({bridge:this.bridge,qrcodeModal:this.qrcode?this.qrcodeModal:void 0,qrcodeModalOptions:this.qrcodeModalOptions,storageId:e?.storageId,signingMethods:e?.signingMethods,clientMeta:e?.clientMeta}),this.rpc=e.rpc||null,!this.rpc&&(!e.infuraId||typeof e.infuraId!="string"||!e.infuraId.trim()))throw new Error("Missing one of the required parameters: rpc or infuraId");this.infuraId=e.infuraId||"",this.chainId=e?.chainId||this.chainId,this.initialize()}get isWalletConnect(){return!0}get connector(){return this.wc}get walletMeta(){return this.wc.peerMeta}async disconnect(){this.close()}async close(){await(await this.getWalletConnector({disableSessionCreation:!0})).killSession(),await this.onDisconnect()}async handleRequest(e){try{let n,r=null;const s=await this.getWalletConnector();switch(e.method){case"wc_killSession":await this.close(),r=null;break;case"eth_accounts":r=s.accounts;break;case"eth_coinbase":r=s.accounts[0];break;case"eth_chainId":r=s.chainId;break;case"net_version":r=s.chainId;break;case"eth_uninstallFilter":this.sendAsync(e,i=>i),r=!0;break;default:n=await this.handleOtherRequests(e)}return n||this.formatResponse(e,r)}catch(n){throw this.emit("error",n),n}}async handleOtherRequests(e){if(!jn.includes(e.method)&&e.method.startsWith("eth_"))return this.handleReadRequests(e);const r=await(await this.getWalletConnector()).sendCustomRequest(e);return this.formatResponse(e,r)}async handleReadRequests(e){if(!this.http){const n=new Error("HTTP Connection not available");throw this.emit("error",n),n}return this.http.send(e)}formatResponse(e,n){return{id:e.id,jsonrpc:e.jsonrpc,result:n}}getWalletConnector(e={}){const{disableSessionCreation:n=!1}=e;return new Promise((r,s)=>{const i=this.wc;this.isConnecting?this.onConnect(u=>r(u)):!i.connected&&!n?(this.isConnecting=!0,i.on("modal_closed",()=>{s(new Error("User closed modal"))}),i.createSession({chainId:this.chainId}).then(()=>{i.on("connect",(u,f)=>{if(u)return this.isConnecting=!1,s(u);this.isConnecting=!1,this.connected=!0,f&&this.updateState(f.params[0]),this.emit("connect"),this.triggerConnect(i),r(i)})}).catch(u=>{this.isConnecting=!1,s(u)})):(this.connected||(this.connected=!0,this.updateState(i.session)),r(i))})}async subscribeWalletConnector(){const e=await this.getWalletConnector();e.on("disconnect",n=>{if(n){this.emit("error",n);return}this.onDisconnect()}),e.on("session_update",(n,r)=>{if(n){this.emit("error",n);return}this.updateState(r.params[0])})}async onDisconnect(){await this.stop(),this.emit("close",1e3,"Connection closed"),this.emit("disconnect",1e3,"Connection disconnected"),this.connected=!1}async updateState(e){const{accounts:n,chainId:r,networkId:s,rpcUrl:i}=e;(!this.accounts||n&&this.accounts!==n)&&(this.accounts=n,this.emit("accountsChanged",n)),(!this.chainId||r&&this.chainId!==r)&&(this.chainId=r,this.emit("chainChanged",r)),(!this.networkId||s&&this.networkId!==s)&&(this.networkId=s,this.emit("networkChanged",s)),this.updateRpcUrl(this.chainId,i||"")}updateRpcUrl(e,n=""){const r={infuraId:this.infuraId,custom:this.rpc||void 0};n=n||Aa(e,r),n?(this.rpcUrl=n,this.updateHttpConnection()):this.emit("error",new Error(`No RPC Url available for chainId: ${e}`))}updateHttpConnection(){this.rpcUrl&&(this.http=new Xu(this.rpcUrl),this.http.on("payload",e=>this.emit("payload",e)),this.http.on("error",e=>this.emit("error",e)))}sendAsyncPromise(e,n){return new Promise((r,s)=>{this.sendAsync({id:kn(),jsonrpc:"2.0",method:e,params:n||[]},(i,u)=>{if(i){s(i);return}r(u.result)})})}initialize(){this.updateRpcUrl(this.chainId),this.addProvider(new th({eth_hashrate:"0x00",eth_mining:!1,eth_syncing:!0,net_listening:!0,web3_clientVersion:"WalletConnect/v1.x.x/javascript"})),this.addProvider(new eh),this.addProvider(new oh),this.addProvider(new nh),this.addProvider(new ih),this.addProvider(new rh(this.configWallet())),this.addProvider({handleRequest:async(e,n,r)=>{try{const{error:s,result:i}=await this.handleRequest(e);r(s,i)}catch(s){r(s)}},setEngine:e=>e})}configWallet(){return{getAccounts:async e=>{try{const r=(await this.getWalletConnector()).accounts;r&&r.length?e(null,r):e(new Error("Failed to get accounts"))}catch(n){e(n)}},processMessage:async(e,n)=>{try{const s=await(await this.getWalletConnector()).signMessage([e.from,e.data]);n(null,s)}catch(r){n(r)}},processPersonalMessage:async(e,n)=>{try{const s=await(await this.getWalletConnector()).signPersonalMessage([e.data,e.from]);n(null,s)}catch(r){n(r)}},processSignTransaction:async(e,n)=>{try{const s=await(await this.getWalletConnector()).signTransaction(e);n(null,s)}catch(r){n(r)}},processTransaction:async(e,n)=>{try{const s=await(await this.getWalletConnector()).sendTransaction(e);n(null,s)}catch(r){n(r)}},processTypedMessage:async(e,n)=>{try{const s=await(await this.getWalletConnector()).signTypedData([e.from,e.data]);n(null,s)}catch(r){n(r)}}}}}export{fh as default};
