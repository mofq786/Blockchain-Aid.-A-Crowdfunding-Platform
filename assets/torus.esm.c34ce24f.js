import{b as Ri,c as oe,e as or}from"./main.147f2eb4.js";import{r as ar,i as Gt,e as Ii,u as xi,b as Li}from"./immutable.35f466de.js";import{r as Ni,b as Ui}from"./browser.433ffded.js";import{d as je,f as Bi,s as ji}from"./index.d1d1bdd5.js";import{r as lr}from"./___vite-browser-external_commonjs-proxy.fb838188.js";import{b as ki}from"./index.7b9745c7.js";function Wi(e,t){if(e==null)return{};var r=Ri(e,t),n,o;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(o=0;o<l.length;o++)n=l[o],!(t.indexOf(n)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,n)||(r[n]=e[n]))}return r}function qt(e){return qt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qt(e)}function Hi(e,t){if(qt(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(qt(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ki(e){var t=Hi(e,"string");return qt(t)=="symbol"?t:String(t)}function D(e,t,r){return t=Ki(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Lr={exports:{}};(function(e,t){var r=200,n="__lodash_hash_undefined__",o=800,l=16,u=9007199254740991,y="[object Arguments]",g="[object Array]",T="[object AsyncFunction]",_="[object Boolean]",m="[object Date]",A="[object Error]",E="[object Function]",B="[object GeneratorFunction]",C="[object Map]",x="[object Number]",d="[object Null]",w="[object Object]",R="[object Proxy]",W="[object RegExp]",I="[object Set]",re="[object String]",Q="[object Undefined]",ne="[object WeakMap]",ee="[object ArrayBuffer]",ae="[object DataView]",L="[object Float32Array]",$="[object Float64Array]",le="[object Int8Array]",se="[object Int16Array]",be="[object Int32Array]",Re="[object Uint8Array]",h="[object Uint8ClampedArray]",p="[object Uint16Array]",b="[object Uint32Array]",M=/[\\^$.*+?()[\]{}|]/g,j=/^\[object .+?Constructor\]$/,K=/^(?:0|[1-9]\d*)$/,N={};N[L]=N[$]=N[le]=N[se]=N[be]=N[Re]=N[h]=N[p]=N[b]=!0,N[y]=N[g]=N[ee]=N[_]=N[ae]=N[m]=N[A]=N[E]=N[C]=N[x]=N[w]=N[W]=N[I]=N[re]=N[ne]=!1;var te=typeof oe=="object"&&oe&&oe.Object===Object&&oe,de=typeof self=="object"&&self&&self.Object===Object&&self,ie=te||de||Function("return this")(),s=t&&!t.nodeType&&t,a=s&&!0&&e&&!e.nodeType&&e,v=a&&a.exports===s,S=v&&te.process,k=function(){try{var i=a&&a.require&&a.require("util").types;return i||S&&S.binding&&S.binding("util")}catch{}}(),P=k&&k.isTypedArray;function U(i,c,f){switch(f.length){case 0:return i.call(c);case 1:return i.call(c,f[0]);case 2:return i.call(c,f[0],f[1]);case 3:return i.call(c,f[0],f[1],f[2])}return i.apply(c,f)}function Oe(i,c){for(var f=-1,O=Array(i);++f<i;)O[f]=c(f);return O}function Ie(i){return function(c){return i(c)}}function ke(i,c){return i?.[c]}function Ge(i,c){return function(f){return i(c(f))}}var xe=Array.prototype,We=Function.prototype,ge=Object.prototype,_e=ie["__core-js_shared__"],ye=We.toString,J=ge.hasOwnProperty,fe=function(){var i=/[^.]+$/.exec(_e&&_e.keys&&_e.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""}(),me=ge.toString,Xt=ye.call(Object),Zt=RegExp("^"+ye.call(J).replace(M,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Le=v?ie.Buffer:void 0,ze=ie.Symbol,Ye=ie.Uint8Array,Xe=Le?Le.allocUnsafe:void 0,Ze=Ge(Object.getPrototypeOf,Object),Je=Object.create,ut=ge.propertyIsEnumerable,ct=xe.splice,we=ze?ze.toStringTag:void 0,Ne=function(){try{var i=vr(Object,"defineProperty");return i({},"",{}),i}catch{}}(),dt=Le?Le.isBuffer:void 0,Qe=Math.max,ft=Date.now,et=vr(ie,"Map"),De=vr(Object,"create"),ht=function(){function i(){}return function(c){if(!Fe(c))return{};if(Je)return Je(c);i.prototype=c;var f=new i;return i.prototype=void 0,f}}();function ve(i){var c=-1,f=i==null?0:i.length;for(this.clear();++c<f;){var O=i[c];this.set(O[0],O[1])}}function pt(){this.__data__=De?De(null):{},this.size=0}function gt(i){var c=this.has(i)&&delete this.__data__[i];return this.size-=c?1:0,c}function yt(i){var c=this.__data__;if(De){var f=c[i];return f===n?void 0:f}return J.call(c,i)?c[i]:void 0}function mt(i){var c=this.__data__;return De?c[i]!==void 0:J.call(c,i)}function wt(i,c){var f=this.__data__;return this.size+=this.has(i)?0:1,f[i]=De&&c===void 0?n:c,this}ve.prototype.clear=pt,ve.prototype.delete=gt,ve.prototype.get=yt,ve.prototype.has=mt,ve.prototype.set=wt;function ue(i){var c=-1,f=i==null?0:i.length;for(this.clear();++c<f;){var O=i[c];this.set(O[0],O[1])}}function vt(){this.__data__=[],this.size=0}function bt(i){var c=this.__data__,f=Ue(c,i);if(f<0)return!1;var O=c.length-1;return f==O?c.pop():ct.call(c,f,1),--this.size,!0}function _t(i){var c=this.__data__,f=Ue(c,i);return f<0?void 0:c[f][1]}function St(i){return Ue(this.__data__,i)>-1}function Ct(i,c){var f=this.__data__,O=Ue(f,i);return O<0?(++this.size,f.push([i,c])):f[O][1]=c,this}ue.prototype.clear=vt,ue.prototype.delete=bt,ue.prototype.get=_t,ue.prototype.has=St,ue.prototype.set=Ct;function Se(i){var c=-1,f=i==null?0:i.length;for(this.clear();++c<f;){var O=i[c];this.set(O[0],O[1])}}function Tt(){this.size=0,this.__data__={hash:new ve,map:new(et||ue),string:new ve}}function At(i){var c=Jt(this,i).delete(i);return this.size-=c?1:0,c}function Et(i){return Jt(this,i).get(i)}function Ot(i){return Jt(this,i).has(i)}function Dt(i,c){var f=Jt(this,i),O=f.size;return f.set(i,c),this.size+=f.size==O?0:1,this}Se.prototype.clear=Tt,Se.prototype.delete=At,Se.prototype.get=Et,Se.prototype.has=Ot,Se.prototype.set=Dt;function Ce(i){var c=this.__data__=new ue(i);this.size=c.size}function Mt(){this.__data__=new ue,this.size=0}function Pt(i){var c=this.__data__,f=c.delete(i);return this.size=c.size,f}function Rt(i){return this.__data__.get(i)}function It(i){return this.__data__.has(i)}function xt(i,c){var f=this.__data__;if(f instanceof ue){var O=f.__data__;if(!et||O.length<r-1)return O.push([i,c]),this.size=++f.size,this;f=this.__data__=new Se(O)}return f.set(i,c),this.size=f.size,this}Ce.prototype.clear=Mt,Ce.prototype.delete=Pt,Ce.prototype.get=Rt,Ce.prototype.has=It,Ce.prototype.set=xt;function Lt(i,c){var f=Sr(i),O=!f&&_r(i),F=!f&&!O&&Yr(i),V=!f&&!O&&!F&&Zr(i),G=f||O||F||V,H=G?Oe(i.length,String):[],z=H.length;for(var he in i)(c||J.call(i,he))&&!(G&&(he=="length"||F&&(he=="offset"||he=="parent")||V&&(he=="buffer"||he=="byteLength"||he=="byteOffset")||Gr(he,z)))&&H.push(he);return H}function He(i,c,f){(f!==void 0&&!Qt(i[c],f)||f===void 0&&!(c in i))&&Ke(i,c,f)}function Nt(i,c,f){var O=i[c];(!(J.call(i,c)&&Qt(O,f))||f===void 0&&!(c in i))&&Ke(i,c,f)}function Ue(i,c){for(var f=i.length;f--;)if(Qt(i[f][0],c))return f;return-1}function Ke(i,c,f){c=="__proto__"&&Ne?Ne(i,c,{configurable:!0,enumerable:!0,value:f,writable:!0}):i[c]=f}var Ut=hi();function Be(i){return i==null?i===void 0?Q:d:we&&we in Object(i)?pi(i):bi(i)}function tt(i){return kt(i)&&Be(i)==y}function Bt(i){if(!Fe(i)||wi(i))return!1;var c=Tr(i)?Zt:j;return c.test(Ti(i))}function jt(i){return kt(i)&&Xr(i.length)&&!!N[Be(i)]}function ni(i){if(!Fe(i))return vi(i);var c=zr(i),f=[];for(var O in i)O=="constructor"&&(c||!J.call(i,O))||f.push(O);return f}function $r(i,c,f,O,F){i!==c&&Ut(c,function(V,G){if(F||(F=new Ce),Fe(V))ii(i,c,G,f,$r,O,F);else{var H=O?O(br(i,G),V,G+"",i,c,F):void 0;H===void 0&&(H=V),He(i,G,H)}},Jr)}function ii(i,c,f,O,F,V,G){var H=br(i,f),z=br(c,f),he=G.get(z);if(he){He(i,f,he);return}var ce=V?V(H,z,f+"",i,c,G):void 0,Wt=ce===void 0;if(Wt){var Ar=Sr(z),Er=!Ar&&Yr(z),en=!Ar&&!Er&&Zr(z);ce=z,Ar||Er||en?Sr(H)?ce=H:Ai(H)?ce=ci(H):Er?(Wt=!1,ce=ai(z,!0)):en?(Wt=!1,ce=ui(z,!0)):ce=[]:Ei(z)||_r(z)?(ce=H,_r(H)?ce=Oi(H):(!Fe(H)||Tr(H))&&(ce=gi(z))):Wt=!1}Wt&&(G.set(z,ce),F(ce,z,O,V,G),G.delete(z)),He(i,f,ce)}function si(i,c){return Si(_i(i,c,Qr),i+"")}var oi=Ne?function(i,c){return Ne(i,"toString",{configurable:!0,enumerable:!1,value:Mi(c),writable:!0})}:Qr;function ai(i,c){if(c)return i.slice();var f=i.length,O=Xe?Xe(f):new i.constructor(f);return i.copy(O),O}function li(i){var c=new i.constructor(i.byteLength);return new Ye(c).set(new Ye(i)),c}function ui(i,c){var f=c?li(i.buffer):i.buffer;return new i.constructor(f,i.byteOffset,i.length)}function ci(i,c){var f=-1,O=i.length;for(c||(c=Array(O));++f<O;)c[f]=i[f];return c}function di(i,c,f,O){var F=!f;f||(f={});for(var V=-1,G=c.length;++V<G;){var H=c[V],z=O?O(f[H],i[H],H,f,i):void 0;z===void 0&&(z=i[H]),F?Ke(f,H,z):Nt(f,H,z)}return f}function fi(i){return si(function(c,f){var O=-1,F=f.length,V=F>1?f[F-1]:void 0,G=F>2?f[2]:void 0;for(V=i.length>3&&typeof V=="function"?(F--,V):void 0,G&&yi(f[0],f[1],G)&&(V=F<3?void 0:V,F=1),c=Object(c);++O<F;){var H=f[O];H&&i(c,H,O,V)}return c})}function hi(i){return function(c,f,O){for(var F=-1,V=Object(c),G=O(c),H=G.length;H--;){var z=G[i?H:++F];if(f(V[z],z,V)===!1)break}return c}}function Jt(i,c){var f=i.__data__;return mi(c)?f[typeof c=="string"?"string":"hash"]:f.map}function vr(i,c){var f=ke(i,c);return Bt(f)?f:void 0}function pi(i){var c=J.call(i,we),f=i[we];try{i[we]=void 0;var O=!0}catch{}var F=me.call(i);return O&&(c?i[we]=f:delete i[we]),F}function gi(i){return typeof i.constructor=="function"&&!zr(i)?ht(Ze(i)):{}}function Gr(i,c){var f=typeof i;return c=c??u,!!c&&(f=="number"||f!="symbol"&&K.test(i))&&i>-1&&i%1==0&&i<c}function yi(i,c,f){if(!Fe(f))return!1;var O=typeof c;return(O=="number"?Cr(f)&&Gr(c,f.length):O=="string"&&c in f)?Qt(f[c],i):!1}function mi(i){var c=typeof i;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?i!=="__proto__":i===null}function wi(i){return!!fe&&fe in i}function zr(i){var c=i&&i.constructor,f=typeof c=="function"&&c.prototype||ge;return i===f}function vi(i){var c=[];if(i!=null)for(var f in Object(i))c.push(f);return c}function bi(i){return me.call(i)}function _i(i,c,f){return c=Qe(c===void 0?i.length-1:c,0),function(){for(var O=arguments,F=-1,V=Qe(O.length-c,0),G=Array(V);++F<V;)G[F]=O[c+F];F=-1;for(var H=Array(c+1);++F<c;)H[F]=O[F];return H[c]=f(G),U(i,this,H)}}function br(i,c){if(!(c==="constructor"&&typeof i[c]=="function")&&c!="__proto__")return i[c]}var Si=Ci(oi);function Ci(i){var c=0,f=0;return function(){var O=ft(),F=l-(O-f);if(f=O,F>0){if(++c>=o)return arguments[0]}else c=0;return i.apply(void 0,arguments)}}function Ti(i){if(i!=null){try{return ye.call(i)}catch{}try{return i+""}catch{}}return""}function Qt(i,c){return i===c||i!==i&&c!==c}var _r=tt(function(){return arguments}())?tt:function(i){return kt(i)&&J.call(i,"callee")&&!ut.call(i,"callee")},Sr=Array.isArray;function Cr(i){return i!=null&&Xr(i.length)&&!Tr(i)}function Ai(i){return kt(i)&&Cr(i)}var Yr=dt||Pi;function Tr(i){if(!Fe(i))return!1;var c=Be(i);return c==E||c==B||c==T||c==R}function Xr(i){return typeof i=="number"&&i>-1&&i%1==0&&i<=u}function Fe(i){var c=typeof i;return i!=null&&(c=="object"||c=="function")}function kt(i){return i!=null&&typeof i=="object"}function Ei(i){if(!kt(i)||Be(i)!=w)return!1;var c=Ze(i);if(c===null)return!0;var f=J.call(c,"constructor")&&c.constructor;return typeof f=="function"&&f instanceof f&&ye.call(f)==Xt}var Zr=P?Ie(P):jt;function Oi(i){return di(i,Jr(i))}function Jr(i){return Cr(i)?Lt(i,!0):ni(i)}var Di=fi(function(i,c,f){$r(i,c,f)});function Mi(i){return function(){return i}}function Qr(i){return i}function Pi(){return!1}e.exports=Di})(Lr,Lr.exports);const xn=Lr.exports;var Hr={exports:{}};(function(e){(function(t,r){e.exports?e.exports=r():t.log=r()})(oe,function(){var t=function(){},r="undefined",n=typeof window!==r&&typeof window.navigator!==r&&/Trident\/|MSIE /.test(window.navigator.userAgent),o=["trace","debug","info","warn","error"],l={},u=null;function y(C,x){var d=C[x];if(typeof d.bind=="function")return d.bind(C);try{return Function.prototype.bind.call(d,C)}catch{return function(){return Function.prototype.apply.apply(d,[C,arguments])}}}function g(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function T(C){return C==="debug"&&(C="log"),typeof console===r?!1:C==="trace"&&n?g:console[C]!==void 0?y(console,C):console.log!==void 0?y(console,"log"):t}function _(){for(var C=this.getLevel(),x=0;x<o.length;x++){var d=o[x];this[d]=x<C?t:this.methodFactory(d,C,this.name)}if(this.log=this.debug,typeof console===r&&C<this.levels.SILENT)return"No console available for logging"}function m(C){return function(){typeof console!==r&&(_.call(this),this[C].apply(this,arguments))}}function A(C,x,d){return T(C)||m.apply(this,arguments)}function E(C,x){var d=this,w,R,W,I="loglevel";typeof C=="string"?I+=":"+C:typeof C=="symbol"&&(I=void 0);function re(L){var $=(o[L]||"silent").toUpperCase();if(!(typeof window===r||!I)){try{window.localStorage[I]=$;return}catch{}try{window.document.cookie=encodeURIComponent(I)+"="+$+";"}catch{}}}function Q(){var L;if(!(typeof window===r||!I)){try{L=window.localStorage[I]}catch{}if(typeof L===r)try{var $=window.document.cookie,le=encodeURIComponent(I),se=$.indexOf(le+"=");se!==-1&&(L=/^([^;]+)/.exec($.slice(se+le.length+1))[1])}catch{}return d.levels[L]===void 0&&(L=void 0),L}}function ne(){if(!(typeof window===r||!I)){try{window.localStorage.removeItem(I)}catch{}try{window.document.cookie=encodeURIComponent(I)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function ee(L){var $=L;if(typeof $=="string"&&d.levels[$.toUpperCase()]!==void 0&&($=d.levels[$.toUpperCase()]),typeof $=="number"&&$>=0&&$<=d.levels.SILENT)return $;throw new TypeError("log.setLevel() called with invalid level: "+L)}d.name=C,d.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},d.methodFactory=x||A,d.getLevel=function(){return W??R??w},d.setLevel=function(L,$){return W=ee(L),$!==!1&&re(W),_.call(d)},d.setDefaultLevel=function(L){R=ee(L),Q()||d.setLevel(L,!1)},d.resetLevel=function(){W=null,ne(),_.call(d)},d.enableAll=function(L){d.setLevel(d.levels.TRACE,L)},d.disableAll=function(L){d.setLevel(d.levels.SILENT,L)},d.rebuild=function(){if(u!==d&&(w=ee(u.getLevel())),_.call(d),u===d)for(var L in l)l[L].rebuild()},w=ee(u?u.getLevel():"WARN");var ae=Q();ae!=null&&(W=ee(ae)),_.call(d)}u=new E,u.getLogger=function(x){if(typeof x!="symbol"&&typeof x!="string"||x==="")throw new TypeError("You must supply a name when creating a logger.");var d=l[x];return d||(d=l[x]=new E(x,u.methodFactory)),d};var B=typeof window!==r?window.log:void 0;return u.noConflict=function(){return typeof window!==r&&window.log===u&&(window.log=B),u},u.getLoggers=function(){return l},u.default=u,u})})(Hr);const Ln=Hr.exports;function tn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function rn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tn(Object(r),!0).forEach(function(n){D(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tn(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const Nr=Ln.getLogger("http-helpers");Nr.setLevel(Hr.exports.levels.INFO);let Ur="torus-default";const Fi="x-api-key";function qi(e){Ur=e}async function Vi(e,t){let r=null;try{r=new URL(e)}catch{}return fetch(e,t)}function $i(){const e={};return Ur&&(e[Fi]=Ur),e}function Gi(e){Nr.info(`Response: ${e.status} ${e.statusText}`),Nr.info(`Url: ${e.url}`)}const Nn=async function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const n={mode:"cors",headers:{}};r.useAPIKey&&(n.headers=rn(rn({},n.headers),$i()));const o=xn(n,t,{method:"GET"}),l=await Vi(e,o);if(l.ok)return l.json();throw Gi(l),l};var zi=Ni(),Yi={exports:{}},Kr={},Fr={};Object.defineProperty(Fr,"__esModule",{value:!0});function Xi(e){var t=4,r=e.length,n=r%t;if(!n)return e;var o=r,l=t-n,u=r+l,y=Buffer.alloc(u);for(y.write(e);l--;)y.write("=",o++);return y.toString()}Fr.default=Xi;Object.defineProperty(Kr,"__esModule",{value:!0});var Zi=Fr;function Un(e,t){return t===void 0&&(t="utf8"),Buffer.isBuffer(e)?Br(e.toString("base64")):Br(Buffer.from(e,t).toString("base64"))}function Ji(e,t){return t===void 0&&(t="utf8"),Buffer.from(qr(e),"base64").toString(t)}function qr(e){return e=e.toString(),Zi.default(e).replace(/\-/g,"+").replace(/_/g,"/")}function Br(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Qi(e){return Buffer.from(qr(e),"base64")}var at=Un;at.encode=Un;at.decode=Ji;at.toBase64=qr;at.fromBase64=Br;at.toBuffer=Qi;Kr.default=at;(function(e){e.exports=Kr.default,e.exports.default=e.exports})(Yi);var Bn={};const nn=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648];Bn.p1600=function(e){for(let t=0;t<24;++t){const r=e[0]^e[10]^e[20]^e[30]^e[40],n=e[1]^e[11]^e[21]^e[31]^e[41],o=e[2]^e[12]^e[22]^e[32]^e[42],l=e[3]^e[13]^e[23]^e[33]^e[43],u=e[4]^e[14]^e[24]^e[34]^e[44],y=e[5]^e[15]^e[25]^e[35]^e[45],g=e[6]^e[16]^e[26]^e[36]^e[46],T=e[7]^e[17]^e[27]^e[37]^e[47],_=e[8]^e[18]^e[28]^e[38]^e[48],m=e[9]^e[19]^e[29]^e[39]^e[49];let A=_^(o<<1|l>>>31),E=m^(l<<1|o>>>31);const B=e[0]^A,C=e[1]^E,x=e[10]^A,d=e[11]^E,w=e[20]^A,R=e[21]^E,W=e[30]^A,I=e[31]^E,re=e[40]^A,Q=e[41]^E;A=r^(u<<1|y>>>31),E=n^(y<<1|u>>>31);const ne=e[2]^A,ee=e[3]^E,ae=e[12]^A,L=e[13]^E,$=e[22]^A,le=e[23]^E,se=e[32]^A,be=e[33]^E,Re=e[42]^A,h=e[43]^E;A=o^(g<<1|T>>>31),E=l^(T<<1|g>>>31);const p=e[4]^A,b=e[5]^E,M=e[14]^A,j=e[15]^E,K=e[24]^A,N=e[25]^E,te=e[34]^A,de=e[35]^E,ie=e[44]^A,s=e[45]^E;A=u^(_<<1|m>>>31),E=y^(m<<1|_>>>31);const a=e[6]^A,v=e[7]^E,S=e[16]^A,k=e[17]^E,P=e[26]^A,U=e[27]^E,Oe=e[36]^A,Ie=e[37]^E,ke=e[46]^A,Ge=e[47]^E;A=g^(r<<1|n>>>31),E=T^(n<<1|r>>>31);const xe=e[8]^A,We=e[9]^E,ge=e[18]^A,_e=e[19]^E,ye=e[28]^A,J=e[29]^E,fe=e[38]^A,me=e[39]^E,Xt=e[48]^A,Zt=e[49]^E,Le=B,ze=C,Ye=d<<4|x>>>28,Xe=x<<4|d>>>28,Ze=w<<3|R>>>29,Je=R<<3|w>>>29,ut=I<<9|W>>>23,ct=W<<9|I>>>23,we=re<<18|Q>>>14,Ne=Q<<18|re>>>14,dt=ne<<1|ee>>>31,Qe=ee<<1|ne>>>31,ft=L<<12|ae>>>20,et=ae<<12|L>>>20,De=$<<10|le>>>22,ht=le<<10|$>>>22,ve=be<<13|se>>>19,pt=se<<13|be>>>19,gt=Re<<2|h>>>30,yt=h<<2|Re>>>30,mt=b<<30|p>>>2,wt=p<<30|b>>>2,ue=M<<6|j>>>26,vt=j<<6|M>>>26,bt=N<<11|K>>>21,_t=K<<11|N>>>21,St=te<<15|de>>>17,Ct=de<<15|te>>>17,Se=s<<29|ie>>>3,Tt=ie<<29|s>>>3,At=a<<28|v>>>4,Et=v<<28|a>>>4,Ot=k<<23|S>>>9,Dt=S<<23|k>>>9,Ce=P<<25|U>>>7,Mt=U<<25|P>>>7,Pt=Oe<<21|Ie>>>11,Rt=Ie<<21|Oe>>>11,It=Ge<<24|ke>>>8,xt=ke<<24|Ge>>>8,Lt=xe<<27|We>>>5,He=We<<27|xe>>>5,Nt=ge<<20|_e>>>12,Ue=_e<<20|ge>>>12,Ke=J<<7|ye>>>25,Ut=ye<<7|J>>>25,Be=fe<<8|me>>>24,tt=me<<8|fe>>>24,Bt=Xt<<14|Zt>>>18,jt=Zt<<14|Xt>>>18;e[0]=Le^~ft&bt,e[1]=ze^~et&_t,e[10]=At^~Nt&Ze,e[11]=Et^~Ue&Je,e[20]=dt^~ue&Ce,e[21]=Qe^~vt&Mt,e[30]=Lt^~Ye&De,e[31]=He^~Xe&ht,e[40]=mt^~Ot&Ke,e[41]=wt^~Dt&Ut,e[2]=ft^~bt&Pt,e[3]=et^~_t&Rt,e[12]=Nt^~Ze&ve,e[13]=Ue^~Je&pt,e[22]=ue^~Ce&Be,e[23]=vt^~Mt&tt,e[32]=Ye^~De&St,e[33]=Xe^~ht&Ct,e[42]=Ot^~Ke&ut,e[43]=Dt^~Ut&ct,e[4]=bt^~Pt&Bt,e[5]=_t^~Rt&jt,e[14]=Ze^~ve&Se,e[15]=Je^~pt&Tt,e[24]=Ce^~Be&we,e[25]=Mt^~tt&Ne,e[34]=De^~St&It,e[35]=ht^~Ct&xt,e[44]=Ke^~ut&gt,e[45]=Ut^~ct&yt,e[6]=Pt^~Bt&Le,e[7]=Rt^~jt&ze,e[16]=ve^~Se&At,e[17]=pt^~Tt&Et,e[26]=Be^~we&dt,e[27]=tt^~Ne&Qe,e[36]=St^~It&Lt,e[37]=Ct^~xt&He,e[46]=ut^~gt&mt,e[47]=ct^~yt&wt,e[8]=Bt^~Le&ft,e[9]=jt^~ze&et,e[18]=Se^~At&Nt,e[19]=Tt^~Et&Ue,e[28]=we^~dt&ue,e[29]=Ne^~Qe&vt,e[38]=It^~Lt&Ye,e[39]=xt^~He&Xe,e[48]=gt^~mt&Ot,e[49]=yt^~wt&Dt,e[0]^=nn[t*2],e[1]^=nn[t*2+1]}};const sr=Bn;function zt(){this.state=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.blockSize=null,this.count=0,this.squeezing=!1}zt.prototype.initialize=function(e,t){for(let r=0;r<50;++r)this.state[r]=0;this.blockSize=e/8,this.count=0,this.squeezing=!1};zt.prototype.absorb=function(e){for(let t=0;t<e.length;++t)this.state[~~(this.count/4)]^=e[t]<<8*(this.count%4),this.count+=1,this.count===this.blockSize&&(sr.p1600(this.state),this.count=0)};zt.prototype.absorbLastFewBits=function(e){this.state[~~(this.count/4)]^=e<<8*(this.count%4),(e&128)!==0&&this.count===this.blockSize-1&&sr.p1600(this.state),this.state[~~((this.blockSize-1)/4)]^=128<<8*((this.blockSize-1)%4),sr.p1600(this.state),this.count=0,this.squeezing=!0};zt.prototype.squeeze=function(e){this.squeezing||this.absorbLastFewBits(1);const t=Buffer.alloc(e);for(let r=0;r<e;++r)t[r]=this.state[~~(this.count/4)]>>>8*(this.count%4)&255,this.count+=1,this.count===this.blockSize&&(sr.p1600(this.state),this.count=0);return t};zt.prototype.copy=function(e){for(let t=0;t<50;++t)e.state[t]=this.state[t];e.blockSize=this.blockSize,e.count=this.count,e.squeezing=this.squeezing};const es=()=>zi(32).toString("hex");var Yt={exports:{}},ts=jn;function jn(e,t){if(e&&t)return jn(e)(t);if(typeof e!="function")throw new TypeError("need wrapper function");return Object.keys(e).forEach(function(n){r[n]=e[n]}),r;function r(){for(var n=new Array(arguments.length),o=0;o<n.length;o++)n[o]=arguments[o];var l=e.apply(this,n),u=n[n.length-1];return typeof l=="function"&&l!==u&&Object.keys(u).forEach(function(y){l[y]=u[y]}),l}}var kn=ts;Yt.exports=kn(nr);Yt.exports.strict=kn(Wn);nr.proto=nr(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return nr(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return Wn(this)},configurable:!0})});function nr(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function Wn(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},r=e.name||"Function wrapped with `once`";return t.onceError=r+" shouldn't be called more than once",t.called=!1,t}var rs=Yt.exports,ns=function(){},is=function(e){return e.setHeader&&typeof e.abort=="function"},ss=function(e){return e.stdio&&Array.isArray(e.stdio)&&e.stdio.length===3},Hn=function(e,t,r){if(typeof t=="function")return Hn(e,null,t);t||(t={}),r=rs(r||ns);var n=e._writableState,o=e._readableState,l=t.readable||t.readable!==!1&&e.readable,u=t.writable||t.writable!==!1&&e.writable,y=!1,g=function(){e.writable||T()},T=function(){u=!1,l||r.call(e)},_=function(){l=!1,u||r.call(e)},m=function(x){r.call(e,x?new Error("exited with error code: "+x):null)},A=function(x){r.call(e,x)},E=function(){process.nextTick(B)},B=function(){if(!y){if(l&&!(o&&o.ended&&!o.destroyed))return r.call(e,new Error("premature close"));if(u&&!(n&&n.ended&&!n.destroyed))return r.call(e,new Error("premature close"))}},C=function(){e.req.on("finish",T)};return is(e)?(e.on("complete",T),e.on("abort",E),e.req?C():e.on("request",C)):u&&!n&&(e.on("end",g),e.on("close",g)),ss(e)&&e.on("exit",m),e.on("end",_),e.on("finish",T),t.error!==!1&&e.on("error",A),e.on("close",E),function(){y=!0,e.removeListener("complete",T),e.removeListener("abort",E),e.removeListener("request",C),e.req&&e.req.removeListener("finish",T),e.removeListener("end",g),e.removeListener("close",g),e.removeListener("finish",T),e.removeListener("exit",m),e.removeListener("end",_),e.removeListener("error",A),e.removeListener("close",E)}},jr=Hn,os=Yt.exports,as=jr,Or=lr,Vt=function(){},ls=/^v?\.0/.test(process.version),ur=function(e){return typeof e=="function"},us=function(e){return!ls||!Or?!1:(e instanceof(Or.ReadStream||Vt)||e instanceof(Or.WriteStream||Vt))&&ur(e.close)},cs=function(e){return e.setHeader&&ur(e.abort)},ds=function(e,t,r,n){n=os(n);var o=!1;e.on("close",function(){o=!0}),as(e,{readable:t,writable:r},function(u){if(u)return n(u);o=!0,n()});var l=!1;return function(u){if(!o&&!l){if(l=!0,us(e))return e.close(Vt);if(cs(e))return e.abort();if(ur(e.destroy))return e.destroy();n(u||new Error("stream was destroyed"))}}},sn=function(e){e()},fs=function(e,t){return e.pipe(t)},hs=function(){var e=Array.prototype.slice.call(arguments),t=ur(e[e.length-1]||Vt)&&e.pop()||Vt;if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new Error("pump requires two streams per minimum");var r,n=e.map(function(o,l){var u=l<e.length-1,y=l>0;return ds(o,u,y,function(g){r||(r=g),g&&n.forEach(sn),!u&&(n.forEach(sn),t(r))})});return e.reduce(fs)},ir=hs;function er(){}const on="SYN",Dr="ACK",an="BRK";class ln extends ar.exports.Duplex{constructor(t){let{name:r,target:n,targetWindow:o=window,targetOrigin:l="*"}=t;if(super({objectMode:!0}),D(this,"_init",void 0),D(this,"_haveSyn",void 0),D(this,"_name",void 0),D(this,"_target",void 0),D(this,"_targetWindow",void 0),D(this,"_targetOrigin",void 0),D(this,"_onMessage",void 0),D(this,"_synIntervalId",void 0),!r||!n)throw new Error("Invalid input.");this._init=!1,this._haveSyn=!1,this._name=r,this._target=n,this._targetWindow=o,this._targetOrigin=l,this._onMessage=this.onMessage.bind(this),this._synIntervalId=null,window.addEventListener("message",this._onMessage,!1),this._handShake()}_break(){this.cork(),this._write(an,null,er),this._haveSyn=!1,this._init=!1}_handShake(){this._write(on,null,er),this.cork()}_onData(t){if(!this._init)t===on?(this._haveSyn=!0,this._write(Dr,null,er)):t===Dr&&(this._init=!0,this._haveSyn||this._write(Dr,null,er),this.uncork());else if(t===an)this._break();else try{this.push(t)}catch(r){this.emit("error",r)}}_postMessage(t){const r=this._targetOrigin;this._targetWindow.postMessage({target:this._target,data:t},r)}onMessage(t){const r=t.data;this._targetOrigin!=="*"&&t.origin!==this._targetOrigin||t.source!==this._targetWindow||typeof r!="object"||r.target!==this._name||!r.data||this._onData(r.data)}_read(){}_write(t,r,n){this._postMessage(t),n()}_destroy(){window.removeEventListener("message",this._onMessage,!1)}}function un(e,t,r){try{Reflect.apply(e,t,r)}catch(n){setTimeout(()=>{throw n})}}function ps(e){const t=e.length,r=new Array(t);for(let n=0;n<t;n+=1)r[n]=e[n];return r}class cr extends or.exports.EventEmitter{emit(t){let r=t==="error";const n=this._events;if(n!==void 0)r=r&&n.error===void 0;else if(!r)return!1;for(var o=arguments.length,l=new Array(o>1?o-1:0),u=1;u<o;u++)l[u-1]=arguments[u];if(r){let g;if(l.length>0&&([g]=l),g instanceof Error)throw g;const T=new Error(`Unhandled error.${g?` (${g.message})`:""}`);throw T.context=g,T}const y=n[t];if(y===void 0)return!1;if(typeof y=="function")un(y,this,l);else{const g=y.length,T=ps(y);for(let _=0;_<g;_+=1)un(T[_],this,l)}return!0}}class Ht extends Error{constructor(t){let{code:r,message:n,data:o}=t;if(!Number.isInteger(r))throw new Error("code must be an integer");if(!n||typeof n!="string")throw new Error("message must be string");super(n),D(this,"code",void 0),D(this,"data",void 0),this.code=r,o!==void 0&&(this.data=o)}toString(){return Bi({code:this.code,message:this.message,data:this.data,stack:this.stack})}}function gs(){const e={};function t(){return!1}const r=new cr;function n(g){const T=e[g.id];if(!T)throw new Error(`StreamMiddleware - Unknown response id "${g.id}"`);delete e[g.id],Object.assign(T.res,g),setTimeout(T.end)}function o(g){r.emit("notification",g)}function l(g,T,_){let m;try{!g.id?o(g):n(g)}catch(A){m=A}_(m)}const u=new ar.exports.Duplex({objectMode:!0,read:t,write:l});return{events:r,middleware:(g,T,_,m)=>{u.push(g),e[g.id]={req:g,res:T,next:_,end:m}},stream:u}}function ys(){return(e,t,r,n)=>{const o=e.id,l=es();e.id=l,t.id=l,r(u=>{e.id=o,t.id=o,u()})}}function cn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function ms(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cn(Object(r),!0).forEach(function(n){D(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cn(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}class Me extends cr{constructor(){super(),D(this,"_middleware",void 0),this._middleware=[]}static async _runAllMiddleware(t,r,n){const o=[];let l=null,u=!1;for(const y of n)if([l,u]=await Me._runMiddleware(t,r,y,o),u)break;return[l,u,o.reverse()]}static _runMiddleware(t,r,n,o){return new Promise(l=>{const u=g=>{const T=g||r.error;T&&(r.error=je.serializeError(T)),l([T,!0])},y=g=>{r.error?u(r.error):(g&&(typeof g!="function"&&u(new Ht({code:-32603,message:"JRPCEngine: 'next' return handlers must be functions"})),o.push(g)),l([null,!1]))};try{n(t,r,y,u)}catch(g){u(g)}})}static async _runReturnHandlers(t){for(const r of t)await new Promise((n,o)=>{r(l=>l?o(l):n())})}static _checkForCompletion(t,r,n){if(!("result"in r)&&!("error"in r))throw new Ht({code:-32603,message:"Response has no error or result for request"});if(!n)throw new Ht({code:-32603,message:"Nothing ended request"})}push(t){this._middleware.push(t)}handle(t,r){if(r&&typeof r!="function")throw new Error('"callback" must be a function if provided.');return Array.isArray(t)?r?this._handleBatch(t,r):this._handleBatch(t):r?this._handle(t,r):this._promiseHandle(t)}asMiddleware(){return async(t,r,n,o)=>{try{const[l,u,y]=await Me._runAllMiddleware(t,r,this._middleware);return u?(await Me._runReturnHandlers(y),o(l)):n(async g=>{try{await Me._runReturnHandlers(y)}catch(T){return g(T)}return g()})}catch(l){return o(l)}}}async _handleBatch(t,r){try{const n=await Promise.all(t.map(this._promiseHandle.bind(this)));return r?r(null,n):n}catch(n){if(r)return r(n);throw n}}_promiseHandle(t){return new Promise(r=>{this._handle(t,(n,o)=>{r(o)})})}async _handle(t,r){if(!t||Array.isArray(t)||typeof t!="object"){const u=new Ht({code:-32603,message:"request must be plain object"});return r(u,{id:void 0,jsonrpc:"2.0",error:u})}if(typeof t.method!="string"){const u=new Ht({code:-32603,message:"method must be string"});return r(u,{id:t.id,jsonrpc:"2.0",error:u})}const n=ms({},t),o={id:n.id,jsonrpc:n.jsonrpc};let l=null;try{await this._processRequest(n,o)}catch(u){l=u}return l&&(delete o.result,o.error||(o.error=je.serializeError(l))),r(l,o)}async _processRequest(t,r){const[n,o,l]=await Me._runAllMiddleware(t,r,this._middleware);if(Me._checkForCompletion(t,r,o),await Me._runReturnHandlers(l),n)throw n}}class ws extends ar.exports.Duplex{constructor(t){let{parent:r,name:n}=t;super({objectMode:!0}),D(this,"_parent",void 0),D(this,"_name",void 0),this._parent=r,this._name=n}_read(){}_write(t,r,n){this._parent.push({name:this._name,data:t}),n()}}function dn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function fn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dn(Object(r),!0).forEach(function(n){D(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dn(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const hn=Symbol("IGNORE_SUBSTREAM");class Kn extends ar.exports.Duplex{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(fn(fn({},t),{},{objectMode:!0})),D(this,"_substreams",void 0),D(this,"getStream",void 0),this._substreams={}}createStream(t){if(!t)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[t])throw new Error(`ObjectMultiplex - Substream for name "${t}" already exists`);const r=new ws({parent:this,name:t});return this._substreams[t]=r,vs(this,n=>r.destroy(n||void 0)),r}ignoreStream(t){if(!t)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[t])throw new Error(`ObjectMultiplex - Substream for name "${t}" already exists`);this._substreams[t]=hn}_read(){}_write(t,r,n){const{name:o,data:l}=t;if(!o)return window.console.warn(`ObjectMultiplex - malformed chunk without name "${t}"`),n();const u=this._substreams[o];return u?(u!==hn&&u.push(l),n()):(window.console.warn(`ObjectMultiplex - orphaned data for stream "${o}"`),n())}}function vs(e,t){const r=Yt.exports(t);jr(e,{readable:!1},r),jr(e,{writable:!1},r)}function bs(e){const t=new Kn;return t.getStream=function(n){return this._substreams[n]?this._substreams[n]:this.createStream(n)},ir(e,t,e,r=>{r&&window.console.error(r)}),t}var kr={},dr={};Object.defineProperty(dr,"__esModule",{value:!0});dr.storeAsStream=void 0;const _s=lr;class Ss extends _s.Duplex{constructor(t){super({objectMode:!0}),this.resume(),this.handler=r=>this.push(r),this.obsStore=t,this.obsStore.subscribe(this.handler)}pipe(t,r){const n=super.pipe(t,r);return t.write(this.obsStore.getState()),n}_write(t,r,n){this.obsStore.putState(t),n()}_read(t){}_destroy(t,r){this.obsStore.unsubscribe(this.handler),super._destroy(t,r)}}function Cs(e){return new Ss(e)}dr.storeAsStream=Cs;var fr={},lt={},Ts=oe&&oe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(lt,"__esModule",{value:!0});lt.ObservableStore=void 0;const As=Ts(ji);class Es extends As.default{constructor(t){super(),t?this._state=t:this._state={}}getState(){return this._getState()}putState(t){this._putState(t),this.emit("update",t)}updateState(t){if(t&&typeof t=="object"){const r=this.getState();this.putState(Object.assign(Object.assign({},r),t))}else this.putState(t)}subscribe(t){this.on("update",t)}unsubscribe(t){this.removeListener("update",t)}_getState(){return this._state}_putState(t){this._state=t}}lt.ObservableStore=Es;Object.defineProperty(fr,"__esModule",{value:!0});fr.ComposedStore=void 0;const Os=lt;class Ds extends Os.ObservableStore{constructor(t){super({}),this._children=t||{},Object.keys(this._children).forEach(r=>{const n=this._children[r];this._addChild(r,n)})}_addChild(t,r){const n=o=>{const l=this.getState();l[t]=o,this.putState(l)};r.subscribe(n),n(r.getState())}}fr.ComposedStore=Ds;var hr={};Object.defineProperty(hr,"__esModule",{value:!0});hr.MergedStore=void 0;const Ms=lt;class Ps extends Ms.ObservableStore{constructor(t=[]){super({}),this._children=t,t.forEach(r=>this._addChild(r)),this._updateWholeState()}_addChild(t){t.subscribe(()=>this._updateWholeState())}_updateWholeState(){const t=this._children.map(n=>n.getState()),r=Object.assign({},...t);this.putState(r)}}hr.MergedStore=Ps;var pr={},gr={exports:{}},Wr={exports:{}},nt={exports:{}};typeof process>"u"||!process.version||process.version.indexOf("v0.")===0||process.version.indexOf("v1.")===0&&process.version.indexOf("v1.8.")!==0?nt.exports={nextTick:Rs}:nt.exports=process;function Rs(e,t,r,n){if(typeof e!="function")throw new TypeError('"callback" argument must be a function');var o=arguments.length,l,u;switch(o){case 0:case 1:return process.nextTick(e);case 2:return process.nextTick(function(){e.call(null,t)});case 3:return process.nextTick(function(){e.call(null,t,r)});case 4:return process.nextTick(function(){e.call(null,t,r,n)});default:for(l=new Array(o-1),u=0;u<l.length;)l[u++]=arguments[u];return process.nextTick(function(){e.apply(null,l)})}}var Is={}.toString,xs=Array.isArray||function(e){return Is.call(e)=="[object Array]"},Fn=or.exports.EventEmitter,it={exports:{}};(function(e,t){var r=ki,n=r.Buffer;function o(u,y){for(var g in u)y[g]=u[g]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=r:(o(r,t),t.Buffer=l);function l(u,y,g){return n(u,y,g)}o(n,l),l.from=function(u,y,g){if(typeof u=="number")throw new TypeError("Argument must not be a number");return n(u,y,g)},l.alloc=function(u,y,g){if(typeof u!="number")throw new TypeError("Argument must be a number");var T=n(u);return y!==void 0?typeof g=="string"?T.fill(y,g):T.fill(y):T.fill(0),T},l.allocUnsafe=function(u){if(typeof u!="number")throw new TypeError("Argument must be a number");return n(u)},l.allocUnsafeSlow=function(u){if(typeof u!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(u)}})(it,it.exports);var X={};function Ls(e){return Array.isArray?Array.isArray(e):yr(e)==="[object Array]"}X.isArray=Ls;function Ns(e){return typeof e=="boolean"}X.isBoolean=Ns;function Us(e){return e===null}X.isNull=Us;function Bs(e){return e==null}X.isNullOrUndefined=Bs;function js(e){return typeof e=="number"}X.isNumber=js;function ks(e){return typeof e=="string"}X.isString=ks;function Ws(e){return typeof e=="symbol"}X.isSymbol=Ws;function Hs(e){return e===void 0}X.isUndefined=Hs;function Ks(e){return yr(e)==="[object RegExp]"}X.isRegExp=Ks;function Fs(e){return typeof e=="object"&&e!==null}X.isObject=Fs;function qs(e){return yr(e)==="[object Date]"}X.isDate=qs;function Vs(e){return yr(e)==="[object Error]"||e instanceof Error}X.isError=Vs;function $s(e){return typeof e=="function"}X.isFunction=$s;function Gs(e){return e===null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||typeof e=="symbol"||typeof e>"u"}X.isPrimitive=Gs;X.isBuffer=Buffer.isBuffer;function yr(e){return Object.prototype.toString.call(e)}var Mr={exports:{}},pn;function zs(){return pn||(pn=1,function(e){function t(l,u){if(!(l instanceof u))throw new TypeError("Cannot call a class as a function")}var r=it.exports.Buffer,n=lr;function o(l,u,y){l.copy(u,y)}e.exports=function(){function l(){t(this,l),this.head=null,this.tail=null,this.length=0}return l.prototype.push=function(y){var g={data:y,next:null};this.length>0?this.tail.next=g:this.head=g,this.tail=g,++this.length},l.prototype.unshift=function(y){var g={data:y,next:this.head};this.length===0&&(this.tail=g),this.head=g,++this.length},l.prototype.shift=function(){if(this.length!==0){var y=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,y}},l.prototype.clear=function(){this.head=this.tail=null,this.length=0},l.prototype.join=function(y){if(this.length===0)return"";for(var g=this.head,T=""+g.data;g=g.next;)T+=y+g.data;return T},l.prototype.concat=function(y){if(this.length===0)return r.alloc(0);for(var g=r.allocUnsafe(y>>>0),T=this.head,_=0;T;)o(T.data,g,_),_+=T.data.length,T=T.next;return g},l}(),n&&n.inspect&&n.inspect.custom&&(e.exports.prototype[n.inspect.custom]=function(){var l=n.inspect({length:this.length});return this.constructor.name+" "+l})}(Mr)),Mr.exports}var tr=nt.exports;function Ys(e,t){var r=this,n=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return n||o?(t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,tr.nextTick(rr,this,e)):tr.nextTick(rr,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(l){!t&&l?r._writableState?r._writableState.errorEmitted||(r._writableState.errorEmitted=!0,tr.nextTick(rr,r,l)):tr.nextTick(rr,r,l):t&&t(l)}),this)}function Xs(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function rr(e,t){e.emit("error",t)}var qn={destroy:Ys,undestroy:Xs},Pr,gn;function Vn(){if(gn)return Pr;gn=1;var e=nt.exports;Pr=C;function t(h){var p=this;this.next=null,this.entry=null,this.finish=function(){Re(p,h)}}var r=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:e.nextTick,n;C.WritableState=E;var o=Object.create(X);o.inherits=Gt.exports;var l={deprecate:Ii},u=Fn,y=it.exports.Buffer,g=(typeof oe<"u"?oe:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function T(h){return y.from(h)}function _(h){return y.isBuffer(h)||h instanceof g}var m=qn;o.inherits(C,u);function A(){}function E(h,p){n=n||st(),h=h||{};var b=p instanceof n;this.objectMode=!!h.objectMode,b&&(this.objectMode=this.objectMode||!!h.writableObjectMode);var M=h.highWaterMark,j=h.writableHighWaterMark,K=this.objectMode?16:16*1024;M||M===0?this.highWaterMark=M:b&&(j||j===0)?this.highWaterMark=j:this.highWaterMark=K,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var N=h.decodeStrings===!1;this.decodeStrings=!N,this.defaultEncoding=h.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(te){Q(p,te)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new t(this)}E.prototype.getBuffer=function(){for(var p=this.bufferedRequest,b=[];p;)b.push(p),p=p.next;return b},function(){try{Object.defineProperty(E.prototype,"buffer",{get:l.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var B;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(B=Function.prototype[Symbol.hasInstance],Object.defineProperty(C,Symbol.hasInstance,{value:function(h){return B.call(this,h)?!0:this!==C?!1:h&&h._writableState instanceof E}})):B=function(h){return h instanceof this};function C(h){if(n=n||st(),!B.call(C,this)&&!(this instanceof n))return new C(h);this._writableState=new E(h,this),this.writable=!0,h&&(typeof h.write=="function"&&(this._write=h.write),typeof h.writev=="function"&&(this._writev=h.writev),typeof h.destroy=="function"&&(this._destroy=h.destroy),typeof h.final=="function"&&(this._final=h.final)),u.call(this)}C.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function x(h,p){var b=new Error("write after end");h.emit("error",b),e.nextTick(p,b)}function d(h,p,b,M){var j=!0,K=!1;return b===null?K=new TypeError("May not write null values to stream"):typeof b!="string"&&b!==void 0&&!p.objectMode&&(K=new TypeError("Invalid non-string/buffer chunk")),K&&(h.emit("error",K),e.nextTick(M,K),j=!1),j}C.prototype.write=function(h,p,b){var M=this._writableState,j=!1,K=!M.objectMode&&_(h);return K&&!y.isBuffer(h)&&(h=T(h)),typeof p=="function"&&(b=p,p=null),K?p="buffer":p||(p=M.defaultEncoding),typeof b!="function"&&(b=A),M.ended?x(this,b):(K||d(this,M,h,b))&&(M.pendingcb++,j=R(this,M,K,h,p,b)),j},C.prototype.cork=function(){var h=this._writableState;h.corked++},C.prototype.uncork=function(){var h=this._writableState;h.corked&&(h.corked--,!h.writing&&!h.corked&&!h.bufferProcessing&&h.bufferedRequest&&ae(this,h))},C.prototype.setDefaultEncoding=function(p){if(typeof p=="string"&&(p=p.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((p+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+p);return this._writableState.defaultEncoding=p,this};function w(h,p,b){return!h.objectMode&&h.decodeStrings!==!1&&typeof p=="string"&&(p=y.from(p,b)),p}Object.defineProperty(C.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function R(h,p,b,M,j,K){if(!b){var N=w(p,M,j);M!==N&&(b=!0,j="buffer",M=N)}var te=p.objectMode?1:M.length;p.length+=te;var de=p.length<p.highWaterMark;if(de||(p.needDrain=!0),p.writing||p.corked){var ie=p.lastBufferedRequest;p.lastBufferedRequest={chunk:M,encoding:j,isBuf:b,callback:K,next:null},ie?ie.next=p.lastBufferedRequest:p.bufferedRequest=p.lastBufferedRequest,p.bufferedRequestCount+=1}else W(h,p,!1,te,M,j,K);return de}function W(h,p,b,M,j,K,N){p.writelen=M,p.writecb=N,p.writing=!0,p.sync=!0,b?h._writev(j,p.onwrite):h._write(j,K,p.onwrite),p.sync=!1}function I(h,p,b,M,j){--p.pendingcb,b?(e.nextTick(j,M),e.nextTick(se,h,p),h._writableState.errorEmitted=!0,h.emit("error",M)):(j(M),h._writableState.errorEmitted=!0,h.emit("error",M),se(h,p))}function re(h){h.writing=!1,h.writecb=null,h.length-=h.writelen,h.writelen=0}function Q(h,p){var b=h._writableState,M=b.sync,j=b.writecb;if(re(b),p)I(h,b,M,p,j);else{var K=L(b);!K&&!b.corked&&!b.bufferProcessing&&b.bufferedRequest&&ae(h,b),M?r(ne,h,b,K,j):ne(h,b,K,j)}}function ne(h,p,b,M){b||ee(h,p),p.pendingcb--,M(),se(h,p)}function ee(h,p){p.length===0&&p.needDrain&&(p.needDrain=!1,h.emit("drain"))}function ae(h,p){p.bufferProcessing=!0;var b=p.bufferedRequest;if(h._writev&&b&&b.next){var M=p.bufferedRequestCount,j=new Array(M),K=p.corkedRequestsFree;K.entry=b;for(var N=0,te=!0;b;)j[N]=b,b.isBuf||(te=!1),b=b.next,N+=1;j.allBuffers=te,W(h,p,!0,p.length,j,"",K.finish),p.pendingcb++,p.lastBufferedRequest=null,K.next?(p.corkedRequestsFree=K.next,K.next=null):p.corkedRequestsFree=new t(p),p.bufferedRequestCount=0}else{for(;b;){var de=b.chunk,ie=b.encoding,s=b.callback,a=p.objectMode?1:de.length;if(W(h,p,!1,a,de,ie,s),b=b.next,p.bufferedRequestCount--,p.writing)break}b===null&&(p.lastBufferedRequest=null)}p.bufferedRequest=b,p.bufferProcessing=!1}C.prototype._write=function(h,p,b){b(new Error("_write() is not implemented"))},C.prototype._writev=null,C.prototype.end=function(h,p,b){var M=this._writableState;typeof h=="function"?(b=h,h=null,p=null):typeof p=="function"&&(b=p,p=null),h!=null&&this.write(h,p),M.corked&&(M.corked=1,this.uncork()),M.ending||be(this,M,b)};function L(h){return h.ending&&h.length===0&&h.bufferedRequest===null&&!h.finished&&!h.writing}function $(h,p){h._final(function(b){p.pendingcb--,b&&h.emit("error",b),p.prefinished=!0,h.emit("prefinish"),se(h,p)})}function le(h,p){!p.prefinished&&!p.finalCalled&&(typeof h._final=="function"?(p.pendingcb++,p.finalCalled=!0,e.nextTick($,h,p)):(p.prefinished=!0,h.emit("prefinish")))}function se(h,p){var b=L(p);return b&&(le(h,p),p.pendingcb===0&&(p.finished=!0,h.emit("finish"))),b}function be(h,p,b){p.ending=!0,se(h,p),b&&(p.finished?e.nextTick(b):h.once("finish",b)),p.ended=!0,h.writable=!1}function Re(h,p,b){var M=h.entry;for(h.entry=null;M;){var j=M.callback;p.pendingcb--,j(b),M=M.next}p.corkedRequestsFree.next=h}return Object.defineProperty(C.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(h){!this._writableState||(this._writableState.destroyed=h)}}),C.prototype.destroy=m.destroy,C.prototype._undestroy=m.undestroy,C.prototype._destroy=function(h,p){this.end(),p(h)},Pr}var Rr,yn;function st(){if(yn)return Rr;yn=1;var e=nt.exports,t=Object.keys||function(m){var A=[];for(var E in m)A.push(E);return A};Rr=g;var r=Object.create(X);r.inherits=Gt.exports;var n=$n(),o=Vn();r.inherits(g,n);for(var l=t(o.prototype),u=0;u<l.length;u++){var y=l[u];g.prototype[y]||(g.prototype[y]=o.prototype[y])}function g(m){if(!(this instanceof g))return new g(m);n.call(this,m),o.call(this,m),m&&m.readable===!1&&(this.readable=!1),m&&m.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,m&&m.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",T)}Object.defineProperty(g.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function T(){this.allowHalfOpen||this._writableState.ended||e.nextTick(_,this)}function _(m){m.end()}return Object.defineProperty(g.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(m){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=m,this._writableState.destroyed=m)}}),g.prototype._destroy=function(m,A){this.push(null),this.end(),e.nextTick(A,m)},Rr}var Ir={},mn;function wn(){if(mn)return Ir;mn=1;var e=it.exports.Buffer,t=e.isEncoding||function(d){switch(d=""+d,d&&d.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function r(d){if(!d)return"utf8";for(var w;;)switch(d){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return d;default:if(w)return;d=(""+d).toLowerCase(),w=!0}}function n(d){var w=r(d);if(typeof w!="string"&&(e.isEncoding===t||!t(d)))throw new Error("Unknown encoding: "+d);return w||d}Ir.StringDecoder=o;function o(d){this.encoding=n(d);var w;switch(this.encoding){case"utf16le":this.text=m,this.end=A,w=4;break;case"utf8":this.fillLast=g,w=4;break;case"base64":this.text=E,this.end=B,w=3;break;default:this.write=C,this.end=x;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(w)}o.prototype.write=function(d){if(d.length===0)return"";var w,R;if(this.lastNeed){if(w=this.fillLast(d),w===void 0)return"";R=this.lastNeed,this.lastNeed=0}else R=0;return R<d.length?w?w+this.text(d,R):this.text(d,R):w||""},o.prototype.end=_,o.prototype.text=T,o.prototype.fillLast=function(d){if(this.lastNeed<=d.length)return d.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);d.copy(this.lastChar,this.lastTotal-this.lastNeed,0,d.length),this.lastNeed-=d.length};function l(d){return d<=127?0:d>>5===6?2:d>>4===14?3:d>>3===30?4:d>>6===2?-1:-2}function u(d,w,R){var W=w.length-1;if(W<R)return 0;var I=l(w[W]);return I>=0?(I>0&&(d.lastNeed=I-1),I):--W<R||I===-2?0:(I=l(w[W]),I>=0?(I>0&&(d.lastNeed=I-2),I):--W<R||I===-2?0:(I=l(w[W]),I>=0?(I>0&&(I===2?I=0:d.lastNeed=I-3),I):0))}function y(d,w,R){if((w[0]&192)!==128)return d.lastNeed=0,"\uFFFD";if(d.lastNeed>1&&w.length>1){if((w[1]&192)!==128)return d.lastNeed=1,"\uFFFD";if(d.lastNeed>2&&w.length>2&&(w[2]&192)!==128)return d.lastNeed=2,"\uFFFD"}}function g(d){var w=this.lastTotal-this.lastNeed,R=y(this,d);if(R!==void 0)return R;if(this.lastNeed<=d.length)return d.copy(this.lastChar,w,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);d.copy(this.lastChar,w,0,d.length),this.lastNeed-=d.length}function T(d,w){var R=u(this,d,w);if(!this.lastNeed)return d.toString("utf8",w);this.lastTotal=R;var W=d.length-(R-this.lastNeed);return d.copy(this.lastChar,0,W),d.toString("utf8",w,W)}function _(d){var w=d&&d.length?this.write(d):"";return this.lastNeed?w+"\uFFFD":w}function m(d,w){if((d.length-w)%2===0){var R=d.toString("utf16le",w);if(R){var W=R.charCodeAt(R.length-1);if(W>=55296&&W<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=d[d.length-2],this.lastChar[1]=d[d.length-1],R.slice(0,-1)}return R}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=d[d.length-1],d.toString("utf16le",w,d.length-1)}function A(d){var w=d&&d.length?this.write(d):"";if(this.lastNeed){var R=this.lastTotal-this.lastNeed;return w+this.lastChar.toString("utf16le",0,R)}return w}function E(d,w){var R=(d.length-w)%3;return R===0?d.toString("base64",w):(this.lastNeed=3-R,this.lastTotal=3,R===1?this.lastChar[0]=d[d.length-1]:(this.lastChar[0]=d[d.length-2],this.lastChar[1]=d[d.length-1]),d.toString("base64",w,d.length-R))}function B(d){var w=d&&d.length?this.write(d):"";return this.lastNeed?w+this.lastChar.toString("base64",0,3-this.lastNeed):w}function C(d){return d.toString(this.encoding)}function x(d){return d&&d.length?this.write(d):""}return Ir}var xr,vn;function $n(){if(vn)return xr;vn=1;var e=nt.exports;xr=w;var t=xs,r;w.ReadableState=d,or.exports.EventEmitter;var n=function(s,a){return s.listeners(a).length},o=Fn,l=it.exports.Buffer,u=(typeof oe<"u"?oe:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function y(s){return l.from(s)}function g(s){return l.isBuffer(s)||s instanceof u}var T=Object.create(X);T.inherits=Gt.exports;var _=lr,m=void 0;_&&_.debuglog?m=_.debuglog("stream"):m=function(){};var A=zs(),E=qn,B;T.inherits(w,o);var C=["error","close","destroy","pause","resume"];function x(s,a,v){if(typeof s.prependListener=="function")return s.prependListener(a,v);!s._events||!s._events[a]?s.on(a,v):t(s._events[a])?s._events[a].unshift(v):s._events[a]=[v,s._events[a]]}function d(s,a){r=r||st(),s=s||{};var v=a instanceof r;this.objectMode=!!s.objectMode,v&&(this.objectMode=this.objectMode||!!s.readableObjectMode);var S=s.highWaterMark,k=s.readableHighWaterMark,P=this.objectMode?16:16*1024;S||S===0?this.highWaterMark=S:v&&(k||k===0)?this.highWaterMark=k:this.highWaterMark=P,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new A,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=s.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,s.encoding&&(B||(B=wn().StringDecoder),this.decoder=new B(s.encoding),this.encoding=s.encoding)}function w(s){if(r=r||st(),!(this instanceof w))return new w(s);this._readableState=new d(s,this),this.readable=!0,s&&(typeof s.read=="function"&&(this._read=s.read),typeof s.destroy=="function"&&(this._destroy=s.destroy)),o.call(this)}Object.defineProperty(w.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(s){!this._readableState||(this._readableState.destroyed=s)}}),w.prototype.destroy=E.destroy,w.prototype._undestroy=E.undestroy,w.prototype._destroy=function(s,a){this.push(null),a(s)},w.prototype.push=function(s,a){var v=this._readableState,S;return v.objectMode?S=!0:typeof s=="string"&&(a=a||v.defaultEncoding,a!==v.encoding&&(s=l.from(s,a),a=""),S=!0),R(this,s,a,!1,S)},w.prototype.unshift=function(s){return R(this,s,null,!0,!1)};function R(s,a,v,S,k){var P=s._readableState;if(a===null)P.reading=!1,ae(s,P);else{var U;k||(U=I(P,a)),U?s.emit("error",U):P.objectMode||a&&a.length>0?(typeof a!="string"&&!P.objectMode&&Object.getPrototypeOf(a)!==l.prototype&&(a=y(a)),S?P.endEmitted?s.emit("error",new Error("stream.unshift() after end event")):W(s,P,a,!0):P.ended?s.emit("error",new Error("stream.push() after EOF")):(P.reading=!1,P.decoder&&!v?(a=P.decoder.write(a),P.objectMode||a.length!==0?W(s,P,a,!1):le(s,P)):W(s,P,a,!1))):S||(P.reading=!1)}return re(P)}function W(s,a,v,S){a.flowing&&a.length===0&&!a.sync?(s.emit("data",v),s.read(0)):(a.length+=a.objectMode?1:v.length,S?a.buffer.unshift(v):a.buffer.push(v),a.needReadable&&L(s)),le(s,a)}function I(s,a){var v;return!g(a)&&typeof a!="string"&&a!==void 0&&!s.objectMode&&(v=new TypeError("Invalid non-string/buffer chunk")),v}function re(s){return!s.ended&&(s.needReadable||s.length<s.highWaterMark||s.length===0)}w.prototype.isPaused=function(){return this._readableState.flowing===!1},w.prototype.setEncoding=function(s){return B||(B=wn().StringDecoder),this._readableState.decoder=new B(s),this._readableState.encoding=s,this};var Q=8388608;function ne(s){return s>=Q?s=Q:(s--,s|=s>>>1,s|=s>>>2,s|=s>>>4,s|=s>>>8,s|=s>>>16,s++),s}function ee(s,a){return s<=0||a.length===0&&a.ended?0:a.objectMode?1:s!==s?a.flowing&&a.length?a.buffer.head.data.length:a.length:(s>a.highWaterMark&&(a.highWaterMark=ne(s)),s<=a.length?s:a.ended?a.length:(a.needReadable=!0,0))}w.prototype.read=function(s){m("read",s),s=parseInt(s,10);var a=this._readableState,v=s;if(s!==0&&(a.emittedReadable=!1),s===0&&a.needReadable&&(a.length>=a.highWaterMark||a.ended))return m("read: emitReadable",a.length,a.ended),a.length===0&&a.ended?te(this):L(this),null;if(s=ee(s,a),s===0&&a.ended)return a.length===0&&te(this),null;var S=a.needReadable;m("need readable",S),(a.length===0||a.length-s<a.highWaterMark)&&(S=!0,m("length less than watermark",S)),a.ended||a.reading?(S=!1,m("reading or ended",S)):S&&(m("do read"),a.reading=!0,a.sync=!0,a.length===0&&(a.needReadable=!0),this._read(a.highWaterMark),a.sync=!1,a.reading||(s=ee(v,a)));var k;return s>0?k=M(s,a):k=null,k===null?(a.needReadable=!0,s=0):a.length-=s,a.length===0&&(a.ended||(a.needReadable=!0),v!==s&&a.ended&&te(this)),k!==null&&this.emit("data",k),k};function ae(s,a){if(!a.ended){if(a.decoder){var v=a.decoder.end();v&&v.length&&(a.buffer.push(v),a.length+=a.objectMode?1:v.length)}a.ended=!0,L(s)}}function L(s){var a=s._readableState;a.needReadable=!1,a.emittedReadable||(m("emitReadable",a.flowing),a.emittedReadable=!0,a.sync?e.nextTick($,s):$(s))}function $(s){m("emit readable"),s.emit("readable"),b(s)}function le(s,a){a.readingMore||(a.readingMore=!0,e.nextTick(se,s,a))}function se(s,a){for(var v=a.length;!a.reading&&!a.flowing&&!a.ended&&a.length<a.highWaterMark&&(m("maybeReadMore read 0"),s.read(0),v!==a.length);)v=a.length;a.readingMore=!1}w.prototype._read=function(s){this.emit("error",new Error("_read() is not implemented"))},w.prototype.pipe=function(s,a){var v=this,S=this._readableState;switch(S.pipesCount){case 0:S.pipes=s;break;case 1:S.pipes=[S.pipes,s];break;default:S.pipes.push(s);break}S.pipesCount+=1,m("pipe count=%d opts=%j",S.pipesCount,a);var k=(!a||a.end!==!1)&&s!==process.stdout&&s!==process.stderr,P=k?Oe:J;S.endEmitted?e.nextTick(P):v.once("end",P),s.on("unpipe",U);function U(fe,me){m("onunpipe"),fe===v&&me&&me.hasUnpiped===!1&&(me.hasUnpiped=!0,Ge())}function Oe(){m("onend"),s.end()}var Ie=be(v);s.on("drain",Ie);var ke=!1;function Ge(){m("cleanup"),s.removeListener("close",_e),s.removeListener("finish",ye),s.removeListener("drain",Ie),s.removeListener("error",ge),s.removeListener("unpipe",U),v.removeListener("end",Oe),v.removeListener("end",J),v.removeListener("data",We),ke=!0,S.awaitDrain&&(!s._writableState||s._writableState.needDrain)&&Ie()}var xe=!1;v.on("data",We);function We(fe){m("ondata"),xe=!1;var me=s.write(fe);me===!1&&!xe&&((S.pipesCount===1&&S.pipes===s||S.pipesCount>1&&ie(S.pipes,s)!==-1)&&!ke&&(m("false write response, pause",S.awaitDrain),S.awaitDrain++,xe=!0),v.pause())}function ge(fe){m("onerror",fe),J(),s.removeListener("error",ge),n(s,"error")===0&&s.emit("error",fe)}x(s,"error",ge);function _e(){s.removeListener("finish",ye),J()}s.once("close",_e);function ye(){m("onfinish"),s.removeListener("close",_e),J()}s.once("finish",ye);function J(){m("unpipe"),v.unpipe(s)}return s.emit("pipe",v),S.flowing||(m("pipe resume"),v.resume()),s};function be(s){return function(){var a=s._readableState;m("pipeOnDrain",a.awaitDrain),a.awaitDrain&&a.awaitDrain--,a.awaitDrain===0&&n(s,"data")&&(a.flowing=!0,b(s))}}w.prototype.unpipe=function(s){var a=this._readableState,v={hasUnpiped:!1};if(a.pipesCount===0)return this;if(a.pipesCount===1)return s&&s!==a.pipes?this:(s||(s=a.pipes),a.pipes=null,a.pipesCount=0,a.flowing=!1,s&&s.emit("unpipe",this,v),this);if(!s){var S=a.pipes,k=a.pipesCount;a.pipes=null,a.pipesCount=0,a.flowing=!1;for(var P=0;P<k;P++)S[P].emit("unpipe",this,{hasUnpiped:!1});return this}var U=ie(a.pipes,s);return U===-1?this:(a.pipes.splice(U,1),a.pipesCount-=1,a.pipesCount===1&&(a.pipes=a.pipes[0]),s.emit("unpipe",this,v),this)},w.prototype.on=function(s,a){var v=o.prototype.on.call(this,s,a);if(s==="data")this._readableState.flowing!==!1&&this.resume();else if(s==="readable"){var S=this._readableState;!S.endEmitted&&!S.readableListening&&(S.readableListening=S.needReadable=!0,S.emittedReadable=!1,S.reading?S.length&&L(this):e.nextTick(Re,this))}return v},w.prototype.addListener=w.prototype.on;function Re(s){m("readable nexttick read 0"),s.read(0)}w.prototype.resume=function(){var s=this._readableState;return s.flowing||(m("resume"),s.flowing=!0,h(this,s)),this};function h(s,a){a.resumeScheduled||(a.resumeScheduled=!0,e.nextTick(p,s,a))}function p(s,a){a.reading||(m("resume read 0"),s.read(0)),a.resumeScheduled=!1,a.awaitDrain=0,s.emit("resume"),b(s),a.flowing&&!a.reading&&s.read(0)}w.prototype.pause=function(){return m("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(m("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function b(s){var a=s._readableState;for(m("flow",a.flowing);a.flowing&&s.read()!==null;);}w.prototype.wrap=function(s){var a=this,v=this._readableState,S=!1;s.on("end",function(){if(m("wrapped end"),v.decoder&&!v.ended){var U=v.decoder.end();U&&U.length&&a.push(U)}a.push(null)}),s.on("data",function(U){if(m("wrapped data"),v.decoder&&(U=v.decoder.write(U)),!(v.objectMode&&U==null)&&!(!v.objectMode&&(!U||!U.length))){var Oe=a.push(U);Oe||(S=!0,s.pause())}});for(var k in s)this[k]===void 0&&typeof s[k]=="function"&&(this[k]=function(U){return function(){return s[U].apply(s,arguments)}}(k));for(var P=0;P<C.length;P++)s.on(C[P],this.emit.bind(this,C[P]));return this._read=function(U){m("wrapped _read",U),S&&(S=!1,s.resume())},this},Object.defineProperty(w.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),w._fromList=M;function M(s,a){if(a.length===0)return null;var v;return a.objectMode?v=a.buffer.shift():!s||s>=a.length?(a.decoder?v=a.buffer.join(""):a.buffer.length===1?v=a.buffer.head.data:v=a.buffer.concat(a.length),a.buffer.clear()):v=j(s,a.buffer,a.decoder),v}function j(s,a,v){var S;return s<a.head.data.length?(S=a.head.data.slice(0,s),a.head.data=a.head.data.slice(s)):s===a.head.data.length?S=a.shift():S=v?K(s,a):N(s,a),S}function K(s,a){var v=a.head,S=1,k=v.data;for(s-=k.length;v=v.next;){var P=v.data,U=s>P.length?P.length:s;if(U===P.length?k+=P:k+=P.slice(0,s),s-=U,s===0){U===P.length?(++S,v.next?a.head=v.next:a.head=a.tail=null):(a.head=v,v.data=P.slice(U));break}++S}return a.length-=S,k}function N(s,a){var v=l.allocUnsafe(s),S=a.head,k=1;for(S.data.copy(v),s-=S.data.length;S=S.next;){var P=S.data,U=s>P.length?P.length:s;if(P.copy(v,v.length-s,0,U),s-=U,s===0){U===P.length?(++k,S.next?a.head=S.next:a.head=a.tail=null):(a.head=S,S.data=P.slice(U));break}++k}return a.length-=k,v}function te(s){var a=s._readableState;if(a.length>0)throw new Error('"endReadable()" called on non-empty stream');a.endEmitted||(a.ended=!0,e.nextTick(de,a,s))}function de(s,a){!s.endEmitted&&s.length===0&&(s.endEmitted=!0,a.readable=!1,a.emit("end"))}function ie(s,a){for(var v=0,S=s.length;v<S;v++)if(s[v]===a)return v;return-1}return xr}var Gn=Pe,mr=st(),zn=Object.create(X);zn.inherits=Gt.exports;zn.inherits(Pe,mr);function Zs(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,t!=null&&this.push(t),n(e);var o=this._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}function Pe(e){if(!(this instanceof Pe))return new Pe(e);mr.call(this,e),this._transformState={afterTransform:Zs.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.on("prefinish",Js)}function Js(){var e=this;typeof this._flush=="function"?this._flush(function(t,r){bn(e,t,r)}):bn(this,null,null)}Pe.prototype.push=function(e,t){return this._transformState.needTransform=!1,mr.prototype.push.call(this,e,t)};Pe.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")};Pe.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var o=this._readableState;(n.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}};Pe.prototype._read=function(e){var t=this._transformState;t.writechunk!==null&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0};Pe.prototype._destroy=function(e,t){var r=this;mr.prototype._destroy.call(this,e,function(n){t(n),r.emit("close")})};function bn(e,t,r){if(t)return e.emit("error",t);if(r!=null&&e.push(r),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}var Qs=$t,Yn=Gn,Xn=Object.create(X);Xn.inherits=Gt.exports;Xn.inherits($t,Yn);function $t(e){if(!(this instanceof $t))return new $t(e);Yn.call(this,e)}$t.prototype._transform=function(e,t,r){r(null,e)};(function(e,t){t=e.exports=$n(),t.Stream=t,t.Readable=t,t.Writable=Vn(),t.Duplex=st(),t.Transform=Gn,t.PassThrough=Qs})(Wr,Wr.exports);var Zn=Wr.exports.Transform,Jn=xi.inherits,Qn=Li;function ot(e){Zn.call(this,e),this._destroyed=!1}Jn(ot,Zn);ot.prototype.destroy=function(e){if(!this._destroyed){this._destroyed=!0;var t=this;process.nextTick(function(){e&&t.emit("error",e),t.emit("close")})}};function eo(e,t,r){r(null,e)}function Vr(e){return function(t,r,n){return typeof t=="function"&&(n=r,r=t,t={}),typeof r!="function"&&(r=eo),typeof n!="function"&&(n=null),e(t,r,n)}}gr.exports=Vr(function(e,t,r){var n=new ot(e);return n._transform=t,r&&(n._flush=r),n});gr.exports.ctor=Vr(function(e,t,r){function n(o){if(!(this instanceof n))return new n(o);this.options=Qn(e,o),ot.call(this,this.options)}return Jn(n,ot),n.prototype._transform=t,r&&(n.prototype._flush=r),n});gr.exports.obj=Vr(function(e,t,r){var n=new ot(Qn({objectMode:!0,highWaterMark:16},e));return n._transform=t,r&&(n._flush=r),n});Object.defineProperty(pr,"__esModule",{value:!0});pr.storeTransformStream=void 0;const to=gr.exports;function ro(e){return to.obj((t,r,n)=>{try{const o=e(t);n(null,o);return}catch(o){n(o);return}})}pr.storeTransformStream=ro;(function(e){var t=oe&&oe.__createBinding||(Object.create?function(n,o,l,u){u===void 0&&(u=l),Object.defineProperty(n,u,{enumerable:!0,get:function(){return o[l]}})}:function(n,o,l,u){u===void 0&&(u=l),n[u]=o[l]}),r=oe&&oe.__exportStar||function(n,o){for(var l in n)l!=="default"&&!Object.prototype.hasOwnProperty.call(o,l)&&t(o,n,l)};Object.defineProperty(e,"__esModule",{value:!0}),r(dr,e),r(fr,e),r(hr,e),r(lt,e),r(pr,e)})(kr);var no=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,o,l;if(Array.isArray(t)){if(n=t.length,n!=r.length)return!1;for(o=n;o--!==0;)if(!e(t[o],r[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(l=Object.keys(t),n=l.length,n!==Object.keys(r).length)return!1;for(o=n;o--!==0;)if(!Object.prototype.hasOwnProperty.call(r,l[o]))return!1;for(o=n;o--!==0;){var u=l[o];if(!e(t[u],r[u]))return!1}return!0}return t!==t&&r!==r};const Ee=e=>e!==null&&typeof e=="object"&&typeof e.pipe=="function";Ee.writable=e=>Ee(e)&&e.writable!==!1&&typeof e._write=="function"&&typeof e._writableState=="object";Ee.readable=e=>Ee(e)&&e.readable!==!1&&typeof e._read=="function"&&typeof e._readableState=="object";Ee.duplex=e=>Ee.writable(e)&&Ee.readable(e);Ee.transform=e=>Ee.duplex(e)&&typeof e._transform=="function";var io=Ee;const Kt={GOOGLE:"google",FACEBOOK:"facebook",TWITCH:"twitch",REDDIT:"reddit",DISCORD:"discord"},Ve={GOOGLE:"google",FACEBOOK:"facebook",TWITCH:"twitch",REDDIT:"reddit",DISCORD:"discord",EMAIL_PASSWORDLESS:"torus-auth0-email-passwordless"},_n={[Ve.GOOGLE]:"tkey-google",[Ve.FACEBOOK]:"tkey-facebook",[Ve.TWITCH]:"tkey-twitch",[Ve.REDDIT]:"tkey-reddit",[Ve.DISCORD]:"tkey-discord",[Ve.EMAIL_PASSWORDLESS]:"tkey-auth0-email-passwordless"},Y={MOONPAY:"moonpay",WYRE:"wyre",RAMPNETWORK:"rampnetwork",XANPOOL:"xanpool",MERCURYO:"mercuryo",TRANSAK:"transak",BANXA:"banxa"},Z={MAINNET:"mainnet",MATIC:"matic",BSC_MAINNET:"bsc_mainnet",AVALANCHE_MAINNET:"avalanche_mainnet",XDAI:"xdai"},so={PRODUCTION:"production",DEVELOPMENT:"development",BINANCE:"binance",TESTING:"testing",LRC:"lrc",BETA:"beta",BNB:"bnb",POLYGON:"polygon"},rt={BOTTOM_LEFT:"bottom-left",TOP_LEFT:"top-left",BOTTOM_RIGHT:"bottom-right",TOP_RIGHT:"top-right"},oo=["ETH","USDT","USDC","TUSD","EOSDT","USD","DAI","GUSD","DKKT","PAX","ILS","RUB","BYN","EUR","GBP","JPY","KRW","PLN","MXN","AUD","BRL","CAD","CHF","KPW","LAK","LBP","LKR","XOF","CNHT","DOGE","UAH","TRY","HKD","XJP","SGD","USC","NZD","NGN","RUR","COP","GHS","EGP","IDR","BHD","CRC","PEN","AED","DOP","PKR","HUF","VND","XAR","LTC","RON","OMR","MYR","DKK","UGX","ZMW","SAR","SEK","GEL","RWF","IRR","TZS","CNY","VEF","BDT","HRK","CLP","THB","XAF","ARS","UYU","SZL","KZT","NOK","KES","PAB","INR","CZK","MAD","TWD","PHP","ZAR","BOB","CDF","DASH","VES","ISK","MWK","BAM","TTD","XRP","JOD","RSD","HNL","BGN","GTQ","BWP","XMR","MMK","QAR","AOA","KWD","MUR","WUSD","WEUR","WAVES","WTRY","LRD","LSL","LYD","AWG","MDL","BTO","EURS","CHFT","MKD","MNT","MOP","MRO","MVR","VOLLAR","CKUSD","KHR","VUV","BITCNY","QC","BBD","NAD","NPR","PGK","PYG","BIF","BMD","BND","XLM","BNB","SCR","BAT","CRO","HT","KCS","LEO","LINK","MKR","NPXS","OMG","REP","ZB","ZIL","ZRX","BCH","BZD","CUP","CVE","DJF","DZD","ERN","ETB","FJD","FKP","BUSD","ANCT","ALL","AMD","ANG","CNYX","IQD","UZS","TND","GGP","XAU","KGS","GIP","JMD","ZEC","USDP","BSV","EMC2","SNT","GTO","POWR","EUSD","EURT","BCY","BTS","ATM","BLOCKPAY","ARDR","AMP","B2X","BITGOLD","BITEUR","ATB","BITUSD","AGRS","DFXT","HIKEN","BIX","KNC","EOS","COB","COSS","BMH","NANO","BDG","BNT","XVG","LKK1Y","LKK","USDK","EURN","NZDT","JSE","GMD","GNF","GYD","YER","XPF","HTG","SLL","SOS","WST","SVC","SYP","NEO","KMF","JUMP","AYA","BLAST","WGR","BCN","BTG","URALS","INN","USDQ","CNH","HUSD","BKRW","NZDX","EURX","CADX","USDEX","JPYX","AUDX","VNDC","EON","GBPX","CHFX","USDJ","IDRT","USDS","USDN","BIDR","IDK","BSD","BTN","KYD","NIO","SBD","SDG","SHP","TOP","XCD","XCHF","CNYT","GYEN","ZUSD","GOLD","TRX","TRYB","PLATC","STRAX","UST","GLM","VAI","BRZ","DDRST","XAUT","MIM"],ao={[Y.MOONPAY]:["AUD","BGN","BRL","CAD","CHF","CNY","COP","CZK","DKK","DOP","EGP","EUR","GBP","HKD","HRK","IDR","ILS","JPY","JOD","KES","KRW","KWD","LKR","MAD","MXN","MYR","NGN","NOK","NZD","OMR","PEN","PKR","PLN","RON","RUB","SEK","SGD","THB","TRY","TWD","USD","VND","ZAR"],[Y.WYRE]:["USD","EUR","GBP","AUD","CAD","NZD","ARS","BRL","CHF","CLP","COP","CZK","DKK","HKD","ILS","INR","ISK","JPY","KRW","MXN","MYR","NOK","PHP","PLN","SEK","THB","VND","ZAR"],[Y.RAMPNETWORK]:["USD","EUR","GBP"],[Y.XANPOOL]:["SGD","HKD","THB","PHP","INR","IDR","MYR","AUD","NZD","KRW"],[Y.MERCURYO]:["EUR","USD","GBP","TRY","JPY","BRL","NGN","VND","MXN","KRW"],[Y.TRANSAK]:["ARS","AUD","BBD","BGN","BMD","BRL","CAD","CHF","CLP","CRC","CZK","DKK","DOP","EUR","FJD","FKP","GBP","GIP","HRK","HUF","IDR","ILS","ISK","JMD","JPY","KES","KRW","MDL","MXN","MYR","NOK","NZD","PEN","PHP","PLN","PYG","RON","SEK","SGD","THB","TRY","TZS","USD","ZAR"],[Y.BANXA]:["EUR","GBP","USD"]},lo=new Set(oo);function qe(e){return ao[e].filter(r=>lo.has(r))}const uo={[Y.MOONPAY]:{line1:"Credit/ Debit Card/ Apple Pay",line2:"4.5% or 5 USD",line3:"2,000\u20AC/day, 10,000\u20AC/mo",supportPage:"https://help.moonpay.io/en/",minOrderValue:24.99,maxOrderValue:5e4,validCurrencies:qe(Y.MOONPAY),validCryptoCurrenciesByChain:{[Z.MAINNET]:[{value:"aave",display:"AAVE"},{value:"bat",display:"BAT"},{value:"dai",display:"DAI"},{value:"eth",display:"ETH"},{value:"mkr",display:"MKR"},{value:"matic",display:"MATIC"},{value:"usdt",display:"USDT"},{value:"usdc",display:"USDC"}],[Z.MATIC]:[{value:"eth_polygon",display:"ETH"},{value:"matic_polygon",display:"MATIC"},{value:"usdc_polygon",display:"USDC"}],[Z.BSC_MAINNET]:[{value:"bnb_bsc",display:"BNB"},{value:"busd_bsc",display:"BUSD"}],[Z.AVALANCHE_MAINNET]:[{value:"avax_cchain",display:"AVAX"}]},includeFees:!0,api:!0,enforceMax:!1},[Y.WYRE]:{line1:"Apple Pay/ Debit/ Credit Card",line2:"4.9% + 30\xA2 or 5 USD",line3:"$250/day",supportPage:"https://support.sendwyre.com/en/",minOrderValue:5,maxOrderValue:500,validCurrencies:qe(Y.WYRE),validCryptoCurrenciesByChain:{[Z.MAINNET]:[{value:"AAVE",display:"AAVE"},{value:"BAT",display:"BAT"},{value:"BUSD",display:"BUSD"},{value:"DAI",display:"DAI"},{value:"ETH",display:"ETH"},{value:"MKR",display:"MKR"},{value:"UNI",display:"UNI"},{value:"USDC",display:"USDC"},{value:"USDT",display:"USDT"}],[Z.MATIC]:[{value:"MUSDC",display:"USDC"}],[Z.AVALANCHE_MAINNET]:[{value:"AVAXC",display:"AVAXC"}]},includeFees:!1,api:!0,enforceMax:!1},[Y.RAMPNETWORK]:{line1:"Debit Card/ <br>Apple Pay/ Bank transfer",line2:"0.49% - 2.9%",line3:"5,000\u20AC/purchase, 20,000\u20AC/mo",supportPage:"https://instant.ramp.network/",minOrderValue:50,maxOrderValue:2e4,validCurrencies:qe(Y.RAMPNETWORK),validCryptoCurrenciesByChain:{[Z.MAINNET]:[{value:"ETH",display:"ETH"},{value:"DAI",display:"DAI"},{value:"USDC",display:"USDC"},{value:"USDT",display:"USDT"}],[Z.MATIC]:[{value:"MATIC_DAI",display:"DAI"},{value:"MATIC_MATIC",display:"MATIC"},{value:"MATIC_USDC",display:"USDC"}],[Z.AVALANCHE_MAINNET]:[{value:"AVAX",display:"AVAX"}]},includeFees:!0,api:!0,receiveHint:"walletTopUp.receiveHintRamp",enforceMax:!1},[Y.XANPOOL]:{line1:"PayNow/ InstaPay/ FPS/ GoJekPay/ UPI/ PromptPay/ <br>ViettelPay/ DuitNow",line2:"2.5% buying, 3% selling",line3:"$2,500 / day",supportPage:"mailto:support@xanpool.com",minOrderValue:100,maxOrderValue:2500,validCurrencies:qe(Y.XANPOOL),validCryptoCurrenciesByChain:{[Z.MAINNET]:[{value:"ETH",display:"ETH"},{value:"USDT",display:"USDT"}]},includeFees:!0,api:!0,sell:!0,enforceMax:!1},[Y.MERCURYO]:{line1:"Credit/ Debit Card/ Apple Pay",line2:"3.95% or 4 USD",line3:"10,000\u20AC/day, 25,000\u20AC/mo",supportPage:"mailto:support@mercuryo.io",minOrderValue:30,maxOrderValue:5e3,validCurrencies:qe(Y.MERCURYO),validCryptoCurrenciesByChain:{[Z.MAINNET]:[{value:"ETH",display:"ETH"},{value:"BAT",display:"BAT"},{value:"USDT",display:"USDT"},{value:"DAI",display:"DAI"}],[Z.BSC_MAINNET]:[{value:"BNB",display:"BNB"},{value:"BUSD",display:"BUSD"},{value:"1INCH",display:"1INCH"}]},includeFees:!0,api:!0,enforceMax:!1},[Y.TRANSAK]:{line1:"Apple & Google Pay / Credit/Debit Card<br/>Bangkok Bank Mobile & iPay<br/>Bank Transfer (sepa/gbp) / SCB Mobile & Easy",line2:"0.99% - 5.5% or 5 USD",line3:"$5,000/day, $28,000/mo",supportPage:"https://support.transak.com/hc/en-US",minOrderValue:30,maxOrderValue:500,validCurrencies:qe(Y.TRANSAK),validCryptoCurrenciesByChain:{[Z.MAINNET]:[{value:"AAVE",display:"AAVE"},{value:"DAI",display:"DAI"},{value:"ETH",display:"ETH"},{value:"USDC",display:"USDC"},{value:"USDT",display:"USDT"}],[Z.MATIC]:[{value:"AAVE",display:"AAVE"},{value:"DAI",display:"DAI"},{value:"MATIC",display:"MATIC"},{value:"USDC",display:"USDC"},{value:"USDT",display:"USDT"},{value:"WETH",display:"WETH"}],[Z.BSC_MAINNET]:[{value:"BNB",display:"BNB"},{value:"BUSD",display:"BUSD"}],[Z.AVALANCHE_MAINNET]:[{value:"AVAX",display:"AVAX"}]},includeFees:!0,enforceMax:!0},[Y.BANXA]:{line1:"Debit Card/ <br>Apple Pay/ Bank transfer",line2:"0.49% - 2.9%",line3:"5,000\u20AC/purchase, 20,000\u20AC/mo",supportPage:"https://support.banxa.com",minOrderValue:20,maxOrderValue:15e3,validCurrencies:qe(Y.BANXA),validCryptoCurrenciesByChain:{[Z.MAINNET]:[{value:"ETH",display:"ETH"},{value:"USDT",display:"USDT"},{value:"BUSD",display:"BUSD"},{value:"LINK",display:"LINK"},{value:"USDC",display:"USDC"},{value:"CHZ",display:"CHZ"},{value:"BAT",display:"BAT"},{value:"MANA",display:"MANA"},{value:"AAVE",display:"AAVE"},{value:"COMP",display:"COMP"},{value:"ENJ",display:"ENJ"}],[Z.MATIC]:[{value:"MATIC",display:"MATIC"}]},includeFees:!0,enforceMax:!0}},co={en:{embed:{continue:"Continue",actionRequired:"Authorization required",pendingAction:"Click continue to proceed with your request in a popup",cookiesRequired:"Cookies Required",enableCookies:"Please enable cookies in your browser preferences to access Torus",clickHere:"More Info"}},de:{embed:{continue:"Fortsetzen",actionRequired:"Autorisierung erforderlich",pendingAction:"Klicken Sie in einem Popup auf Weiter, um mit Ihrer Anfrage fortzufahren",cookiesRequired:"Cookies ben\xF6tigt",enableCookies:"Bitte aktivieren Sie Cookies in Ihren Browsereinstellungen, um auf Torus zuzugreifen",clickHere:"Mehr Info"}},ja:{embed:{continue:"\u7D99\u7D9A\u3059\u308B",actionRequired:"\u8A8D\u8A3C\u304C\u5FC5\u8981\u3067\u3059",pendingAction:"\u7D9A\u884C\u3092\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u3001\u30DD\u30C3\u30D7\u30A2\u30C3\u30D7\u3067\u30EA\u30AF\u30A8\u30B9\u30C8\u3092\u7D9A\u884C\u3057\u307E\u3059",cookiesRequired:"\u5FC5\u8981\u306A\u30AF\u30C3\u30AD\u30FC",enableCookies:"Torus\u306B\u30A2\u30AF\u30BB\u30B9\u3059\u308B\u306B\u306F\u3001\u30D6\u30E9\u30A6\u30B6\u306E\u8A2D\u5B9A\u3067Cookie\u3092\u6709\u52B9\u306B\u3057\u3066\u304F\u3060\u3055\u3044\u3002",clickHere:"\u8A73\u3057\u304F\u306F"}},ko:{embed:{continue:"\uACC4\uC18D\uD558\uB2E4",actionRequired:"\uC2B9\uC778 \uD544\uC694",pendingAction:"\uD31D\uC5C5\uC5D0\uC11C \uC694\uCCAD\uC744 \uC9C4\uD589\uD558\uB824\uBA74 \uACC4\uC18D\uC744 \uD074\uB9AD\uD558\uC2ED\uC2DC\uC624.",cookiesRequired:"\uCFE0\uD0A4 \uD544\uC694",enableCookies:"\uBE0C\uB77C\uC6B0\uC800 \uD658\uACBD \uC124\uC815\uC5D0\uC11C \uCFE0\uD0A4\uB97C \uD65C\uC131\uD654\uD558\uC5EC Torus\uC5D0 \uC561\uC138\uC2A4\uD558\uC2ED\uC2DC\uC624.",clickHere:"\uB354 \uB9CE\uC740 \uC815\uBCF4"}},zh:{embed:{continue:"\u7EE7\u7EED",actionRequired:"\u9700\u8981\u6388\u6743",pendingAction:"\u5355\u51FB\u7EE7\u7EED\u4EE5\u5728\u5F39\u51FA\u7A97\u53E3\u4E2D\u7EE7\u7EED\u60A8\u7684\u8BF7\u6C42",cookiesRequired:"\u5FC5\u586BCookie",enableCookies:"\u8BF7\u5728\u60A8\u7684\u6D4F\u89C8\u5668\u9996\u9009\u9879\u4E2D\u542F\u7528cookie\u4EE5\u8BBF\u95EETorus\u3002",clickHere:"\u66F4\u591A\u4FE1\u606F"}}};var Ae={supportedVerifierList:Object.values(Ve),paymentProviders:uo,api:"https://api.tor.us",translations:co,prodTorusUrl:"",localStorageKeyPrefix:"torus-"};const Sn=e=>new Promise((t,r)=>{window.document.body!=null?Promise.resolve(e()).then(t).catch(r):window.document.addEventListener("DOMContentLoaded",()=>{Promise.resolve(e()).then(t).catch(r)})}),Ft=e=>{const t=window.document.createElement("template"),r=e.trim();return t.innerHTML=r,t.content.firstChild},fo=function(e,t,r){for(var n=arguments.length,o=new Array(n>3?n-3:0),l=3;l<n;l++)o[l-3]=arguments[l];const u=()=>{r(...o),e.removeEventListener(t,u)};e.addEventListener(t,u)},Te=(e,t,r)=>{const n=o=>{r(o),e.removeListener(t,n)};e.on(t,n)};async function ho(){return new Promise(e=>{document.readyState!=="loading"?e():fo(document,"DOMContentLoaded",e)})}var q=Ln.getLogger("torus-embed"),pe={errors:{disconnected:()=>"Torus: Lost connection to Torus.",permanentlyDisconnected:()=>"Torus: Disconnected from iframe. Page reload required.",sendSiteMetadata:()=>"Torus: Failed to send site metadata. This is an internal error, please report this bug.",unsupportedSync:e=>`Torus: The Torus Ethereum provider does not support synchronous methods like ${e} without a callback parameter.`,invalidDuplexStream:()=>"Must provide a Node.js-style duplex stream.",invalidOptions:(e,t)=>`Invalid options. Received: { maxEventListeners: ${e}, shouldSendMetadata: ${t} }`,invalidRequestArgs:()=>"Expected a single, non-array, object argument.",invalidRequestMethod:()=>"'args.method' must be a non-empty string.",invalidRequestParams:()=>"'args.params' must be an object or array if provided.",invalidLoggerObject:()=>"'args.logger' must be an object if provided.",invalidLoggerMethod:e=>`'args.logger' must include required method '${e}'.`},info:{connected:e=>`Torus: Connected to chain with ID "${e}".`},warnings:{enableDeprecation:'Torus: ""ethereum.enable()" is deprecated and may be removed in the future. Please use "ethereum.send("eth_requestAccounts")" instead. For more information, see: https://eips.ethereum.org/EIPS/eip-1102',sendDeprecation:`Torus: "ethereum.send(...)" is deprecated and may be removed in the future. Please use "ethereum.sendAsync(...)" or "ethereum.request(...)" instead.
For more information, see: https://eips.ethereum.org/EIPS/eip-1193`,events:{close:`Torus: The event "close" is deprecated and may be removed in the future. Please use "disconnect" instead.
For more information, see: https://eips.ethereum.org/EIPS/eip-1193`,data:`Torus: The event "data" is deprecated and will be removed in the future.Use "message" instead.
For more information, see: https://eips.ethereum.org/EIPS/eip-1193#message`,networkChanged:`Torus: The event "networkChanged" is deprecated and may be removed in the future. Please use "chainChanged" instead.
For more information, see: https://eips.ethereum.org/EIPS/eip-1193`,notification:`Torus: The event "notification" is deprecated and may be removed in the future. Please use "message" instead.
For more information, see: https://eips.ethereum.org/EIPS/eip-1193`},publicConfigStore:'Torus: The property "publicConfigStore" is deprecated and WILL be removed in the future.'}};const{paymentProviders:Cn}=Ae,po=(e,t)=>{const r={};if(!e)return{errors:r,isValid:!0};if(e&&!Cn[e])return r.provider="Invalid Provider",{errors:r,isValid:Object.keys(r).length===0};const n=Cn[e],o=t||{};if(o.fiatValue){const l=+parseFloat(o.fiatValue.toString())||0;l<n.minOrderValue&&(r.fiatValue="Requested amount is lower than supported"),l>n.maxOrderValue&&n.enforceMax&&(r.fiatValue="Requested amount is higher than supported")}if(o.selectedCurrency&&!n.validCurrencies.includes(o.selectedCurrency)&&(r.selectedCurrency="Unsupported currency"),o.selectedCryptoCurrency){const l=Object.values(n.validCryptoCurrenciesByChain).flat().map(y=>y.value),u=e===Y.MOONPAY?o.selectedCryptoCurrency.toLowerCase():o.selectedCryptoCurrency;l&&!l.includes(u)&&(r.selectedCryptoCurrency="Unsupported cryptoCurrency")}return{errors:r,isValid:Object.keys(r).length===0}};function go(){return(e,t,r)=>{(typeof e.method!="string"||!e.method)&&(t.error=je.ethErrors.rpc.invalidRequest({message:"The request 'method' must be a non-empty string.",data:e})),r(n=>{const{error:o}=t;return o&&q.error(`MetaMask - RPC Error: ${o.message}`,o),n()})}}function Tn(e,t,r){let n=`MetaMask: Lost connection to "${e}".`;t?.stack&&(n+=`
${t.stack}`),q.warn(n),r&&r.listenerCount("error")>0&&r.emit("error",n)}const $e=()=>Math.random().toString(36).slice(2),ei=async(e,t)=>{let r,n;const o="1.41.3";let l=t.version||o;try{if((e==="binance"||e==="production")&&!t.version){let u;Ae.prodTorusUrl?u={data:Ae.prodTorusUrl}:u=await Nn(`${Ae.api}/latestversion?name=@toruslabs/torus-embed&version=${o}`,{},{useAPIKey:!0}),l=u.data,Ae.prodTorusUrl=u.data}}catch(u){q.error(u,"unable to fetch latest version")}switch(q.info("version used: ",l),e){case"binance":r=`https://binance.tor.us/v${l}`,n="info";break;case"testing":r="https://testing.tor.us",n="debug";break;case"bnb":r="https://bnb.tor.us",n="error";break;case"polygon":r="https://polygon.tor.us",n="error";break;case"lrc":r="https://lrc.tor.us",n="debug";break;case"beta":r="https://beta.tor.us",n="debug";break;case"development":r="http://localhost:4050",n="debug";break;default:r=`https://app.tor.us/v${l}`,n="error";break}return{torusUrl:r,logLevel:n}},An=()=>{let e=window.navigator.language||"en-US";const t=e.split("-");return e=Object.prototype.hasOwnProperty.call(Ae.translations,t[0])?t[0]:"en",e},yo=["eth_subscription"],ti=()=>{},En="directories=0,titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=660,width=375",mo="directories=0,titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=740,width=1315",On="directories=0,titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=700,width=450";function wo(){const e=window.screenLeft!==void 0?window.screenLeft:window.screenX,t=window.screenTop!==void 0?window.screenTop:window.screenY,r=1200,n=700,o=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:window.screen.width,l=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:window.screen.height,u=1,y=Math.abs((o-r)/2/u+e),g=Math.abs((l-n)/2/u+t);return`titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=${n/u},width=${r/u},top=${g},left=${y}`}function Dn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function vo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Dn(Object(r),!0).forEach(function(n){D(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Dn(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}cr.defaultMaxListeners=100;const Mn=function(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return(n,o)=>n||o.error?t(n||o.error):!r||Array.isArray(o)?e(o):e(o.result)};class wr extends cr{constructor(t){let{maxEventListeners:r=100,shouldSendMetadata:n=!0,jsonRpcStreamName:o="provider"}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(super(),D(this,"chainId",void 0),D(this,"selectedAddress",void 0),D(this,"_rpcEngine",void 0),D(this,"networkVersion",void 0),D(this,"shouldSendMetadata",void 0),D(this,"isTorus",void 0),D(this,"_publicConfigStore",void 0),D(this,"tryPreopenHandle",void 0),D(this,"enable",void 0),D(this,"_state",void 0),D(this,"_jsonRpcConnection",void 0),D(this,"_sentWarnings",{enable:!1,experimentalMethods:!1,send:!1,publicConfigStore:!1,events:{close:!1,data:!1,networkChanged:!1,notification:!1}}),!io.duplex(t))throw new Error(pe.errors.invalidDuplexStream());this.isTorus=!0,this.setMaxListeners(r),this._state=vo({},wr._defaultState),this.selectedAddress=null,this.networkVersion=null,this.chainId=null,this.shouldSendMetadata=n,this._handleAccountsChanged=this._handleAccountsChanged.bind(this),this._handleChainChanged=this._handleChainChanged.bind(this),this._handleUnlockStateChanged=this._handleUnlockStateChanged.bind(this),this._handleConnect=this._handleConnect.bind(this),this._handleDisconnect=this._handleDisconnect.bind(this),this._handleStreamDisconnect=this._handleStreamDisconnect.bind(this),this._sendSync=this._sendSync.bind(this),this._rpcRequest=this._rpcRequest.bind(this),this._warnOfDeprecation=this._warnOfDeprecation.bind(this),this._initializeState=this._initializeState.bind(this),this.request=this.request.bind(this),this.send=this.send.bind(this),this.sendAsync=this.sendAsync.bind(this);const l=new Kn;ir(t,l,t,this._handleStreamDisconnect.bind(this,"MetaMask")),this._publicConfigStore=new kr.ObservableStore({storageKey:"Metamask-Config"}),ir(l.createStream("publicConfig"),kr.storeAsStream(this._publicConfigStore),Tn.bind(this,"MetaMask PublicConfigStore")),l.ignoreStream("phishing"),this.on("connect",()=>{this._state.isConnected=!0});const u=gs();ir(u.stream,l.createStream(o),u.stream,this._handleStreamDisconnect.bind(this,"MetaMask RpcProvider"));const y=new Me;y.push(ys()),y.push(go()),y.push(u.middleware),this._rpcEngine=y,u.events.on("notification",g=>{const{method:T,params:_}=g;T==="wallet_accountsChanged"?this._handleAccountsChanged(_):T==="wallet_unlockStateChanged"?this._handleUnlockStateChanged(_):T==="wallet_chainChanged"?this._handleChainChanged(_):yo.includes(g.method)&&(this.emit("data",g),this.emit("notification",_.result),this.emit("message",{type:T,data:_}))})}get publicConfigStore(){return this._sentWarnings.publicConfigStore||(q.warn(pe.warnings.publicConfigStore),this._sentWarnings.publicConfigStore=!0),this._publicConfigStore}isConnected(){return this._state.isConnected}async request(t){if(!t||typeof t!="object"||Array.isArray(t))throw je.ethErrors.rpc.invalidRequest({message:pe.errors.invalidRequestArgs(),data:t});const{method:r,params:n}=t;if(typeof r!="string"||r.length===0)throw je.ethErrors.rpc.invalidRequest({message:pe.errors.invalidRequestMethod(),data:t});if(n!==void 0&&!Array.isArray(n)&&(typeof n!="object"||n===null))throw je.ethErrors.rpc.invalidRequest({message:pe.errors.invalidRequestParams(),data:t});return new Promise((o,l)=>{this._rpcRequest({method:r,params:n},Mn(o,l))})}sendAsync(t,r){this._rpcRequest(t,r)}addListener(t,r){return this._warnOfDeprecation(t),super.addListener(t,r)}on(t,r){return this._warnOfDeprecation(t),super.on(t,r)}once(t,r){return this._warnOfDeprecation(t),super.once(t,r)}prependListener(t,r){return this._warnOfDeprecation(t),super.prependListener(t,r)}prependOnceListener(t,r){return this._warnOfDeprecation(t),super.prependOnceListener(t,r)}async _initializeState(){try{const{accounts:t,chainId:r,isUnlocked:n,networkVersion:o}=await this.request({method:"wallet_getProviderState"});this.emit("connect",{chainId:r}),this._handleChainChanged({chainId:r,networkVersion:o}),this._handleUnlockStateChanged({accounts:t,isUnlocked:n}),this._handleAccountsChanged(t)}catch(t){q.error("MetaMask: Failed to get initial state. Please report this bug.",t)}finally{q.info("initialized state"),this._state.initialized=!0,this.emit("_initialized")}}_rpcRequest(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,o=r;const l=t;if(!Array.isArray(l)){if(l.jsonrpc||(l.jsonrpc="2.0"),l.method==="eth_accounts"||l.method==="eth_requestAccounts")o=(u,y)=>{this._handleAccountsChanged(y.result||[],l.method==="eth_accounts",n),r(u,y)};else if(l.method==="wallet_getProviderState"){this._rpcEngine.handle(t,o);return}}this.tryPreopenHandle(l,o)}send(t,r){return this._sentWarnings.send||(q.warn(pe.warnings.sendDeprecation),this._sentWarnings.send=!0),typeof t=="string"&&(!r||Array.isArray(r))?new Promise((n,o)=>{try{this._rpcRequest({method:t,params:r},Mn(n,o,!1))}catch(l){o(l)}}):t&&typeof t=="object"&&typeof r=="function"?this._rpcRequest(t,r):this._sendSync(t)}_sendSync(t){let r;switch(t.method){case"eth_accounts":r=this.selectedAddress?[this.selectedAddress]:[];break;case"eth_coinbase":r=this.selectedAddress||null;break;case"eth_uninstallFilter":this._rpcRequest(t,ti),r=!0;break;case"net_version":r=this.networkVersion||null;break;default:throw new Error(pe.errors.unsupportedSync(t.method))}return{id:t.id,jsonrpc:t.jsonrpc,result:r}}_handleConnect(t){this._state.isConnected||(this._state.isConnected=!0,this.emit("connect",{chainId:t}),q.debug(pe.info.connected(t)))}_handleDisconnect(t,r){if(this._state.isConnected||!this._state.isPermanentlyDisconnected&&!t){this._state.isConnected=!1;let n;t?(n=new je.EthereumRpcError(1013,r||pe.errors.disconnected()),q.debug(n)):(n=new je.EthereumRpcError(1011,r||pe.errors.permanentlyDisconnected()),q.error(n),this.chainId=null,this._state.accounts=null,this.selectedAddress=null,this._state.isUnlocked=!1,this._state.isPermanentlyDisconnected=!0),this.emit("disconnect",n)}}_handleStreamDisconnect(t,r){Tn(t,r,this),this._handleDisconnect(!1,r?r.message:void 0)}_handleAccountsChanged(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,o=t;Array.isArray(o)||(q.error("MetaMask: Received non-array accounts parameter. Please report this bug.",o),o=[]);for(const l of t)if(typeof l!="string"){q.error("MetaMask: Received non-string account. Please report this bug.",t),o=[];break}no(this._state.accounts,o)||(r&&Array.isArray(this._state.accounts)&&this._state.accounts.length>0&&!n&&q.error('MetaMask: "eth_accounts" unexpectedly updated accounts. Please report this bug.',o),this._state.accounts=o,this.emit("accountsChanged",o)),this.selectedAddress!==o[0]&&(this.selectedAddress=o[0]||null)}_handleChainChanged(){let{chainId:t,networkVersion:r}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!t||!r){q.error("MetaMask: Received invalid network parameters. Please report this bug.",{chainId:t,networkVersion:r});return}r==="loading"?this._handleDisconnect(!0):(this._handleConnect(t),t!==this.chainId&&(this.chainId=t,this._state.initialized&&this.emit("chainChanged",this.chainId)))}_handleUnlockStateChanged(){let{accounts:t,isUnlocked:r}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(typeof r!="boolean"){q.error("MetaMask: Received invalid isUnlocked parameter. Please report this bug.",{isUnlocked:r});return}r!==this._state.isUnlocked&&(this._state.isUnlocked=r,this._handleAccountsChanged(t||[]))}_warnOfDeprecation(t){this._sentWarnings.events[t]===!1&&(q.warn(pe.warnings.events[t]),this._sentWarnings.events[t]=!0)}}D(wr,"_defaultState",{accounts:null,isConnected:!1,isUnlocked:!1,initialized:!1,isPermanentlyDisconnected:!1,hasEmittedConnection:!1});const bo=e=>({algorithms:e.algorithms||["sha256"],delimiter:e.delimiter||" ",full:e.full||!1}),_o=(e,t)=>{const r={};return e.algorithms.forEach(n=>{r[n]=Ui(n).update(t,"utf8").digest("base64")}),r},So=(e,t)=>{let r="";return r+=Object.keys(t.hashes).map(n=>`${n}-${t.hashes[n]}`).join(e.delimiter),r},Co=(e,t)=>{const r=bo(e),n={hashes:_o(r,t),integrity:void 0};return n.integrity=So(r,n),r.full?n:n.integrity};class Pn extends or.exports.EventEmitter{constructor(t){let{url:r,target:n,features:o}=t;super(),D(this,"url",void 0),D(this,"target",void 0),D(this,"features",void 0),D(this,"window",void 0),D(this,"windowTimer",void 0),D(this,"iClosedWindow",void 0),this.url=r,this.target=n||"_blank",this.features=o||wo(),this.window=void 0,this.windowTimer=void 0,this.iClosedWindow=!1,this._setupTimer()}_setupTimer(){this.windowTimer=Number(setInterval(()=>{this.window&&this.window.closed&&(clearInterval(this.windowTimer),this.iClosedWindow||this.emit("close"),this.iClosedWindow=!1,this.window=void 0),this.window===void 0&&clearInterval(this.windowTimer)},500))}open(){this.window=window.open(this.url.href,this.target,this.features),this.window?.focus&&this.window.focus()}close(){this.iClosedWindow=!0,this.window&&this.window.close()}redirect(t){t?window.location.replace(this.url.href):window.location.href=this.url.href}}function Rn(e){return new Promise((t,r)=>{try{const n=document.createElement("img");n.onload=()=>t(!0),n.onerror=()=>t(!1),n.src=e}catch(n){r(n)}})}const To=e=>{const{document:t}=e,r=t.querySelector('head > meta[property="og:site_name"]');if(r)return r.content;const n=t.querySelector('head > meta[name="title"]');return n?n.content:t.title&&t.title.length>0?t.title:e.location.hostname};async function Ao(e){const{document:t}=e;let r=t.querySelector('head > link[rel="shortcut icon"]');return r&&await Rn(r.href)||(r=Array.from(t.querySelectorAll('head > link[rel="icon"]')).find(n=>Boolean(n.href)),r&&await Rn(r.href))?r.href:null}const Eo=async()=>({name:To(window),icon:await Ao(window)});async function Oo(e){try{const t=await Eo();e.handle({jsonrpc:"2.0",id:$e(),method:"wallet_sendDomainMetadata",params:t},ti)}catch(t){q.error({message:pe.errors.sendSiteMetadata(),originalError:t})}}const Do=["host","chainId","networkName"];function In(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function Mo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?In(Object(r),!0).forEach(function(n){D(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):In(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const Po={[Kt.GOOGLE]:!0,[Kt.FACEBOOK]:!0,[Kt.REDDIT]:!0,[Kt.TWITCH]:!0,[Kt.DISCORD]:!0},ri="sha384-QwEWmiPwBSE0zoVFrfYw+zFNBRwBhOo6NucsqlJnGOqpUEVaRo1UOMrAKDykq2WP",Ro="max-age=3600",Io=["eth_sendTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","personal_sign","eth_getEncryptionPublicKey","eth_decrypt","wallet_addEthereumChain","wallet_switchEthereumChain"];(async function(){try{if(typeof document>"u")return;const t=document.createElement("link"),{torusUrl:r}=await ei("production",{check:!1,hash:ri,version:""});t.href=`${r}/popup`,t.crossOrigin="anonymous",t.type="text/html",t.rel="prefetch",t.relList&&t.relList.supports&&t.relList.supports("prefetch")&&document.head.appendChild(t)}catch(t){q.warn(t)}})();class ko{constructor(){let{buttonPosition:t=rt.BOTTOM_LEFT,buttonSize:r=56,modalZIndex:n=99999,apiKey:o="torus-default"}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};D(this,"buttonPosition",rt.BOTTOM_LEFT),D(this,"buttonSize",void 0),D(this,"torusUrl",void 0),D(this,"torusIframe",void 0),D(this,"styleLink",void 0),D(this,"isLoggedIn",void 0),D(this,"isInitialized",void 0),D(this,"torusWidgetVisibility",void 0),D(this,"torusAlert",void 0),D(this,"apiKey",void 0),D(this,"modalZIndex",void 0),D(this,"alertZIndex",void 0),D(this,"torusAlertContainer",void 0),D(this,"isIframeFullScreen",void 0),D(this,"whiteLabel",void 0),D(this,"requestedVerifier",void 0),D(this,"currentVerifier",void 0),D(this,"embedTranslations",void 0),D(this,"ethereum",void 0),D(this,"provider",void 0),D(this,"communicationMux",void 0),D(this,"isLoginCallback",void 0),D(this,"paymentProviders",Ae.paymentProviders),D(this,"loginHint",""),D(this,"useWalletConnect",void 0),D(this,"isCustomLogin",!1),this.buttonPosition=t,this.buttonSize=r,this.torusUrl="",this.isLoggedIn=!1,this.isInitialized=!1,this.torusWidgetVisibility=!0,this.requestedVerifier="",this.currentVerifier="",this.apiKey=o,qi(o),this.modalZIndex=n,this.alertZIndex=n+1e3,this.isIframeFullScreen=!1}async init(){let{buildEnv:t=so.PRODUCTION,enableLogging:r=!1,enabledVerifiers:n=Po,network:o={host:"mainnet",chainId:null,networkName:"",blockExplorer:"",ticker:"",tickerName:""},loginConfig:l={},showTorusButton:u=!0,integrity:y={check:!1,hash:ri,version:""},whiteLabel:g,skipTKey:T=!1,useWalletConnect:_=!1,mfaLevel:m="default"}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.isInitialized)throw new Error("Already initialized");const{torusUrl:A,logLevel:E}=await ei(t,y);q.info(A,"url loaded"),this.torusUrl=A,this.whiteLabel=g,this.useWalletConnect=_,this.isCustomLogin=!!(l&&Object.keys(l).length>0)||!!(g&&Object.keys(g).length>0),q.setDefaultLevel(E),r?q.enableAll():q.disableAll(),this.torusWidgetVisibility=u;const B=new URL(A);B.pathname.endsWith("/")?B.pathname+="popup":B.pathname+="/popup",B.hash=`#isCustomLogin=${this.isCustomLogin}`,this.torusIframe=Ft(`<iframe
        id="torusIframe"
        allow=${_?"camera":""}
        class="torusIframe"
        src="${B.href}"
        style="display: none; position: fixed; top: 0; right: 0; width: 100%; color-scheme: none;
        height: 100%; border: none; border-radius: 0; z-index: ${this.modalZIndex}"
      ></iframe>`),this.torusAlertContainer=Ft('<div id="torusAlertContainer"></div>'),this.torusAlertContainer.style.display="none",this.torusAlertContainer.style.setProperty("z-index",this.alertZIndex.toString());const C=window.document.createElement("link");C.setAttribute("rel","stylesheet"),C.setAttribute("type","text/css"),C.setAttribute("href",`${A}/css/widget.css`),this.styleLink=C;const{defaultLanguage:x=An(),customTranslations:d={}}=this.whiteLabel||{},R=xn(Ae.translations,d)[x]||Ae.translations[An()];this.embedTranslations=R.embed;const W=async()=>(await ho(),new Promise((I,re)=>{this.torusIframe.onload=async()=>{this._setupWeb3();const Q=this.communicationMux.getStream("init_stream");Q.on("data",ne=>{const{name:ee,data:ae,error:L}=ne;ee==="init_complete"&&ae.success?(this.isInitialized=!0,this._displayIframe(this.isIframeFullScreen),I(void 0)):L&&re(new Error(L))}),Q.write({name:"init_stream",data:{enabledVerifiers:n,loginConfig:l,whiteLabel:this.whiteLabel,buttonPosition:this.buttonPosition,buttonSize:this.buttonSize,torusWidgetVisibility:this.torusWidgetVisibility,apiKey:this.apiKey,skipTKey:T,network:o,mfaLevel:m}})},window.document.head.appendChild(this.styleLink),window.document.body.appendChild(this.torusIframe),window.document.body.appendChild(this.torusAlertContainer)}));if(t==="production"&&y.check){const I=`${A}/popup`,re=await fetch(I,{cache:"reload"});if(re.headers.get("Cache-Control")!==Ro)throw new Error(`Unexpected Cache-Control headers, got ${re.headers.get("Cache-Control")}`);const Q=await re.text(),ne=Co({algorithms:["sha384"]},Q);if(q.info(ne,"integrity"),ne===y.hash)await W();else throw this.clearInit(),new Error("Integrity check failed")}else await W()}login(){let{verifier:t="",login_hint:r=""}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.isInitialized)throw new Error("Call init() first");return this.requestedVerifier=t,this.loginHint=r,this.ethereum.enable()}logout(){return new Promise((t,r)=>{if(!this.isLoggedIn){r(new Error("User has not logged in yet"));return}this.communicationMux.getStream("logout").write({name:"logOut"});const o=this.communicationMux.getStream("status");Te(o,"data",u=>{u.loggedIn?r(new Error("Some Error Occured")):(this.isLoggedIn=!1,this.currentVerifier="",this.requestedVerifier="",t())})})}async cleanUp(){this.isLoggedIn&&await this.logout(),this.clearInit()}clearInit(){function t(r){return r instanceof Element||r instanceof HTMLDocument}t(this.styleLink)&&window.document.body.contains(this.styleLink)&&(this.styleLink.remove(),this.styleLink=void 0),t(this.torusIframe)&&window.document.body.contains(this.torusIframe)&&(this.torusIframe.remove(),this.torusIframe=void 0),t(this.torusAlertContainer)&&window.document.body.contains(this.torusAlertContainer)&&(this.torusAlert=void 0,this.torusAlertContainer.remove(),this.torusAlertContainer=void 0),this.isInitialized=!1}hideTorusButton(){this.torusWidgetVisibility=!1,this._sendWidgetVisibilityStatus(!1),this._displayIframe()}showTorusButton(){this.torusWidgetVisibility=!0,this._sendWidgetVisibilityStatus(!0),this._displayIframe()}setProvider(t){let{host:r="mainnet",chainId:n=null,networkName:o=""}=t,l=Wi(t,Do);return new Promise((u,y)=>{const g=this.communicationMux.getStream("provider_change");Te(g,"data",m=>{const{err:A,success:E}=m.data;q.info(m),A?y(A):E?u():y(new Error("some error occured"))});const _=$e();this._handleWindow(_,{target:"_blank",features:En}),g.write({name:"show_provider_change",data:{network:Mo({host:r,chainId:n,networkName:o},l),preopenInstanceId:_,override:!1}})})}showWallet(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=this.communicationMux.getStream("show_wallet"),o=t?`/${t}`:"";n.write({name:"show_wallet",data:{path:o}}),Te(n,"data",u=>{if(u.name==="show_wallet_instance"){const{instanceId:y}=u.data,g=new URL(`${this.torusUrl}/wallet${o}`);g.searchParams.append("integrity","true"),g.searchParams.append("instanceId",y),Object.keys(r).forEach(_=>{g.searchParams.append(_,r[_])}),g.hash=`#isCustomLogin=${this.isCustomLogin}`,new Pn({url:g,features:mo}).open()}})}async getPublicAddress(t){let{verifier:r,verifierId:n,isExtended:o=!1}=t;if(!Ae.supportedVerifierList.includes(r)||!_n[r])throw new Error("Unsupported verifier");const l=r,u=_n[r],y=new URL("https://api.tor.us/lookup/torus");return y.searchParams.append("verifier",u),y.searchParams.append("verifierId",n),y.searchParams.append("walletVerifier",l),y.searchParams.append("network","mainnet"),y.searchParams.append("isExtended",o.toString()),Nn(y.href,{headers:{"Content-Type":"application/json; charset=utf-8"}},{useAPIKey:!0})}getUserInfo(t){return new Promise((r,n)=>{if(this.isLoggedIn){const o=this.communicationMux.getStream("user_info_access");o.write({name:"user_info_access_request"}),Te(o,"data",u=>{const{name:y,data:{approved:g,payload:T,rejected:_,newRequest:m}}=u;if(y==="user_info_access_response"){if(g)r(T);else if(_)n(new Error("User rejected the request"));else if(m){const A=this.communicationMux.getStream("user_info");Te(A,"data",C=>{C.name==="user_info_response"&&(C.data.approved?r(C.data.payload):n(new Error("User rejected the request")))});const B=$e();this._handleWindow(B,{target:"_blank",features:En}),A.write({name:"user_info_request",data:{message:t,preopenInstanceId:B}})}}})}else n(new Error("User has not logged in yet"))})}initiateTopup(t,r){return new Promise((n,o)=>{if(this.isInitialized){const{errors:l,isValid:u}=po(t,r);if(!u){o(new Error(JSON.stringify(l)));return}const y=this.communicationMux.getStream("topup");Te(y,"data",_=>{_.name==="topup_response"&&(_.data.success?n(_.data.success):o(new Error(_.data.error)))});const T=$e();this._handleWindow(T),y.write({name:"topup_request",data:{provider:t,params:r,preopenInstanceId:T}})}else o(new Error("Torus is not initialized yet"))})}async loginWithPrivateKey(t){const{privateKey:r,userInfo:n}=t;return new Promise((o,l)=>{if(this.isInitialized){if(Buffer.from(r,"hex").length!==32){l(new Error("Invalid private key, Please provide a 32 byte valid secp25k1 private key"));return}const u=this.communicationMux.getStream("login_with_private_key");Te(u,"data",g=>{g.name==="login_with_private_key_response"&&(g.data.success?o(g.data.success):l(new Error(g.data.error)))}),u.write({name:"login_with_private_key_request",data:{privateKey:r,userInfo:n}})}else l(new Error("Torus is not initialized yet"))})}async showWalletConnectScanner(){if(!this.useWalletConnect)throw new Error("Set `useWalletConnect` as true in init function options to use wallet connect scanner");return new Promise((t,r)=>{if(this.isLoggedIn){const n=this.communicationMux.getStream("wallet_connect_stream");Te(n,"data",l=>{l.name==="wallet_connect_stream_res"&&(l.data.success?t(l.data.success):r(new Error(l.data.error)),this._displayIframe())}),n.write({name:"wallet_connect_stream_req"}),this._displayIframe(!0)}else r(new Error("User has not logged in yet"))})}_handleWindow(t){let{url:r,target:n,features:o}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t){const l=this.communicationMux.getStream("window"),u=new URL(r||`${this.torusUrl}/redirect?preopenInstanceId=${t}`);u.hash?u.hash+=`&isCustomLogin=${this.isCustomLogin}`:u.hash=`#isCustomLogin=${this.isCustomLogin}`;const y=new Pn({url:u,target:n,features:o});if(y.open(),!y.window){this._createPopupBlockAlert(t,u.href);return}l.write({name:"opened_window",data:{preopenInstanceId:t}});const g=T=>{let{preopenInstanceId:_,close:m}=T;_===t&&m&&(y.close(),l.removeListener("data",g))};l.on("data",g),y.once("close",()=>{l.write({data:{preopenInstanceId:t,closed:!0}}),l.removeListener("data",g)})}}_setEmbedWhiteLabel(t){const{theme:r}=this.whiteLabel||{};if(r){const{isDark:n=!1,colors:o={}}=r;n&&t.classList.add("torus-dark"),o.torusBrand1&&t.style.setProperty("--torus-brand-1",o.torusBrand1),o.torusGray2&&t.style.setProperty("--torus-gray-2",o.torusGray2)}}_getLogoUrl(){let t=`${this.torusUrl}/images/torus_icon-blue.svg`;return this.whiteLabel?.theme?.isDark?t=this.whiteLabel?.logoLight||t:t=this.whiteLabel?.logoDark||t,t}_sendWidgetVisibilityStatus(t){this.communicationMux.getStream("torus-widget-visibility").write({data:t})}_displayIframe(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const r={},n=this.buttonSize+14;if(t)r.display="block",r.width="100%",r.height="100%",r.top="0px",r.right="0px",r.left="0px",r.bottom="0px";else switch(r.display=this.torusWidgetVisibility?"block":"none",r.height=`${n}px`,r.width=`${n}px`,this.buttonPosition){case rt.TOP_LEFT:r.top="0px",r.left="0px",r.right="auto",r.bottom="auto";break;case rt.TOP_RIGHT:r.top="0px",r.right="0px",r.left="auto",r.bottom="auto";break;case rt.BOTTOM_RIGHT:r.bottom="0px",r.right="0px",r.top="auto",r.left="auto";break;case rt.BOTTOM_LEFT:default:r.bottom="0px",r.left="0px",r.top="auto",r.right="auto";break}Object.assign(this.torusIframe.style,r),this.isIframeFullScreen=t}_setupWeb3(){q.info("setupWeb3 running");const t=new ln({name:"embed_metamask",target:"iframe_metamask",targetWindow:this.torusIframe.contentWindow,targetOrigin:new URL(this.torusUrl).origin}),r=new ln({name:"embed_comm",target:"iframe_comm",targetWindow:this.torusIframe.contentWindow,targetOrigin:new URL(this.torusUrl).origin}),n=new wr(t),o=_=>{const m=n[_];n[_]=function(E){if(E&&E==="eth_requestAccounts")return n.enable();for(var B=arguments.length,C=new Array(B>1?B-1:0),x=1;x<B;x++)C[x-1]=arguments[x];return m.apply(this,[E,...C])}};o("send"),o("sendAsync"),n.enable=()=>new Promise((_,m)=>{n.sendAsync({jsonrpc:"2.0",id:$e(),method:"eth_requestAccounts",params:[]},(A,E)=>{const{result:B}=E||{};if(A)setTimeout(()=>{m(A)},50);else if(Array.isArray(B)&&B.length>0){const C=()=>{if(this.requestedVerifier!==""&&this.currentVerifier!==this.requestedVerifier){const{requestedVerifier:x}=this;this.logout().then(d=>{this.requestedVerifier=x,this._showLoginPopup(!0,_,m)}).catch(d=>m(d))}else _(B)};this.isLoggedIn?C():this.isLoginCallback=C}else this._showLoginPopup(!0,_,m)})}),n.tryPreopenHandle=(_,m)=>{const A=_;if(!Array.isArray(A)&&Io.includes(A.method)){const E=$e();this._handleWindow(E,{target:"_blank",features:On}),A.preopenInstanceId=E}n._rpcEngine.handle(A,m)};const l=new Proxy(n,{deleteProperty:()=>!0});this.ethereum=l;const u=bs(r);this.communicationMux=u,u.getStream("window").on("data",_=>{_.name==="create_window"&&this._createPopupBlockAlert(_.data.preopenInstanceId,_.data.url)}),u.getStream("widget").on("data",_=>{const{data:m}=_;this._displayIframe(m)}),u.getStream("status").on("data",_=>{_.loggedIn?(this.isLoggedIn=_.loggedIn,this.currentVerifier=_.verifier):this._displayIframe(),this.isLoginCallback&&(this.isLoginCallback(),delete this.isLoginCallback)}),this.provider=l,this.provider.shouldSendMetadata&&Oo(this.provider._rpcEngine),n._initializeState(),q.debug("Torus - injected provider")}_showLoginPopup(t,r,n){const o=u=>{const{err:y,selectedAddress:g}=u;y?(q.error(y),n&&n(y)):r&&r([g]),this.isIframeFullScreen&&this._displayIframe()},l=this.communicationMux.getStream("oauth");if(!this.requestedVerifier)this._displayIframe(!0),Te(l,"data",o),l.write({name:"oauth_modal",data:{calledFromEmbed:t}});else{Te(l,"data",o);const u=$e();this._handleWindow(u),l.write({name:"oauth",data:{calledFromEmbed:t,verifier:this.requestedVerifier,preopenInstanceId:u,login_hint:this.loginHint}})}}_createPopupBlockAlert(t,r){const n=this._getLogoUrl(),o=Ft(`<div id="torusAlert" class="torus-alert--v2"><div id="torusAlert__logo"><img src="${n}" /></div><div><h1 id="torusAlert__title">${this.embedTranslations.actionRequired}</h1><p id="torusAlert__desc">${this.embedTranslations.pendingAction}</p></div></div>`),l=Ft(`<div><a id="torusAlert__btn">${this.embedTranslations.continue}</a></div>`),u=Ft('<div id="torusAlert__btn-container"></div>');u.appendChild(l),o.appendChild(u);const y=()=>{l.addEventListener("click",()=>{this._handleWindow(t,{url:r,target:"_blank",features:On}),o.remove(),this.torusAlertContainer.children.length===0&&(this.torusAlertContainer.style.display="none")})};this._setEmbedWhiteLabel(o),Sn(()=>{this.torusAlertContainer.style.display="block",this.torusAlertContainer.appendChild(o)}),Sn(y)}}export{rt as BUTTON_POSITION,Kt as LOGIN_PROVIDER,Y as PAYMENT_PROVIDER,Z as SUPPORTED_PAYMENT_NETWORK,so as TORUS_BUILD_ENV,wr as TorusInpageProvider,_n as WALLET_OPENLOGIN_VERIFIER_MAP,Ve as WALLET_VERIFIERS,ko as default};
