import{c as rt,g as Yy,e as Pr,a as Vn,_ as sI}from"./main.147f2eb4.js";import{c as Xy,P as oI,I as aI,M as cI,a as uI,b as lI,S as hI,R as fI,d as dI,e as pI,D as gI,i as yI,f as mI,g as vI,h as bI,j as _I,v as wI,p as fh,k as Qy,l as dh,m as Hi,n as dc,o as Ro,q as EI,s as ph,r as gh,t as yh,u as SI}from"./index.85b2ee11.js";import{c as OI}from"./_commonjs-dynamic-modules.30ae7933.js";import{r as II}from"./___vite-browser-external_commonjs-proxy.fb838188.js";function DI(e,t){for(var n=0;n<t.length;n++){const s=t[n];if(typeof s!="string"&&!Array.isArray(s)){for(const o in s)if(o!=="default"&&!(o in e)){const c=Object.getOwnPropertyDescriptor(s,o);c&&Object.defineProperty(e,o,c.get?c:{enumerable:!0,get:()=>s[o]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}var mh={},pc={};Object.defineProperty(pc,"__esModule",{value:!0});pc.Connector=void 0;class PI{constructor(t,n){this.actions=t,this.onError=n}resetState(){this.actions.resetState()}}pc.Connector=PI;var hi={},Rl={exports:{}};(function(e,t){var n=typeof self<"u"?self:rt,s=function(){function c(){this.fetch=!1,this.DOMException=n.DOMException}return c.prototype=n,new c}();(function(c){(function(f){var h={searchParams:"URLSearchParams"in c,iterable:"Symbol"in c&&"iterator"in Symbol,blob:"FileReader"in c&&"Blob"in c&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in c,arrayBuffer:"ArrayBuffer"in c};function O(y){return y&&DataView.prototype.isPrototypeOf(y)}if(h.arrayBuffer)var p=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],S=ArrayBuffer.isView||function(y){return y&&p.indexOf(Object.prototype.toString.call(y))>-1};function C(y){if(typeof y!="string"&&(y=String(y)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(y))throw new TypeError("Invalid character in header field name");return y.toLowerCase()}function R(y){return typeof y!="string"&&(y=String(y)),y}function U(y){var E={next:function(){var k=y.shift();return{done:k===void 0,value:k}}};return h.iterable&&(E[Symbol.iterator]=function(){return E}),E}function x(y){this.map={},y instanceof x?y.forEach(function(E,k){this.append(k,E)},this):Array.isArray(y)?y.forEach(function(E){this.append(E[0],E[1])},this):y&&Object.getOwnPropertyNames(y).forEach(function(E){this.append(E,y[E])},this)}x.prototype.append=function(y,E){y=C(y),E=R(E);var k=this.map[y];this.map[y]=k?k+", "+E:E},x.prototype.delete=function(y){delete this.map[C(y)]},x.prototype.get=function(y){return y=C(y),this.has(y)?this.map[y]:null},x.prototype.has=function(y){return this.map.hasOwnProperty(C(y))},x.prototype.set=function(y,E){this.map[C(y)]=R(E)},x.prototype.forEach=function(y,E){for(var k in this.map)this.map.hasOwnProperty(k)&&y.call(E,this.map[k],k,this)},x.prototype.keys=function(){var y=[];return this.forEach(function(E,k){y.push(k)}),U(y)},x.prototype.values=function(){var y=[];return this.forEach(function(E){y.push(E)}),U(y)},x.prototype.entries=function(){var y=[];return this.forEach(function(E,k){y.push([k,E])}),U(y)},h.iterable&&(x.prototype[Symbol.iterator]=x.prototype.entries);function F(y){if(y.bodyUsed)return Promise.reject(new TypeError("Already read"));y.bodyUsed=!0}function q(y){return new Promise(function(E,k){y.onload=function(){E(y.result)},y.onerror=function(){k(y.error)}})}function te(y){var E=new FileReader,k=q(E);return E.readAsArrayBuffer(y),k}function _(y){var E=new FileReader,k=q(E);return E.readAsText(y),k}function A(y){for(var E=new Uint8Array(y),k=new Array(E.length),W=0;W<E.length;W++)k[W]=String.fromCharCode(E[W]);return k.join("")}function I(y){if(y.slice)return y.slice(0);var E=new Uint8Array(y.byteLength);return E.set(new Uint8Array(y)),E.buffer}function D(){return this.bodyUsed=!1,this._initBody=function(y){this._bodyInit=y,y?typeof y=="string"?this._bodyText=y:h.blob&&Blob.prototype.isPrototypeOf(y)?this._bodyBlob=y:h.formData&&FormData.prototype.isPrototypeOf(y)?this._bodyFormData=y:h.searchParams&&URLSearchParams.prototype.isPrototypeOf(y)?this._bodyText=y.toString():h.arrayBuffer&&h.blob&&O(y)?(this._bodyArrayBuffer=I(y.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):h.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(y)||S(y))?this._bodyArrayBuffer=I(y):this._bodyText=y=Object.prototype.toString.call(y):this._bodyText="",this.headers.get("content-type")||(typeof y=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):h.searchParams&&URLSearchParams.prototype.isPrototypeOf(y)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},h.blob&&(this.blob=function(){var y=F(this);if(y)return y;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?F(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(te)}),this.text=function(){var y=F(this);if(y)return y;if(this._bodyBlob)return _(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(A(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},h.formData&&(this.formData=function(){return this.text().then(K)}),this.json=function(){return this.text().then(JSON.parse)},this}var w=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function u(y){var E=y.toUpperCase();return w.indexOf(E)>-1?E:y}function b(y,E){E=E||{};var k=E.body;if(y instanceof b){if(y.bodyUsed)throw new TypeError("Already read");this.url=y.url,this.credentials=y.credentials,E.headers||(this.headers=new x(y.headers)),this.method=y.method,this.mode=y.mode,this.signal=y.signal,!k&&y._bodyInit!=null&&(k=y._bodyInit,y.bodyUsed=!0)}else this.url=String(y);if(this.credentials=E.credentials||this.credentials||"same-origin",(E.headers||!this.headers)&&(this.headers=new x(E.headers)),this.method=u(E.method||this.method||"GET"),this.mode=E.mode||this.mode||null,this.signal=E.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&k)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(k)}b.prototype.clone=function(){return new b(this,{body:this._bodyInit})};function K(y){var E=new FormData;return y.trim().split("&").forEach(function(k){if(k){var W=k.split("="),Z=W.shift().replace(/\+/g," "),B=W.join("=").replace(/\+/g," ");E.append(decodeURIComponent(Z),decodeURIComponent(B))}}),E}function v(y){var E=new x,k=y.replace(/\r?\n[\t ]+/g," ");return k.split(/\r?\n/).forEach(function(W){var Z=W.split(":"),B=Z.shift().trim();if(B){var ee=Z.join(":").trim();E.append(B,ee)}}),E}D.call(b.prototype);function g(y,E){E||(E={}),this.type="default",this.status=E.status===void 0?200:E.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in E?E.statusText:"OK",this.headers=new x(E.headers),this.url=E.url||"",this._initBody(y)}D.call(g.prototype),g.prototype.clone=function(){return new g(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new x(this.headers),url:this.url})},g.error=function(){var y=new g(null,{status:0,statusText:""});return y.type="error",y};var P=[301,302,303,307,308];g.redirect=function(y,E){if(P.indexOf(E)===-1)throw new RangeError("Invalid status code");return new g(null,{status:E,headers:{location:y}})},f.DOMException=c.DOMException;try{new f.DOMException}catch{f.DOMException=function(E,k){this.message=E,this.name=k;var W=Error(E);this.stack=W.stack},f.DOMException.prototype=Object.create(Error.prototype),f.DOMException.prototype.constructor=f.DOMException}function L(y,E){return new Promise(function(k,W){var Z=new b(y,E);if(Z.signal&&Z.signal.aborted)return W(new f.DOMException("Aborted","AbortError"));var B=new XMLHttpRequest;function ee(){B.abort()}B.onload=function(){var oe={status:B.status,statusText:B.statusText,headers:v(B.getAllResponseHeaders()||"")};oe.url="responseURL"in B?B.responseURL:oe.headers.get("X-Request-URL");var de="response"in B?B.response:B.responseText;k(new g(de,oe))},B.onerror=function(){W(new TypeError("Network request failed"))},B.ontimeout=function(){W(new TypeError("Network request failed"))},B.onabort=function(){W(new f.DOMException("Aborted","AbortError"))},B.open(Z.method,Z.url,!0),Z.credentials==="include"?B.withCredentials=!0:Z.credentials==="omit"&&(B.withCredentials=!1),"responseType"in B&&h.blob&&(B.responseType="blob"),Z.headers.forEach(function(oe,de){B.setRequestHeader(de,oe)}),Z.signal&&(Z.signal.addEventListener("abort",ee),B.onreadystatechange=function(){B.readyState===4&&Z.signal.removeEventListener("abort",ee)}),B.send(typeof Z._bodyInit>"u"?null:Z._bodyInit)})}return L.polyfill=!0,c.fetch||(c.fetch=L,c.Headers=x,c.Request=b,c.Response=g),f.Headers=x,f.Request=b,f.Response=g,f.fetch=L,Object.defineProperty(f,"__esModule",{value:!0}),f})({})})(s),s.fetch.ponyfill=!0,delete s.fetch.polyfill;var o=s;t=o.fetch,t.default=o.fetch,t.fetch=o.fetch,t.Headers=o.Headers,t.Request=o.Request,t.Response=o.Response,e.exports=t})(Rl,Rl.exports);const Up=Yy(Rl.exports),$I=e=>JSON.stringify(e,(t,n)=>typeof n=="bigint"?n.toString()+"n":n),NI=e=>{const t=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=e.replace(t,'$1"$2n"$3');return JSON.parse(n,(s,o)=>typeof o=="string"&&o.match(/^\d+n$/)?BigInt(o.substring(0,o.length-1)):o)};function CI(e){if(typeof e!="string")throw new Error(`Cannot safe json parse value of type ${typeof e}`);try{return NI(e)}catch{return e}}function Lp(e){return typeof e=="string"?e:$I(e)||""}const AI=Xy.isNode;function TI(e){return e.includes("*")?yc(e):!/\W/g.test(e)}function gc(e){return e==="*"}function yc(e){return gc(e)?!0:!(!e.includes("*")||e.split("*").length!==2||e.split("*").filter(t=>t.trim()==="").length!==1)}function xI(e){return!gc(e)&&yc(e)&&!e.split("*")[0].trim()}function RI(e){return!gc(e)&&yc(e)&&!e.split("*")[1].trim()}class vh{}class jI extends vh{constructor(t){super()}}class Zy extends vh{constructor(){super()}}class e0 extends Zy{constructor(t){super()}}const UI="^https?:",LI="^wss?:";function MI(e){const t=e.match(new RegExp(/^\w+:/,"gi"));if(!(!t||!t.length))return t[0]}function t0(e,t){const n=MI(e);return typeof n>"u"?!1:new RegExp(t).test(n)}function jl(e){return t0(e,UI)}function Ul(e){return t0(e,LI)}function r0(e){return new RegExp("wss?://localhost(:d{2,5})?").test(e)}function bh(e){return typeof e=="object"&&"id"in e&&"jsonrpc"in e&&e.jsonrpc==="2.0"}function mc(e){return bh(e)&&"method"in e}function jo(e){return bh(e)&&(Pn(e)||on(e))}function Pn(e){return"result"in e}function on(e){return"error"in e}function FI(e){return"error"in e&&e.valid===!1}const BI=Object.freeze(Object.defineProperty({__proto__:null,PARSE_ERROR:oI,INVALID_REQUEST:aI,METHOD_NOT_FOUND:cI,INVALID_PARAMS:uI,INTERNAL_ERROR:lI,SERVER_ERROR:hI,RESERVED_ERROR_CODES:fI,SERVER_ERROR_CODE_RANGE:dI,STANDARD_ERROR_MAP:pI,DEFAULT_ERROR:gI,isServerErrorCode:yI,isReservedErrorCode:mI,isValidErrorCode:vI,getError:bI,getErrorByCode:_I,validateJsonRpcError:wI,parseConnectionError:fh,isNodeJs:AI,payloadId:Qy,getBigIntRpcId:dh,formatJsonRpcRequest:Hi,formatJsonRpcResult:dc,formatJsonRpcError:Ro,formatErrorMessage:EI,isValidRoute:TI,isValidDefaultRoute:gc,isValidWildcardRoute:yc,isValidLeadingWildcardRoute:xI,isValidTrailingWildcardRoute:RI,IEvents:vh,IJsonRpcConnection:jI,IBaseJsonRpcProvider:Zy,IJsonRpcProvider:e0,isHttpUrl:jl,isWsUrl:Ul,isLocalhostUrl:r0,isJsonRpcPayload:bh,isJsonRpcRequest:mc,isJsonRpcResponse:jo,isJsonRpcResult:Pn,isJsonRpcError:on,isJsonRpcValidationInvalid:FI},Symbol.toStringTag,{value:"Module"})),qI={Accept:"application/json","Content-Type":"application/json"},HI="POST",Mp={headers:qI,method:HI},Fp=10;class Bp{constructor(t,n=!1){if(this.url=t,this.disableProviderPing=n,this.events=new Pr.exports.EventEmitter,this.isAvailable=!1,this.registering=!1,!jl(t))throw new Error(`Provided URL is not compatible with HTTP connection: ${t}`);this.url=t,this.disableProviderPing=n}get connected(){return this.isAvailable}get connecting(){return this.registering}on(t,n){this.events.on(t,n)}once(t,n){this.events.once(t,n)}off(t,n){this.events.off(t,n)}removeListener(t,n){this.events.removeListener(t,n)}async open(t=this.url){await this.register(t)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(t,n){this.isAvailable||await this.register();try{const s=Lp(t),c=await(await Up(this.url,Object.assign(Object.assign({},Mp),{body:s}))).json();this.onPayload({data:c})}catch(s){this.onError(t.id,s)}}async register(t=this.url){if(!jl(t))throw new Error(`Provided URL is not compatible with HTTP connection: ${t}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((s,o)=>{this.events.once("register_error",c=>{this.resetMaxListeners(),o(c)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return o(new Error("HTTP connection is missing or invalid"));s()})})}this.url=t,this.registering=!0;try{if(!this.disableProviderPing){const n=Lp({id:1,jsonrpc:"2.0",method:"test",params:[]});await Up(t,Object.assign(Object.assign({},Mp),{body:n}))}this.onOpen()}catch(n){const s=this.parseError(n);throw this.events.emit("register_error",s),this.onClose(),s}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(t){if(typeof t.data>"u")return;const n=typeof t.data=="string"?CI(t.data):t.data;this.events.emit("payload",n)}onError(t,n){const s=this.parseError(n),o=s.message||s.toString(),c=Ro(t,o);this.events.emit("payload",c)}parseError(t,n=this.url){return fh(t,n,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>Fp&&this.events.setMaxListeners(Fp)}}const kI=Object.freeze(Object.defineProperty({__proto__:null,default:Bp,HttpConnection:Bp},Symbol.toStringTag,{value:"Module"})),n0=Vn(kI);class Ll extends e0{constructor(t){super(t),this.events=new Pr.exports.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(t),this.connection.connected&&this.registerEventListeners()}async connect(t=this.connection){await this.open(t)}async disconnect(){await this.close()}on(t,n){this.events.on(t,n)}once(t,n){this.events.once(t,n)}off(t,n){this.events.off(t,n)}removeListener(t,n){this.events.removeListener(t,n)}async request(t,n){return this.requestStrict(Hi(t.method,t.params||[],t.id||dh().toString()),n)}async requestStrict(t,n){return new Promise(async(s,o)=>{if(!this.connection.connected)try{await this.open()}catch(c){o(c)}this.events.on(`${t.id}`,c=>{on(c)?o(c.error):s(c.result)});try{await this.connection.send(t,n)}catch(c){o(c)}})}setConnection(t=this.connection){return t}onPayload(t){this.events.emit("payload",t),jo(t)?this.events.emit(`${t.id}`,t):this.events.emit("message",{type:t.method,data:t.params})}onClose(t){t&&t.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${t.code} ${t.reason?`(${t.reason})`:""}`)),this.events.emit("disconnect")}async open(t=this.connection){this.connection===t&&this.connection.connected||(this.connection.connected&&this.close(),typeof t=="string"&&(await this.connection.open(t),t=this.connection),this.connection=this.setConnection(t),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",t=>this.onPayload(t)),this.connection.on("close",t=>this.onClose(t)),this.connection.on("error",t=>this.events.emit("error",t)),this.connection.on("register_error",t=>this.onClose()),this.hasRegisteredEventListeners=!0)}}const zI=Object.freeze(Object.defineProperty({__proto__:null,default:Ll,JsonRpcProvider:Ll},Symbol.toStringTag,{value:"Module"})),i0=Vn(zI);var VI=rt&&rt.__createBinding||(Object.create?function(e,t,n,s){s===void 0&&(s=n);var o=Object.getOwnPropertyDescriptor(t,n);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,o)}:function(e,t,n,s){s===void 0&&(s=n),e[s]=t[n]}),KI=rt&&rt.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),qp=rt&&rt.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&VI(t,e,n);return KI(t,e),t},Ml=rt&&rt.__awaiter||function(e,t,n,s){function o(c){return c instanceof n?c:new n(function(f){f(c)})}return new(n||(n=Promise))(function(c,f){function h(S){try{p(s.next(S))}catch(C){f(C)}}function O(S){try{p(s.throw(S))}catch(C){f(C)}}function p(S){S.done?c(S.value):o(S.value).then(h,O)}p((s=s.apply(e,t||[])).next())})};Object.defineProperty(hi,"__esModule",{value:!0});hi.getChainsWithDefault=hi.getBestUrlMap=hi.isArrayOneOrMore=void 0;function WI(e=[]){return e.length>0}hi.isArrayOneOrMore=WI;function GI(e,t){return Ml(this,void 0,void 0,function*(){return Object.fromEntries(yield Promise.all(Object.entries(e).map(([n,s])=>Ml(this,void 0,void 0,function*(){return[n,yield JI(s,t)]}))))})}hi.getBestUrlMap=GI;function JI(e,t){return Ml(this,void 0,void 0,function*(){if(typeof e=="string")return e;if(e.length===1)return e[0];const[n,s]=yield Promise.all([Promise.resolve().then(()=>qp(n0)).then(({HttpConnection:o})=>o),Promise.resolve().then(()=>qp(i0)).then(({JsonRpcProvider:o})=>o)]);return new Promise(o=>{let c=!1;const f={};e.forEach((h,O)=>{const p=new s(new n(h));new Promise((C,R)=>{p.request({method:"eth_chainId"}).then(()=>C()).catch(()=>R()),setTimeout(()=>{R()},t)}).then(()=>!0).catch(()=>!1).then(C=>{if(!c){if(f[O]=C,Object.keys(f).length===e.length){const R=Object.keys(f).findIndex(U=>f[Number(U)]);return o(e[R===-1?0:R])}new Array(e.length).fill(0).forEach((R,U)=>{f[U]&&new Array(U).fill(0).every((x,F)=>f[F]===!1)&&(c=!0,o(e[U]))})}})})})})}function YI(e,t){if(!e||!t||e.length===0)return e;const n=e.indexOf(t);if(n===-1)throw new Error(`Invalid chainId ${t}. Make sure default chain is included in "chains" - chains specified in "optionalChains" may not be selected as the default, as they may not be supported by the wallet.`);const s=[...e];return s.splice(n,1),[t,...s]}hi.getChainsWithDefault=YI;var qn={},Ki={},vc={},Ue={},s0={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(h,O){var p=h>>>16&65535,S=h&65535,C=O>>>16&65535,R=O&65535;return S*R+(p*R+S*C<<16>>>0)|0}e.mul=Math.imul||t;function n(h,O){return h+O|0}e.add=n;function s(h,O){return h-O|0}e.sub=s;function o(h,O){return h<<O|h>>>32-O}e.rotl=o;function c(h,O){return h<<32-O|h>>>O}e.rotr=c;function f(h){return typeof h=="number"&&isFinite(h)&&Math.floor(h)===h}e.isInteger=Number.isInteger||f,e.MAX_SAFE_INTEGER=9007199254740991,e.isSafeInteger=function(h){return e.isInteger(h)&&h>=-e.MAX_SAFE_INTEGER&&h<=e.MAX_SAFE_INTEGER}})(s0);Object.defineProperty(Ue,"__esModule",{value:!0});var o0=s0;function XI(e,t){return t===void 0&&(t=0),(e[t+0]<<8|e[t+1])<<16>>16}Ue.readInt16BE=XI;function QI(e,t){return t===void 0&&(t=0),(e[t+0]<<8|e[t+1])>>>0}Ue.readUint16BE=QI;function ZI(e,t){return t===void 0&&(t=0),(e[t+1]<<8|e[t])<<16>>16}Ue.readInt16LE=ZI;function e2(e,t){return t===void 0&&(t=0),(e[t+1]<<8|e[t])>>>0}Ue.readUint16LE=e2;function a0(e,t,n){return t===void 0&&(t=new Uint8Array(2)),n===void 0&&(n=0),t[n+0]=e>>>8,t[n+1]=e>>>0,t}Ue.writeUint16BE=a0;Ue.writeInt16BE=a0;function c0(e,t,n){return t===void 0&&(t=new Uint8Array(2)),n===void 0&&(n=0),t[n+0]=e>>>0,t[n+1]=e>>>8,t}Ue.writeUint16LE=c0;Ue.writeInt16LE=c0;function Fl(e,t){return t===void 0&&(t=0),e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}Ue.readInt32BE=Fl;function Bl(e,t){return t===void 0&&(t=0),(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}Ue.readUint32BE=Bl;function ql(e,t){return t===void 0&&(t=0),e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]}Ue.readInt32LE=ql;function Hl(e,t){return t===void 0&&(t=0),(e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t])>>>0}Ue.readUint32LE=Hl;function nc(e,t,n){return t===void 0&&(t=new Uint8Array(4)),n===void 0&&(n=0),t[n+0]=e>>>24,t[n+1]=e>>>16,t[n+2]=e>>>8,t[n+3]=e>>>0,t}Ue.writeUint32BE=nc;Ue.writeInt32BE=nc;function ic(e,t,n){return t===void 0&&(t=new Uint8Array(4)),n===void 0&&(n=0),t[n+0]=e>>>0,t[n+1]=e>>>8,t[n+2]=e>>>16,t[n+3]=e>>>24,t}Ue.writeUint32LE=ic;Ue.writeInt32LE=ic;function t2(e,t){t===void 0&&(t=0);var n=Fl(e,t),s=Fl(e,t+4);return n*4294967296+s-(s>>31)*4294967296}Ue.readInt64BE=t2;function r2(e,t){t===void 0&&(t=0);var n=Bl(e,t),s=Bl(e,t+4);return n*4294967296+s}Ue.readUint64BE=r2;function n2(e,t){t===void 0&&(t=0);var n=ql(e,t),s=ql(e,t+4);return s*4294967296+n-(n>>31)*4294967296}Ue.readInt64LE=n2;function i2(e,t){t===void 0&&(t=0);var n=Hl(e,t),s=Hl(e,t+4);return s*4294967296+n}Ue.readUint64LE=i2;function u0(e,t,n){return t===void 0&&(t=new Uint8Array(8)),n===void 0&&(n=0),nc(e/4294967296>>>0,t,n),nc(e>>>0,t,n+4),t}Ue.writeUint64BE=u0;Ue.writeInt64BE=u0;function l0(e,t,n){return t===void 0&&(t=new Uint8Array(8)),n===void 0&&(n=0),ic(e>>>0,t,n),ic(e/4294967296>>>0,t,n+4),t}Ue.writeUint64LE=l0;Ue.writeInt64LE=l0;function s2(e,t,n){if(n===void 0&&(n=0),e%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(e/8>t.length-n)throw new Error("readUintBE: array is too short for the given bitLength");for(var s=0,o=1,c=e/8+n-1;c>=n;c--)s+=t[c]*o,o*=256;return s}Ue.readUintBE=s2;function o2(e,t,n){if(n===void 0&&(n=0),e%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(e/8>t.length-n)throw new Error("readUintLE: array is too short for the given bitLength");for(var s=0,o=1,c=n;c<n+e/8;c++)s+=t[c]*o,o*=256;return s}Ue.readUintLE=o2;function a2(e,t,n,s){if(n===void 0&&(n=new Uint8Array(e/8)),s===void 0&&(s=0),e%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!o0.isSafeInteger(t))throw new Error("writeUintBE value must be an integer");for(var o=1,c=e/8+s-1;c>=s;c--)n[c]=t/o&255,o*=256;return n}Ue.writeUintBE=a2;function c2(e,t,n,s){if(n===void 0&&(n=new Uint8Array(e/8)),s===void 0&&(s=0),e%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!o0.isSafeInteger(t))throw new Error("writeUintLE value must be an integer");for(var o=1,c=s;c<s+e/8;c++)n[c]=t/o&255,o*=256;return n}Ue.writeUintLE=c2;function u2(e,t){t===void 0&&(t=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.getFloat32(t)}Ue.readFloat32BE=u2;function l2(e,t){t===void 0&&(t=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.getFloat32(t,!0)}Ue.readFloat32LE=l2;function h2(e,t){t===void 0&&(t=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.getFloat64(t)}Ue.readFloat64BE=h2;function f2(e,t){t===void 0&&(t=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.getFloat64(t,!0)}Ue.readFloat64LE=f2;function d2(e,t,n){t===void 0&&(t=new Uint8Array(4)),n===void 0&&(n=0);var s=new DataView(t.buffer,t.byteOffset,t.byteLength);return s.setFloat32(n,e),t}Ue.writeFloat32BE=d2;function p2(e,t,n){t===void 0&&(t=new Uint8Array(4)),n===void 0&&(n=0);var s=new DataView(t.buffer,t.byteOffset,t.byteLength);return s.setFloat32(n,e,!0),t}Ue.writeFloat32LE=p2;function g2(e,t,n){t===void 0&&(t=new Uint8Array(8)),n===void 0&&(n=0);var s=new DataView(t.buffer,t.byteOffset,t.byteLength);return s.setFloat64(n,e),t}Ue.writeFloat64BE=g2;function y2(e,t,n){t===void 0&&(t=new Uint8Array(8)),n===void 0&&(n=0);var s=new DataView(t.buffer,t.byteOffset,t.byteLength);return s.setFloat64(n,e,!0),t}Ue.writeFloat64LE=y2;var Kr={};Object.defineProperty(Kr,"__esModule",{value:!0});function m2(e){for(var t=0;t<e.length;t++)e[t]=0;return e}Kr.wipe=m2;Object.defineProperty(vc,"__esModule",{value:!0});var cr=Ue,kl=Kr,v2=20;function b2(e,t,n){for(var s=1634760805,o=857760878,c=2036477234,f=1797285236,h=n[3]<<24|n[2]<<16|n[1]<<8|n[0],O=n[7]<<24|n[6]<<16|n[5]<<8|n[4],p=n[11]<<24|n[10]<<16|n[9]<<8|n[8],S=n[15]<<24|n[14]<<16|n[13]<<8|n[12],C=n[19]<<24|n[18]<<16|n[17]<<8|n[16],R=n[23]<<24|n[22]<<16|n[21]<<8|n[20],U=n[27]<<24|n[26]<<16|n[25]<<8|n[24],x=n[31]<<24|n[30]<<16|n[29]<<8|n[28],F=t[3]<<24|t[2]<<16|t[1]<<8|t[0],q=t[7]<<24|t[6]<<16|t[5]<<8|t[4],te=t[11]<<24|t[10]<<16|t[9]<<8|t[8],_=t[15]<<24|t[14]<<16|t[13]<<8|t[12],A=s,I=o,D=c,w=f,u=h,b=O,K=p,v=S,g=C,P=R,L=U,y=x,E=F,k=q,W=te,Z=_,B=0;B<v2;B+=2)A=A+u|0,E^=A,E=E>>>32-16|E<<16,g=g+E|0,u^=g,u=u>>>32-12|u<<12,I=I+b|0,k^=I,k=k>>>32-16|k<<16,P=P+k|0,b^=P,b=b>>>32-12|b<<12,D=D+K|0,W^=D,W=W>>>32-16|W<<16,L=L+W|0,K^=L,K=K>>>32-12|K<<12,w=w+v|0,Z^=w,Z=Z>>>32-16|Z<<16,y=y+Z|0,v^=y,v=v>>>32-12|v<<12,D=D+K|0,W^=D,W=W>>>32-8|W<<8,L=L+W|0,K^=L,K=K>>>32-7|K<<7,w=w+v|0,Z^=w,Z=Z>>>32-8|Z<<8,y=y+Z|0,v^=y,v=v>>>32-7|v<<7,I=I+b|0,k^=I,k=k>>>32-8|k<<8,P=P+k|0,b^=P,b=b>>>32-7|b<<7,A=A+u|0,E^=A,E=E>>>32-8|E<<8,g=g+E|0,u^=g,u=u>>>32-7|u<<7,A=A+b|0,Z^=A,Z=Z>>>32-16|Z<<16,L=L+Z|0,b^=L,b=b>>>32-12|b<<12,I=I+K|0,E^=I,E=E>>>32-16|E<<16,y=y+E|0,K^=y,K=K>>>32-12|K<<12,D=D+v|0,k^=D,k=k>>>32-16|k<<16,g=g+k|0,v^=g,v=v>>>32-12|v<<12,w=w+u|0,W^=w,W=W>>>32-16|W<<16,P=P+W|0,u^=P,u=u>>>32-12|u<<12,D=D+v|0,k^=D,k=k>>>32-8|k<<8,g=g+k|0,v^=g,v=v>>>32-7|v<<7,w=w+u|0,W^=w,W=W>>>32-8|W<<8,P=P+W|0,u^=P,u=u>>>32-7|u<<7,I=I+K|0,E^=I,E=E>>>32-8|E<<8,y=y+E|0,K^=y,K=K>>>32-7|K<<7,A=A+b|0,Z^=A,Z=Z>>>32-8|Z<<8,L=L+Z|0,b^=L,b=b>>>32-7|b<<7;cr.writeUint32LE(A+s|0,e,0),cr.writeUint32LE(I+o|0,e,4),cr.writeUint32LE(D+c|0,e,8),cr.writeUint32LE(w+f|0,e,12),cr.writeUint32LE(u+h|0,e,16),cr.writeUint32LE(b+O|0,e,20),cr.writeUint32LE(K+p|0,e,24),cr.writeUint32LE(v+S|0,e,28),cr.writeUint32LE(g+C|0,e,32),cr.writeUint32LE(P+R|0,e,36),cr.writeUint32LE(L+U|0,e,40),cr.writeUint32LE(y+x|0,e,44),cr.writeUint32LE(E+F|0,e,48),cr.writeUint32LE(k+q|0,e,52),cr.writeUint32LE(W+te|0,e,56),cr.writeUint32LE(Z+_|0,e,60)}function h0(e,t,n,s,o){if(o===void 0&&(o=0),e.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(s.length<n.length)throw new Error("ChaCha: destination is shorter than source");var c,f;if(o===0){if(t.length!==8&&t.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");c=new Uint8Array(16),f=c.length-t.length,c.set(t,f)}else{if(t.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");c=t,f=o}for(var h=new Uint8Array(64),O=0;O<n.length;O+=64){b2(h,c,e);for(var p=O;p<O+64&&p<n.length;p++)s[p]=n[p]^h[p-O];w2(c,0,f)}return kl.wipe(h),o===0&&kl.wipe(c),s}vc.streamXOR=h0;function _2(e,t,n,s){return s===void 0&&(s=0),kl.wipe(n),h0(e,t,n,n,s)}vc.stream=_2;function w2(e,t,n){for(var s=1;n--;)s=s+(e[t]&255)|0,e[t]=s&255,s>>>=8,t++;if(s>0)throw new Error("ChaCha: counter overflow")}var f0={},gi={};Object.defineProperty(gi,"__esModule",{value:!0});function E2(e,t,n){return~(e-1)&t|e-1&n}gi.select=E2;function S2(e,t){return(e|0)-(t|0)-1>>>31&1}gi.lessOrEqual=S2;function d0(e,t){if(e.length!==t.length)return 0;for(var n=0,s=0;s<e.length;s++)n|=e[s]^t[s];return 1&n-1>>>8}gi.compare=d0;function O2(e,t){return e.length===0||t.length===0?!1:d0(e,t)!==0}gi.equal=O2;(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=gi,n=Kr;e.DIGEST_LENGTH=16;var s=function(){function f(h){this.digestLength=e.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var O=h[0]|h[1]<<8;this._r[0]=O&8191;var p=h[2]|h[3]<<8;this._r[1]=(O>>>13|p<<3)&8191;var S=h[4]|h[5]<<8;this._r[2]=(p>>>10|S<<6)&7939;var C=h[6]|h[7]<<8;this._r[3]=(S>>>7|C<<9)&8191;var R=h[8]|h[9]<<8;this._r[4]=(C>>>4|R<<12)&255,this._r[5]=R>>>1&8190;var U=h[10]|h[11]<<8;this._r[6]=(R>>>14|U<<2)&8191;var x=h[12]|h[13]<<8;this._r[7]=(U>>>11|x<<5)&8065;var F=h[14]|h[15]<<8;this._r[8]=(x>>>8|F<<8)&8191,this._r[9]=F>>>5&127,this._pad[0]=h[16]|h[17]<<8,this._pad[1]=h[18]|h[19]<<8,this._pad[2]=h[20]|h[21]<<8,this._pad[3]=h[22]|h[23]<<8,this._pad[4]=h[24]|h[25]<<8,this._pad[5]=h[26]|h[27]<<8,this._pad[6]=h[28]|h[29]<<8,this._pad[7]=h[30]|h[31]<<8}return f.prototype._blocks=function(h,O,p){for(var S=this._fin?0:2048,C=this._h[0],R=this._h[1],U=this._h[2],x=this._h[3],F=this._h[4],q=this._h[5],te=this._h[6],_=this._h[7],A=this._h[8],I=this._h[9],D=this._r[0],w=this._r[1],u=this._r[2],b=this._r[3],K=this._r[4],v=this._r[5],g=this._r[6],P=this._r[7],L=this._r[8],y=this._r[9];p>=16;){var E=h[O+0]|h[O+1]<<8;C+=E&8191;var k=h[O+2]|h[O+3]<<8;R+=(E>>>13|k<<3)&8191;var W=h[O+4]|h[O+5]<<8;U+=(k>>>10|W<<6)&8191;var Z=h[O+6]|h[O+7]<<8;x+=(W>>>7|Z<<9)&8191;var B=h[O+8]|h[O+9]<<8;F+=(Z>>>4|B<<12)&8191,q+=B>>>1&8191;var ee=h[O+10]|h[O+11]<<8;te+=(B>>>14|ee<<2)&8191;var oe=h[O+12]|h[O+13]<<8;_+=(ee>>>11|oe<<5)&8191;var de=h[O+14]|h[O+15]<<8;A+=(oe>>>8|de<<8)&8191,I+=de>>>5|S;var ie=0,Ie=ie;Ie+=C*D,Ie+=R*(5*y),Ie+=U*(5*L),Ie+=x*(5*P),Ie+=F*(5*g),ie=Ie>>>13,Ie&=8191,Ie+=q*(5*v),Ie+=te*(5*K),Ie+=_*(5*b),Ie+=A*(5*u),Ie+=I*(5*w),ie+=Ie>>>13,Ie&=8191;var be=ie;be+=C*w,be+=R*D,be+=U*(5*y),be+=x*(5*L),be+=F*(5*P),ie=be>>>13,be&=8191,be+=q*(5*g),be+=te*(5*v),be+=_*(5*K),be+=A*(5*b),be+=I*(5*u),ie+=be>>>13,be&=8191;var Ce=ie;Ce+=C*u,Ce+=R*w,Ce+=U*D,Ce+=x*(5*y),Ce+=F*(5*L),ie=Ce>>>13,Ce&=8191,Ce+=q*(5*P),Ce+=te*(5*g),Ce+=_*(5*v),Ce+=A*(5*K),Ce+=I*(5*b),ie+=Ce>>>13,Ce&=8191;var ne=ie;ne+=C*b,ne+=R*u,ne+=U*w,ne+=x*D,ne+=F*(5*y),ie=ne>>>13,ne&=8191,ne+=q*(5*L),ne+=te*(5*P),ne+=_*(5*g),ne+=A*(5*v),ne+=I*(5*K),ie+=ne>>>13,ne&=8191;var re=ie;re+=C*K,re+=R*b,re+=U*u,re+=x*w,re+=F*D,ie=re>>>13,re&=8191,re+=q*(5*y),re+=te*(5*L),re+=_*(5*P),re+=A*(5*g),re+=I*(5*v),ie+=re>>>13,re&=8191;var J=ie;J+=C*v,J+=R*K,J+=U*b,J+=x*u,J+=F*w,ie=J>>>13,J&=8191,J+=q*D,J+=te*(5*y),J+=_*(5*L),J+=A*(5*P),J+=I*(5*g),ie+=J>>>13,J&=8191;var d=ie;d+=C*g,d+=R*v,d+=U*K,d+=x*b,d+=F*u,ie=d>>>13,d&=8191,d+=q*w,d+=te*D,d+=_*(5*y),d+=A*(5*L),d+=I*(5*P),ie+=d>>>13,d&=8191;var z=ie;z+=C*P,z+=R*g,z+=U*v,z+=x*K,z+=F*b,ie=z>>>13,z&=8191,z+=q*u,z+=te*w,z+=_*D,z+=A*(5*y),z+=I*(5*L),ie+=z>>>13,z&=8191;var ge=ie;ge+=C*L,ge+=R*P,ge+=U*g,ge+=x*v,ge+=F*K,ie=ge>>>13,ge&=8191,ge+=q*b,ge+=te*u,ge+=_*w,ge+=A*D,ge+=I*(5*y),ie+=ge>>>13,ge&=8191;var Ee=ie;Ee+=C*y,Ee+=R*L,Ee+=U*P,Ee+=x*g,Ee+=F*v,ie=Ee>>>13,Ee&=8191,Ee+=q*K,Ee+=te*b,Ee+=_*u,Ee+=A*w,Ee+=I*D,ie+=Ee>>>13,Ee&=8191,ie=(ie<<2)+ie|0,ie=ie+Ie|0,Ie=ie&8191,ie=ie>>>13,be+=ie,C=Ie,R=be,U=Ce,x=ne,F=re,q=J,te=d,_=z,A=ge,I=Ee,O+=16,p-=16}this._h[0]=C,this._h[1]=R,this._h[2]=U,this._h[3]=x,this._h[4]=F,this._h[5]=q,this._h[6]=te,this._h[7]=_,this._h[8]=A,this._h[9]=I},f.prototype.finish=function(h,O){O===void 0&&(O=0);var p=new Uint16Array(10),S,C,R,U;if(this._leftover){for(U=this._leftover,this._buffer[U++]=1;U<16;U++)this._buffer[U]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(S=this._h[1]>>>13,this._h[1]&=8191,U=2;U<10;U++)this._h[U]+=S,S=this._h[U]>>>13,this._h[U]&=8191;for(this._h[0]+=S*5,S=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=S,S=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=S,p[0]=this._h[0]+5,S=p[0]>>>13,p[0]&=8191,U=1;U<10;U++)p[U]=this._h[U]+S,S=p[U]>>>13,p[U]&=8191;for(p[9]-=1<<13,C=(S^1)-1,U=0;U<10;U++)p[U]&=C;for(C=~C,U=0;U<10;U++)this._h[U]=this._h[U]&C|p[U];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,R=this._h[0]+this._pad[0],this._h[0]=R&65535,U=1;U<8;U++)R=(this._h[U]+this._pad[U]|0)+(R>>>16)|0,this._h[U]=R&65535;return h[O+0]=this._h[0]>>>0,h[O+1]=this._h[0]>>>8,h[O+2]=this._h[1]>>>0,h[O+3]=this._h[1]>>>8,h[O+4]=this._h[2]>>>0,h[O+5]=this._h[2]>>>8,h[O+6]=this._h[3]>>>0,h[O+7]=this._h[3]>>>8,h[O+8]=this._h[4]>>>0,h[O+9]=this._h[4]>>>8,h[O+10]=this._h[5]>>>0,h[O+11]=this._h[5]>>>8,h[O+12]=this._h[6]>>>0,h[O+13]=this._h[6]>>>8,h[O+14]=this._h[7]>>>0,h[O+15]=this._h[7]>>>8,this._finished=!0,this},f.prototype.update=function(h){var O=0,p=h.length,S;if(this._leftover){S=16-this._leftover,S>p&&(S=p);for(var C=0;C<S;C++)this._buffer[this._leftover+C]=h[O+C];if(p-=S,O+=S,this._leftover+=S,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(p>=16&&(S=p-p%16,this._blocks(h,O,S),O+=S,p-=S),p){for(var C=0;C<p;C++)this._buffer[this._leftover+C]=h[O+C];this._leftover+=p}return this},f.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var h=new Uint8Array(16);return this.finish(h),h},f.prototype.clean=function(){return n.wipe(this._buffer),n.wipe(this._r),n.wipe(this._h),n.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},f}();e.Poly1305=s;function o(f,h){var O=new s(f);O.update(h);var p=O.digest();return O.clean(),p}e.oneTimeAuth=o;function c(f,h){return f.length!==e.DIGEST_LENGTH||h.length!==e.DIGEST_LENGTH?!1:t.equal(f,h)}e.equal=c})(f0);(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=vc,n=f0,s=Kr,o=Ue,c=gi;e.KEY_LENGTH=32,e.NONCE_LENGTH=12,e.TAG_LENGTH=16;var f=new Uint8Array(16),h=function(){function O(p){if(this.nonceLength=e.NONCE_LENGTH,this.tagLength=e.TAG_LENGTH,p.length!==e.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(p)}return O.prototype.seal=function(p,S,C,R){if(p.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var U=new Uint8Array(16);U.set(p,U.length-p.length);var x=new Uint8Array(32);t.stream(this._key,U,x,4);var F=S.length+this.tagLength,q;if(R){if(R.length!==F)throw new Error("ChaCha20Poly1305: incorrect destination length");q=R}else q=new Uint8Array(F);return t.streamXOR(this._key,U,S,q,4),this._authenticate(q.subarray(q.length-this.tagLength,q.length),x,q.subarray(0,q.length-this.tagLength),C),s.wipe(U),q},O.prototype.open=function(p,S,C,R){if(p.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(S.length<this.tagLength)return null;var U=new Uint8Array(16);U.set(p,U.length-p.length);var x=new Uint8Array(32);t.stream(this._key,U,x,4);var F=new Uint8Array(this.tagLength);if(this._authenticate(F,x,S.subarray(0,S.length-this.tagLength),C),!c.equal(F,S.subarray(S.length-this.tagLength,S.length)))return null;var q=S.length-this.tagLength,te;if(R){if(R.length!==q)throw new Error("ChaCha20Poly1305: incorrect destination length");te=R}else te=new Uint8Array(q);return t.streamXOR(this._key,U,S.subarray(0,S.length-this.tagLength),te,4),s.wipe(U),te},O.prototype.clean=function(){return s.wipe(this._key),this},O.prototype._authenticate=function(p,S,C,R){var U=new n.Poly1305(S);R&&(U.update(R),R.length%16>0&&U.update(f.subarray(R.length%16))),U.update(C),C.length%16>0&&U.update(f.subarray(C.length%16));var x=new Uint8Array(8);R&&o.writeUint64LE(R.length,x),U.update(x),o.writeUint64LE(C.length,x),U.update(x);for(var F=U.digest(),q=0;q<F.length;q++)p[q]=F[q];U.clean(),s.wipe(F),s.wipe(x)},O}();e.ChaCha20Poly1305=h})(Ki);var p0={},Uo={},_h={};Object.defineProperty(_h,"__esModule",{value:!0});function I2(e){return typeof e.saveState<"u"&&typeof e.restoreState<"u"&&typeof e.cleanSavedState<"u"}_h.isSerializableHash=I2;Object.defineProperty(Uo,"__esModule",{value:!0});var wn=_h,D2=gi,P2=Kr,g0=function(){function e(t,n){this._finished=!1,this._inner=new t,this._outer=new t,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var s=new Uint8Array(this.blockSize);n.length>this.blockSize?this._inner.update(n).finish(s).clean():s.set(n);for(var o=0;o<s.length;o++)s[o]^=54;this._inner.update(s);for(var o=0;o<s.length;o++)s[o]^=106;this._outer.update(s),wn.isSerializableHash(this._inner)&&wn.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),P2.wipe(s)}return e.prototype.reset=function(){if(!wn.isSerializableHash(this._inner)||!wn.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},e.prototype.clean=function(){wn.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),wn.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},e.prototype.update=function(t){return this._inner.update(t),this},e.prototype.finish=function(t){return this._finished?(this._outer.finish(t),this):(this._inner.finish(t),this._outer.update(t.subarray(0,this.digestLength)).finish(t),this._finished=!0,this)},e.prototype.digest=function(){var t=new Uint8Array(this.digestLength);return this.finish(t),t},e.prototype.saveState=function(){if(!wn.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},e.prototype.restoreState=function(t){if(!wn.isSerializableHash(this._inner)||!wn.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(t),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},e.prototype.cleanSavedState=function(t){if(!wn.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(t)},e}();Uo.HMAC=g0;function $2(e,t,n){var s=new g0(e,t);s.update(n);var o=s.digest();return s.clean(),o}Uo.hmac=$2;Uo.equal=D2.equal;Object.defineProperty(p0,"__esModule",{value:!0});var Hp=Uo,kp=Kr,N2=function(){function e(t,n,s,o){s===void 0&&(s=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=t,this._info=o;var c=Hp.hmac(this._hash,s,n);this._hmac=new Hp.HMAC(t,c),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return e.prototype._fillBuffer=function(){this._counter[0]++;var t=this._counter[0];if(t===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),t>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},e.prototype.expand=function(t){for(var n=new Uint8Array(t),s=0;s<n.length;s++)this._bufpos===this._buffer.length&&this._fillBuffer(),n[s]=this._buffer[this._bufpos++];return n},e.prototype.clean=function(){this._hmac.clean(),kp.wipe(this._buffer),kp.wipe(this._counter),this._bufpos=0},e}(),wh=p0.HKDF=N2,$n={},bc={},_c={};Object.defineProperty(_c,"__esModule",{value:!0});_c.BrowserRandomSource=void 0;const zp=65536;class C2{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const t=typeof self<"u"?self.crypto||self.msCrypto:null;t&&t.getRandomValues!==void 0&&(this._crypto=t,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(t){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const n=new Uint8Array(t);for(let s=0;s<n.length;s+=zp)this._crypto.getRandomValues(n.subarray(s,s+Math.min(n.length-s,zp)));return n}}_c.BrowserRandomSource=C2;var wc={};Object.defineProperty(wc,"__esModule",{value:!0});wc.NodeRandomSource=void 0;const A2=Kr;class T2{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof OI<"u"){const t=II;t&&t.randomBytes&&(this._crypto=t,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(t){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let n=this._crypto.randomBytes(t);if(n.length!==t)throw new Error("NodeRandomSource: got fewer bytes than requested");const s=new Uint8Array(t);for(let o=0;o<s.length;o++)s[o]=n[o];return(0,A2.wipe)(n),s}}wc.NodeRandomSource=T2;Object.defineProperty(bc,"__esModule",{value:!0});bc.SystemRandomSource=void 0;const x2=_c,R2=wc;class j2{constructor(){if(this.isAvailable=!1,this.name="",this._source=new x2.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new R2.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(t){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(t)}}bc.SystemRandomSource=j2;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.randomStringForEntropy=e.randomString=e.randomUint32=e.randomBytes=e.defaultRandomSource=void 0;const t=bc,n=Ue,s=Kr;e.defaultRandomSource=new t.SystemRandomSource;function o(p,S=e.defaultRandomSource){return S.randomBytes(p)}e.randomBytes=o;function c(p=e.defaultRandomSource){const S=o(4,p),C=(0,n.readUint32LE)(S);return(0,s.wipe)(S),C}e.randomUint32=c;const f="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function h(p,S=f,C=e.defaultRandomSource){if(S.length<2)throw new Error("randomString charset is too short");if(S.length>256)throw new Error("randomString charset is too long");let R="";const U=S.length,x=256-256%U;for(;p>0;){const F=o(Math.ceil(p*256/x),C);for(let q=0;q<F.length&&p>0;q++){const te=F[q];te<x&&(R+=S.charAt(te%U),p--)}(0,s.wipe)(F)}return R}e.randomString=h;function O(p,S=f,C=e.defaultRandomSource){const R=Math.ceil(p/(Math.log(S.length)/Math.LN2));return h(R,S,C)}e.randomStringForEntropy=O})($n);var Nn={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=Ue,n=Kr;e.DIGEST_LENGTH=32,e.BLOCK_SIZE=64;var s=function(){function h(){this.digestLength=e.DIGEST_LENGTH,this.blockSize=e.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return h.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},h.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},h.prototype.clean=function(){n.wipe(this._buffer),n.wipe(this._temp),this.reset()},h.prototype.update=function(O,p){if(p===void 0&&(p=O.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var S=0;if(this._bytesHashed+=p,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&p>0;)this._buffer[this._bufferLength++]=O[S++],p--;this._bufferLength===this.blockSize&&(c(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(p>=this.blockSize&&(S=c(this._temp,this._state,O,S,p),p%=this.blockSize);p>0;)this._buffer[this._bufferLength++]=O[S++],p--;return this},h.prototype.finish=function(O){if(!this._finished){var p=this._bytesHashed,S=this._bufferLength,C=p/536870912|0,R=p<<3,U=p%64<56?64:128;this._buffer[S]=128;for(var x=S+1;x<U-8;x++)this._buffer[x]=0;t.writeUint32BE(C,this._buffer,U-8),t.writeUint32BE(R,this._buffer,U-4),c(this._temp,this._state,this._buffer,0,U),this._finished=!0}for(var x=0;x<this.digestLength/4;x++)t.writeUint32BE(this._state[x],O,x*4);return this},h.prototype.digest=function(){var O=new Uint8Array(this.digestLength);return this.finish(O),O},h.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},h.prototype.restoreState=function(O){return this._state.set(O.state),this._bufferLength=O.bufferLength,O.buffer&&this._buffer.set(O.buffer),this._bytesHashed=O.bytesHashed,this._finished=!1,this},h.prototype.cleanSavedState=function(O){n.wipe(O.state),O.buffer&&n.wipe(O.buffer),O.bufferLength=0,O.bytesHashed=0},h}();e.SHA256=s;var o=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function c(h,O,p,S,C){for(;C>=64;){for(var R=O[0],U=O[1],x=O[2],F=O[3],q=O[4],te=O[5],_=O[6],A=O[7],I=0;I<16;I++){var D=S+I*4;h[I]=t.readUint32BE(p,D)}for(var I=16;I<64;I++){var w=h[I-2],u=(w>>>17|w<<32-17)^(w>>>19|w<<32-19)^w>>>10;w=h[I-15];var b=(w>>>7|w<<32-7)^(w>>>18|w<<32-18)^w>>>3;h[I]=(u+h[I-7]|0)+(b+h[I-16]|0)}for(var I=0;I<64;I++){var u=(((q>>>6|q<<26)^(q>>>11|q<<21)^(q>>>25|q<<7))+(q&te^~q&_)|0)+(A+(o[I]+h[I]|0)|0)|0,b=((R>>>2|R<<32-2)^(R>>>13|R<<32-13)^(R>>>22|R<<32-22))+(R&U^R&x^U&x)|0;A=_,_=te,te=q,q=F+u|0,F=x,x=U,U=R,R=u+b|0}O[0]+=R,O[1]+=U,O[2]+=x,O[3]+=F,O[4]+=q,O[5]+=te,O[6]+=_,O[7]+=A,S+=64,C-=64}return S}function f(h){var O=new s;O.update(h);var p=O.digest();return O.clean(),p}e.hash=f})(Nn);var Wi={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.sharedKey=e.generateKeyPair=e.generateKeyPairFromSeed=e.scalarMultBase=e.scalarMult=e.SHARED_KEY_LENGTH=e.SECRET_KEY_LENGTH=e.PUBLIC_KEY_LENGTH=void 0;const t=$n,n=Kr;e.PUBLIC_KEY_LENGTH=32,e.SECRET_KEY_LENGTH=32,e.SHARED_KEY_LENGTH=32;function s(I){const D=new Float64Array(16);if(I)for(let w=0;w<I.length;w++)D[w]=I[w];return D}const o=new Uint8Array(32);o[0]=9;const c=s([56129,1]);function f(I){let D=1;for(let w=0;w<16;w++){let u=I[w]+D+65535;D=Math.floor(u/65536),I[w]=u-D*65536}I[0]+=D-1+37*(D-1)}function h(I,D,w){const u=~(w-1);for(let b=0;b<16;b++){const K=u&(I[b]^D[b]);I[b]^=K,D[b]^=K}}function O(I,D){const w=s(),u=s();for(let b=0;b<16;b++)u[b]=D[b];f(u),f(u),f(u);for(let b=0;b<2;b++){w[0]=u[0]-65517;for(let v=1;v<15;v++)w[v]=u[v]-65535-(w[v-1]>>16&1),w[v-1]&=65535;w[15]=u[15]-32767-(w[14]>>16&1);const K=w[15]>>16&1;w[14]&=65535,h(u,w,1-K)}for(let b=0;b<16;b++)I[2*b]=u[b]&255,I[2*b+1]=u[b]>>8}function p(I,D){for(let w=0;w<16;w++)I[w]=D[2*w]+(D[2*w+1]<<8);I[15]&=32767}function S(I,D,w){for(let u=0;u<16;u++)I[u]=D[u]+w[u]}function C(I,D,w){for(let u=0;u<16;u++)I[u]=D[u]-w[u]}function R(I,D,w){let u,b,K=0,v=0,g=0,P=0,L=0,y=0,E=0,k=0,W=0,Z=0,B=0,ee=0,oe=0,de=0,ie=0,Ie=0,be=0,Ce=0,ne=0,re=0,J=0,d=0,z=0,ge=0,Ee=0,ze=0,Qe=0,Ve=0,tt=0,Pt=0,St=0,Be=w[0],qe=w[1],Le=w[2],He=w[3],he=w[4],$=w[5],m=w[6],G=w[7],ce=w[8],_e=w[9],ye=w[10],Ae=w[11],Ke=w[12],et=w[13],We=w[14],je=w[15];u=D[0],K+=u*Be,v+=u*qe,g+=u*Le,P+=u*He,L+=u*he,y+=u*$,E+=u*m,k+=u*G,W+=u*ce,Z+=u*_e,B+=u*ye,ee+=u*Ae,oe+=u*Ke,de+=u*et,ie+=u*We,Ie+=u*je,u=D[1],v+=u*Be,g+=u*qe,P+=u*Le,L+=u*He,y+=u*he,E+=u*$,k+=u*m,W+=u*G,Z+=u*ce,B+=u*_e,ee+=u*ye,oe+=u*Ae,de+=u*Ke,ie+=u*et,Ie+=u*We,be+=u*je,u=D[2],g+=u*Be,P+=u*qe,L+=u*Le,y+=u*He,E+=u*he,k+=u*$,W+=u*m,Z+=u*G,B+=u*ce,ee+=u*_e,oe+=u*ye,de+=u*Ae,ie+=u*Ke,Ie+=u*et,be+=u*We,Ce+=u*je,u=D[3],P+=u*Be,L+=u*qe,y+=u*Le,E+=u*He,k+=u*he,W+=u*$,Z+=u*m,B+=u*G,ee+=u*ce,oe+=u*_e,de+=u*ye,ie+=u*Ae,Ie+=u*Ke,be+=u*et,Ce+=u*We,ne+=u*je,u=D[4],L+=u*Be,y+=u*qe,E+=u*Le,k+=u*He,W+=u*he,Z+=u*$,B+=u*m,ee+=u*G,oe+=u*ce,de+=u*_e,ie+=u*ye,Ie+=u*Ae,be+=u*Ke,Ce+=u*et,ne+=u*We,re+=u*je,u=D[5],y+=u*Be,E+=u*qe,k+=u*Le,W+=u*He,Z+=u*he,B+=u*$,ee+=u*m,oe+=u*G,de+=u*ce,ie+=u*_e,Ie+=u*ye,be+=u*Ae,Ce+=u*Ke,ne+=u*et,re+=u*We,J+=u*je,u=D[6],E+=u*Be,k+=u*qe,W+=u*Le,Z+=u*He,B+=u*he,ee+=u*$,oe+=u*m,de+=u*G,ie+=u*ce,Ie+=u*_e,be+=u*ye,Ce+=u*Ae,ne+=u*Ke,re+=u*et,J+=u*We,d+=u*je,u=D[7],k+=u*Be,W+=u*qe,Z+=u*Le,B+=u*He,ee+=u*he,oe+=u*$,de+=u*m,ie+=u*G,Ie+=u*ce,be+=u*_e,Ce+=u*ye,ne+=u*Ae,re+=u*Ke,J+=u*et,d+=u*We,z+=u*je,u=D[8],W+=u*Be,Z+=u*qe,B+=u*Le,ee+=u*He,oe+=u*he,de+=u*$,ie+=u*m,Ie+=u*G,be+=u*ce,Ce+=u*_e,ne+=u*ye,re+=u*Ae,J+=u*Ke,d+=u*et,z+=u*We,ge+=u*je,u=D[9],Z+=u*Be,B+=u*qe,ee+=u*Le,oe+=u*He,de+=u*he,ie+=u*$,Ie+=u*m,be+=u*G,Ce+=u*ce,ne+=u*_e,re+=u*ye,J+=u*Ae,d+=u*Ke,z+=u*et,ge+=u*We,Ee+=u*je,u=D[10],B+=u*Be,ee+=u*qe,oe+=u*Le,de+=u*He,ie+=u*he,Ie+=u*$,be+=u*m,Ce+=u*G,ne+=u*ce,re+=u*_e,J+=u*ye,d+=u*Ae,z+=u*Ke,ge+=u*et,Ee+=u*We,ze+=u*je,u=D[11],ee+=u*Be,oe+=u*qe,de+=u*Le,ie+=u*He,Ie+=u*he,be+=u*$,Ce+=u*m,ne+=u*G,re+=u*ce,J+=u*_e,d+=u*ye,z+=u*Ae,ge+=u*Ke,Ee+=u*et,ze+=u*We,Qe+=u*je,u=D[12],oe+=u*Be,de+=u*qe,ie+=u*Le,Ie+=u*He,be+=u*he,Ce+=u*$,ne+=u*m,re+=u*G,J+=u*ce,d+=u*_e,z+=u*ye,ge+=u*Ae,Ee+=u*Ke,ze+=u*et,Qe+=u*We,Ve+=u*je,u=D[13],de+=u*Be,ie+=u*qe,Ie+=u*Le,be+=u*He,Ce+=u*he,ne+=u*$,re+=u*m,J+=u*G,d+=u*ce,z+=u*_e,ge+=u*ye,Ee+=u*Ae,ze+=u*Ke,Qe+=u*et,Ve+=u*We,tt+=u*je,u=D[14],ie+=u*Be,Ie+=u*qe,be+=u*Le,Ce+=u*He,ne+=u*he,re+=u*$,J+=u*m,d+=u*G,z+=u*ce,ge+=u*_e,Ee+=u*ye,ze+=u*Ae,Qe+=u*Ke,Ve+=u*et,tt+=u*We,Pt+=u*je,u=D[15],Ie+=u*Be,be+=u*qe,Ce+=u*Le,ne+=u*He,re+=u*he,J+=u*$,d+=u*m,z+=u*G,ge+=u*ce,Ee+=u*_e,ze+=u*ye,Qe+=u*Ae,Ve+=u*Ke,tt+=u*et,Pt+=u*We,St+=u*je,K+=38*be,v+=38*Ce,g+=38*ne,P+=38*re,L+=38*J,y+=38*d,E+=38*z,k+=38*ge,W+=38*Ee,Z+=38*ze,B+=38*Qe,ee+=38*Ve,oe+=38*tt,de+=38*Pt,ie+=38*St,b=1,u=K+b+65535,b=Math.floor(u/65536),K=u-b*65536,u=v+b+65535,b=Math.floor(u/65536),v=u-b*65536,u=g+b+65535,b=Math.floor(u/65536),g=u-b*65536,u=P+b+65535,b=Math.floor(u/65536),P=u-b*65536,u=L+b+65535,b=Math.floor(u/65536),L=u-b*65536,u=y+b+65535,b=Math.floor(u/65536),y=u-b*65536,u=E+b+65535,b=Math.floor(u/65536),E=u-b*65536,u=k+b+65535,b=Math.floor(u/65536),k=u-b*65536,u=W+b+65535,b=Math.floor(u/65536),W=u-b*65536,u=Z+b+65535,b=Math.floor(u/65536),Z=u-b*65536,u=B+b+65535,b=Math.floor(u/65536),B=u-b*65536,u=ee+b+65535,b=Math.floor(u/65536),ee=u-b*65536,u=oe+b+65535,b=Math.floor(u/65536),oe=u-b*65536,u=de+b+65535,b=Math.floor(u/65536),de=u-b*65536,u=ie+b+65535,b=Math.floor(u/65536),ie=u-b*65536,u=Ie+b+65535,b=Math.floor(u/65536),Ie=u-b*65536,K+=b-1+37*(b-1),b=1,u=K+b+65535,b=Math.floor(u/65536),K=u-b*65536,u=v+b+65535,b=Math.floor(u/65536),v=u-b*65536,u=g+b+65535,b=Math.floor(u/65536),g=u-b*65536,u=P+b+65535,b=Math.floor(u/65536),P=u-b*65536,u=L+b+65535,b=Math.floor(u/65536),L=u-b*65536,u=y+b+65535,b=Math.floor(u/65536),y=u-b*65536,u=E+b+65535,b=Math.floor(u/65536),E=u-b*65536,u=k+b+65535,b=Math.floor(u/65536),k=u-b*65536,u=W+b+65535,b=Math.floor(u/65536),W=u-b*65536,u=Z+b+65535,b=Math.floor(u/65536),Z=u-b*65536,u=B+b+65535,b=Math.floor(u/65536),B=u-b*65536,u=ee+b+65535,b=Math.floor(u/65536),ee=u-b*65536,u=oe+b+65535,b=Math.floor(u/65536),oe=u-b*65536,u=de+b+65535,b=Math.floor(u/65536),de=u-b*65536,u=ie+b+65535,b=Math.floor(u/65536),ie=u-b*65536,u=Ie+b+65535,b=Math.floor(u/65536),Ie=u-b*65536,K+=b-1+37*(b-1),I[0]=K,I[1]=v,I[2]=g,I[3]=P,I[4]=L,I[5]=y,I[6]=E,I[7]=k,I[8]=W,I[9]=Z,I[10]=B,I[11]=ee,I[12]=oe,I[13]=de,I[14]=ie,I[15]=Ie}function U(I,D){R(I,D,D)}function x(I,D){const w=s();for(let u=0;u<16;u++)w[u]=D[u];for(let u=253;u>=0;u--)U(w,w),u!==2&&u!==4&&R(w,w,D);for(let u=0;u<16;u++)I[u]=w[u]}function F(I,D){const w=new Uint8Array(32),u=new Float64Array(80),b=s(),K=s(),v=s(),g=s(),P=s(),L=s();for(let W=0;W<31;W++)w[W]=I[W];w[31]=I[31]&127|64,w[0]&=248,p(u,D);for(let W=0;W<16;W++)K[W]=u[W];b[0]=g[0]=1;for(let W=254;W>=0;--W){const Z=w[W>>>3]>>>(W&7)&1;h(b,K,Z),h(v,g,Z),S(P,b,v),C(b,b,v),S(v,K,g),C(K,K,g),U(g,P),U(L,b),R(b,v,b),R(v,K,P),S(P,b,v),C(b,b,v),U(K,b),C(v,g,L),R(b,v,c),S(b,b,g),R(v,v,b),R(b,g,L),R(g,K,u),U(K,P),h(b,K,Z),h(v,g,Z)}for(let W=0;W<16;W++)u[W+16]=b[W],u[W+32]=v[W],u[W+48]=K[W],u[W+64]=g[W];const y=u.subarray(32),E=u.subarray(16);x(y,y),R(E,E,y);const k=new Uint8Array(32);return O(k,E),k}e.scalarMult=F;function q(I){return F(I,o)}e.scalarMultBase=q;function te(I){if(I.length!==e.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${e.SECRET_KEY_LENGTH} bytes`);const D=new Uint8Array(I);return{publicKey:q(D),secretKey:D}}e.generateKeyPairFromSeed=te;function _(I){const D=(0,t.randomBytes)(32,I),w=te(D);return(0,n.wipe)(D),w}e.generateKeyPair=_;function A(I,D,w=!1){if(I.length!==e.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(D.length!==e.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const u=F(I,D);if(w){let b=0;for(let K=0;K<u.length;K++)b|=u[K];if(b===0)throw new Error("X25519: invalid shared key")}return u}e.sharedKey=A})(Wi);function Eh(e){return globalThis.Buffer!=null?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function y0(e=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Eh(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function ki(e,t){t||(t=e.reduce((o,c)=>o+c.length,0));const n=y0(t);let s=0;for(const o of e)n.set(o,s),s+=o.length;return Eh(n)}function U2(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),s=0;s<n.length;s++)n[s]=255;for(var o=0;o<e.length;o++){var c=e.charAt(o),f=c.charCodeAt(0);if(n[f]!==255)throw new TypeError(c+" is ambiguous");n[f]=o}var h=e.length,O=e.charAt(0),p=Math.log(h)/Math.log(256),S=Math.log(256)/Math.log(h);function C(x){if(x instanceof Uint8Array||(ArrayBuffer.isView(x)?x=new Uint8Array(x.buffer,x.byteOffset,x.byteLength):Array.isArray(x)&&(x=Uint8Array.from(x))),!(x instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(x.length===0)return"";for(var F=0,q=0,te=0,_=x.length;te!==_&&x[te]===0;)te++,F++;for(var A=(_-te)*S+1>>>0,I=new Uint8Array(A);te!==_;){for(var D=x[te],w=0,u=A-1;(D!==0||w<q)&&u!==-1;u--,w++)D+=256*I[u]>>>0,I[u]=D%h>>>0,D=D/h>>>0;if(D!==0)throw new Error("Non-zero carry");q=w,te++}for(var b=A-q;b!==A&&I[b]===0;)b++;for(var K=O.repeat(F);b<A;++b)K+=e.charAt(I[b]);return K}function R(x){if(typeof x!="string")throw new TypeError("Expected String");if(x.length===0)return new Uint8Array;var F=0;if(x[F]!==" "){for(var q=0,te=0;x[F]===O;)q++,F++;for(var _=(x.length-F)*p+1>>>0,A=new Uint8Array(_);x[F];){var I=n[x.charCodeAt(F)];if(I===255)return;for(var D=0,w=_-1;(I!==0||D<te)&&w!==-1;w--,D++)I+=h*A[w]>>>0,A[w]=I%256>>>0,I=I/256>>>0;if(I!==0)throw new Error("Non-zero carry");te=D,F++}if(x[F]!==" "){for(var u=_-te;u!==_&&A[u]===0;)u++;for(var b=new Uint8Array(q+(_-u)),K=q;u!==_;)b[K++]=A[u++];return b}}}function U(x){var F=R(x);if(F)return F;throw new Error(`Non-${t} character`)}return{encode:C,decodeUnsafe:R,decode:U}}var L2=U2,M2=L2;const m0=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},F2=e=>new TextEncoder().encode(e),B2=e=>new TextDecoder().decode(e);class q2{constructor(t,n,s){this.name=t,this.prefix=n,this.baseEncode=s}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class H2{constructor(t,n,s){if(this.name=t,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=s}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return v0(this,t)}}class k2{constructor(t){this.decoders=t}or(t){return v0(this,t)}decode(t){const n=t[0],s=this.decoders[n];if(s)return s.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const v0=(e,t)=>new k2({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class z2{constructor(t,n,s,o){this.name=t,this.prefix=n,this.baseEncode=s,this.baseDecode=o,this.encoder=new q2(t,n,s),this.decoder=new H2(t,n,o)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const Ec=({name:e,prefix:t,encode:n,decode:s})=>new z2(e,t,n,s),Lo=({prefix:e,name:t,alphabet:n})=>{const{encode:s,decode:o}=M2(n,t);return Ec({prefix:e,name:t,encode:s,decode:c=>m0(o(c))})},V2=(e,t,n,s)=>{const o={};for(let S=0;S<t.length;++S)o[t[S]]=S;let c=e.length;for(;e[c-1]==="=";)--c;const f=new Uint8Array(c*n/8|0);let h=0,O=0,p=0;for(let S=0;S<c;++S){const C=o[e[S]];if(C===void 0)throw new SyntaxError(`Non-${s} character`);O=O<<n|C,h+=n,h>=8&&(h-=8,f[p++]=255&O>>h)}if(h>=n||255&O<<8-h)throw new SyntaxError("Unexpected end of data");return f},K2=(e,t,n)=>{const s=t[t.length-1]==="=",o=(1<<n)-1;let c="",f=0,h=0;for(let O=0;O<e.length;++O)for(h=h<<8|e[O],f+=8;f>n;)f-=n,c+=t[o&h>>f];if(f&&(c+=t[o&h<<n-f]),s)for(;c.length*n&7;)c+="=";return c},nr=({name:e,prefix:t,bitsPerChar:n,alphabet:s})=>Ec({prefix:t,name:e,encode(o){return K2(o,s,n)},decode(o){return V2(o,s,n,e)}}),W2=Ec({prefix:"\0",name:"identity",encode:e=>B2(e),decode:e=>F2(e)}),G2=Object.freeze(Object.defineProperty({__proto__:null,identity:W2},Symbol.toStringTag,{value:"Module"})),J2=nr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),Y2=Object.freeze(Object.defineProperty({__proto__:null,base2:J2},Symbol.toStringTag,{value:"Module"})),X2=nr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),Q2=Object.freeze(Object.defineProperty({__proto__:null,base8:X2},Symbol.toStringTag,{value:"Module"})),Z2=Lo({prefix:"9",name:"base10",alphabet:"0123456789"}),eD=Object.freeze(Object.defineProperty({__proto__:null,base10:Z2},Symbol.toStringTag,{value:"Module"})),tD=nr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),rD=nr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),nD=Object.freeze(Object.defineProperty({__proto__:null,base16:tD,base16upper:rD},Symbol.toStringTag,{value:"Module"})),iD=nr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),sD=nr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),oD=nr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),aD=nr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),cD=nr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),uD=nr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),lD=nr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),hD=nr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),fD=nr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),dD=Object.freeze(Object.defineProperty({__proto__:null,base32:iD,base32upper:sD,base32pad:oD,base32padupper:aD,base32hex:cD,base32hexupper:uD,base32hexpad:lD,base32hexpadupper:hD,base32z:fD},Symbol.toStringTag,{value:"Module"})),pD=Lo({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),gD=Lo({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),yD=Object.freeze(Object.defineProperty({__proto__:null,base36:pD,base36upper:gD},Symbol.toStringTag,{value:"Module"})),mD=Lo({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),vD=Lo({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),bD=Object.freeze(Object.defineProperty({__proto__:null,base58btc:mD,base58flickr:vD},Symbol.toStringTag,{value:"Module"})),_D=nr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),wD=nr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),ED=nr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),SD=nr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),OD=Object.freeze(Object.defineProperty({__proto__:null,base64:_D,base64pad:wD,base64url:ED,base64urlpad:SD},Symbol.toStringTag,{value:"Module"})),b0=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),ID=b0.reduce((e,t,n)=>(e[n]=t,e),[]),DD=b0.reduce((e,t,n)=>(e[t.codePointAt(0)]=n,e),[]);function PD(e){return e.reduce((t,n)=>(t+=ID[n],t),"")}function $D(e){const t=[];for(const n of e){const s=DD[n.codePointAt(0)];if(s===void 0)throw new Error(`Non-base256emoji character: ${n}`);t.push(s)}return new Uint8Array(t)}const ND=Ec({prefix:"\u{1F680}",name:"base256emoji",encode:PD,decode:$D}),CD=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:ND},Symbol.toStringTag,{value:"Module"}));var AD=_0,Vp=128,TD=127,xD=~TD,RD=Math.pow(2,31);function _0(e,t,n){t=t||[],n=n||0;for(var s=n;e>=RD;)t[n++]=e&255|Vp,e/=128;for(;e&xD;)t[n++]=e&255|Vp,e>>>=7;return t[n]=e|0,_0.bytes=n-s+1,t}var jD=zl,UD=128,Kp=127;function zl(e,s){var n=0,s=s||0,o=0,c=s,f,h=e.length;do{if(c>=h)throw zl.bytes=0,new RangeError("Could not decode varint");f=e[c++],n+=o<28?(f&Kp)<<o:(f&Kp)*Math.pow(2,o),o+=7}while(f>=UD);return zl.bytes=c-s,n}var LD=Math.pow(2,7),MD=Math.pow(2,14),FD=Math.pow(2,21),BD=Math.pow(2,28),qD=Math.pow(2,35),HD=Math.pow(2,42),kD=Math.pow(2,49),zD=Math.pow(2,56),VD=Math.pow(2,63),KD=function(e){return e<LD?1:e<MD?2:e<FD?3:e<BD?4:e<qD?5:e<HD?6:e<kD?7:e<zD?8:e<VD?9:10},WD={encode:AD,decode:jD,encodingLength:KD},w0=WD;const Wp=(e,t,n=0)=>(w0.encode(e,t,n),t),Gp=e=>w0.encodingLength(e),Vl=(e,t)=>{const n=t.byteLength,s=Gp(e),o=s+Gp(n),c=new Uint8Array(o+n);return Wp(e,c,0),Wp(n,c,s),c.set(t,o),new GD(e,n,t,c)};class GD{constructor(t,n,s,o){this.code=t,this.size=n,this.digest=s,this.bytes=o}}const E0=({name:e,code:t,encode:n})=>new JD(e,t,n);class JD{constructor(t,n,s){this.name=t,this.code=n,this.encode=s}digest(t){if(t instanceof Uint8Array){const n=this.encode(t);return n instanceof Uint8Array?Vl(this.code,n):n.then(s=>Vl(this.code,s))}else throw Error("Unknown type, must be binary type")}}const S0=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),YD=E0({name:"sha2-256",code:18,encode:S0("SHA-256")}),XD=E0({name:"sha2-512",code:19,encode:S0("SHA-512")}),QD=Object.freeze(Object.defineProperty({__proto__:null,sha256:YD,sha512:XD},Symbol.toStringTag,{value:"Module"})),O0=0,ZD="identity",I0=m0,e3=e=>Vl(O0,I0(e)),t3={code:O0,name:ZD,encode:I0,digest:e3},r3=Object.freeze(Object.defineProperty({__proto__:null,identity:t3},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const Jp={...G2,...Y2,...Q2,...eD,...nD,...dD,...yD,...bD,...OD,...CD};({...QD,...r3});function D0(e,t,n,s){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:n},decoder:{decode:s}}}const Yp=D0("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),fl=D0("ascii","a",e=>{let t="a";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},e=>{e=e.substring(1);const t=y0(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}),P0={utf8:Yp,"utf-8":Yp,hex:Jp.base16,latin1:fl,ascii:fl,binary:fl,...Jp};function Xe(e,t="utf8"){const n=P0[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Eh(globalThis.Buffer.from(e,"utf-8")):n.decoder.decode(`${n.prefix}${e}`)}function Je(e,t="utf8"){const n=P0[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8"):n.encoder.encode(e).substring(1)}var Xp=globalThis&&globalThis.__spreadArray||function(e,t,n){if(n||arguments.length===2)for(var s=0,o=t.length,c;s<o;s++)(c||!(s in t))&&(c||(c=Array.prototype.slice.call(t,0,s)),c[s]=t[s]);return e.concat(c||Array.prototype.slice.call(t))},n3=function(){function e(t,n,s){this.name=t,this.version=n,this.os=s,this.type="browser"}return e}(),i3=function(){function e(t){this.version=t,this.type="node",this.name="node",this.os=process.platform}return e}(),s3=function(){function e(t,n,s,o){this.name=t,this.version=n,this.os=s,this.bot=o,this.type="bot-device"}return e}(),o3=function(){function e(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return e}(),a3=function(){function e(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return e}(),c3=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,u3=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Qp=3,l3=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",c3]],Zp=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function h3(e){return e?eg(e):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new a3:typeof navigator<"u"?eg(navigator.userAgent):p3()}function f3(e){return e!==""&&l3.reduce(function(t,n){var s=n[0],o=n[1];if(t)return t;var c=o.exec(e);return!!c&&[s,c]},!1)}function eg(e){var t=f3(e);if(!t)return null;var n=t[0],s=t[1];if(n==="searchbot")return new o3;var o=s[1]&&s[1].split(".").join("_").split("_").slice(0,3);o?o.length<Qp&&(o=Xp(Xp([],o,!0),g3(Qp-o.length),!0)):o=[];var c=o.join("."),f=d3(e),h=u3.exec(e);return h&&h[1]?new s3(n,c,f,h[1]):new n3(n,c,f)}function d3(e){for(var t=0,n=Zp.length;t<n;t++){var s=Zp[t],o=s[0],c=s[1],f=c.exec(e);if(f)return o}return null}function p3(){var e=typeof process<"u"&&process.version;return e?new i3(process.version.slice(1)):null}function g3(e){for(var t=[],n=0;n<e;n++)t.push("0");return t}var we={},Mo={exports:{}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(function(e){var t,n,s,o,c,f,h,O,p,S,C,R,U,x,F,q,te,_,A,I,D,w,u;(function(b){var K=typeof rt=="object"?rt:typeof self=="object"?self:typeof this=="object"?this:{};b(v(K,v(e.exports)));function v(g,P){return g!==K&&(typeof Object.create=="function"?Object.defineProperty(g,"__esModule",{value:!0}):g.__esModule=!0),function(L,y){return g[L]=P?P(L,y):y}}})(function(b){var K=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,g){v.__proto__=g}||function(v,g){for(var P in g)g.hasOwnProperty(P)&&(v[P]=g[P])};t=function(v,g){K(v,g);function P(){this.constructor=v}v.prototype=g===null?Object.create(g):(P.prototype=g.prototype,new P)},n=Object.assign||function(v){for(var g,P=1,L=arguments.length;P<L;P++){g=arguments[P];for(var y in g)Object.prototype.hasOwnProperty.call(g,y)&&(v[y]=g[y])}return v},s=function(v,g){var P={};for(var L in v)Object.prototype.hasOwnProperty.call(v,L)&&g.indexOf(L)<0&&(P[L]=v[L]);if(v!=null&&typeof Object.getOwnPropertySymbols=="function")for(var y=0,L=Object.getOwnPropertySymbols(v);y<L.length;y++)g.indexOf(L[y])<0&&Object.prototype.propertyIsEnumerable.call(v,L[y])&&(P[L[y]]=v[L[y]]);return P},o=function(v,g,P,L){var y=arguments.length,E=y<3?g:L===null?L=Object.getOwnPropertyDescriptor(g,P):L,k;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(v,g,P,L);else for(var W=v.length-1;W>=0;W--)(k=v[W])&&(E=(y<3?k(E):y>3?k(g,P,E):k(g,P))||E);return y>3&&E&&Object.defineProperty(g,P,E),E},c=function(v,g){return function(P,L){g(P,L,v)}},f=function(v,g){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(v,g)},h=function(v,g,P,L){function y(E){return E instanceof P?E:new P(function(k){k(E)})}return new(P||(P=Promise))(function(E,k){function W(ee){try{B(L.next(ee))}catch(oe){k(oe)}}function Z(ee){try{B(L.throw(ee))}catch(oe){k(oe)}}function B(ee){ee.done?E(ee.value):y(ee.value).then(W,Z)}B((L=L.apply(v,g||[])).next())})},O=function(v,g){var P={label:0,sent:function(){if(E[0]&1)throw E[1];return E[1]},trys:[],ops:[]},L,y,E,k;return k={next:W(0),throw:W(1),return:W(2)},typeof Symbol=="function"&&(k[Symbol.iterator]=function(){return this}),k;function W(B){return function(ee){return Z([B,ee])}}function Z(B){if(L)throw new TypeError("Generator is already executing.");for(;P;)try{if(L=1,y&&(E=B[0]&2?y.return:B[0]?y.throw||((E=y.return)&&E.call(y),0):y.next)&&!(E=E.call(y,B[1])).done)return E;switch(y=0,E&&(B=[B[0]&2,E.value]),B[0]){case 0:case 1:E=B;break;case 4:return P.label++,{value:B[1],done:!1};case 5:P.label++,y=B[1],B=[0];continue;case 7:B=P.ops.pop(),P.trys.pop();continue;default:if(E=P.trys,!(E=E.length>0&&E[E.length-1])&&(B[0]===6||B[0]===2)){P=0;continue}if(B[0]===3&&(!E||B[1]>E[0]&&B[1]<E[3])){P.label=B[1];break}if(B[0]===6&&P.label<E[1]){P.label=E[1],E=B;break}if(E&&P.label<E[2]){P.label=E[2],P.ops.push(B);break}E[2]&&P.ops.pop(),P.trys.pop();continue}B=g.call(v,P)}catch(ee){B=[6,ee],y=0}finally{L=E=0}if(B[0]&5)throw B[1];return{value:B[0]?B[1]:void 0,done:!0}}},u=function(v,g,P,L){L===void 0&&(L=P),v[L]=g[P]},p=function(v,g){for(var P in v)P!=="default"&&!g.hasOwnProperty(P)&&(g[P]=v[P])},S=function(v){var g=typeof Symbol=="function"&&Symbol.iterator,P=g&&v[g],L=0;if(P)return P.call(v);if(v&&typeof v.length=="number")return{next:function(){return v&&L>=v.length&&(v=void 0),{value:v&&v[L++],done:!v}}};throw new TypeError(g?"Object is not iterable.":"Symbol.iterator is not defined.")},C=function(v,g){var P=typeof Symbol=="function"&&v[Symbol.iterator];if(!P)return v;var L=P.call(v),y,E=[],k;try{for(;(g===void 0||g-- >0)&&!(y=L.next()).done;)E.push(y.value)}catch(W){k={error:W}}finally{try{y&&!y.done&&(P=L.return)&&P.call(L)}finally{if(k)throw k.error}}return E},R=function(){for(var v=[],g=0;g<arguments.length;g++)v=v.concat(C(arguments[g]));return v},U=function(){for(var v=0,g=0,P=arguments.length;g<P;g++)v+=arguments[g].length;for(var L=Array(v),y=0,g=0;g<P;g++)for(var E=arguments[g],k=0,W=E.length;k<W;k++,y++)L[y]=E[k];return L},x=function(v){return this instanceof x?(this.v=v,this):new x(v)},F=function(v,g,P){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var L=P.apply(v,g||[]),y,E=[];return y={},k("next"),k("throw"),k("return"),y[Symbol.asyncIterator]=function(){return this},y;function k(de){L[de]&&(y[de]=function(ie){return new Promise(function(Ie,be){E.push([de,ie,Ie,be])>1||W(de,ie)})})}function W(de,ie){try{Z(L[de](ie))}catch(Ie){oe(E[0][3],Ie)}}function Z(de){de.value instanceof x?Promise.resolve(de.value.v).then(B,ee):oe(E[0][2],de)}function B(de){W("next",de)}function ee(de){W("throw",de)}function oe(de,ie){de(ie),E.shift(),E.length&&W(E[0][0],E[0][1])}},q=function(v){var g,P;return g={},L("next"),L("throw",function(y){throw y}),L("return"),g[Symbol.iterator]=function(){return this},g;function L(y,E){g[y]=v[y]?function(k){return(P=!P)?{value:x(v[y](k)),done:y==="return"}:E?E(k):k}:E}},te=function(v){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var g=v[Symbol.asyncIterator],P;return g?g.call(v):(v=typeof S=="function"?S(v):v[Symbol.iterator](),P={},L("next"),L("throw"),L("return"),P[Symbol.asyncIterator]=function(){return this},P);function L(E){P[E]=v[E]&&function(k){return new Promise(function(W,Z){k=v[E](k),y(W,Z,k.done,k.value)})}}function y(E,k,W,Z){Promise.resolve(Z).then(function(B){E({value:B,done:W})},k)}},_=function(v,g){return Object.defineProperty?Object.defineProperty(v,"raw",{value:g}):v.raw=g,v},A=function(v){if(v&&v.__esModule)return v;var g={};if(v!=null)for(var P in v)Object.hasOwnProperty.call(v,P)&&(g[P]=v[P]);return g.default=v,g},I=function(v){return v&&v.__esModule?v:{default:v}},D=function(v,g){if(!g.has(v))throw new TypeError("attempted to get private field on non-instance");return g.get(v)},w=function(v,g,P){if(!g.has(v))throw new TypeError("attempted to set private field on non-instance");return g.set(v,P),P},b("__extends",t),b("__assign",n),b("__rest",s),b("__decorate",o),b("__param",c),b("__metadata",f),b("__awaiter",h),b("__generator",O),b("__exportStar",p),b("__createBinding",u),b("__values",S),b("__read",C),b("__spread",R),b("__spreadArrays",U),b("__await",x),b("__asyncGenerator",F),b("__asyncDelegator",q),b("__asyncValues",te),b("__makeTemplateObject",_),b("__importStar",A),b("__importDefault",I),b("__classPrivateFieldGet",D),b("__classPrivateFieldSet",w)})})(Mo);var dl={},vo={},tg;function y3(){if(tg)return vo;tg=1,Object.defineProperty(vo,"__esModule",{value:!0}),vo.delay=void 0;function e(t){return new Promise(n=>{setTimeout(()=>{n(!0)},t)})}return vo.delay=e,vo}var ji={},pl={},Ui={},rg;function m3(){return rg||(rg=1,Object.defineProperty(Ui,"__esModule",{value:!0}),Ui.ONE_THOUSAND=Ui.ONE_HUNDRED=void 0,Ui.ONE_HUNDRED=100,Ui.ONE_THOUSAND=1e3),Ui}var gl={},ng;function v3(){return ng||(ng=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ONE_YEAR=e.FOUR_WEEKS=e.THREE_WEEKS=e.TWO_WEEKS=e.ONE_WEEK=e.THIRTY_DAYS=e.SEVEN_DAYS=e.FIVE_DAYS=e.THREE_DAYS=e.ONE_DAY=e.TWENTY_FOUR_HOURS=e.TWELVE_HOURS=e.SIX_HOURS=e.THREE_HOURS=e.ONE_HOUR=e.SIXTY_MINUTES=e.THIRTY_MINUTES=e.TEN_MINUTES=e.FIVE_MINUTES=e.ONE_MINUTE=e.SIXTY_SECONDS=e.THIRTY_SECONDS=e.TEN_SECONDS=e.FIVE_SECONDS=e.ONE_SECOND=void 0,e.ONE_SECOND=1,e.FIVE_SECONDS=5,e.TEN_SECONDS=10,e.THIRTY_SECONDS=30,e.SIXTY_SECONDS=60,e.ONE_MINUTE=e.SIXTY_SECONDS,e.FIVE_MINUTES=e.ONE_MINUTE*5,e.TEN_MINUTES=e.ONE_MINUTE*10,e.THIRTY_MINUTES=e.ONE_MINUTE*30,e.SIXTY_MINUTES=e.ONE_MINUTE*60,e.ONE_HOUR=e.SIXTY_MINUTES,e.THREE_HOURS=e.ONE_HOUR*3,e.SIX_HOURS=e.ONE_HOUR*6,e.TWELVE_HOURS=e.ONE_HOUR*12,e.TWENTY_FOUR_HOURS=e.ONE_HOUR*24,e.ONE_DAY=e.TWENTY_FOUR_HOURS,e.THREE_DAYS=e.ONE_DAY*3,e.FIVE_DAYS=e.ONE_DAY*5,e.SEVEN_DAYS=e.ONE_DAY*7,e.THIRTY_DAYS=e.ONE_DAY*30,e.ONE_WEEK=e.SEVEN_DAYS,e.TWO_WEEKS=e.ONE_WEEK*2,e.THREE_WEEKS=e.ONE_WEEK*3,e.FOUR_WEEKS=e.ONE_WEEK*4,e.ONE_YEAR=e.ONE_DAY*365}(gl)),gl}var ig;function $0(){return ig||(ig=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=Mo.exports;t.__exportStar(m3(),e),t.__exportStar(v3(),e)}(pl)),pl}var sg;function b3(){if(sg)return ji;sg=1,Object.defineProperty(ji,"__esModule",{value:!0}),ji.fromMiliseconds=ji.toMiliseconds=void 0;const e=$0();function t(s){return s*e.ONE_THOUSAND}ji.toMiliseconds=t;function n(s){return Math.floor(s/e.ONE_THOUSAND)}return ji.fromMiliseconds=n,ji}var og;function _3(){return og||(og=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=Mo.exports;t.__exportStar(y3(),e),t.__exportStar(b3(),e)}(dl)),dl}var Ns={},ag;function w3(){if(ag)return Ns;ag=1,Object.defineProperty(Ns,"__esModule",{value:!0}),Ns.Watch=void 0;class e{constructor(){this.timestamps=new Map}start(n){if(this.timestamps.has(n))throw new Error(`Watch already started for label: ${n}`);this.timestamps.set(n,{started:Date.now()})}stop(n){const s=this.get(n);if(typeof s.elapsed<"u")throw new Error(`Watch already stopped for label: ${n}`);const o=Date.now()-s.started;this.timestamps.set(n,{started:s.started,elapsed:o})}get(n){const s=this.timestamps.get(n);if(typeof s>"u")throw new Error(`No timestamp found for label: ${n}`);return s}elapsed(n){const s=this.get(n);return s.elapsed||Date.now()-s.started}}return Ns.Watch=e,Ns.default=e,Ns}var yl={},bo={},cg;function E3(){if(cg)return bo;cg=1,Object.defineProperty(bo,"__esModule",{value:!0}),bo.IWatch=void 0;class e{}return bo.IWatch=e,bo}var ug;function S3(){return ug||(ug=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Mo.exports.__exportStar(E3(),e)}(yl)),yl}(function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=Mo.exports;t.__exportStar(_3(),e),t.__exportStar(w3(),e),t.__exportStar(S3(),e),t.__exportStar($0(),e)})(we);var _t={};Object.defineProperty(_t,"__esModule",{value:!0});_t.getLocalStorage=_t.getLocalStorageOrThrow=_t.getCrypto=_t.getCryptoOrThrow=Ih=_t.getLocation=_t.getLocationOrThrow=Oh=_t.getNavigator=_t.getNavigatorOrThrow=Sh=_t.getDocument=_t.getDocumentOrThrow=_t.getFromWindowOrThrow=_t.getFromWindow=void 0;function Gi(e){let t;return typeof window<"u"&&typeof window[e]<"u"&&(t=window[e]),t}_t.getFromWindow=Gi;function Us(e){const t=Gi(e);if(!t)throw new Error(`${e} is not defined in Window`);return t}_t.getFromWindowOrThrow=Us;function O3(){return Us("document")}_t.getDocumentOrThrow=O3;function I3(){return Gi("document")}var Sh=_t.getDocument=I3;function D3(){return Us("navigator")}_t.getNavigatorOrThrow=D3;function P3(){return Gi("navigator")}var Oh=_t.getNavigator=P3;function $3(){return Us("location")}_t.getLocationOrThrow=$3;function N3(){return Gi("location")}var Ih=_t.getLocation=N3;function C3(){return Us("crypto")}_t.getCryptoOrThrow=C3;function A3(){return Gi("crypto")}_t.getCrypto=A3;function T3(){return Us("localStorage")}_t.getLocalStorageOrThrow=T3;function x3(){return Gi("localStorage")}_t.getLocalStorage=x3;var Dh={};Object.defineProperty(Dh,"__esModule",{value:!0});var N0=Dh.getWindowMetadata=void 0;const lg=_t;function R3(){let e,t;try{e=lg.getDocumentOrThrow(),t=lg.getLocationOrThrow()}catch{return null}function n(){const C=e.getElementsByTagName("link"),R=[];for(let U=0;U<C.length;U++){const x=C[U],F=x.getAttribute("rel");if(F&&F.toLowerCase().indexOf("icon")>-1){const q=x.getAttribute("href");if(q)if(q.toLowerCase().indexOf("https:")===-1&&q.toLowerCase().indexOf("http:")===-1&&q.indexOf("//")!==0){let te=t.protocol+"//"+t.host;if(q.indexOf("/")===0)te+=q;else{const _=t.pathname.split("/");_.pop();const A=_.join("/");te+=A+"/"+q}R.push(te)}else if(q.indexOf("//")===0){const te=t.protocol+q;R.push(te)}else R.push(q)}}return R}function s(...C){const R=e.getElementsByTagName("meta");for(let U=0;U<R.length;U++){const x=R[U],F=["itemprop","property","name"].map(q=>x.getAttribute(q)).filter(q=>q?C.includes(q):!1);if(F.length&&F){const q=x.getAttribute("content");if(q)return q}}return""}function o(){let C=s("name","og:site_name","og:title","twitter:title");return C||(C=e.title),C}function c(){return s("description","og:description","twitter:description","keywords")}const f=o(),h=c(),O=t.origin,p=n();return{description:h,url:O,icons:p,name:f}}N0=Dh.getWindowMetadata=R3;var $o={},Ph=function(e,t){for(var n={},s=Object.keys(e),o=Array.isArray(t),c=0;c<s.length;c++){var f=s[c],h=e[f];(o?t.indexOf(f)!==-1:t(f,h,e))&&(n[f]=h)}return n};(function(e){const t=gh,n=yh,s=ph,o=Ph,c=_=>_==null,f=Symbol("encodeFragmentIdentifier");function h(_){switch(_.arrayFormat){case"index":return A=>(I,D)=>{const w=I.length;return D===void 0||_.skipNull&&D===null||_.skipEmptyString&&D===""?I:D===null?[...I,[S(A,_),"[",w,"]"].join("")]:[...I,[S(A,_),"[",S(w,_),"]=",S(D,_)].join("")]};case"bracket":return A=>(I,D)=>D===void 0||_.skipNull&&D===null||_.skipEmptyString&&D===""?I:D===null?[...I,[S(A,_),"[]"].join("")]:[...I,[S(A,_),"[]=",S(D,_)].join("")];case"colon-list-separator":return A=>(I,D)=>D===void 0||_.skipNull&&D===null||_.skipEmptyString&&D===""?I:D===null?[...I,[S(A,_),":list="].join("")]:[...I,[S(A,_),":list=",S(D,_)].join("")];case"comma":case"separator":case"bracket-separator":{const A=_.arrayFormat==="bracket-separator"?"[]=":"=";return I=>(D,w)=>w===void 0||_.skipNull&&w===null||_.skipEmptyString&&w===""?D:(w=w===null?"":w,D.length===0?[[S(I,_),A,S(w,_)].join("")]:[[D,S(w,_)].join(_.arrayFormatSeparator)])}default:return A=>(I,D)=>D===void 0||_.skipNull&&D===null||_.skipEmptyString&&D===""?I:D===null?[...I,S(A,_)]:[...I,[S(A,_),"=",S(D,_)].join("")]}}function O(_){let A;switch(_.arrayFormat){case"index":return(I,D,w)=>{if(A=/\[(\d*)\]$/.exec(I),I=I.replace(/\[\d*\]$/,""),!A){w[I]=D;return}w[I]===void 0&&(w[I]={}),w[I][A[1]]=D};case"bracket":return(I,D,w)=>{if(A=/(\[\])$/.exec(I),I=I.replace(/\[\]$/,""),!A){w[I]=D;return}if(w[I]===void 0){w[I]=[D];return}w[I]=[].concat(w[I],D)};case"colon-list-separator":return(I,D,w)=>{if(A=/(:list)$/.exec(I),I=I.replace(/:list$/,""),!A){w[I]=D;return}if(w[I]===void 0){w[I]=[D];return}w[I]=[].concat(w[I],D)};case"comma":case"separator":return(I,D,w)=>{const u=typeof D=="string"&&D.includes(_.arrayFormatSeparator),b=typeof D=="string"&&!u&&C(D,_).includes(_.arrayFormatSeparator);D=b?C(D,_):D;const K=u||b?D.split(_.arrayFormatSeparator).map(v=>C(v,_)):D===null?D:C(D,_);w[I]=K};case"bracket-separator":return(I,D,w)=>{const u=/(\[\])$/.test(I);if(I=I.replace(/\[\]$/,""),!u){w[I]=D&&C(D,_);return}const b=D===null?[]:D.split(_.arrayFormatSeparator).map(K=>C(K,_));if(w[I]===void 0){w[I]=b;return}w[I]=[].concat(w[I],b)};default:return(I,D,w)=>{if(w[I]===void 0){w[I]=D;return}w[I]=[].concat(w[I],D)}}}function p(_){if(typeof _!="string"||_.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function S(_,A){return A.encode?A.strict?t(_):encodeURIComponent(_):_}function C(_,A){return A.decode?n(_):_}function R(_){return Array.isArray(_)?_.sort():typeof _=="object"?R(Object.keys(_)).sort((A,I)=>Number(A)-Number(I)).map(A=>_[A]):_}function U(_){const A=_.indexOf("#");return A!==-1&&(_=_.slice(0,A)),_}function x(_){let A="";const I=_.indexOf("#");return I!==-1&&(A=_.slice(I)),A}function F(_){_=U(_);const A=_.indexOf("?");return A===-1?"":_.slice(A+1)}function q(_,A){return A.parseNumbers&&!Number.isNaN(Number(_))&&typeof _=="string"&&_.trim()!==""?_=Number(_):A.parseBooleans&&_!==null&&(_.toLowerCase()==="true"||_.toLowerCase()==="false")&&(_=_.toLowerCase()==="true"),_}function te(_,A){A=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},A),p(A.arrayFormatSeparator);const I=O(A),D=Object.create(null);if(typeof _!="string"||(_=_.trim().replace(/^[?#&]/,""),!_))return D;for(const w of _.split("&")){if(w==="")continue;let[u,b]=s(A.decode?w.replace(/\+/g," "):w,"=");b=b===void 0?null:["comma","separator","bracket-separator"].includes(A.arrayFormat)?b:C(b,A),I(C(u,A),b,D)}for(const w of Object.keys(D)){const u=D[w];if(typeof u=="object"&&u!==null)for(const b of Object.keys(u))u[b]=q(u[b],A);else D[w]=q(u,A)}return A.sort===!1?D:(A.sort===!0?Object.keys(D).sort():Object.keys(D).sort(A.sort)).reduce((w,u)=>{const b=D[u];return Boolean(b)&&typeof b=="object"&&!Array.isArray(b)?w[u]=R(b):w[u]=b,w},Object.create(null))}e.extract=F,e.parse=te,e.stringify=(_,A)=>{if(!_)return"";A=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},A),p(A.arrayFormatSeparator);const I=b=>A.skipNull&&c(_[b])||A.skipEmptyString&&_[b]==="",D=h(A),w={};for(const b of Object.keys(_))I(b)||(w[b]=_[b]);const u=Object.keys(w);return A.sort!==!1&&u.sort(A.sort),u.map(b=>{const K=_[b];return K===void 0?"":K===null?S(b,A):Array.isArray(K)?K.length===0&&A.arrayFormat==="bracket-separator"?S(b,A)+"[]":K.reduce(D(b),[]).join("&"):S(b,A)+"="+S(K,A)}).filter(b=>b.length>0).join("&")},e.parseUrl=(_,A)=>{A=Object.assign({decode:!0},A);const[I,D]=s(_,"#");return Object.assign({url:I.split("?")[0]||"",query:te(F(_),A)},A&&A.parseFragmentIdentifier&&D?{fragmentIdentifier:C(D,A)}:{})},e.stringifyUrl=(_,A)=>{A=Object.assign({encode:!0,strict:!0,[f]:!0},A);const I=U(_.url).split("?")[0]||"",D=e.extract(_.url),w=e.parse(D,{sort:!1}),u=Object.assign(w,_.query);let b=e.stringify(u,A);b&&(b=`?${b}`);let K=x(_.url);return _.fragmentIdentifier&&(K=`#${A[f]?S(_.fragmentIdentifier,A):_.fragmentIdentifier}`),`${I}${b}${K}`},e.pick=(_,A,I)=>{I=Object.assign({parseFragmentIdentifier:!0,[f]:!1},I);const{url:D,query:w,fragmentIdentifier:u}=e.parseUrl(_,I);return e.stringifyUrl({url:D,query:o(w,A),fragmentIdentifier:u},I)},e.exclude=(_,A,I)=>{const D=Array.isArray(A)?w=>!A.includes(w):(w,u)=>!A(w,u);return e.pick(_,D,I)}})($o);const $h={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}},Sc=":";function C0(e){const[t,n]=e.split(Sc);return{namespace:t,reference:n}}function A0(e){const{namespace:t,reference:n}=e;return[t,n].join(Sc)}function Nh(e){const[t,n,s]=e.split(Sc);return{namespace:t,reference:n,address:s}}function T0(e){const{namespace:t,reference:n,address:s}=e;return[t,n,s].join(Sc)}function Ch(e,t){const n=[];return e.forEach(s=>{const o=t(s);n.includes(o)||n.push(o)}),n}function x0(e){const{address:t}=Nh(e);return t}function R0(e){const{namespace:t,reference:n}=Nh(e);return A0({namespace:t,reference:n})}function j3(e,t){const{namespace:n,reference:s}=C0(t);return T0({namespace:n,reference:s,address:e})}function U3(e){return Ch(e,x0)}function j0(e){return Ch(e,R0)}function L3(e,t=[]){const n=[];return Object.keys(e).forEach(s=>{if(t.length&&!t.includes(s))return;const o=e[s];n.push(...o.accounts)}),n}function M3(e,t=[]){const n=[];return Object.keys(e).forEach(s=>{if(t.length&&!t.includes(s))return;const o=e[s];n.push(...j0(o.accounts))}),n}function F3(e,t=[]){const n=[];return Object.keys(e).forEach(s=>{if(t.length&&!t.includes(s))return;const o=e[s];n.push(...Oc(s,o))}),n}function Oc(e,t){return e.includes(":")?[e]:t.chains||[]}const Ic=e=>e?.split(":"),U0=e=>{const t=e&&Ic(e);if(t)return t[3]},B3=e=>{const t=e&&Ic(e);if(t)return t[2]+":"+t[3]},L0=e=>{const t=e&&Ic(e);if(t)return t.pop()},q3=(e,t)=>{const n=`${e.domain} wants you to sign in with your Ethereum account:`,s=L0(t),o=e.statement,c=`URI: ${e.aud}`,f=`Version: ${e.version}`,h=`Chain ID: ${U0(t)}`,O=`Nonce: ${e.nonce}`,p=`Issued At: ${e.iat}`,S=e.resources&&e.resources.length>0?`Resources:
${e.resources.map(C=>`- ${C}`).join(`
`)}`:void 0;return[n,s,"",o,"",c,f,h,O,p,S].filter(C=>C!=null).join(`
`)},Ah="base10",Or="base16",sc="base64pad",Dc="utf8",Th=0,Ls=1,H3=0,hg=1,Kl=12,xh=32;function k3(){const e=Wi.generateKeyPair();return{privateKey:Je(e.secretKey,Or),publicKey:Je(e.publicKey,Or)}}function z3(){const e=$n.randomBytes(xh);return Je(e,Or)}function V3(e,t){const n=Wi.sharedKey(Xe(e,Or),Xe(t,Or),!0),s=new wh(Nn.SHA256,n).expand(xh);return Je(s,Or)}function K3(e){const t=Nn.hash(Xe(e,Or));return Je(t,Or)}function W3(e){const t=Nn.hash(Xe(e,Dc));return Je(t,Or)}function M0(e){return Xe(`${e}`,Ah)}function Fo(e){return Number(Je(e,Ah))}function G3(e){const t=M0(typeof e.type<"u"?e.type:Th);if(Fo(t)===Ls&&typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof e.senderPublicKey<"u"?Xe(e.senderPublicKey,Or):void 0,s=typeof e.iv<"u"?Xe(e.iv,Or):$n.randomBytes(Kl),o=new Ki.ChaCha20Poly1305(Xe(e.symKey,Or)).seal(s,Xe(e.message,Dc));return F0({type:t,sealed:o,iv:s,senderPublicKey:n})}function J3(e){const t=new Ki.ChaCha20Poly1305(Xe(e.symKey,Or)),{sealed:n,iv:s}=Rh(e.encoded),o=t.open(s,n);if(o===null)throw new Error("Failed to decrypt");return Je(o,Dc)}function F0(e){if(Fo(e.type)===Ls){if(typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Je(ki([e.type,e.senderPublicKey,e.iv,e.sealed]),sc)}return Je(ki([e.type,e.iv,e.sealed]),sc)}function Rh(e){const t=Xe(e,sc),n=t.slice(H3,hg),s=hg;if(Fo(n)===Ls){const h=s+xh,O=h+Kl,p=t.slice(s,h),S=t.slice(h,O),C=t.slice(O);return{type:n,sealed:C,iv:S,senderPublicKey:p}}const o=s+Kl,c=t.slice(s,o),f=t.slice(o);return{type:n,sealed:f,iv:c}}function Y3(e,t){const n=Rh(e);return B0({type:Fo(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?Je(n.senderPublicKey,Or):void 0,receiverPublicKey:t?.receiverPublicKey})}function B0(e){const t=e?.type||Th;if(t===Ls){if(typeof e?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof e?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:t,senderPublicKey:e?.senderPublicKey,receiverPublicKey:e?.receiverPublicKey}}function X3(e){return e.type===Ls&&typeof e.senderPublicKey=="string"&&typeof e.receiverPublicKey=="string"}var Q3=Object.defineProperty,fg=Object.getOwnPropertySymbols,Z3=Object.prototype.hasOwnProperty,eP=Object.prototype.propertyIsEnumerable,dg=(e,t,n)=>t in e?Q3(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,pg=(e,t)=>{for(var n in t||(t={}))Z3.call(t,n)&&dg(e,n,t[n]);if(fg)for(var n of fg(t))eP.call(t,n)&&dg(e,n,t[n]);return e};const q0="ReactNative",Er={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},oc=" ",tP=":",H0="/",jh=2,rP=1e3,k0="js";function Uh(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Ms(){return!Sh()&&!!Oh()&&navigator.product===q0}function Bo(){return!Uh()&&!!Oh()&&!!Sh()}function Ji(){return Ms()?Er.reactNative:Uh()?Er.node:Bo()?Er.browser:Er.unknown}function nP(){var e;try{return Ms()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(e=global.Application)==null?void 0:e.applicationId:void 0}catch{return}}function z0(e,t){let n=$o.parse(e);return n=pg(pg({},n),t),e=$o.stringify(n),e}function iP(){return N0()||{name:"",description:"",url:"",icons:[""]}}function sP(e,t){var n;const s=Ji(),o={protocol:e,version:t,env:s};return s==="browser"&&(o.host=((n=Ih())==null?void 0:n.host)||"unknown"),o}function V0(){if(Ji()===Er.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:n,Version:s}=global.Platform;return[n,s].join("-")}const e=h3();if(e===null)return"unknown";const t=e.os?e.os.replace(" ","").toLowerCase():"unknown";return e.type==="browser"?[t,e.name,e.version].join("-"):[t,e.version].join("-")}function K0(){var e;const t=Ji();return t===Er.browser?[t,((e=Ih())==null?void 0:e.host)||"unknown"].join(":"):t}function W0(e,t,n){const s=V0(),o=K0();return[[e,t].join("-"),[k0,n].join("-"),s,o].join("/")}function oP({protocol:e,version:t,relayUrl:n,sdkVersion:s,auth:o,projectId:c,useOnCloseEvent:f,bundleId:h}){const O=n.split("?"),p=W0(e,t,s),S={auth:o,ua:p,projectId:c,useOnCloseEvent:f||void 0,origin:h||void 0},C=z0(O[1]||"",S);return O[0]+"?"+C}function aP(e){let t=(e.match(/^[^:]+(?=:\/\/)/gi)||[])[0];const n=typeof t<"u"?e.split("://")[1]:e;return t=t==="wss"?"https":"http",[t,n].join("://")}function cP(e,t,n){if(!e[t]||typeof e[t]!==n)throw new Error(`Missing or invalid "${t}" param`)}function G0(e,t=jh){return J0(e.split(H0),t)}function uP(e){return G0(e).join(oc)}function ai(e,t){return e.filter(n=>t.includes(n)).length===e.length}function J0(e,t=jh){return e.slice(Math.max(e.length-t,0))}function lP(e){return Object.fromEntries(e.entries())}function hP(e){return new Map(Object.entries(e))}function fP(e,t){const n={};return Object.keys(e).forEach(s=>{n[s]=t(e[s])}),n}const dP=e=>e;function Y0(e){return e.trim().replace(/^\w/,t=>t.toUpperCase())}function pP(e){return e.split(oc).map(t=>Y0(t)).join(oc)}function gP(e=we.FIVE_MINUTES,t){const n=we.toMiliseconds(e||we.FIVE_MINUTES);let s,o,c;return{resolve:f=>{c&&s&&(clearTimeout(c),s(f))},reject:f=>{c&&o&&(clearTimeout(c),o(f))},done:()=>new Promise((f,h)=>{c=setTimeout(()=>{h(new Error(t))},n),s=f,o=h})}}function yP(e,t,n){return new Promise(async(s,o)=>{const c=setTimeout(()=>o(new Error(n)),t);try{const f=await e;s(f)}catch(f){o(f)}clearTimeout(c)})}function Lh(e,t){if(typeof t=="string"&&t.startsWith(`${e}:`))return t;if(e.toLowerCase()==="topic"){if(typeof t!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${t}`}else if(e.toLowerCase()==="id"){if(typeof t!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${t}`}throw new Error(`Unknown expirer target type: ${e}`)}function mP(e){return Lh("topic",e)}function vP(e){return Lh("id",e)}function bP(e){const[t,n]=e.split(":"),s={id:void 0,topic:void 0};if(t==="topic"&&typeof n=="string")s.topic=n;else if(t==="id"&&Number.isInteger(Number(n)))s.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${t}:${n}`);return s}function _P(e,t){return we.fromMiliseconds((t||Date.now())+we.toMiliseconds(e))}function wP(e){return Date.now()>=we.toMiliseconds(e)}function EP(e,t){return`${e}${t?`:${t}`:""}`}function ci(e=[],t=[]){return[...new Set([...e,...t])]}async function SP({id:e,topic:t,wcDeepLink:n}){try{if(!n)return;let o=(typeof n=="string"?JSON.parse(n):n)?.href;if(typeof o!="string")return;o.endsWith("/")&&(o=o.slice(0,-1));const c=`${o}/wc?requestId=${e}&sessionTopic=${t}`,f=Ji();f===Er.browser?c.startsWith("https://")?window.open(c,"_blank","noreferrer noopener"):window.open(c,"_self","noreferrer noopener"):f===Er.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(c)}catch(s){console.error(s)}}async function OP(e,t){try{return await e.getItem(t)||(Bo()?localStorage.getItem(t):void 0)}catch(n){console.error(n)}}const X0="irn";function IP(e){return e?.relay||{protocol:X0}}function DP(e){const t=$h[e];if(typeof t>"u")throw new Error(`Relay Protocol not supported: ${e}`);return t}var PP=Object.defineProperty,$P=Object.defineProperties,NP=Object.getOwnPropertyDescriptors,gg=Object.getOwnPropertySymbols,CP=Object.prototype.hasOwnProperty,AP=Object.prototype.propertyIsEnumerable,yg=(e,t,n)=>t in e?PP(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,TP=(e,t)=>{for(var n in t||(t={}))CP.call(t,n)&&yg(e,n,t[n]);if(gg)for(var n of gg(t))AP.call(t,n)&&yg(e,n,t[n]);return e},xP=(e,t)=>$P(e,NP(t));function Q0(e,t="-"){const n={},s="relay"+t;return Object.keys(e).forEach(o=>{if(o.startsWith(s)){const c=o.replace(s,""),f=e[o];n[c]=f}}),n}function RP(e){e=e.includes("wc://")?e.replace("wc://",""):e,e=e.includes("wc:")?e.replace("wc:",""):e;const t=e.indexOf(":"),n=e.indexOf("?")!==-1?e.indexOf("?"):void 0,s=e.substring(0,t),o=e.substring(t+1,n).split("@"),c=typeof n<"u"?e.substring(n):"",f=$o.parse(c);return{protocol:s,topic:Z0(o[0]),version:parseInt(o[1],10),symKey:f.symKey,relay:Q0(f),expiryTimestamp:f.expiryTimestamp?parseInt(f.expiryTimestamp,10):void 0}}function Z0(e){return e.startsWith("//")?e.substring(2):e}function em(e,t="-"){const n="relay",s={};return Object.keys(e).forEach(o=>{const c=n+t+o;e[o]&&(s[c]=e[o])}),s}function jP(e){return`${e.protocol}:${e.topic}@${e.version}?`+$o.stringify(xP(TP({symKey:e.symKey},em(e.relay)),{expiryTimestamp:e.expiryTimestamp}))}var UP=Object.defineProperty,LP=Object.defineProperties,MP=Object.getOwnPropertyDescriptors,mg=Object.getOwnPropertySymbols,FP=Object.prototype.hasOwnProperty,BP=Object.prototype.propertyIsEnumerable,vg=(e,t,n)=>t in e?UP(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,qP=(e,t)=>{for(var n in t||(t={}))FP.call(t,n)&&vg(e,n,t[n]);if(mg)for(var n of mg(t))BP.call(t,n)&&vg(e,n,t[n]);return e},HP=(e,t)=>LP(e,MP(t));function Yi(e){const t=[];return e.forEach(n=>{const[s,o]=n.split(":");t.push(`${s}:${o}`)}),t}function tm(e){const t=[];return Object.values(e).forEach(n=>{t.push(...Yi(n.accounts))}),t}function rm(e,t){const n=[];return Object.values(e).forEach(s=>{Yi(s.accounts).includes(t)&&n.push(...s.methods)}),n}function nm(e,t){const n=[];return Object.values(e).forEach(s=>{Yi(s.accounts).includes(t)&&n.push(...s.events)}),n}function kP(e,t){const n=dm(e,t);if(n)throw new Error(n.message);const s={};for(const[o,c]of Object.entries(e))s[o]={methods:c.methods,events:c.events,chains:c.accounts.map(f=>`${f.split(":")[0]}:${f.split(":")[1]}`)};return s}function zP(e){const{proposal:{requiredNamespaces:t,optionalNamespaces:n={}},supportedNamespaces:s}=e,o=Wl(t),c=Wl(n),f={};Object.keys(s).forEach(p=>{const S=s[p].chains,C=s[p].methods,R=s[p].events,U=s[p].accounts;S.forEach(x=>{if(!U.some(F=>F.includes(x)))throw new Error(`No accounts provided for chain ${x} in namespace ${p}`)}),f[p]={chains:S,methods:C,events:R,accounts:U}});const h=gm(t,f,"approve()");if(h)throw new Error(h.message);const O={};return!Object.keys(t).length&&!Object.keys(n).length?f:(Object.keys(o).forEach(p=>{const S=s[p].chains.filter(x=>{var F,q;return(q=(F=o[p])==null?void 0:F.chains)==null?void 0:q.includes(x)}),C=s[p].methods.filter(x=>{var F,q;return(q=(F=o[p])==null?void 0:F.methods)==null?void 0:q.includes(x)}),R=s[p].events.filter(x=>{var F,q;return(q=(F=o[p])==null?void 0:F.events)==null?void 0:q.includes(x)}),U=S.map(x=>s[p].accounts.filter(F=>F.includes(`${x}:`))).flat();O[p]={chains:S,methods:C,events:R,accounts:U}}),Object.keys(c).forEach(p=>{var S,C,R,U,x,F;if(!s[p])return;const q=(C=(S=c[p])==null?void 0:S.chains)==null?void 0:C.filter(I=>s[p].chains.includes(I)),te=s[p].methods.filter(I=>{var D,w;return(w=(D=c[p])==null?void 0:D.methods)==null?void 0:w.includes(I)}),_=s[p].events.filter(I=>{var D,w;return(w=(D=c[p])==null?void 0:D.events)==null?void 0:w.includes(I)}),A=q?.map(I=>s[p].accounts.filter(D=>D.includes(`${I}:`))).flat();O[p]={chains:ci((R=O[p])==null?void 0:R.chains,q),methods:ci((U=O[p])==null?void 0:U.methods,te),events:ci((x=O[p])==null?void 0:x.events,_),accounts:ci((F=O[p])==null?void 0:F.accounts,A)}}),O)}function Mh(e){return e.includes(":")}function im(e){return Mh(e)?e.split(":")[0]:e}function Wl(e){var t,n,s;const o={};if(!Pc(e))return o;for(const[c,f]of Object.entries(e)){const h=Mh(c)?[c]:f.chains,O=f.methods||[],p=f.events||[],S=im(c);o[S]=HP(qP({},o[S]),{chains:ci(h,(t=o[S])==null?void 0:t.chains),methods:ci(O,(n=o[S])==null?void 0:n.methods),events:ci(p,(s=o[S])==null?void 0:s.events)})}return o}const sm={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},om={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function kn(e,t){const{message:n,code:s}=om[e];return{message:t?`${n} ${t}`:n,code:s}}function zi(e,t){const{message:n,code:s}=sm[e];return{message:t?`${n} ${t}`:n,code:s}}function qo(e,t){return Array.isArray(e)?typeof t<"u"&&e.length?e.every(t):!0:!1}function Pc(e){return Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length}function fi(e){return typeof e>"u"}function Wr(e,t){return t&&fi(e)?!0:typeof e=="string"&&!!e.trim().length}function $c(e,t){return t&&fi(e)?!0:typeof e=="number"&&!isNaN(e)}function VP(e,t){const{requiredNamespaces:n}=t,s=Object.keys(e.namespaces),o=Object.keys(n);let c=!0;return ai(o,s)?(s.forEach(f=>{const{accounts:h,methods:O,events:p}=e.namespaces[f],S=Yi(h),C=n[f];(!ai(Oc(f,C),S)||!ai(C.methods,O)||!ai(C.events,p))&&(c=!1)}),c):!1}function No(e){return Wr(e,!1)&&e.includes(":")?e.split(":").length===2:!1}function am(e){if(Wr(e,!1)&&e.includes(":")){const t=e.split(":");if(t.length===3){const n=t[0]+":"+t[1];return!!t[2]&&No(n)}}return!1}function KP(e){if(Wr(e,!1))try{return typeof new URL(e)<"u"}catch{return!1}return!1}function WP(e){var t;return(t=e?.proposer)==null?void 0:t.publicKey}function GP(e){return e?.topic}function JP(e,t){let n=null;return Wr(e?.publicKey,!1)||(n=kn("MISSING_OR_INVALID",`${t} controller public key should be a string`)),n}function Gl(e){let t=!0;return qo(e)?e.length&&(t=e.every(n=>Wr(n,!1))):t=!1,t}function cm(e,t,n){let s=null;return qo(t)&&t.length?t.forEach(o=>{s||No(o)||(s=zi("UNSUPPORTED_CHAINS",`${n}, chain ${o} should be a string and conform to "namespace:chainId" format`))}):No(e)||(s=zi("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),s}function um(e,t,n){let s=null;return Object.entries(e).forEach(([o,c])=>{if(s)return;const f=cm(o,Oc(o,c),`${t} ${n}`);f&&(s=f)}),s}function lm(e,t){let n=null;return qo(e)?e.forEach(s=>{n||am(s)||(n=zi("UNSUPPORTED_ACCOUNTS",`${t}, account ${s} should be a string and conform to "namespace:chainId:address" format`))}):n=zi("UNSUPPORTED_ACCOUNTS",`${t}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function hm(e,t){let n=null;return Object.values(e).forEach(s=>{if(n)return;const o=lm(s?.accounts,`${t} namespace`);o&&(n=o)}),n}function fm(e,t){let n=null;return Gl(e?.methods)?Gl(e?.events)||(n=zi("UNSUPPORTED_EVENTS",`${t}, events should be an array of strings or empty array for no events`)):n=zi("UNSUPPORTED_METHODS",`${t}, methods should be an array of strings or empty array for no methods`),n}function Fh(e,t){let n=null;return Object.values(e).forEach(s=>{if(n)return;const o=fm(s,`${t}, namespace`);o&&(n=o)}),n}function YP(e,t,n){let s=null;if(e&&Pc(e)){const o=Fh(e,t);o&&(s=o);const c=um(e,t,n);c&&(s=c)}else s=kn("MISSING_OR_INVALID",`${t}, ${n} should be an object with data`);return s}function dm(e,t){let n=null;if(e&&Pc(e)){const s=Fh(e,t);s&&(n=s);const o=hm(e,t);o&&(n=o)}else n=kn("MISSING_OR_INVALID",`${t}, namespaces should be an object with data`);return n}function pm(e){return Wr(e.protocol,!0)}function XP(e,t){let n=!1;return t&&!e?n=!0:e&&qo(e)&&e.length&&e.forEach(s=>{n=pm(s)}),n}function QP(e){return typeof e=="number"}function ZP(e){return typeof e<"u"&&typeof e!==null}function e$(e){return!(!e||typeof e!="object"||!e.code||!$c(e.code,!1)||!e.message||!Wr(e.message,!1))}function t$(e){return!(fi(e)||!Wr(e.method,!1))}function r$(e){return!(fi(e)||fi(e.result)&&fi(e.error)||!$c(e.id,!1)||!Wr(e.jsonrpc,!1))}function n$(e){return!(fi(e)||!Wr(e.name,!1))}function i$(e,t){return!(!No(t)||!tm(e).includes(t))}function s$(e,t,n){return Wr(n,!1)?rm(e,t).includes(n):!1}function o$(e,t,n){return Wr(n,!1)?nm(e,t).includes(n):!1}function gm(e,t,n){let s=null;const o=a$(e),c=c$(t),f=Object.keys(o),h=Object.keys(c),O=bg(Object.keys(e)),p=bg(Object.keys(t)),S=O.filter(C=>!p.includes(C));return S.length&&(s=kn("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.
      Required: ${S.toString()}
      Received: ${Object.keys(t).toString()}`)),ai(f,h)||(s=kn("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.
      Required: ${f.toString()}
      Approved: ${h.toString()}`)),Object.keys(t).forEach(C=>{if(!C.includes(":")||s)return;const R=Yi(t[C].accounts);R.includes(C)||(s=kn("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${C}
        Required: ${C}
        Approved: ${R.toString()}`))}),f.forEach(C=>{s||(ai(o[C].methods,c[C].methods)?ai(o[C].events,c[C].events)||(s=kn("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${C}`)):s=kn("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${C}`))}),s}function a$(e){const t={};return Object.keys(e).forEach(n=>{var s;n.includes(":")?t[n]=e[n]:(s=e[n].chains)==null||s.forEach(o=>{t[o]={methods:e[n].methods,events:e[n].events}})}),t}function bg(e){return[...new Set(e.map(t=>t.includes(":")?t.split(":")[0]:t))]}function c$(e){const t={};return Object.keys(e).forEach(n=>{n.includes(":")?t[n]=e[n]:Yi(e[n].accounts)?.forEach(o=>{t[o]={accounts:e[n].accounts.filter(c=>c.includes(`${o}:`)),methods:e[n].methods,events:e[n].events}})}),t}function u$(e,t){return $c(e,!1)&&e<=t.max&&e>=t.min}function l$(){const e=Ji();return new Promise(t=>{switch(e){case Er.browser:t(ym());break;case Er.reactNative:t(mm());break;case Er.node:t(vm());break;default:t(!0)}})}function ym(){return Bo()&&navigator?.onLine}async function mm(){return Ms()&&typeof global<"u"&&global!=null&&global.NetInfo?(await(global==null?void 0:global.NetInfo.fetch()))?.isConnected:!0}function vm(){return!0}function h$(e){switch(Ji()){case Er.browser:bm(e);break;case Er.reactNative:_m(e);break;case Er.node:break}}function bm(e){!Ms()&&Bo()&&(window.addEventListener("online",()=>e(!0)),window.addEventListener("offline",()=>e(!1)))}function _m(e){Ms()&&typeof global<"u"&&global!=null&&global.NetInfo&&global?.NetInfo.addEventListener(t=>e(t?.isConnected))}const ml={};class f${static get(t){return ml[t]}static set(t,n){ml[t]=n}static delete(t){delete ml[t]}}const d$=Object.freeze(Object.defineProperty({__proto__:null,BASE10:Ah,BASE16:Or,BASE64:sc,COLON:tP,DEFAULT_DEPTH:jh,EMPTY_SPACE:oc,ENV_MAP:Er,INTERNAL_ERRORS:om,MemoryStore:f$,ONE_THOUSAND:rP,REACT_NATIVE_PRODUCT:q0,RELAYER_DEFAULT_PROTOCOL:X0,SDK_ERRORS:sm,SDK_TYPE:k0,SLASH:H0,TYPE_0:Th,TYPE_1:Ls,UTF8:Dc,appendToQueryString:z0,assertType:cP,buildApprovedNamespaces:zP,calcExpiry:_P,capitalize:pP,capitalizeWord:Y0,createDelayedPromise:gP,createExpiringPromise:yP,decodeTypeByte:Fo,decrypt:J3,deriveSymKey:V3,deserialize:Rh,encodeTypeByte:M0,encrypt:G3,engineEvent:EP,enumify:dP,formatAccountId:T0,formatAccountWithChain:j3,formatChainId:A0,formatExpirerTarget:Lh,formatIdTarget:vP,formatMessage:q3,formatMessageContext:uP,formatRelayParams:em,formatRelayRpcUrl:oP,formatTopicTarget:mP,formatUA:W0,formatUri:jP,generateKeyPair:k3,generateRandomBytes32:z3,getAccountsChains:Yi,getAccountsFromNamespaces:L3,getAddressFromAccount:x0,getAddressesFromAccounts:U3,getAppMetadata:iP,getBrowserOnlineStatus:ym,getBundleId:nP,getChainFromAccount:R0,getChainsFromAccounts:j0,getChainsFromNamespace:Oc,getChainsFromNamespaces:M3,getChainsFromRequiredNamespaces:F3,getDeepLink:OP,getDidAddress:L0,getDidAddressSegments:Ic,getDidChainId:U0,getEnvironment:Ji,getHttpUrl:aP,getInternalError:kn,getJavascriptID:K0,getJavascriptOS:V0,getLastItems:J0,getNamespacedDidChainId:B3,getNamespacesChains:tm,getNamespacesEventsForChainId:nm,getNamespacesMethodsForChainId:rm,getNodeOnlineStatus:vm,getReactNativeOnlineStatus:mm,getRelayClientMetadata:sP,getRelayProtocolApi:DP,getRelayProtocolName:IP,getRequiredNamespacesFromNamespaces:kP,getSdkError:zi,getUniqueValues:Ch,handleDeeplinkRedirect:SP,hasOverlap:ai,hashKey:K3,hashMessage:W3,isBrowser:Bo,isCaipNamespace:Mh,isConformingNamespaces:gm,isExpired:wP,isNode:Uh,isOnline:l$,isProposalStruct:WP,isReactNative:Ms,isSessionCompatible:VP,isSessionStruct:GP,isTypeOneEnvelope:X3,isUndefined:fi,isValidAccountId:am,isValidAccounts:lm,isValidActions:fm,isValidArray:qo,isValidChainId:No,isValidChains:cm,isValidController:JP,isValidErrorReason:e$,isValidEvent:n$,isValidId:QP,isValidNamespaceAccounts:hm,isValidNamespaceActions:Fh,isValidNamespaceChains:um,isValidNamespaceMethodsOrEvents:Gl,isValidNamespaces:dm,isValidNamespacesChainId:i$,isValidNamespacesEvent:o$,isValidNamespacesRequest:s$,isValidNumber:$c,isValidObject:Pc,isValidParams:ZP,isValidRelay:pm,isValidRelays:XP,isValidRequest:t$,isValidRequestExpiry:u$,isValidRequiredNamespaces:YP,isValidResponse:r$,isValidString:Wr,isValidUrl:KP,mapEntries:fP,mapToObj:lP,mergeArrays:ci,normalizeNamespaces:Wl,objToMap:hP,parseAccountId:Nh,parseChainId:C0,parseContextNames:G0,parseExpirerTarget:bP,parseNamespaceKey:im,parseRelayParams:Q0,parseTopic:Z0,parseUri:RP,serialize:F0,subscribeToBrowserNetworkChange:bm,subscribeToNetworkChange:h$,subscribeToReactNativeNetworkChange:_m,validateDecoding:Y3,validateEncoding:B0},Symbol.toStringTag,{value:"Module"})),p$=Vn(d$);var _o={};const g$=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,y$=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,m$=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function v$(e,t){if(e==="__proto__"||e==="constructor"&&t&&typeof t=="object"&&"prototype"in t){b$(e);return}return t}function b$(e){console.warn(`[destr] Dropping "${e}" key to prevent prototype pollution.`)}function Ka(e,t={}){if(typeof e!="string")return e;const n=e.trim();if(e[0]==='"'&&e.at(-1)==='"'&&!e.includes("\\"))return n.slice(1,-1);if(n.length<=9){const s=n.toLowerCase();if(s==="true")return!0;if(s==="false")return!1;if(s==="undefined")return;if(s==="null")return null;if(s==="nan")return Number.NaN;if(s==="infinity")return Number.POSITIVE_INFINITY;if(s==="-infinity")return Number.NEGATIVE_INFINITY}if(!m$.test(e)){if(t.strict)throw new SyntaxError("[destr] Invalid JSON");return e}try{if(g$.test(e)||y$.test(e)){if(t.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(e,v$)}return JSON.parse(e)}catch(s){if(t.strict)throw s;return e}}function _$(e){return!e||typeof e.then!="function"?Promise.resolve(e):e}function Qt(e,...t){try{return _$(e(...t))}catch(n){return Promise.reject(n)}}function w$(e){const t=typeof e;return e===null||t!=="object"&&t!=="function"}function E$(e){const t=Object.getPrototypeOf(e);return!t||t.isPrototypeOf(Object)}function Qa(e){if(w$(e))return String(e);if(E$(e)||Array.isArray(e))return JSON.stringify(e);if(typeof e.toJSON=="function")return Qa(e.toJSON());throw new Error("[unstorage] Cannot stringify value!")}function wm(){if(typeof Buffer===void 0)throw new TypeError("[unstorage] Buffer is not supported!")}const Jl="base64:";function S$(e){if(typeof e=="string")return e;wm();const t=Buffer.from(e).toString("base64");return Jl+t}function O$(e){return typeof e!="string"||!e.startsWith(Jl)?e:(wm(),Buffer.from(e.slice(Jl.length),"base64"))}function Tr(e){return e?e.split("?")[0].replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""):""}function I$(...e){return Tr(e.join(":"))}function Wa(e){return e=Tr(e),e?e+":":""}const D$="memory",P$=()=>{const e=new Map;return{name:D$,options:{},hasItem(t){return e.has(t)},getItem(t){return e.get(t)??null},getItemRaw(t){return e.get(t)??null},setItem(t,n){e.set(t,n)},setItemRaw(t,n){e.set(t,n)},removeItem(t){e.delete(t)},getKeys(){return Array.from(e.keys())},clear(){e.clear()},dispose(){e.clear()}}};function $$(e={}){const t={mounts:{"":e.driver||P$()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},n=p=>{for(const S of t.mountpoints)if(p.startsWith(S))return{base:S,relativeKey:p.slice(S.length),driver:t.mounts[S]};return{base:"",relativeKey:p,driver:t.mounts[""]}},s=(p,S)=>t.mountpoints.filter(C=>C.startsWith(p)||S&&p.startsWith(C)).map(C=>({relativeBase:p.length>C.length?p.slice(C.length):void 0,mountpoint:C,driver:t.mounts[C]})),o=(p,S)=>{if(!!t.watching){S=Tr(S);for(const C of t.watchListeners)C(p,S)}},c=async()=>{if(!t.watching){t.watching=!0;for(const p in t.mounts)t.unwatch[p]=await _g(t.mounts[p],o,p)}},f=async()=>{if(!!t.watching){for(const p in t.unwatch)await t.unwatch[p]();t.unwatch={},t.watching=!1}},h=(p,S,C)=>{const R=new Map,U=x=>{let F=R.get(x.base);return F||(F={driver:x.driver,base:x.base,items:[]},R.set(x.base,F)),F};for(const x of p){const F=typeof x=="string",q=Tr(F?x:x.key),te=F?void 0:x.value,_=F||!x.options?S:{...S,...x.options},A=n(q);U(A).items.push({key:q,value:te,relativeKey:A.relativeKey,options:_})}return Promise.all([...R.values()].map(x=>C(x))).then(x=>x.flat())},O={hasItem(p,S={}){p=Tr(p);const{relativeKey:C,driver:R}=n(p);return Qt(R.hasItem,C,S)},getItem(p,S={}){p=Tr(p);const{relativeKey:C,driver:R}=n(p);return Qt(R.getItem,C,S).then(U=>Ka(U))},getItems(p,S){return h(p,S,C=>C.driver.getItems?Qt(C.driver.getItems,C.items.map(R=>({key:R.relativeKey,options:R.options})),S).then(R=>R.map(U=>({key:I$(C.base,U.key),value:Ka(U.value)}))):Promise.all(C.items.map(R=>Qt(C.driver.getItem,R.relativeKey,R.options).then(U=>({key:R.key,value:Ka(U)})))))},getItemRaw(p,S={}){p=Tr(p);const{relativeKey:C,driver:R}=n(p);return R.getItemRaw?Qt(R.getItemRaw,C,S):Qt(R.getItem,C,S).then(U=>O$(U))},async setItem(p,S,C={}){if(S===void 0)return O.removeItem(p);p=Tr(p);const{relativeKey:R,driver:U}=n(p);!U.setItem||(await Qt(U.setItem,R,Qa(S),C),U.watch||o("update",p))},async setItems(p,S){await h(p,S,async C=>{C.driver.setItems&&await Qt(C.driver.setItems,C.items.map(R=>({key:R.relativeKey,value:Qa(R.value),options:R.options})),S),C.driver.setItem&&await Promise.all(C.items.map(R=>Qt(C.driver.setItem,R.relativeKey,Qa(R.value),R.options)))})},async setItemRaw(p,S,C={}){if(S===void 0)return O.removeItem(p,C);p=Tr(p);const{relativeKey:R,driver:U}=n(p);if(U.setItemRaw)await Qt(U.setItemRaw,R,S,C);else if(U.setItem)await Qt(U.setItem,R,S$(S),C);else return;U.watch||o("update",p)},async removeItem(p,S={}){typeof S=="boolean"&&(S={removeMeta:S}),p=Tr(p);const{relativeKey:C,driver:R}=n(p);!R.removeItem||(await Qt(R.removeItem,C,S),(S.removeMeta||S.removeMata)&&await Qt(R.removeItem,C+"$",S),R.watch||o("remove",p))},async getMeta(p,S={}){typeof S=="boolean"&&(S={nativeOnly:S}),p=Tr(p);const{relativeKey:C,driver:R}=n(p),U=Object.create(null);if(R.getMeta&&Object.assign(U,await Qt(R.getMeta,C,S)),!S.nativeOnly){const x=await Qt(R.getItem,C+"$",S).then(F=>Ka(F));x&&typeof x=="object"&&(typeof x.atime=="string"&&(x.atime=new Date(x.atime)),typeof x.mtime=="string"&&(x.mtime=new Date(x.mtime)),Object.assign(U,x))}return U},setMeta(p,S,C={}){return this.setItem(p+"$",S,C)},removeMeta(p,S={}){return this.removeItem(p+"$",S)},async getKeys(p,S={}){p=Wa(p);const C=s(p,!0);let R=[];const U=[];for(const x of C){const q=(await Qt(x.driver.getKeys,x.relativeBase,S)).map(te=>x.mountpoint+Tr(te)).filter(te=>!R.some(_=>te.startsWith(_)));U.push(...q),R=[x.mountpoint,...R.filter(te=>!te.startsWith(x.mountpoint))]}return p?U.filter(x=>x.startsWith(p)&&!x.endsWith("$")):U.filter(x=>!x.endsWith("$"))},async clear(p,S={}){p=Wa(p),await Promise.all(s(p,!1).map(async C=>{if(C.driver.clear)return Qt(C.driver.clear,C.relativeBase,S);if(C.driver.removeItem){const R=await C.driver.getKeys(C.relativeBase||"",S);return Promise.all(R.map(U=>C.driver.removeItem(U,S)))}}))},async dispose(){await Promise.all(Object.values(t.mounts).map(p=>wg(p)))},async watch(p){return await c(),t.watchListeners.push(p),async()=>{t.watchListeners=t.watchListeners.filter(S=>S!==p),t.watchListeners.length===0&&await f()}},async unwatch(){t.watchListeners=[],await f()},mount(p,S){if(p=Wa(p),p&&t.mounts[p])throw new Error(`already mounted at ${p}`);return p&&(t.mountpoints.push(p),t.mountpoints.sort((C,R)=>R.length-C.length)),t.mounts[p]=S,t.watching&&Promise.resolve(_g(S,o,p)).then(C=>{t.unwatch[p]=C}).catch(console.error),O},async unmount(p,S=!0){p=Wa(p),!(!p||!t.mounts[p])&&(t.watching&&p in t.unwatch&&(t.unwatch[p](),delete t.unwatch[p]),S&&await wg(t.mounts[p]),t.mountpoints=t.mountpoints.filter(C=>C!==p),delete t.mounts[p])},getMount(p=""){p=Tr(p)+":";const S=n(p);return{driver:S.driver,base:S.base}},getMounts(p="",S={}){return p=Tr(p),s(p,S.parents).map(R=>({driver:R.driver,base:R.mountpoint}))}};return O}function _g(e,t,n){return e.watch?e.watch((s,o)=>t(s,n+o)):()=>{}}async function wg(e){typeof e.dispose=="function"&&await Qt(e.dispose)}function Xi(e){return new Promise((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)})}function Em(e,t){const n=indexedDB.open(e);n.onupgradeneeded=()=>n.result.createObjectStore(t);const s=Xi(n);return(o,c)=>s.then(f=>c(f.transaction(t,o).objectStore(t)))}let vl;function Ho(){return vl||(vl=Em("keyval-store","keyval")),vl}function Eg(e,t=Ho()){return t("readonly",n=>Xi(n.get(e)))}function N$(e,t,n=Ho()){return n("readwrite",s=>(s.put(t,e),Xi(s.transaction)))}function C$(e,t=Ho()){return t("readwrite",n=>(n.delete(e),Xi(n.transaction)))}function A$(e=Ho()){return e("readwrite",t=>(t.clear(),Xi(t.transaction)))}function T$(e,t){return e.openCursor().onsuccess=function(){!this.result||(t(this.result),this.result.continue())},Xi(e.transaction)}function x$(e=Ho()){return e("readonly",t=>{if(t.getAllKeys)return Xi(t.getAllKeys());const n=[];return T$(t,s=>n.push(s.key)).then(()=>n)})}const R$=e=>JSON.stringify(e,(t,n)=>typeof n=="bigint"?n.toString()+"n":n),j$=e=>{const t=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=e.replace(t,'$1"$2n"$3');return JSON.parse(n,(s,o)=>typeof o=="string"&&o.match(/^\d+n$/)?BigInt(o.substring(0,o.length-1)):o)};function Sm(e){if(typeof e!="string")throw new Error(`Cannot safe json parse value of type ${typeof e}`);try{return j$(e)}catch{return e}}function Om(e){return typeof e=="string"?e:R$(e)||""}const U$="idb-keyval";var L$=(e={})=>{const t=e.base&&e.base.length>0?`${e.base}:`:"",n=o=>t+o;let s;return e.dbName&&e.storeName&&(s=Em(e.dbName,e.storeName)),{name:U$,options:e,async hasItem(o){return!(typeof await Eg(n(o),s)>"u")},async getItem(o){return await Eg(n(o),s)??null},setItem(o,c){return N$(n(o),c,s)},removeItem(o){return C$(n(o),s)},getKeys(){return x$(s)},clear(){return A$(s)}}};const M$="WALLET_CONNECT_V2_INDEXED_DB",F$="keyvaluestorage";class B${constructor(){this.indexedDb=$$({driver:L$({dbName:M$,storeName:F$})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(t=>[t.key,t.value])}async getItem(t){const n=await this.indexedDb.getItem(t);if(n!==null)return n}async setItem(t,n){await this.indexedDb.setItem(t,Om(n))}async removeItem(t){await this.indexedDb.removeItem(t)}}var bl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Za={exports:{}};(function(){let e;function t(){}e=t,e.prototype.getItem=function(n){return this.hasOwnProperty(n)?String(this[n]):null},e.prototype.setItem=function(n,s){this[n]=String(s)},e.prototype.removeItem=function(n){delete this[n]},e.prototype.clear=function(){const n=this;Object.keys(n).forEach(function(s){n[s]=void 0,delete n[s]})},e.prototype.key=function(n){return n=n||0,Object.keys(this)[n]},e.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof bl<"u"&&bl.localStorage?Za.exports=bl.localStorage:typeof window<"u"&&window.localStorage?Za.exports=window.localStorage:Za.exports=new t})();function q$(e){var t;return[e[0],Sm((t=e[1])!=null?t:"")]}class H${constructor(){this.localStorage=Za.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(q$)}async getItem(t){const n=this.localStorage.getItem(t);if(n!==null)return Sm(n)}async setItem(t,n){this.localStorage.setItem(t,Om(n))}async removeItem(t){this.localStorage.removeItem(t)}}const k$="wc_storage_version",Sg=1,z$=async(e,t,n)=>{const s=k$,o=await t.getItem(s);if(o&&o>=Sg){n(t);return}const c=await e.getKeys();if(!c.length){n(t);return}const f=[];for(;c.length;){const h=c.shift();if(!h)continue;const O=h.toLowerCase();if(O.includes("wc@")||O.includes("walletconnect")||O.includes("wc_")||O.includes("wallet_connect")){const p=await e.getItem(h);await t.setItem(h,p),f.push(h)}}await t.setItem(s,Sg),n(t),V$(e,f)},V$=async(e,t)=>{t.length&&t.forEach(async n=>{await e.removeItem(n)})};class K${constructor(){this.initialized=!1,this.setInitialized=n=>{this.storage=n,this.initialized=!0};const t=new H$;this.storage=t;try{const n=new B$;z$(t,n,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(t){return await this.initialize(),this.storage.getItem(t)}async setItem(t,n){return await this.initialize(),this.storage.setItem(t,n)}async removeItem(t){return await this.initialize(),this.storage.removeItem(t)}async initialize(){this.initialized||await new Promise(t=>{const n=setInterval(()=>{this.initialized&&(clearInterval(n),t())},20)})}}var Fs={},ko={exports:{}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(function(e){var t,n,s,o,c,f,h,O,p,S,C,R,U,x,F,q,te,_,A,I,D,w,u;(function(b){var K=typeof rt=="object"?rt:typeof self=="object"?self:typeof this=="object"?this:{};b(v(K,v(e.exports)));function v(g,P){return g!==K&&(typeof Object.create=="function"?Object.defineProperty(g,"__esModule",{value:!0}):g.__esModule=!0),function(L,y){return g[L]=P?P(L,y):y}}})(function(b){var K=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,g){v.__proto__=g}||function(v,g){for(var P in g)g.hasOwnProperty(P)&&(v[P]=g[P])};t=function(v,g){K(v,g);function P(){this.constructor=v}v.prototype=g===null?Object.create(g):(P.prototype=g.prototype,new P)},n=Object.assign||function(v){for(var g,P=1,L=arguments.length;P<L;P++){g=arguments[P];for(var y in g)Object.prototype.hasOwnProperty.call(g,y)&&(v[y]=g[y])}return v},s=function(v,g){var P={};for(var L in v)Object.prototype.hasOwnProperty.call(v,L)&&g.indexOf(L)<0&&(P[L]=v[L]);if(v!=null&&typeof Object.getOwnPropertySymbols=="function")for(var y=0,L=Object.getOwnPropertySymbols(v);y<L.length;y++)g.indexOf(L[y])<0&&Object.prototype.propertyIsEnumerable.call(v,L[y])&&(P[L[y]]=v[L[y]]);return P},o=function(v,g,P,L){var y=arguments.length,E=y<3?g:L===null?L=Object.getOwnPropertyDescriptor(g,P):L,k;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(v,g,P,L);else for(var W=v.length-1;W>=0;W--)(k=v[W])&&(E=(y<3?k(E):y>3?k(g,P,E):k(g,P))||E);return y>3&&E&&Object.defineProperty(g,P,E),E},c=function(v,g){return function(P,L){g(P,L,v)}},f=function(v,g){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(v,g)},h=function(v,g,P,L){function y(E){return E instanceof P?E:new P(function(k){k(E)})}return new(P||(P=Promise))(function(E,k){function W(ee){try{B(L.next(ee))}catch(oe){k(oe)}}function Z(ee){try{B(L.throw(ee))}catch(oe){k(oe)}}function B(ee){ee.done?E(ee.value):y(ee.value).then(W,Z)}B((L=L.apply(v,g||[])).next())})},O=function(v,g){var P={label:0,sent:function(){if(E[0]&1)throw E[1];return E[1]},trys:[],ops:[]},L,y,E,k;return k={next:W(0),throw:W(1),return:W(2)},typeof Symbol=="function"&&(k[Symbol.iterator]=function(){return this}),k;function W(B){return function(ee){return Z([B,ee])}}function Z(B){if(L)throw new TypeError("Generator is already executing.");for(;P;)try{if(L=1,y&&(E=B[0]&2?y.return:B[0]?y.throw||((E=y.return)&&E.call(y),0):y.next)&&!(E=E.call(y,B[1])).done)return E;switch(y=0,E&&(B=[B[0]&2,E.value]),B[0]){case 0:case 1:E=B;break;case 4:return P.label++,{value:B[1],done:!1};case 5:P.label++,y=B[1],B=[0];continue;case 7:B=P.ops.pop(),P.trys.pop();continue;default:if(E=P.trys,!(E=E.length>0&&E[E.length-1])&&(B[0]===6||B[0]===2)){P=0;continue}if(B[0]===3&&(!E||B[1]>E[0]&&B[1]<E[3])){P.label=B[1];break}if(B[0]===6&&P.label<E[1]){P.label=E[1],E=B;break}if(E&&P.label<E[2]){P.label=E[2],P.ops.push(B);break}E[2]&&P.ops.pop(),P.trys.pop();continue}B=g.call(v,P)}catch(ee){B=[6,ee],y=0}finally{L=E=0}if(B[0]&5)throw B[1];return{value:B[0]?B[1]:void 0,done:!0}}},u=function(v,g,P,L){L===void 0&&(L=P),v[L]=g[P]},p=function(v,g){for(var P in v)P!=="default"&&!g.hasOwnProperty(P)&&(g[P]=v[P])},S=function(v){var g=typeof Symbol=="function"&&Symbol.iterator,P=g&&v[g],L=0;if(P)return P.call(v);if(v&&typeof v.length=="number")return{next:function(){return v&&L>=v.length&&(v=void 0),{value:v&&v[L++],done:!v}}};throw new TypeError(g?"Object is not iterable.":"Symbol.iterator is not defined.")},C=function(v,g){var P=typeof Symbol=="function"&&v[Symbol.iterator];if(!P)return v;var L=P.call(v),y,E=[],k;try{for(;(g===void 0||g-- >0)&&!(y=L.next()).done;)E.push(y.value)}catch(W){k={error:W}}finally{try{y&&!y.done&&(P=L.return)&&P.call(L)}finally{if(k)throw k.error}}return E},R=function(){for(var v=[],g=0;g<arguments.length;g++)v=v.concat(C(arguments[g]));return v},U=function(){for(var v=0,g=0,P=arguments.length;g<P;g++)v+=arguments[g].length;for(var L=Array(v),y=0,g=0;g<P;g++)for(var E=arguments[g],k=0,W=E.length;k<W;k++,y++)L[y]=E[k];return L},x=function(v){return this instanceof x?(this.v=v,this):new x(v)},F=function(v,g,P){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var L=P.apply(v,g||[]),y,E=[];return y={},k("next"),k("throw"),k("return"),y[Symbol.asyncIterator]=function(){return this},y;function k(de){L[de]&&(y[de]=function(ie){return new Promise(function(Ie,be){E.push([de,ie,Ie,be])>1||W(de,ie)})})}function W(de,ie){try{Z(L[de](ie))}catch(Ie){oe(E[0][3],Ie)}}function Z(de){de.value instanceof x?Promise.resolve(de.value.v).then(B,ee):oe(E[0][2],de)}function B(de){W("next",de)}function ee(de){W("throw",de)}function oe(de,ie){de(ie),E.shift(),E.length&&W(E[0][0],E[0][1])}},q=function(v){var g,P;return g={},L("next"),L("throw",function(y){throw y}),L("return"),g[Symbol.iterator]=function(){return this},g;function L(y,E){g[y]=v[y]?function(k){return(P=!P)?{value:x(v[y](k)),done:y==="return"}:E?E(k):k}:E}},te=function(v){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var g=v[Symbol.asyncIterator],P;return g?g.call(v):(v=typeof S=="function"?S(v):v[Symbol.iterator](),P={},L("next"),L("throw"),L("return"),P[Symbol.asyncIterator]=function(){return this},P);function L(E){P[E]=v[E]&&function(k){return new Promise(function(W,Z){k=v[E](k),y(W,Z,k.done,k.value)})}}function y(E,k,W,Z){Promise.resolve(Z).then(function(B){E({value:B,done:W})},k)}},_=function(v,g){return Object.defineProperty?Object.defineProperty(v,"raw",{value:g}):v.raw=g,v},A=function(v){if(v&&v.__esModule)return v;var g={};if(v!=null)for(var P in v)Object.hasOwnProperty.call(v,P)&&(g[P]=v[P]);return g.default=v,g},I=function(v){return v&&v.__esModule?v:{default:v}},D=function(v,g){if(!g.has(v))throw new TypeError("attempted to get private field on non-instance");return g.get(v)},w=function(v,g,P){if(!g.has(v))throw new TypeError("attempted to set private field on non-instance");return g.set(v,P),P},b("__extends",t),b("__assign",n),b("__rest",s),b("__decorate",o),b("__param",c),b("__metadata",f),b("__awaiter",h),b("__generator",O),b("__exportStar",p),b("__createBinding",u),b("__values",S),b("__read",C),b("__spread",R),b("__spreadArrays",U),b("__await",x),b("__asyncGenerator",F),b("__asyncDelegator",q),b("__asyncValues",te),b("__makeTemplateObject",_),b("__importStar",A),b("__importDefault",I),b("__classPrivateFieldGet",D),b("__classPrivateFieldSet",w)})})(ko);var wo={},_l={},Eo={};class Qi{}const W$=Object.freeze(Object.defineProperty({__proto__:null,IEvents:Qi},Symbol.toStringTag,{value:"Module"})),G$=Vn(W$);var Og;function J$(){if(Og)return Eo;Og=1,Object.defineProperty(Eo,"__esModule",{value:!0}),Eo.IHeartBeat=void 0;const e=G$;class t extends e.IEvents{constructor(s){super()}}return Eo.IHeartBeat=t,Eo}var Ig;function Im(){return Ig||(Ig=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),ko.exports.__exportStar(J$(),e)}(_l)),_l}var wl={},Li={},Dg;function Y$(){if(Dg)return Li;Dg=1,Object.defineProperty(Li,"__esModule",{value:!0}),Li.HEARTBEAT_EVENTS=Li.HEARTBEAT_INTERVAL=void 0;const e=we;return Li.HEARTBEAT_INTERVAL=e.FIVE_SECONDS,Li.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"},Li}var Pg;function Dm(){return Pg||(Pg=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),ko.exports.__exportStar(Y$(),e)}(wl)),wl}var $g;function X$(){if($g)return wo;$g=1,Object.defineProperty(wo,"__esModule",{value:!0}),wo.HeartBeat=void 0;const e=ko.exports,t=Pr.exports,n=we,s=Im(),o=Dm();class c extends s.IHeartBeat{constructor(h){super(h),this.events=new t.EventEmitter,this.interval=o.HEARTBEAT_INTERVAL,this.interval=h?.interval||o.HEARTBEAT_INTERVAL}static init(h){return e.__awaiter(this,void 0,void 0,function*(){const O=new c(h);return yield O.init(),O})}init(){return e.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(h,O){this.events.on(h,O)}once(h,O){this.events.once(h,O)}off(h,O){this.events.off(h,O)}removeListener(h,O){this.events.removeListener(h,O)}initialize(){return e.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),n.toMiliseconds(this.interval))})}pulse(){this.events.emit(o.HEARTBEAT_EVENTS.pulse)}}return wo.HeartBeat=c,wo}(function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=ko.exports;t.__exportStar(X$(),e),t.__exportStar(Im(),e),t.__exportStar(Dm(),e)})(Fs);var El={},Sl={exports:{}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ng;function Q$(){return Ng||(Ng=1,function(e){var t,n,s,o,c,f,h,O,p,S,C,R,U,x,F,q,te,_,A,I,D,w,u;(function(b){var K=typeof rt=="object"?rt:typeof self=="object"?self:typeof this=="object"?this:{};b(v(K,v(e.exports)));function v(g,P){return g!==K&&(typeof Object.create=="function"?Object.defineProperty(g,"__esModule",{value:!0}):g.__esModule=!0),function(L,y){return g[L]=P?P(L,y):y}}})(function(b){var K=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,g){v.__proto__=g}||function(v,g){for(var P in g)g.hasOwnProperty(P)&&(v[P]=g[P])};t=function(v,g){K(v,g);function P(){this.constructor=v}v.prototype=g===null?Object.create(g):(P.prototype=g.prototype,new P)},n=Object.assign||function(v){for(var g,P=1,L=arguments.length;P<L;P++){g=arguments[P];for(var y in g)Object.prototype.hasOwnProperty.call(g,y)&&(v[y]=g[y])}return v},s=function(v,g){var P={};for(var L in v)Object.prototype.hasOwnProperty.call(v,L)&&g.indexOf(L)<0&&(P[L]=v[L]);if(v!=null&&typeof Object.getOwnPropertySymbols=="function")for(var y=0,L=Object.getOwnPropertySymbols(v);y<L.length;y++)g.indexOf(L[y])<0&&Object.prototype.propertyIsEnumerable.call(v,L[y])&&(P[L[y]]=v[L[y]]);return P},o=function(v,g,P,L){var y=arguments.length,E=y<3?g:L===null?L=Object.getOwnPropertyDescriptor(g,P):L,k;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(v,g,P,L);else for(var W=v.length-1;W>=0;W--)(k=v[W])&&(E=(y<3?k(E):y>3?k(g,P,E):k(g,P))||E);return y>3&&E&&Object.defineProperty(g,P,E),E},c=function(v,g){return function(P,L){g(P,L,v)}},f=function(v,g){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(v,g)},h=function(v,g,P,L){function y(E){return E instanceof P?E:new P(function(k){k(E)})}return new(P||(P=Promise))(function(E,k){function W(ee){try{B(L.next(ee))}catch(oe){k(oe)}}function Z(ee){try{B(L.throw(ee))}catch(oe){k(oe)}}function B(ee){ee.done?E(ee.value):y(ee.value).then(W,Z)}B((L=L.apply(v,g||[])).next())})},O=function(v,g){var P={label:0,sent:function(){if(E[0]&1)throw E[1];return E[1]},trys:[],ops:[]},L,y,E,k;return k={next:W(0),throw:W(1),return:W(2)},typeof Symbol=="function"&&(k[Symbol.iterator]=function(){return this}),k;function W(B){return function(ee){return Z([B,ee])}}function Z(B){if(L)throw new TypeError("Generator is already executing.");for(;P;)try{if(L=1,y&&(E=B[0]&2?y.return:B[0]?y.throw||((E=y.return)&&E.call(y),0):y.next)&&!(E=E.call(y,B[1])).done)return E;switch(y=0,E&&(B=[B[0]&2,E.value]),B[0]){case 0:case 1:E=B;break;case 4:return P.label++,{value:B[1],done:!1};case 5:P.label++,y=B[1],B=[0];continue;case 7:B=P.ops.pop(),P.trys.pop();continue;default:if(E=P.trys,!(E=E.length>0&&E[E.length-1])&&(B[0]===6||B[0]===2)){P=0;continue}if(B[0]===3&&(!E||B[1]>E[0]&&B[1]<E[3])){P.label=B[1];break}if(B[0]===6&&P.label<E[1]){P.label=E[1],E=B;break}if(E&&P.label<E[2]){P.label=E[2],P.ops.push(B);break}E[2]&&P.ops.pop(),P.trys.pop();continue}B=g.call(v,P)}catch(ee){B=[6,ee],y=0}finally{L=E=0}if(B[0]&5)throw B[1];return{value:B[0]?B[1]:void 0,done:!0}}},u=function(v,g,P,L){L===void 0&&(L=P),v[L]=g[P]},p=function(v,g){for(var P in v)P!=="default"&&!g.hasOwnProperty(P)&&(g[P]=v[P])},S=function(v){var g=typeof Symbol=="function"&&Symbol.iterator,P=g&&v[g],L=0;if(P)return P.call(v);if(v&&typeof v.length=="number")return{next:function(){return v&&L>=v.length&&(v=void 0),{value:v&&v[L++],done:!v}}};throw new TypeError(g?"Object is not iterable.":"Symbol.iterator is not defined.")},C=function(v,g){var P=typeof Symbol=="function"&&v[Symbol.iterator];if(!P)return v;var L=P.call(v),y,E=[],k;try{for(;(g===void 0||g-- >0)&&!(y=L.next()).done;)E.push(y.value)}catch(W){k={error:W}}finally{try{y&&!y.done&&(P=L.return)&&P.call(L)}finally{if(k)throw k.error}}return E},R=function(){for(var v=[],g=0;g<arguments.length;g++)v=v.concat(C(arguments[g]));return v},U=function(){for(var v=0,g=0,P=arguments.length;g<P;g++)v+=arguments[g].length;for(var L=Array(v),y=0,g=0;g<P;g++)for(var E=arguments[g],k=0,W=E.length;k<W;k++,y++)L[y]=E[k];return L},x=function(v){return this instanceof x?(this.v=v,this):new x(v)},F=function(v,g,P){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var L=P.apply(v,g||[]),y,E=[];return y={},k("next"),k("throw"),k("return"),y[Symbol.asyncIterator]=function(){return this},y;function k(de){L[de]&&(y[de]=function(ie){return new Promise(function(Ie,be){E.push([de,ie,Ie,be])>1||W(de,ie)})})}function W(de,ie){try{Z(L[de](ie))}catch(Ie){oe(E[0][3],Ie)}}function Z(de){de.value instanceof x?Promise.resolve(de.value.v).then(B,ee):oe(E[0][2],de)}function B(de){W("next",de)}function ee(de){W("throw",de)}function oe(de,ie){de(ie),E.shift(),E.length&&W(E[0][0],E[0][1])}},q=function(v){var g,P;return g={},L("next"),L("throw",function(y){throw y}),L("return"),g[Symbol.iterator]=function(){return this},g;function L(y,E){g[y]=v[y]?function(k){return(P=!P)?{value:x(v[y](k)),done:y==="return"}:E?E(k):k}:E}},te=function(v){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var g=v[Symbol.asyncIterator],P;return g?g.call(v):(v=typeof S=="function"?S(v):v[Symbol.iterator](),P={},L("next"),L("throw"),L("return"),P[Symbol.asyncIterator]=function(){return this},P);function L(E){P[E]=v[E]&&function(k){return new Promise(function(W,Z){k=v[E](k),y(W,Z,k.done,k.value)})}}function y(E,k,W,Z){Promise.resolve(Z).then(function(B){E({value:B,done:W})},k)}},_=function(v,g){return Object.defineProperty?Object.defineProperty(v,"raw",{value:g}):v.raw=g,v},A=function(v){if(v&&v.__esModule)return v;var g={};if(v!=null)for(var P in v)Object.hasOwnProperty.call(v,P)&&(g[P]=v[P]);return g.default=v,g},I=function(v){return v&&v.__esModule?v:{default:v}},D=function(v,g){if(!g.has(v))throw new TypeError("attempted to get private field on non-instance");return g.get(v)},w=function(v,g,P){if(!g.has(v))throw new TypeError("attempted to set private field on non-instance");return g.set(v,P),P},b("__extends",t),b("__assign",n),b("__rest",s),b("__decorate",o),b("__param",c),b("__metadata",f),b("__awaiter",h),b("__generator",O),b("__exportStar",p),b("__createBinding",u),b("__values",S),b("__read",C),b("__spread",R),b("__spreadArrays",U),b("__await",x),b("__asyncGenerator",F),b("__asyncDelegator",q),b("__asyncValues",te),b("__makeTemplateObject",_),b("__importStar",A),b("__importDefault",I),b("__classPrivateFieldGet",D),b("__classPrivateFieldSet",w)})}(Sl)),Sl.exports}var Ol,Cg;function Z$(){if(Cg)return Ol;Cg=1;function e(n){try{return JSON.stringify(n)}catch{return'"[Circular]"'}}Ol=t;function t(n,s,o){var c=o&&o.stringify||e,f=1;if(typeof n=="object"&&n!==null){var h=s.length+f;if(h===1)return n;var O=new Array(h);O[0]=c(n);for(var p=1;p<h;p++)O[p]=c(s[p]);return O.join(" ")}if(typeof n!="string")return n;var S=s.length;if(S===0)return n;for(var C="",R=1-f,U=-1,x=n&&n.length||0,F=0;F<x;){if(n.charCodeAt(F)===37&&F+1<x){switch(U=U>-1?U:0,n.charCodeAt(F+1)){case 100:case 102:if(R>=S||s[R]==null)break;U<F&&(C+=n.slice(U,F)),C+=Number(s[R]),U=F+2,F++;break;case 105:if(R>=S||s[R]==null)break;U<F&&(C+=n.slice(U,F)),C+=Math.floor(Number(s[R])),U=F+2,F++;break;case 79:case 111:case 106:if(R>=S||s[R]===void 0)break;U<F&&(C+=n.slice(U,F));var q=typeof s[R];if(q==="string"){C+="'"+s[R]+"'",U=F+2,F++;break}if(q==="function"){C+=s[R].name||"<anonymous>",U=F+2,F++;break}C+=c(s[R]),U=F+2,F++;break;case 115:if(R>=S)break;U<F&&(C+=n.slice(U,F)),C+=String(s[R]),U=F+2,F++;break;case 37:U<F&&(C+=n.slice(U,F)),C+="%",U=F+2,F++,R--;break}++R}++F}return U===-1?n:(U<x&&(C+=n.slice(U)),C)}return Ol}var Il,Ag;function e6(){if(Ag)return Il;Ag=1;const e=Z$();Il=o;const t=D().console||{},n={mapHttpRequest:x,mapHttpResponse:x,wrapRequestSerializer:F,wrapResponseSerializer:F,wrapErrorSerializer:F,req:x,res:x,err:R};function s(w,u){return Array.isArray(w)?w.filter(function(K){return K!=="!stdSerializers.err"}):w===!0?Object.keys(u):!1}function o(w){w=w||{},w.browser=w.browser||{};const u=w.browser.transmit;if(u&&typeof u.send!="function")throw Error("pino: transmit option must have a send function");const b=w.browser.write||t;w.browser.write&&(w.browser.asObject=!0);const K=w.serializers||{},v=s(w.browser.serialize,K);let g=w.browser.serialize;Array.isArray(w.browser.serialize)&&w.browser.serialize.indexOf("!stdSerializers.err")>-1&&(g=!1);const P=["error","fatal","warn","info","debug","trace"];typeof b=="function"&&(b.error=b.fatal=b.warn=b.info=b.debug=b.trace=b),w.enabled===!1&&(w.level="silent");const L=w.level||"info",y=Object.create(b);y.log||(y.log=q),Object.defineProperty(y,"levelVal",{get:k}),Object.defineProperty(y,"level",{get:W,set:Z});const E={transmit:u,serialize:v,asObject:w.browser.asObject,levels:P,timestamp:U(w)};y.levels=o.levels,y.level=L,y.setMaxListeners=y.getMaxListeners=y.emit=y.addListener=y.on=y.prependListener=y.once=y.prependOnceListener=y.removeListener=y.removeAllListeners=y.listeners=y.listenerCount=y.eventNames=y.write=y.flush=q,y.serializers=K,y._serialize=v,y._stdErrSerialize=g,y.child=B,u&&(y._logEvent=C());function k(){return this.level==="silent"?1/0:this.levels.values[this.level]}function W(){return this._level}function Z(ee){if(ee!=="silent"&&!this.levels.values[ee])throw Error("unknown level "+ee);this._level=ee,c(E,y,"error","log"),c(E,y,"fatal","error"),c(E,y,"warn","error"),c(E,y,"info","log"),c(E,y,"debug","log"),c(E,y,"trace","log")}function B(ee,oe){if(!ee)throw new Error("missing bindings for child Pino");oe=oe||{},v&&ee.serializers&&(oe.serializers=ee.serializers);const de=oe.serializers;if(v&&de){var ie=Object.assign({},K,de),Ie=w.browser.serialize===!0?Object.keys(ie):v;delete ee.serializers,O([ee],Ie,ie,this._stdErrSerialize)}function be(Ce){this._childLevel=(Ce._childLevel|0)+1,this.error=p(Ce,ee,"error"),this.fatal=p(Ce,ee,"fatal"),this.warn=p(Ce,ee,"warn"),this.info=p(Ce,ee,"info"),this.debug=p(Ce,ee,"debug"),this.trace=p(Ce,ee,"trace"),ie&&(this.serializers=ie,this._serialize=Ie),u&&(this._logEvent=C([].concat(Ce._logEvent.bindings,ee)))}return be.prototype=this,new be(this)}return y}o.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},o.stdSerializers=n,o.stdTimeFunctions=Object.assign({},{nullTime:te,epochTime:_,unixTime:A,isoTime:I});function c(w,u,b,K){const v=Object.getPrototypeOf(u);u[b]=u.levelVal>u.levels.values[b]?q:v[b]?v[b]:t[b]||t[K]||q,f(w,u,b)}function f(w,u,b){!w.transmit&&u[b]===q||(u[b]=function(K){return function(){const g=w.timestamp(),P=new Array(arguments.length),L=Object.getPrototypeOf&&Object.getPrototypeOf(this)===t?t:this;for(var y=0;y<P.length;y++)P[y]=arguments[y];if(w.serialize&&!w.asObject&&O(P,this._serialize,this.serializers,this._stdErrSerialize),w.asObject?K.call(L,h(this,b,P,g)):K.apply(L,P),w.transmit){const E=w.transmit.level||u.level,k=o.levels.values[E],W=o.levels.values[b];if(W<k)return;S(this,{ts:g,methodLevel:b,methodValue:W,transmitLevel:E,transmitValue:o.levels.values[w.transmit.level||u.level],send:w.transmit.send,val:u.levelVal},P)}}}(u[b]))}function h(w,u,b,K){w._serialize&&O(b,w._serialize,w.serializers,w._stdErrSerialize);const v=b.slice();let g=v[0];const P={};K&&(P.time=K),P.level=o.levels.values[u];let L=(w._childLevel|0)+1;if(L<1&&(L=1),g!==null&&typeof g=="object"){for(;L--&&typeof v[0]=="object";)Object.assign(P,v.shift());g=v.length?e(v.shift(),v):void 0}else typeof g=="string"&&(g=e(v.shift(),v));return g!==void 0&&(P.msg=g),P}function O(w,u,b,K){for(const v in w)if(K&&w[v]instanceof Error)w[v]=o.stdSerializers.err(w[v]);else if(typeof w[v]=="object"&&!Array.isArray(w[v]))for(const g in w[v])u&&u.indexOf(g)>-1&&g in b&&(w[v][g]=b[g](w[v][g]))}function p(w,u,b){return function(){const K=new Array(1+arguments.length);K[0]=u;for(var v=1;v<K.length;v++)K[v]=arguments[v-1];return w[b].apply(this,K)}}function S(w,u,b){const K=u.send,v=u.ts,g=u.methodLevel,P=u.methodValue,L=u.val,y=w._logEvent.bindings;O(b,w._serialize||Object.keys(w.serializers),w.serializers,w._stdErrSerialize===void 0?!0:w._stdErrSerialize),w._logEvent.ts=v,w._logEvent.messages=b.filter(function(E){return y.indexOf(E)===-1}),w._logEvent.level.label=g,w._logEvent.level.value=P,K(g,w._logEvent,L),w._logEvent=C(y)}function C(w){return{ts:0,messages:[],bindings:w||[],level:{label:"",value:0}}}function R(w){const u={type:w.constructor.name,msg:w.message,stack:w.stack};for(const b in w)u[b]===void 0&&(u[b]=w[b]);return u}function U(w){return typeof w.timestamp=="function"?w.timestamp:w.timestamp===!1?te:_}function x(){return{}}function F(w){return w}function q(){}function te(){return!1}function _(){return Date.now()}function A(){return Math.round(Date.now()/1e3)}function I(){return new Date(Date.now()).toISOString()}function D(){function w(u){return typeof u<"u"&&u}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return w(self)||w(window)||w(this)||{}}}return Il}var Mi={},Tg;function Pm(){return Tg||(Tg=1,Object.defineProperty(Mi,"__esModule",{value:!0}),Mi.PINO_CUSTOM_CONTEXT_KEY=Mi.PINO_LOGGER_DEFAULTS=void 0,Mi.PINO_LOGGER_DEFAULTS={level:"info"},Mi.PINO_CUSTOM_CONTEXT_KEY="custom_context"),Mi}var br={},xg;function t6(){if(xg)return br;xg=1,Object.defineProperty(br,"__esModule",{value:!0}),br.generateChildLogger=br.formatChildLoggerContext=br.getLoggerContext=br.setBrowserLoggerContext=br.getBrowserLoggerContext=br.getDefaultLoggerOptions=void 0;const e=Pm();function t(h){return Object.assign(Object.assign({},h),{level:h?.level||e.PINO_LOGGER_DEFAULTS.level})}br.getDefaultLoggerOptions=t;function n(h,O=e.PINO_CUSTOM_CONTEXT_KEY){return h[O]||""}br.getBrowserLoggerContext=n;function s(h,O,p=e.PINO_CUSTOM_CONTEXT_KEY){return h[p]=O,h}br.setBrowserLoggerContext=s;function o(h,O=e.PINO_CUSTOM_CONTEXT_KEY){let p="";return typeof h.bindings>"u"?p=n(h,O):p=h.bindings().context||"",p}br.getLoggerContext=o;function c(h,O,p=e.PINO_CUSTOM_CONTEXT_KEY){const S=o(h,p);return S.trim()?`${S}/${O}`:O}br.formatChildLoggerContext=c;function f(h,O,p=e.PINO_CUSTOM_CONTEXT_KEY){const S=c(h,O,p),C=h.child({context:S});return s(C,S,p)}return br.generateChildLogger=f,br}var Rg;function $m(){return Rg||(Rg=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.pino=void 0;const t=Q$(),n=t.__importDefault(e6());Object.defineProperty(e,"pino",{enumerable:!0,get:function(){return n.default}}),t.__exportStar(Pm(),e),t.__exportStar(t6(),e)}(El)),El}var nt=$m();class r6 extends Qi{constructor(t){super(),this.opts=t,this.protocol="wc",this.version=2}}class n6 extends Qi{constructor(t,n){super(),this.core=t,this.logger=n,this.records=new Map}}class i6{constructor(t,n){this.logger=t,this.core=n}}class s6 extends Qi{constructor(t,n){super(),this.relayer=t,this.logger=n}}class o6 extends Qi{constructor(t){super()}}class a6{constructor(t,n,s,o){this.core=t,this.logger=n,this.name=s}}class c6 extends Qi{constructor(t,n){super(),this.relayer=t,this.logger=n}}class u6 extends Qi{constructor(t,n){super(),this.core=t,this.logger=n}}class l6{constructor(t,n){this.projectId=t,this.logger=n}}class h6{constructor(t,n){this.projectId=t,this.logger=n}}class f6{constructor(t){this.opts=t,this.protocol="wc",this.version=2}}class d6{constructor(t){this.client=t}}const p6=e=>JSON.stringify(e,(t,n)=>typeof n=="bigint"?n.toString()+"n":n),g6=e=>{const t=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=e.replace(t,'$1"$2n"$3');return JSON.parse(n,(s,o)=>typeof o=="string"&&o.match(/^\d+n$/)?BigInt(o.substring(0,o.length-1)):o)};function y6(e){if(typeof e!="string")throw new Error(`Cannot safe json parse value of type ${typeof e}`);try{return g6(e)}catch{return e}}function m6(e){return typeof e=="string"?e:p6(e)||""}var Bh={},Nm={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=Ue,n=Kr;e.DIGEST_LENGTH=64,e.BLOCK_SIZE=128;var s=function(){function h(){this.digestLength=e.DIGEST_LENGTH,this.blockSize=e.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return h.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},h.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},h.prototype.clean=function(){n.wipe(this._buffer),n.wipe(this._tempHi),n.wipe(this._tempLo),this.reset()},h.prototype.update=function(O,p){if(p===void 0&&(p=O.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var S=0;if(this._bytesHashed+=p,this._bufferLength>0){for(;this._bufferLength<e.BLOCK_SIZE&&p>0;)this._buffer[this._bufferLength++]=O[S++],p--;this._bufferLength===this.blockSize&&(c(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(p>=this.blockSize&&(S=c(this._tempHi,this._tempLo,this._stateHi,this._stateLo,O,S,p),p%=this.blockSize);p>0;)this._buffer[this._bufferLength++]=O[S++],p--;return this},h.prototype.finish=function(O){if(!this._finished){var p=this._bytesHashed,S=this._bufferLength,C=p/536870912|0,R=p<<3,U=p%128<112?128:256;this._buffer[S]=128;for(var x=S+1;x<U-8;x++)this._buffer[x]=0;t.writeUint32BE(C,this._buffer,U-8),t.writeUint32BE(R,this._buffer,U-4),c(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,U),this._finished=!0}for(var x=0;x<this.digestLength/8;x++)t.writeUint32BE(this._stateHi[x],O,x*8),t.writeUint32BE(this._stateLo[x],O,x*8+4);return this},h.prototype.digest=function(){var O=new Uint8Array(this.digestLength);return this.finish(O),O},h.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},h.prototype.restoreState=function(O){return this._stateHi.set(O.stateHi),this._stateLo.set(O.stateLo),this._bufferLength=O.bufferLength,O.buffer&&this._buffer.set(O.buffer),this._bytesHashed=O.bytesHashed,this._finished=!1,this},h.prototype.cleanSavedState=function(O){n.wipe(O.stateHi),n.wipe(O.stateLo),O.buffer&&n.wipe(O.buffer),O.bufferLength=0,O.bytesHashed=0},h}();e.SHA512=s;var o=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function c(h,O,p,S,C,R,U){for(var x=p[0],F=p[1],q=p[2],te=p[3],_=p[4],A=p[5],I=p[6],D=p[7],w=S[0],u=S[1],b=S[2],K=S[3],v=S[4],g=S[5],P=S[6],L=S[7],y,E,k,W,Z,B,ee,oe;U>=128;){for(var de=0;de<16;de++){var ie=8*de+R;h[de]=t.readUint32BE(C,ie),O[de]=t.readUint32BE(C,ie+4)}for(var de=0;de<80;de++){var Ie=x,be=F,Ce=q,ne=te,re=_,J=A,d=I,z=D,ge=w,Ee=u,ze=b,Qe=K,Ve=v,tt=g,Pt=P,St=L;if(y=D,E=L,Z=E&65535,B=E>>>16,ee=y&65535,oe=y>>>16,y=(_>>>14|v<<32-14)^(_>>>18|v<<32-18)^(v>>>41-32|_<<32-(41-32)),E=(v>>>14|_<<32-14)^(v>>>18|_<<32-18)^(_>>>41-32|v<<32-(41-32)),Z+=E&65535,B+=E>>>16,ee+=y&65535,oe+=y>>>16,y=_&A^~_&I,E=v&g^~v&P,Z+=E&65535,B+=E>>>16,ee+=y&65535,oe+=y>>>16,y=o[de*2],E=o[de*2+1],Z+=E&65535,B+=E>>>16,ee+=y&65535,oe+=y>>>16,y=h[de%16],E=O[de%16],Z+=E&65535,B+=E>>>16,ee+=y&65535,oe+=y>>>16,B+=Z>>>16,ee+=B>>>16,oe+=ee>>>16,k=ee&65535|oe<<16,W=Z&65535|B<<16,y=k,E=W,Z=E&65535,B=E>>>16,ee=y&65535,oe=y>>>16,y=(x>>>28|w<<32-28)^(w>>>34-32|x<<32-(34-32))^(w>>>39-32|x<<32-(39-32)),E=(w>>>28|x<<32-28)^(x>>>34-32|w<<32-(34-32))^(x>>>39-32|w<<32-(39-32)),Z+=E&65535,B+=E>>>16,ee+=y&65535,oe+=y>>>16,y=x&F^x&q^F&q,E=w&u^w&b^u&b,Z+=E&65535,B+=E>>>16,ee+=y&65535,oe+=y>>>16,B+=Z>>>16,ee+=B>>>16,oe+=ee>>>16,z=ee&65535|oe<<16,St=Z&65535|B<<16,y=ne,E=Qe,Z=E&65535,B=E>>>16,ee=y&65535,oe=y>>>16,y=k,E=W,Z+=E&65535,B+=E>>>16,ee+=y&65535,oe+=y>>>16,B+=Z>>>16,ee+=B>>>16,oe+=ee>>>16,ne=ee&65535|oe<<16,Qe=Z&65535|B<<16,F=Ie,q=be,te=Ce,_=ne,A=re,I=J,D=d,x=z,u=ge,b=Ee,K=ze,v=Qe,g=Ve,P=tt,L=Pt,w=St,de%16===15)for(var ie=0;ie<16;ie++)y=h[ie],E=O[ie],Z=E&65535,B=E>>>16,ee=y&65535,oe=y>>>16,y=h[(ie+9)%16],E=O[(ie+9)%16],Z+=E&65535,B+=E>>>16,ee+=y&65535,oe+=y>>>16,k=h[(ie+1)%16],W=O[(ie+1)%16],y=(k>>>1|W<<32-1)^(k>>>8|W<<32-8)^k>>>7,E=(W>>>1|k<<32-1)^(W>>>8|k<<32-8)^(W>>>7|k<<32-7),Z+=E&65535,B+=E>>>16,ee+=y&65535,oe+=y>>>16,k=h[(ie+14)%16],W=O[(ie+14)%16],y=(k>>>19|W<<32-19)^(W>>>61-32|k<<32-(61-32))^k>>>6,E=(W>>>19|k<<32-19)^(k>>>61-32|W<<32-(61-32))^(W>>>6|k<<32-6),Z+=E&65535,B+=E>>>16,ee+=y&65535,oe+=y>>>16,B+=Z>>>16,ee+=B>>>16,oe+=ee>>>16,h[ie]=ee&65535|oe<<16,O[ie]=Z&65535|B<<16}y=x,E=w,Z=E&65535,B=E>>>16,ee=y&65535,oe=y>>>16,y=p[0],E=S[0],Z+=E&65535,B+=E>>>16,ee+=y&65535,oe+=y>>>16,B+=Z>>>16,ee+=B>>>16,oe+=ee>>>16,p[0]=x=ee&65535|oe<<16,S[0]=w=Z&65535|B<<16,y=F,E=u,Z=E&65535,B=E>>>16,ee=y&65535,oe=y>>>16,y=p[1],E=S[1],Z+=E&65535,B+=E>>>16,ee+=y&65535,oe+=y>>>16,B+=Z>>>16,ee+=B>>>16,oe+=ee>>>16,p[1]=F=ee&65535|oe<<16,S[1]=u=Z&65535|B<<16,y=q,E=b,Z=E&65535,B=E>>>16,ee=y&65535,oe=y>>>16,y=p[2],E=S[2],Z+=E&65535,B+=E>>>16,ee+=y&65535,oe+=y>>>16,B+=Z>>>16,ee+=B>>>16,oe+=ee>>>16,p[2]=q=ee&65535|oe<<16,S[2]=b=Z&65535|B<<16,y=te,E=K,Z=E&65535,B=E>>>16,ee=y&65535,oe=y>>>16,y=p[3],E=S[3],Z+=E&65535,B+=E>>>16,ee+=y&65535,oe+=y>>>16,B+=Z>>>16,ee+=B>>>16,oe+=ee>>>16,p[3]=te=ee&65535|oe<<16,S[3]=K=Z&65535|B<<16,y=_,E=v,Z=E&65535,B=E>>>16,ee=y&65535,oe=y>>>16,y=p[4],E=S[4],Z+=E&65535,B+=E>>>16,ee+=y&65535,oe+=y>>>16,B+=Z>>>16,ee+=B>>>16,oe+=ee>>>16,p[4]=_=ee&65535|oe<<16,S[4]=v=Z&65535|B<<16,y=A,E=g,Z=E&65535,B=E>>>16,ee=y&65535,oe=y>>>16,y=p[5],E=S[5],Z+=E&65535,B+=E>>>16,ee+=y&65535,oe+=y>>>16,B+=Z>>>16,ee+=B>>>16,oe+=ee>>>16,p[5]=A=ee&65535|oe<<16,S[5]=g=Z&65535|B<<16,y=I,E=P,Z=E&65535,B=E>>>16,ee=y&65535,oe=y>>>16,y=p[6],E=S[6],Z+=E&65535,B+=E>>>16,ee+=y&65535,oe+=y>>>16,B+=Z>>>16,ee+=B>>>16,oe+=ee>>>16,p[6]=I=ee&65535|oe<<16,S[6]=P=Z&65535|B<<16,y=D,E=L,Z=E&65535,B=E>>>16,ee=y&65535,oe=y>>>16,y=p[7],E=S[7],Z+=E&65535,B+=E>>>16,ee+=y&65535,oe+=y>>>16,B+=Z>>>16,ee+=B>>>16,oe+=ee>>>16,p[7]=D=ee&65535|oe<<16,S[7]=L=Z&65535|B<<16,R+=128,U-=128}return R}function f(h){var O=new s;O.update(h);var p=O.digest();return O.clean(),p}e.hash=f})(Nm);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.convertSecretKeyToX25519=e.convertPublicKeyToX25519=e.verify=e.sign=e.extractPublicKeyFromSecretKey=e.generateKeyPair=e.generateKeyPairFromSeed=e.SEED_LENGTH=e.SECRET_KEY_LENGTH=e.PUBLIC_KEY_LENGTH=e.SIGNATURE_LENGTH=void 0;const t=$n,n=Nm,s=Kr;e.SIGNATURE_LENGTH=64,e.PUBLIC_KEY_LENGTH=32,e.SECRET_KEY_LENGTH=64,e.SEED_LENGTH=32;function o(ne){const re=new Float64Array(16);if(ne)for(let J=0;J<ne.length;J++)re[J]=ne[J];return re}const c=new Uint8Array(32);c[0]=9;const f=o(),h=o([1]),O=o([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),p=o([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),S=o([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),C=o([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),R=o([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function U(ne,re){for(let J=0;J<16;J++)ne[J]=re[J]|0}function x(ne){let re=1;for(let J=0;J<16;J++){let d=ne[J]+re+65535;re=Math.floor(d/65536),ne[J]=d-re*65536}ne[0]+=re-1+37*(re-1)}function F(ne,re,J){const d=~(J-1);for(let z=0;z<16;z++){const ge=d&(ne[z]^re[z]);ne[z]^=ge,re[z]^=ge}}function q(ne,re){const J=o(),d=o();for(let z=0;z<16;z++)d[z]=re[z];x(d),x(d),x(d);for(let z=0;z<2;z++){J[0]=d[0]-65517;for(let Ee=1;Ee<15;Ee++)J[Ee]=d[Ee]-65535-(J[Ee-1]>>16&1),J[Ee-1]&=65535;J[15]=d[15]-32767-(J[14]>>16&1);const ge=J[15]>>16&1;J[14]&=65535,F(d,J,1-ge)}for(let z=0;z<16;z++)ne[2*z]=d[z]&255,ne[2*z+1]=d[z]>>8}function te(ne,re){let J=0;for(let d=0;d<32;d++)J|=ne[d]^re[d];return(1&J-1>>>8)-1}function _(ne,re){const J=new Uint8Array(32),d=new Uint8Array(32);return q(J,ne),q(d,re),te(J,d)}function A(ne){const re=new Uint8Array(32);return q(re,ne),re[0]&1}function I(ne,re){for(let J=0;J<16;J++)ne[J]=re[2*J]+(re[2*J+1]<<8);ne[15]&=32767}function D(ne,re,J){for(let d=0;d<16;d++)ne[d]=re[d]+J[d]}function w(ne,re,J){for(let d=0;d<16;d++)ne[d]=re[d]-J[d]}function u(ne,re,J){let d,z,ge=0,Ee=0,ze=0,Qe=0,Ve=0,tt=0,Pt=0,St=0,Be=0,qe=0,Le=0,He=0,he=0,$=0,m=0,G=0,ce=0,_e=0,ye=0,Ae=0,Ke=0,et=0,We=0,je=0,Rt=0,er=0,fr=0,Wt=0,Ft=0,Rr=0,mi=0,it=J[0],ut=J[1],st=J[2],dt=J[3],at=J[4],ht=J[5],Ct=J[6],Bt=J[7],qt=J[8],Ht=J[9],kt=J[10],At=J[11],Tt=J[12],mt=J[13],vt=J[14],pt=J[15];d=re[0],ge+=d*it,Ee+=d*ut,ze+=d*st,Qe+=d*dt,Ve+=d*at,tt+=d*ht,Pt+=d*Ct,St+=d*Bt,Be+=d*qt,qe+=d*Ht,Le+=d*kt,He+=d*At,he+=d*Tt,$+=d*mt,m+=d*vt,G+=d*pt,d=re[1],Ee+=d*it,ze+=d*ut,Qe+=d*st,Ve+=d*dt,tt+=d*at,Pt+=d*ht,St+=d*Ct,Be+=d*Bt,qe+=d*qt,Le+=d*Ht,He+=d*kt,he+=d*At,$+=d*Tt,m+=d*mt,G+=d*vt,ce+=d*pt,d=re[2],ze+=d*it,Qe+=d*ut,Ve+=d*st,tt+=d*dt,Pt+=d*at,St+=d*ht,Be+=d*Ct,qe+=d*Bt,Le+=d*qt,He+=d*Ht,he+=d*kt,$+=d*At,m+=d*Tt,G+=d*mt,ce+=d*vt,_e+=d*pt,d=re[3],Qe+=d*it,Ve+=d*ut,tt+=d*st,Pt+=d*dt,St+=d*at,Be+=d*ht,qe+=d*Ct,Le+=d*Bt,He+=d*qt,he+=d*Ht,$+=d*kt,m+=d*At,G+=d*Tt,ce+=d*mt,_e+=d*vt,ye+=d*pt,d=re[4],Ve+=d*it,tt+=d*ut,Pt+=d*st,St+=d*dt,Be+=d*at,qe+=d*ht,Le+=d*Ct,He+=d*Bt,he+=d*qt,$+=d*Ht,m+=d*kt,G+=d*At,ce+=d*Tt,_e+=d*mt,ye+=d*vt,Ae+=d*pt,d=re[5],tt+=d*it,Pt+=d*ut,St+=d*st,Be+=d*dt,qe+=d*at,Le+=d*ht,He+=d*Ct,he+=d*Bt,$+=d*qt,m+=d*Ht,G+=d*kt,ce+=d*At,_e+=d*Tt,ye+=d*mt,Ae+=d*vt,Ke+=d*pt,d=re[6],Pt+=d*it,St+=d*ut,Be+=d*st,qe+=d*dt,Le+=d*at,He+=d*ht,he+=d*Ct,$+=d*Bt,m+=d*qt,G+=d*Ht,ce+=d*kt,_e+=d*At,ye+=d*Tt,Ae+=d*mt,Ke+=d*vt,et+=d*pt,d=re[7],St+=d*it,Be+=d*ut,qe+=d*st,Le+=d*dt,He+=d*at,he+=d*ht,$+=d*Ct,m+=d*Bt,G+=d*qt,ce+=d*Ht,_e+=d*kt,ye+=d*At,Ae+=d*Tt,Ke+=d*mt,et+=d*vt,We+=d*pt,d=re[8],Be+=d*it,qe+=d*ut,Le+=d*st,He+=d*dt,he+=d*at,$+=d*ht,m+=d*Ct,G+=d*Bt,ce+=d*qt,_e+=d*Ht,ye+=d*kt,Ae+=d*At,Ke+=d*Tt,et+=d*mt,We+=d*vt,je+=d*pt,d=re[9],qe+=d*it,Le+=d*ut,He+=d*st,he+=d*dt,$+=d*at,m+=d*ht,G+=d*Ct,ce+=d*Bt,_e+=d*qt,ye+=d*Ht,Ae+=d*kt,Ke+=d*At,et+=d*Tt,We+=d*mt,je+=d*vt,Rt+=d*pt,d=re[10],Le+=d*it,He+=d*ut,he+=d*st,$+=d*dt,m+=d*at,G+=d*ht,ce+=d*Ct,_e+=d*Bt,ye+=d*qt,Ae+=d*Ht,Ke+=d*kt,et+=d*At,We+=d*Tt,je+=d*mt,Rt+=d*vt,er+=d*pt,d=re[11],He+=d*it,he+=d*ut,$+=d*st,m+=d*dt,G+=d*at,ce+=d*ht,_e+=d*Ct,ye+=d*Bt,Ae+=d*qt,Ke+=d*Ht,et+=d*kt,We+=d*At,je+=d*Tt,Rt+=d*mt,er+=d*vt,fr+=d*pt,d=re[12],he+=d*it,$+=d*ut,m+=d*st,G+=d*dt,ce+=d*at,_e+=d*ht,ye+=d*Ct,Ae+=d*Bt,Ke+=d*qt,et+=d*Ht,We+=d*kt,je+=d*At,Rt+=d*Tt,er+=d*mt,fr+=d*vt,Wt+=d*pt,d=re[13],$+=d*it,m+=d*ut,G+=d*st,ce+=d*dt,_e+=d*at,ye+=d*ht,Ae+=d*Ct,Ke+=d*Bt,et+=d*qt,We+=d*Ht,je+=d*kt,Rt+=d*At,er+=d*Tt,fr+=d*mt,Wt+=d*vt,Ft+=d*pt,d=re[14],m+=d*it,G+=d*ut,ce+=d*st,_e+=d*dt,ye+=d*at,Ae+=d*ht,Ke+=d*Ct,et+=d*Bt,We+=d*qt,je+=d*Ht,Rt+=d*kt,er+=d*At,fr+=d*Tt,Wt+=d*mt,Ft+=d*vt,Rr+=d*pt,d=re[15],G+=d*it,ce+=d*ut,_e+=d*st,ye+=d*dt,Ae+=d*at,Ke+=d*ht,et+=d*Ct,We+=d*Bt,je+=d*qt,Rt+=d*Ht,er+=d*kt,fr+=d*At,Wt+=d*Tt,Ft+=d*mt,Rr+=d*vt,mi+=d*pt,ge+=38*ce,Ee+=38*_e,ze+=38*ye,Qe+=38*Ae,Ve+=38*Ke,tt+=38*et,Pt+=38*We,St+=38*je,Be+=38*Rt,qe+=38*er,Le+=38*fr,He+=38*Wt,he+=38*Ft,$+=38*Rr,m+=38*mi,z=1,d=ge+z+65535,z=Math.floor(d/65536),ge=d-z*65536,d=Ee+z+65535,z=Math.floor(d/65536),Ee=d-z*65536,d=ze+z+65535,z=Math.floor(d/65536),ze=d-z*65536,d=Qe+z+65535,z=Math.floor(d/65536),Qe=d-z*65536,d=Ve+z+65535,z=Math.floor(d/65536),Ve=d-z*65536,d=tt+z+65535,z=Math.floor(d/65536),tt=d-z*65536,d=Pt+z+65535,z=Math.floor(d/65536),Pt=d-z*65536,d=St+z+65535,z=Math.floor(d/65536),St=d-z*65536,d=Be+z+65535,z=Math.floor(d/65536),Be=d-z*65536,d=qe+z+65535,z=Math.floor(d/65536),qe=d-z*65536,d=Le+z+65535,z=Math.floor(d/65536),Le=d-z*65536,d=He+z+65535,z=Math.floor(d/65536),He=d-z*65536,d=he+z+65535,z=Math.floor(d/65536),he=d-z*65536,d=$+z+65535,z=Math.floor(d/65536),$=d-z*65536,d=m+z+65535,z=Math.floor(d/65536),m=d-z*65536,d=G+z+65535,z=Math.floor(d/65536),G=d-z*65536,ge+=z-1+37*(z-1),z=1,d=ge+z+65535,z=Math.floor(d/65536),ge=d-z*65536,d=Ee+z+65535,z=Math.floor(d/65536),Ee=d-z*65536,d=ze+z+65535,z=Math.floor(d/65536),ze=d-z*65536,d=Qe+z+65535,z=Math.floor(d/65536),Qe=d-z*65536,d=Ve+z+65535,z=Math.floor(d/65536),Ve=d-z*65536,d=tt+z+65535,z=Math.floor(d/65536),tt=d-z*65536,d=Pt+z+65535,z=Math.floor(d/65536),Pt=d-z*65536,d=St+z+65535,z=Math.floor(d/65536),St=d-z*65536,d=Be+z+65535,z=Math.floor(d/65536),Be=d-z*65536,d=qe+z+65535,z=Math.floor(d/65536),qe=d-z*65536,d=Le+z+65535,z=Math.floor(d/65536),Le=d-z*65536,d=He+z+65535,z=Math.floor(d/65536),He=d-z*65536,d=he+z+65535,z=Math.floor(d/65536),he=d-z*65536,d=$+z+65535,z=Math.floor(d/65536),$=d-z*65536,d=m+z+65535,z=Math.floor(d/65536),m=d-z*65536,d=G+z+65535,z=Math.floor(d/65536),G=d-z*65536,ge+=z-1+37*(z-1),ne[0]=ge,ne[1]=Ee,ne[2]=ze,ne[3]=Qe,ne[4]=Ve,ne[5]=tt,ne[6]=Pt,ne[7]=St,ne[8]=Be,ne[9]=qe,ne[10]=Le,ne[11]=He,ne[12]=he,ne[13]=$,ne[14]=m,ne[15]=G}function b(ne,re){u(ne,re,re)}function K(ne,re){const J=o();let d;for(d=0;d<16;d++)J[d]=re[d];for(d=253;d>=0;d--)b(J,J),d!==2&&d!==4&&u(J,J,re);for(d=0;d<16;d++)ne[d]=J[d]}function v(ne,re){const J=o();let d;for(d=0;d<16;d++)J[d]=re[d];for(d=250;d>=0;d--)b(J,J),d!==1&&u(J,J,re);for(d=0;d<16;d++)ne[d]=J[d]}function g(ne,re){const J=o(),d=o(),z=o(),ge=o(),Ee=o(),ze=o(),Qe=o(),Ve=o(),tt=o();w(J,ne[1],ne[0]),w(tt,re[1],re[0]),u(J,J,tt),D(d,ne[0],ne[1]),D(tt,re[0],re[1]),u(d,d,tt),u(z,ne[3],re[3]),u(z,z,p),u(ge,ne[2],re[2]),D(ge,ge,ge),w(Ee,d,J),w(ze,ge,z),D(Qe,ge,z),D(Ve,d,J),u(ne[0],Ee,ze),u(ne[1],Ve,Qe),u(ne[2],Qe,ze),u(ne[3],Ee,Ve)}function P(ne,re,J){for(let d=0;d<4;d++)F(ne[d],re[d],J)}function L(ne,re){const J=o(),d=o(),z=o();K(z,re[2]),u(J,re[0],z),u(d,re[1],z),q(ne,d),ne[31]^=A(J)<<7}function y(ne,re,J){U(ne[0],f),U(ne[1],h),U(ne[2],h),U(ne[3],f);for(let d=255;d>=0;--d){const z=J[d/8|0]>>(d&7)&1;P(ne,re,z),g(re,ne),g(ne,ne),P(ne,re,z)}}function E(ne,re){const J=[o(),o(),o(),o()];U(J[0],S),U(J[1],C),U(J[2],h),u(J[3],S,C),y(ne,J,re)}function k(ne){if(ne.length!==e.SEED_LENGTH)throw new Error(`ed25519: seed must be ${e.SEED_LENGTH} bytes`);const re=(0,n.hash)(ne);re[0]&=248,re[31]&=127,re[31]|=64;const J=new Uint8Array(32),d=[o(),o(),o(),o()];E(d,re),L(J,d);const z=new Uint8Array(64);return z.set(ne),z.set(J,32),{publicKey:J,secretKey:z}}e.generateKeyPairFromSeed=k;function W(ne){const re=(0,t.randomBytes)(32,ne),J=k(re);return(0,s.wipe)(re),J}e.generateKeyPair=W;function Z(ne){if(ne.length!==e.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${e.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(ne.subarray(32))}e.extractPublicKeyFromSecretKey=Z;const B=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function ee(ne,re){let J,d,z,ge;for(d=63;d>=32;--d){for(J=0,z=d-32,ge=d-12;z<ge;++z)re[z]+=J-16*re[d]*B[z-(d-32)],J=Math.floor((re[z]+128)/256),re[z]-=J*256;re[z]+=J,re[d]=0}for(J=0,z=0;z<32;z++)re[z]+=J-(re[31]>>4)*B[z],J=re[z]>>8,re[z]&=255;for(z=0;z<32;z++)re[z]-=J*B[z];for(d=0;d<32;d++)re[d+1]+=re[d]>>8,ne[d]=re[d]&255}function oe(ne){const re=new Float64Array(64);for(let J=0;J<64;J++)re[J]=ne[J];for(let J=0;J<64;J++)ne[J]=0;ee(ne,re)}function de(ne,re){const J=new Float64Array(64),d=[o(),o(),o(),o()],z=(0,n.hash)(ne.subarray(0,32));z[0]&=248,z[31]&=127,z[31]|=64;const ge=new Uint8Array(64);ge.set(z.subarray(32),32);const Ee=new n.SHA512;Ee.update(ge.subarray(32)),Ee.update(re);const ze=Ee.digest();Ee.clean(),oe(ze),E(d,ze),L(ge,d),Ee.reset(),Ee.update(ge.subarray(0,32)),Ee.update(ne.subarray(32)),Ee.update(re);const Qe=Ee.digest();oe(Qe);for(let Ve=0;Ve<32;Ve++)J[Ve]=ze[Ve];for(let Ve=0;Ve<32;Ve++)for(let tt=0;tt<32;tt++)J[Ve+tt]+=Qe[Ve]*z[tt];return ee(ge.subarray(32),J),ge}e.sign=de;function ie(ne,re){const J=o(),d=o(),z=o(),ge=o(),Ee=o(),ze=o(),Qe=o();return U(ne[2],h),I(ne[1],re),b(z,ne[1]),u(ge,z,O),w(z,z,ne[2]),D(ge,ne[2],ge),b(Ee,ge),b(ze,Ee),u(Qe,ze,Ee),u(J,Qe,z),u(J,J,ge),v(J,J),u(J,J,z),u(J,J,ge),u(J,J,ge),u(ne[0],J,ge),b(d,ne[0]),u(d,d,ge),_(d,z)&&u(ne[0],ne[0],R),b(d,ne[0]),u(d,d,ge),_(d,z)?-1:(A(ne[0])===re[31]>>7&&w(ne[0],f,ne[0]),u(ne[3],ne[0],ne[1]),0)}function Ie(ne,re,J){const d=new Uint8Array(32),z=[o(),o(),o(),o()],ge=[o(),o(),o(),o()];if(J.length!==e.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${e.SIGNATURE_LENGTH} bytes`);if(ie(ge,ne))return!1;const Ee=new n.SHA512;Ee.update(J.subarray(0,32)),Ee.update(ne),Ee.update(re);const ze=Ee.digest();return oe(ze),y(z,ge,ze),E(ge,J.subarray(32)),g(z,ge),L(d,z),!te(J,d)}e.verify=Ie;function be(ne){let re=[o(),o(),o(),o()];if(ie(re,ne))throw new Error("Ed25519: invalid public key");let J=o(),d=o(),z=re[1];D(J,h,z),w(d,h,z),K(d,d),u(J,J,d);let ge=new Uint8Array(32);return q(ge,J),ge}e.convertPublicKeyToX25519=be;function Ce(ne){const re=(0,n.hash)(ne.subarray(0,32));re[0]&=248,re[31]&=127,re[31]|=64;const J=new Uint8Array(re.subarray(0,32));return(0,s.wipe)(re),J}e.convertSecretKeyToX25519=Ce})(Bh);const v6="EdDSA",b6="JWT",Cm=".",Am="base64url",_6="utf8",w6="utf8",E6=":",S6="did",O6="key",jg="base58btc",I6="z",D6="K36",P6=32,$6=e=>JSON.stringify(e,(t,n)=>typeof n=="bigint"?n.toString()+"n":n);function N6(e){return typeof e=="string"?e:$6(e)||""}function ac(e){return Je(Xe(N6(e),_6),Am)}function Tm(e){const t=Xe(D6,jg),n=I6+Je(ki([t,e]),jg);return[S6,O6,n].join(E6)}function C6(e){return Je(e,Am)}function A6(e){return Xe([ac(e.header),ac(e.payload)].join(Cm),w6)}function T6(e){return[ac(e.header),ac(e.payload),C6(e.signature)].join(Cm)}function Ug(e=$n.randomBytes(P6)){return Bh.generateKeyPairFromSeed(e)}async function x6(e,t,n,s,o=we.fromMiliseconds(Date.now())){const c={alg:v6,typ:b6},f=Tm(s.publicKey),h=o+n,O={iss:f,sub:e,aud:t,iat:o,exp:h},p=A6({header:c,payload:O}),S=Bh.sign(s.secretKey,p);return T6({header:c,payload:O,signature:S})}var Lg=globalThis&&globalThis.__spreadArray||function(e,t,n){if(n||arguments.length===2)for(var s=0,o=t.length,c;s<o;s++)(c||!(s in t))&&(c||(c=Array.prototype.slice.call(t,0,s)),c[s]=t[s]);return e.concat(c||Array.prototype.slice.call(t))},R6=function(){function e(t,n,s){this.name=t,this.version=n,this.os=s,this.type="browser"}return e}(),j6=function(){function e(t){this.version=t,this.type="node",this.name="node",this.os=process.platform}return e}(),U6=function(){function e(t,n,s,o){this.name=t,this.version=n,this.os=s,this.bot=o,this.type="bot-device"}return e}(),L6=function(){function e(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return e}(),M6=function(){function e(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return e}(),F6=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,B6=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Mg=3,q6=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",F6]],Fg=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function H6(e){return e?Bg(e):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new M6:typeof navigator<"u"?Bg(navigator.userAgent):V6()}function k6(e){return e!==""&&q6.reduce(function(t,n){var s=n[0],o=n[1];if(t)return t;var c=o.exec(e);return!!c&&[s,c]},!1)}function Bg(e){var t=k6(e);if(!t)return null;var n=t[0],s=t[1];if(n==="searchbot")return new L6;var o=s[1]&&s[1].split(".").join("_").split("_").slice(0,3);o?o.length<Mg&&(o=Lg(Lg([],o,!0),K6(Mg-o.length),!0)):o=[];var c=o.join("."),f=z6(e),h=B6.exec(e);return h&&h[1]?new U6(n,c,f,h[1]):new R6(n,c,f)}function z6(e){for(var t=0,n=Fg.length;t<n;t++){var s=Fg[t],o=s[0],c=s[1],f=c.exec(e);if(f)return o}return null}function V6(){var e=typeof process<"u"&&process.version;return e?new j6(process.version.slice(1)):null}function K6(e){for(var t=[],n=0;n<e;n++)t.push("0");return t}var wt={};Object.defineProperty(wt,"__esModule",{value:!0});wt.getLocalStorage=wt.getLocalStorageOrThrow=wt.getCrypto=wt.getCryptoOrThrow=xm=wt.getLocation=wt.getLocationOrThrow=Hh=wt.getNavigator=wt.getNavigatorOrThrow=qh=wt.getDocument=wt.getDocumentOrThrow=wt.getFromWindowOrThrow=wt.getFromWindow=void 0;function Zi(e){let t;return typeof window<"u"&&typeof window[e]<"u"&&(t=window[e]),t}wt.getFromWindow=Zi;function Bs(e){const t=Zi(e);if(!t)throw new Error(`${e} is not defined in Window`);return t}wt.getFromWindowOrThrow=Bs;function W6(){return Bs("document")}wt.getDocumentOrThrow=W6;function G6(){return Zi("document")}var qh=wt.getDocument=G6;function J6(){return Bs("navigator")}wt.getNavigatorOrThrow=J6;function Y6(){return Zi("navigator")}var Hh=wt.getNavigator=Y6;function X6(){return Bs("location")}wt.getLocationOrThrow=X6;function Q6(){return Zi("location")}var xm=wt.getLocation=Q6;function Z6(){return Bs("crypto")}wt.getCryptoOrThrow=Z6;function eN(){return Zi("crypto")}wt.getCrypto=eN;function tN(){return Bs("localStorage")}wt.getLocalStorageOrThrow=tN;function rN(){return Zi("localStorage")}wt.getLocalStorage=rN;var kh={};Object.defineProperty(kh,"__esModule",{value:!0});var Rm=kh.getWindowMetadata=void 0;const qg=wt;function nN(){let e,t;try{e=qg.getDocumentOrThrow(),t=qg.getLocationOrThrow()}catch{return null}function n(){const C=e.getElementsByTagName("link"),R=[];for(let U=0;U<C.length;U++){const x=C[U],F=x.getAttribute("rel");if(F&&F.toLowerCase().indexOf("icon")>-1){const q=x.getAttribute("href");if(q)if(q.toLowerCase().indexOf("https:")===-1&&q.toLowerCase().indexOf("http:")===-1&&q.indexOf("//")!==0){let te=t.protocol+"//"+t.host;if(q.indexOf("/")===0)te+=q;else{const _=t.pathname.split("/");_.pop();const A=_.join("/");te+=A+"/"+q}R.push(te)}else if(q.indexOf("//")===0){const te=t.protocol+q;R.push(te)}else R.push(q)}}return R}function s(...C){const R=e.getElementsByTagName("meta");for(let U=0;U<R.length;U++){const x=R[U],F=["itemprop","property","name"].map(q=>x.getAttribute(q)).filter(q=>q?C.includes(q):!1);if(F.length&&F){const q=x.getAttribute("content");if(q)return q}}return""}function o(){let C=s("name","og:site_name","og:title","twitter:title");return C||(C=e.title),C}function c(){return s("description","og:description","twitter:description","keywords")}const f=o(),h=c(),O=t.origin,p=n();return{description:h,url:O,icons:p,name:f}}Rm=kh.getWindowMetadata=nN;var Co={};(function(e){const t=gh,n=yh,s=ph,o=Ph,c=_=>_==null,f=Symbol("encodeFragmentIdentifier");function h(_){switch(_.arrayFormat){case"index":return A=>(I,D)=>{const w=I.length;return D===void 0||_.skipNull&&D===null||_.skipEmptyString&&D===""?I:D===null?[...I,[S(A,_),"[",w,"]"].join("")]:[...I,[S(A,_),"[",S(w,_),"]=",S(D,_)].join("")]};case"bracket":return A=>(I,D)=>D===void 0||_.skipNull&&D===null||_.skipEmptyString&&D===""?I:D===null?[...I,[S(A,_),"[]"].join("")]:[...I,[S(A,_),"[]=",S(D,_)].join("")];case"colon-list-separator":return A=>(I,D)=>D===void 0||_.skipNull&&D===null||_.skipEmptyString&&D===""?I:D===null?[...I,[S(A,_),":list="].join("")]:[...I,[S(A,_),":list=",S(D,_)].join("")];case"comma":case"separator":case"bracket-separator":{const A=_.arrayFormat==="bracket-separator"?"[]=":"=";return I=>(D,w)=>w===void 0||_.skipNull&&w===null||_.skipEmptyString&&w===""?D:(w=w===null?"":w,D.length===0?[[S(I,_),A,S(w,_)].join("")]:[[D,S(w,_)].join(_.arrayFormatSeparator)])}default:return A=>(I,D)=>D===void 0||_.skipNull&&D===null||_.skipEmptyString&&D===""?I:D===null?[...I,S(A,_)]:[...I,[S(A,_),"=",S(D,_)].join("")]}}function O(_){let A;switch(_.arrayFormat){case"index":return(I,D,w)=>{if(A=/\[(\d*)\]$/.exec(I),I=I.replace(/\[\d*\]$/,""),!A){w[I]=D;return}w[I]===void 0&&(w[I]={}),w[I][A[1]]=D};case"bracket":return(I,D,w)=>{if(A=/(\[\])$/.exec(I),I=I.replace(/\[\]$/,""),!A){w[I]=D;return}if(w[I]===void 0){w[I]=[D];return}w[I]=[].concat(w[I],D)};case"colon-list-separator":return(I,D,w)=>{if(A=/(:list)$/.exec(I),I=I.replace(/:list$/,""),!A){w[I]=D;return}if(w[I]===void 0){w[I]=[D];return}w[I]=[].concat(w[I],D)};case"comma":case"separator":return(I,D,w)=>{const u=typeof D=="string"&&D.includes(_.arrayFormatSeparator),b=typeof D=="string"&&!u&&C(D,_).includes(_.arrayFormatSeparator);D=b?C(D,_):D;const K=u||b?D.split(_.arrayFormatSeparator).map(v=>C(v,_)):D===null?D:C(D,_);w[I]=K};case"bracket-separator":return(I,D,w)=>{const u=/(\[\])$/.test(I);if(I=I.replace(/\[\]$/,""),!u){w[I]=D&&C(D,_);return}const b=D===null?[]:D.split(_.arrayFormatSeparator).map(K=>C(K,_));if(w[I]===void 0){w[I]=b;return}w[I]=[].concat(w[I],b)};default:return(I,D,w)=>{if(w[I]===void 0){w[I]=D;return}w[I]=[].concat(w[I],D)}}}function p(_){if(typeof _!="string"||_.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function S(_,A){return A.encode?A.strict?t(_):encodeURIComponent(_):_}function C(_,A){return A.decode?n(_):_}function R(_){return Array.isArray(_)?_.sort():typeof _=="object"?R(Object.keys(_)).sort((A,I)=>Number(A)-Number(I)).map(A=>_[A]):_}function U(_){const A=_.indexOf("#");return A!==-1&&(_=_.slice(0,A)),_}function x(_){let A="";const I=_.indexOf("#");return I!==-1&&(A=_.slice(I)),A}function F(_){_=U(_);const A=_.indexOf("?");return A===-1?"":_.slice(A+1)}function q(_,A){return A.parseNumbers&&!Number.isNaN(Number(_))&&typeof _=="string"&&_.trim()!==""?_=Number(_):A.parseBooleans&&_!==null&&(_.toLowerCase()==="true"||_.toLowerCase()==="false")&&(_=_.toLowerCase()==="true"),_}function te(_,A){A=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},A),p(A.arrayFormatSeparator);const I=O(A),D=Object.create(null);if(typeof _!="string"||(_=_.trim().replace(/^[?#&]/,""),!_))return D;for(const w of _.split("&")){if(w==="")continue;let[u,b]=s(A.decode?w.replace(/\+/g," "):w,"=");b=b===void 0?null:["comma","separator","bracket-separator"].includes(A.arrayFormat)?b:C(b,A),I(C(u,A),b,D)}for(const w of Object.keys(D)){const u=D[w];if(typeof u=="object"&&u!==null)for(const b of Object.keys(u))u[b]=q(u[b],A);else D[w]=q(u,A)}return A.sort===!1?D:(A.sort===!0?Object.keys(D).sort():Object.keys(D).sort(A.sort)).reduce((w,u)=>{const b=D[u];return Boolean(b)&&typeof b=="object"&&!Array.isArray(b)?w[u]=R(b):w[u]=b,w},Object.create(null))}e.extract=F,e.parse=te,e.stringify=(_,A)=>{if(!_)return"";A=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},A),p(A.arrayFormatSeparator);const I=b=>A.skipNull&&c(_[b])||A.skipEmptyString&&_[b]==="",D=h(A),w={};for(const b of Object.keys(_))I(b)||(w[b]=_[b]);const u=Object.keys(w);return A.sort!==!1&&u.sort(A.sort),u.map(b=>{const K=_[b];return K===void 0?"":K===null?S(b,A):Array.isArray(K)?K.length===0&&A.arrayFormat==="bracket-separator"?S(b,A)+"[]":K.reduce(D(b),[]).join("&"):S(b,A)+"="+S(K,A)}).filter(b=>b.length>0).join("&")},e.parseUrl=(_,A)=>{A=Object.assign({decode:!0},A);const[I,D]=s(_,"#");return Object.assign({url:I.split("?")[0]||"",query:te(F(_),A)},A&&A.parseFragmentIdentifier&&D?{fragmentIdentifier:C(D,A)}:{})},e.stringifyUrl=(_,A)=>{A=Object.assign({encode:!0,strict:!0,[f]:!0},A);const I=U(_.url).split("?")[0]||"",D=e.extract(_.url),w=e.parse(D,{sort:!1}),u=Object.assign(w,_.query);let b=e.stringify(u,A);b&&(b=`?${b}`);let K=x(_.url);return _.fragmentIdentifier&&(K=`#${A[f]?S(_.fragmentIdentifier,A):_.fragmentIdentifier}`),`${I}${b}${K}`},e.pick=(_,A,I)=>{I=Object.assign({parseFragmentIdentifier:!0,[f]:!1},I);const{url:D,query:w,fragmentIdentifier:u}=e.parseUrl(_,I);return e.stringifyUrl({url:D,query:o(w,A),fragmentIdentifier:u},I)},e.exclude=(_,A,I)=>{const D=Array.isArray(A)?w=>!A.includes(w):(w,u)=>!A(w,u);return e.pick(_,D,I)}})(Co);function jm(e,t){return e.includes(":")?[e]:t.chains||[]}const Um="base10",Ir="base16",Yl="base64pad",zh="utf8",Lm=0,es=1,iN=0,Hg=1,Xl=12,Vh=32;function sN(){const e=Wi.generateKeyPair();return{privateKey:Je(e.secretKey,Ir),publicKey:Je(e.publicKey,Ir)}}function Ql(){const e=$n.randomBytes(Vh);return Je(e,Ir)}function oN(e,t){const n=Wi.sharedKey(Xe(e,Ir),Xe(t,Ir),!0),s=new wh(Nn.SHA256,n).expand(Vh);return Je(s,Ir)}function aN(e){const t=Nn.hash(Xe(e,Ir));return Je(t,Ir)}function Rs(e){const t=Nn.hash(Xe(e,zh));return Je(t,Ir)}function cN(e){return Xe(`${e}`,Um)}function zo(e){return Number(Je(e,Um))}function uN(e){const t=cN(typeof e.type<"u"?e.type:Lm);if(zo(t)===es&&typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof e.senderPublicKey<"u"?Xe(e.senderPublicKey,Ir):void 0,s=typeof e.iv<"u"?Xe(e.iv,Ir):$n.randomBytes(Xl),o=new Ki.ChaCha20Poly1305(Xe(e.symKey,Ir)).seal(s,Xe(e.message,zh));return hN({type:t,sealed:o,iv:s,senderPublicKey:n})}function lN(e){const t=new Ki.ChaCha20Poly1305(Xe(e.symKey,Ir)),{sealed:n,iv:s}=cc(e.encoded),o=t.open(s,n);if(o===null)throw new Error("Failed to decrypt");return Je(o,zh)}function hN(e){if(zo(e.type)===es){if(typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Je(ki([e.type,e.senderPublicKey,e.iv,e.sealed]),Yl)}return Je(ki([e.type,e.iv,e.sealed]),Yl)}function cc(e){const t=Xe(e,Yl),n=t.slice(iN,Hg),s=Hg;if(zo(n)===es){const h=s+Vh,O=h+Xl,p=t.slice(s,h),S=t.slice(h,O),C=t.slice(O);return{type:n,sealed:C,iv:S,senderPublicKey:p}}const o=s+Xl,c=t.slice(s,o),f=t.slice(o);return{type:n,sealed:f,iv:c}}function fN(e,t){const n=cc(e);return Mm({type:zo(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?Je(n.senderPublicKey,Ir):void 0,receiverPublicKey:t?.receiverPublicKey})}function Mm(e){const t=e?.type||Lm;if(t===es){if(typeof e?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof e?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:t,senderPublicKey:e?.senderPublicKey,receiverPublicKey:e?.receiverPublicKey}}function kg(e){return e.type===es&&typeof e.senderPublicKey=="string"&&typeof e.receiverPublicKey=="string"}var dN=Object.defineProperty,zg=Object.getOwnPropertySymbols,pN=Object.prototype.hasOwnProperty,gN=Object.prototype.propertyIsEnumerable,Vg=(e,t,n)=>t in e?dN(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Kg=(e,t)=>{for(var n in t||(t={}))pN.call(t,n)&&Vg(e,n,t[n]);if(zg)for(var n of zg(t))gN.call(t,n)&&Vg(e,n,t[n]);return e};const yN="ReactNative",Vr={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},mN="js";function Kh(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function qs(){return!qh()&&!!Hh()&&navigator.product===yN}function Hs(){return!Kh()&&!!Hh()&&!!qh()}function Vo(){return qs()?Vr.reactNative:Kh()?Vr.node:Hs()?Vr.browser:Vr.unknown}function vN(){var e;try{return qs()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(e=global.Application)==null?void 0:e.applicationId:void 0}catch{return}}function bN(e,t){let n=Co.parse(e);return n=Kg(Kg({},n),t),e=Co.stringify(n),e}function _N(){return Rm()||{name:"",description:"",url:"",icons:[""]}}function wN(){if(Vo()===Vr.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:n,Version:s}=global.Platform;return[n,s].join("-")}const e=H6();if(e===null)return"unknown";const t=e.os?e.os.replace(" ","").toLowerCase():"unknown";return e.type==="browser"?[t,e.name,e.version].join("-"):[t,e.version].join("-")}function EN(){var e;const t=Vo();return t===Vr.browser?[t,((e=xm())==null?void 0:e.host)||"unknown"].join(":"):t}function SN(e,t,n){const s=wN(),o=EN();return[[e,t].join("-"),[mN,n].join("-"),s,o].join("/")}function ON({protocol:e,version:t,relayUrl:n,sdkVersion:s,auth:o,projectId:c,useOnCloseEvent:f,bundleId:h}){const O=n.split("?"),p=SN(e,t,s),S={auth:o,ua:p,projectId:c,useOnCloseEvent:f||void 0,origin:h||void 0},C=bN(O[1]||"",S);return O[0]+"?"+C}function qi(e,t){return e.filter(n=>t.includes(n)).length===e.length}function Fm(e){return Object.fromEntries(e.entries())}function Bm(e){return new Map(Object.entries(e))}function Ts(e=we.FIVE_MINUTES,t){const n=we.toMiliseconds(e||we.FIVE_MINUTES);let s,o,c;return{resolve:f=>{c&&s&&(clearTimeout(c),s(f))},reject:f=>{c&&o&&(clearTimeout(c),o(f))},done:()=>new Promise((f,h)=>{c=setTimeout(()=>{h(new Error(t))},n),s=f,o=h})}}function Ao(e,t,n){return new Promise(async(s,o)=>{const c=setTimeout(()=>o(new Error(n)),t);try{const f=await e;s(f)}catch(f){o(f)}clearTimeout(c)})}function qm(e,t){if(typeof t=="string"&&t.startsWith(`${e}:`))return t;if(e.toLowerCase()==="topic"){if(typeof t!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${t}`}else if(e.toLowerCase()==="id"){if(typeof t!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${t}`}throw new Error(`Unknown expirer target type: ${e}`)}function IN(e){return qm("topic",e)}function DN(e){return qm("id",e)}function Hm(e){const[t,n]=e.split(":"),s={id:void 0,topic:void 0};if(t==="topic"&&typeof n=="string")s.topic=n;else if(t==="id"&&Number.isInteger(Number(n)))s.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${t}:${n}`);return s}function zr(e,t){return we.fromMiliseconds((t||Date.now())+we.toMiliseconds(e))}function si(e){return Date.now()>=we.toMiliseconds(e)}function Lt(e,t){return`${e}${t?`:${t}`:""}`}async function PN({id:e,topic:t,wcDeepLink:n}){try{if(!n)return;let o=(typeof n=="string"?JSON.parse(n):n)?.href;if(typeof o!="string")return;o.endsWith("/")&&(o=o.slice(0,-1));const c=`${o}/wc?requestId=${e}&sessionTopic=${t}`,f=Vo();f===Vr.browser?c.startsWith("https://")?window.open(c,"_blank","noreferrer noopener"):window.open(c,"_self","noreferrer noopener"):f===Vr.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(c)}catch(s){console.error(s)}}async function $N(e,t){try{return await e.getItem(t)||(Hs()?localStorage.getItem(t):void 0)}catch(n){console.error(n)}}const NN="irn";function Zl(e){return e?.relay||{protocol:NN}}function ec(e){const t=$h[e];if(typeof t>"u")throw new Error(`Relay Protocol not supported: ${e}`);return t}var CN=Object.defineProperty,AN=Object.defineProperties,TN=Object.getOwnPropertyDescriptors,Wg=Object.getOwnPropertySymbols,xN=Object.prototype.hasOwnProperty,RN=Object.prototype.propertyIsEnumerable,Gg=(e,t,n)=>t in e?CN(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,jN=(e,t)=>{for(var n in t||(t={}))xN.call(t,n)&&Gg(e,n,t[n]);if(Wg)for(var n of Wg(t))RN.call(t,n)&&Gg(e,n,t[n]);return e},UN=(e,t)=>AN(e,TN(t));function LN(e,t="-"){const n={},s="relay"+t;return Object.keys(e).forEach(o=>{if(o.startsWith(s)){const c=o.replace(s,""),f=e[o];n[c]=f}}),n}function Jg(e){e=e.includes("wc://")?e.replace("wc://",""):e,e=e.includes("wc:")?e.replace("wc:",""):e;const t=e.indexOf(":"),n=e.indexOf("?")!==-1?e.indexOf("?"):void 0,s=e.substring(0,t),o=e.substring(t+1,n).split("@"),c=typeof n<"u"?e.substring(n):"",f=Co.parse(c);return{protocol:s,topic:MN(o[0]),version:parseInt(o[1],10),symKey:f.symKey,relay:LN(f),expiryTimestamp:f.expiryTimestamp?parseInt(f.expiryTimestamp,10):void 0}}function MN(e){return e.startsWith("//")?e.substring(2):e}function FN(e,t="-"){const n="relay",s={};return Object.keys(e).forEach(o=>{const c=n+t+o;e[o]&&(s[c]=e[o])}),s}function BN(e){return`${e.protocol}:${e.topic}@${e.version}?`+Co.stringify(UN(jN({symKey:e.symKey},FN(e.relay)),{expiryTimestamp:e.expiryTimestamp}))}function ks(e){const t=[];return e.forEach(n=>{const[s,o]=n.split(":");t.push(`${s}:${o}`)}),t}function qN(e){const t=[];return Object.values(e).forEach(n=>{t.push(...ks(n.accounts))}),t}function HN(e,t){const n=[];return Object.values(e).forEach(s=>{ks(s.accounts).includes(t)&&n.push(...s.methods)}),n}function kN(e,t){const n=[];return Object.values(e).forEach(s=>{ks(s.accounts).includes(t)&&n.push(...s.events)}),n}const zN={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},VN={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function me(e,t){const{message:n,code:s}=VN[e];return{message:t?`${n} ${t}`:n,code:s}}function Mt(e,t){const{message:n,code:s}=zN[e];return{message:t?`${n} ${t}`:n,code:s}}function Ko(e,t){return Array.isArray(e)?typeof t<"u"&&e.length?e.every(t):!0:!1}function uc(e){return Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length}function wr(e){return typeof e>"u"}function Zt(e,t){return t&&wr(e)?!0:typeof e=="string"&&!!e.trim().length}function Wh(e,t){return t&&wr(e)?!0:typeof e=="number"&&!isNaN(e)}function KN(e,t){const{requiredNamespaces:n}=t,s=Object.keys(e.namespaces),o=Object.keys(n);let c=!0;return qi(o,s)?(s.forEach(f=>{const{accounts:h,methods:O,events:p}=e.namespaces[f],S=ks(h),C=n[f];(!qi(jm(f,C),S)||!qi(C.methods,O)||!qi(C.events,p))&&(c=!1)}),c):!1}function lc(e){return Zt(e,!1)&&e.includes(":")?e.split(":").length===2:!1}function WN(e){if(Zt(e,!1)&&e.includes(":")){const t=e.split(":");if(t.length===3){const n=t[0]+":"+t[1];return!!t[2]&&lc(n)}}return!1}function GN(e){if(Zt(e,!1))try{return typeof new URL(e)<"u"}catch{return!1}return!1}function JN(e){var t;return(t=e?.proposer)==null?void 0:t.publicKey}function YN(e){return e?.topic}function XN(e,t){let n=null;return Zt(e?.publicKey,!1)||(n=me("MISSING_OR_INVALID",`${t} controller public key should be a string`)),n}function Yg(e){let t=!0;return Ko(e)?e.length&&(t=e.every(n=>Zt(n,!1))):t=!1,t}function QN(e,t,n){let s=null;return Ko(t)&&t.length?t.forEach(o=>{s||lc(o)||(s=Mt("UNSUPPORTED_CHAINS",`${n}, chain ${o} should be a string and conform to "namespace:chainId" format`))}):lc(e)||(s=Mt("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),s}function ZN(e,t,n){let s=null;return Object.entries(e).forEach(([o,c])=>{if(s)return;const f=QN(o,jm(o,c),`${t} ${n}`);f&&(s=f)}),s}function eC(e,t){let n=null;return Ko(e)?e.forEach(s=>{n||WN(s)||(n=Mt("UNSUPPORTED_ACCOUNTS",`${t}, account ${s} should be a string and conform to "namespace:chainId:address" format`))}):n=Mt("UNSUPPORTED_ACCOUNTS",`${t}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function tC(e,t){let n=null;return Object.values(e).forEach(s=>{if(n)return;const o=eC(s?.accounts,`${t} namespace`);o&&(n=o)}),n}function rC(e,t){let n=null;return Yg(e?.methods)?Yg(e?.events)||(n=Mt("UNSUPPORTED_EVENTS",`${t}, events should be an array of strings or empty array for no events`)):n=Mt("UNSUPPORTED_METHODS",`${t}, methods should be an array of strings or empty array for no methods`),n}function km(e,t){let n=null;return Object.values(e).forEach(s=>{if(n)return;const o=rC(s,`${t}, namespace`);o&&(n=o)}),n}function nC(e,t,n){let s=null;if(e&&uc(e)){const o=km(e,t);o&&(s=o);const c=ZN(e,t,n);c&&(s=c)}else s=me("MISSING_OR_INVALID",`${t}, ${n} should be an object with data`);return s}function Dl(e,t){let n=null;if(e&&uc(e)){const s=km(e,t);s&&(n=s);const o=tC(e,t);o&&(n=o)}else n=me("MISSING_OR_INVALID",`${t}, namespaces should be an object with data`);return n}function zm(e){return Zt(e.protocol,!0)}function iC(e,t){let n=!1;return t&&!e?n=!0:e&&Ko(e)&&e.length&&e.forEach(s=>{n=zm(s)}),n}function sC(e){return typeof e=="number"}function xr(e){return typeof e<"u"&&typeof e!==null}function oC(e){return!(!e||typeof e!="object"||!e.code||!Wh(e.code,!1)||!e.message||!Zt(e.message,!1))}function aC(e){return!(wr(e)||!Zt(e.method,!1))}function cC(e){return!(wr(e)||wr(e.result)&&wr(e.error)||!Wh(e.id,!1)||!Zt(e.jsonrpc,!1))}function uC(e){return!(wr(e)||!Zt(e.name,!1))}function Xg(e,t){return!(!lc(t)||!qN(e).includes(t))}function lC(e,t,n){return Zt(n,!1)?HN(e,t).includes(n):!1}function hC(e,t,n){return Zt(n,!1)?kN(e,t).includes(n):!1}function Qg(e,t,n){let s=null;const o=fC(e),c=dC(t),f=Object.keys(o),h=Object.keys(c),O=Zg(Object.keys(e)),p=Zg(Object.keys(t)),S=O.filter(C=>!p.includes(C));return S.length&&(s=me("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.
      Required: ${S.toString()}
      Received: ${Object.keys(t).toString()}`)),qi(f,h)||(s=me("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.
      Required: ${f.toString()}
      Approved: ${h.toString()}`)),Object.keys(t).forEach(C=>{if(!C.includes(":")||s)return;const R=ks(t[C].accounts);R.includes(C)||(s=me("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${C}
        Required: ${C}
        Approved: ${R.toString()}`))}),f.forEach(C=>{s||(qi(o[C].methods,c[C].methods)?qi(o[C].events,c[C].events)||(s=me("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${C}`)):s=me("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${C}`))}),s}function fC(e){const t={};return Object.keys(e).forEach(n=>{var s;n.includes(":")?t[n]=e[n]:(s=e[n].chains)==null||s.forEach(o=>{t[o]={methods:e[n].methods,events:e[n].events}})}),t}function Zg(e){return[...new Set(e.map(t=>t.includes(":")?t.split(":")[0]:t))]}function dC(e){const t={};return Object.keys(e).forEach(n=>{n.includes(":")?t[n]=e[n]:ks(e[n].accounts)?.forEach(o=>{t[o]={accounts:e[n].accounts.filter(c=>c.includes(`${o}:`)),methods:e[n].methods,events:e[n].events}})}),t}function pC(e,t){return Wh(e,!1)&&e<=t.max&&e>=t.min}function ey(){const e=Vo();return new Promise(t=>{switch(e){case Vr.browser:t(gC());break;case Vr.reactNative:t(yC());break;case Vr.node:t(mC());break;default:t(!0)}})}function gC(){return Hs()&&navigator?.onLine}async function yC(){return qs()&&typeof global<"u"&&global!=null&&global.NetInfo?(await(global==null?void 0:global.NetInfo.fetch()))?.isConnected:!0}function mC(){return!0}function vC(e){switch(Vo()){case Vr.browser:bC(e);break;case Vr.reactNative:_C(e);break}}function bC(e){!qs()&&Hs()&&(window.addEventListener("online",()=>e(!0)),window.addEventListener("offline",()=>e(!1)))}function _C(e){qs()&&typeof global<"u"&&global!=null&&global.NetInfo&&global?.NetInfo.addEventListener(t=>e(t?.isConnected))}const Pl={};class Ga{static get(t){return Pl[t]}static set(t,n){Pl[t]=n}static delete(t){delete Pl[t]}}const wC=e=>JSON.stringify(e,(t,n)=>typeof n=="bigint"?n.toString()+"n":n),EC=e=>{const t=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=e.replace(t,'$1"$2n"$3');return JSON.parse(n,(s,o)=>typeof o=="string"&&o.match(/^\d+n$/)?BigInt(o.substring(0,o.length-1)):o)};function SC(e){if(typeof e!="string")throw new Error(`Cannot safe json parse value of type ${typeof e}`);try{return EC(e)}catch{return e}}function OC(e){return typeof e=="string"?e:wC(e)||""}const IC=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),DC=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",ty=e=>e.split("?")[0],ry=10,PC=IC();class $C{constructor(t){if(this.url=t,this.events=new Pr.exports.EventEmitter,this.registering=!1,!Ul(t))throw new Error(`Provided URL is not compatible with WebSocket connection: ${t}`);this.url=t}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(t,n){this.events.on(t,n)}once(t,n){this.events.once(t,n)}off(t,n){this.events.off(t,n)}removeListener(t,n){this.events.removeListener(t,n)}async open(t=this.url){await this.register(t)}async close(){return new Promise((t,n)=>{if(typeof this.socket>"u"){n(new Error("Connection already closed"));return}this.socket.onclose=s=>{this.onClose(s),t()},this.socket.close()})}async send(t){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(OC(t))}catch(n){this.onError(t.id,n)}}register(t=this.url){if(!Ul(t))throw new Error(`Provided URL is not compatible with WebSocket connection: ${t}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((s,o)=>{this.events.once("register_error",c=>{this.resetMaxListeners(),o(c)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return o(new Error("WebSocket connection is missing or invalid"));s(this.socket)})})}return this.url=t,this.registering=!0,new Promise((n,s)=>{const o=new URLSearchParams(t).get("origin"),c=Xy.isReactNative()?{headers:{origin:o}}:{rejectUnauthorized:!r0(t)},f=new PC(t,[],c);DC()?f.onerror=h=>{const O=h;s(this.emitError(O.error))}:f.on("error",h=>{s(this.emitError(h))}),f.onopen=()=>{this.onOpen(f),n(f)}})}onOpen(t){t.onmessage=n=>this.onPayload(n),t.onclose=n=>this.onClose(n),this.socket=t,this.registering=!1,this.events.emit("open")}onClose(t){this.socket=void 0,this.registering=!1,this.events.emit("close",t)}onPayload(t){if(typeof t.data>"u")return;const n=typeof t.data=="string"?SC(t.data):t.data;this.events.emit("payload",n)}onError(t,n){const s=this.parseError(n),o=s.message||s.toString(),c=Ro(t,o);this.events.emit("payload",c)}parseError(t,n=this.url){return fh(t,ty(n),"WS")}resetMaxListeners(){this.events.getMaxListeners()>ry&&this.events.setMaxListeners(ry)}emitError(t){const n=this.parseError(new Error(t?.message||`WebSocket connection failed for host: ${ty(this.url)}`));return this.events.emit("register_error",n),n}}var eh={exports:{}};(function(e,t){var n=200,s="__lodash_hash_undefined__",o=1,c=2,f=9007199254740991,h="[object Arguments]",O="[object Array]",p="[object AsyncFunction]",S="[object Boolean]",C="[object Date]",R="[object Error]",U="[object Function]",x="[object GeneratorFunction]",F="[object Map]",q="[object Number]",te="[object Null]",_="[object Object]",A="[object Promise]",I="[object Proxy]",D="[object RegExp]",w="[object Set]",u="[object String]",b="[object Symbol]",K="[object Undefined]",v="[object WeakMap]",g="[object ArrayBuffer]",P="[object DataView]",L="[object Float32Array]",y="[object Float64Array]",E="[object Int8Array]",k="[object Int16Array]",W="[object Int32Array]",Z="[object Uint8Array]",B="[object Uint8ClampedArray]",ee="[object Uint16Array]",oe="[object Uint32Array]",de=/[\\^$.*+?()[\]{}|]/g,ie=/^\[object .+?Constructor\]$/,Ie=/^(?:0|[1-9]\d*)$/,be={};be[L]=be[y]=be[E]=be[k]=be[W]=be[Z]=be[B]=be[ee]=be[oe]=!0,be[h]=be[O]=be[g]=be[S]=be[P]=be[C]=be[R]=be[U]=be[F]=be[q]=be[_]=be[D]=be[w]=be[u]=be[v]=!1;var Ce=typeof rt=="object"&&rt&&rt.Object===Object&&rt,ne=typeof self=="object"&&self&&self.Object===Object&&self,re=Ce||ne||Function("return this")(),J=t&&!t.nodeType&&t,d=J&&!0&&e&&!e.nodeType&&e,z=d&&d.exports===J,ge=z&&Ce.process,Ee=function(){try{return ge&&ge.binding&&ge.binding("util")}catch{}}(),ze=Ee&&Ee.isTypedArray;function Qe(M,Y){for(var fe=-1,Se=M==null?0:M.length,gt=0,xe=[];++fe<Se;){var It=M[fe];Y(It,fe,M)&&(xe[gt++]=It)}return xe}function Ve(M,Y){for(var fe=-1,Se=Y.length,gt=M.length;++fe<Se;)M[gt+fe]=Y[fe];return M}function tt(M,Y){for(var fe=-1,Se=M==null?0:M.length;++fe<Se;)if(Y(M[fe],fe,M))return!0;return!1}function Pt(M,Y){for(var fe=-1,Se=Array(M);++fe<M;)Se[fe]=Y(fe);return Se}function St(M){return function(Y){return M(Y)}}function Be(M,Y){return M.has(Y)}function qe(M,Y){return M?.[Y]}function Le(M){var Y=-1,fe=Array(M.size);return M.forEach(function(Se,gt){fe[++Y]=[gt,Se]}),fe}function He(M,Y){return function(fe){return M(Y(fe))}}function he(M){var Y=-1,fe=Array(M.size);return M.forEach(function(Se){fe[++Y]=Se}),fe}var $=Array.prototype,m=Function.prototype,G=Object.prototype,ce=re["__core-js_shared__"],_e=m.toString,ye=G.hasOwnProperty,Ae=function(){var M=/[^.]+$/.exec(ce&&ce.keys&&ce.keys.IE_PROTO||"");return M?"Symbol(src)_1."+M:""}(),Ke=G.toString,et=RegExp("^"+_e.call(ye).replace(de,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),We=z?re.Buffer:void 0,je=re.Symbol,Rt=re.Uint8Array,er=G.propertyIsEnumerable,fr=$.splice,Wt=je?je.toStringTag:void 0,Ft=Object.getOwnPropertySymbols,Rr=We?We.isBuffer:void 0,mi=He(Object.keys,Object),it=Jn(re,"DataView"),ut=Jn(re,"Map"),st=Jn(re,"Promise"),dt=Jn(re,"Set"),at=Jn(re,"WeakMap"),ht=Jn(Object,"create"),Ct=mn(it),Bt=mn(ut),qt=mn(st),Ht=mn(dt),kt=mn(at),At=je?je.prototype:void 0,Tt=At?At.valueOf:void 0;function mt(M){var Y=-1,fe=M==null?0:M.length;for(this.clear();++Y<fe;){var Se=M[Y];this.set(Se[0],Se[1])}}function vt(){this.__data__=ht?ht(null):{},this.size=0}function pt(M){var Y=this.has(M)&&delete this.__data__[M];return this.size-=Y?1:0,Y}function Fc(M){var Y=this.__data__;if(ht){var fe=Y[M];return fe===s?void 0:fe}return ye.call(Y,M)?Y[M]:void 0}function ss(M){var Y=this.__data__;return ht?Y[M]!==void 0:ye.call(Y,M)}function Jr(M,Y){var fe=this.__data__;return this.size+=this.has(M)?0:1,fe[M]=ht&&Y===void 0?s:Y,this}mt.prototype.clear=vt,mt.prototype.delete=pt,mt.prototype.get=Fc,mt.prototype.has=ss,mt.prototype.set=Jr;function an(M){var Y=-1,fe=M==null?0:M.length;for(this.clear();++Y<fe;){var Se=M[Y];this.set(Se[0],Se[1])}}function Bc(){this.__data__=[],this.size=0}function qc(M){var Y=this.__data__,fe=ls(Y,M);if(fe<0)return!1;var Se=Y.length-1;return fe==Se?Y.pop():fr.call(Y,fe,1),--this.size,!0}function Kn(M){var Y=this.__data__,fe=ls(Y,M);return fe<0?void 0:Y[fe][1]}function os(M){return ls(this.__data__,M)>-1}function Hc(M,Y){var fe=this.__data__,Se=ls(fe,M);return Se<0?(++this.size,fe.push([M,Y])):fe[Se][1]=Y,this}an.prototype.clear=Bc,an.prototype.delete=qc,an.prototype.get=Kn,an.prototype.has=os,an.prototype.set=Hc;function jr(M){var Y=-1,fe=M==null?0:M.length;for(this.clear();++Y<fe;){var Se=M[Y];this.set(Se[0],Se[1])}}function vi(){this.size=0,this.__data__={hash:new mt,map:new(ut||an),string:new mt}}function kc(M){var Y=Gn(this,M).delete(M);return this.size-=Y?1:0,Y}function as(M){return Gn(this,M).get(M)}function cs(M){return Gn(this,M).has(M)}function Xo(M,Y){var fe=Gn(this,M),Se=fe.size;return fe.set(M,Y),this.size+=fe.size==Se?0:1,this}jr.prototype.clear=vi,jr.prototype.delete=kc,jr.prototype.get=as,jr.prototype.has=cs,jr.prototype.set=Xo;function sr(M){var Y=-1,fe=M==null?0:M.length;for(this.__data__=new jr;++Y<fe;)this.add(M[Y])}function bi(M){return this.__data__.set(M,s),this}function zc(M){return this.__data__.has(M)}sr.prototype.add=sr.prototype.push=bi,sr.prototype.has=zc;function Gt(M){var Y=this.__data__=new an(M);this.size=Y.size}function Qo(){this.__data__=new an,this.size=0}function Vc(M){var Y=this.__data__,fe=Y.delete(M);return this.size=Y.size,fe}function _i(M){return this.__data__.get(M)}function Ur(M){return this.__data__.has(M)}function wi(M,Y){var fe=this.__data__;if(fe instanceof an){var Se=fe.__data__;if(!ut||Se.length<n-1)return Se.push([M,Y]),this.size=++fe.size,this;fe=this.__data__=new jr(Se)}return fe.set(M,Y),this.size=fe.size,this}Gt.prototype.clear=Qo,Gt.prototype.delete=Vc,Gt.prototype.get=_i,Gt.prototype.has=Ur,Gt.prototype.set=wi;function us(M,Y){var fe=ds(M),Se=!fe&&Qc(M),gt=!fe&&!Se&&eo(M),xe=!fe&&!Se&&!gt&&ia(M),It=fe||Se||gt||xe,$t=It?Pt(M.length,String):[],zt=$t.length;for(var ft in M)(Y||ye.call(M,ft))&&!(It&&(ft=="length"||gt&&(ft=="offset"||ft=="parent")||xe&&(ft=="buffer"||ft=="byteLength"||ft=="byteOffset")||Zo(ft,zt)))&&$t.push(ft);return $t}function ls(M,Y){for(var fe=M.length;fe--;)if(ea(M[fe][0],Y))return fe;return-1}function Ei(M,Y,fe){var Se=Y(M);return ds(M)?Se:Ve(Se,fe(M))}function Si(M){return M==null?M===void 0?K:te:Wt&&Wt in Object(M)?Kc(M):Xc(M)}function Wn(M){return Oi(M)&&Si(M)==h}function Cn(M,Y,fe,Se,gt){return M===Y?!0:M==null||Y==null||!Oi(M)&&!Oi(Y)?M!==M&&Y!==Y:Ws(M,Y,fe,Se,Cn,gt)}function Ws(M,Y,fe,Se,gt,xe){var It=ds(M),$t=ds(Y),zt=It?O:cn(M),ft=$t?O:cn(Y);zt=zt==h?_:zt,ft=ft==h?_:ft;var dr=zt==_,Lr=ft==_,Jt=zt==ft;if(Jt&&eo(M)){if(!eo(Y))return!1;It=!0,dr=!1}if(Jt&&!dr)return xe||(xe=new Gt),It||ia(M)?hs(M,Y,fe,Se,gt,xe):Xs(M,Y,zt,fe,Se,gt,xe);if(!(fe&o)){var pr=dr&&ye.call(M,"__wrapped__"),gr=Lr&&ye.call(Y,"__wrapped__");if(pr||gr){var un=pr?M.value():M,ln=gr?Y.value():Y;return xe||(xe=new Gt),gt(un,ln,fe,Se,xe)}}return Jt?(xe||(xe=new Gt),Qs(M,Y,fe,Se,gt,xe)):!1}function Gs(M){if(!na(M)||Jc(M))return!1;var Y=ta(M)?et:ie;return Y.test(mn(M))}function Js(M){return Oi(M)&&ra(M.length)&&!!be[Si(M)]}function Ys(M){if(!Yc(M))return mi(M);var Y=[];for(var fe in Object(M))ye.call(M,fe)&&fe!="constructor"&&Y.push(fe);return Y}function hs(M,Y,fe,Se,gt,xe){var It=fe&o,$t=M.length,zt=Y.length;if($t!=zt&&!(It&&zt>$t))return!1;var ft=xe.get(M);if(ft&&xe.get(Y))return ft==Y;var dr=-1,Lr=!0,Jt=fe&c?new sr:void 0;for(xe.set(M,Y),xe.set(Y,M);++dr<$t;){var pr=M[dr],gr=Y[dr];if(Se)var un=It?Se(gr,pr,dr,Y,M,xe):Se(pr,gr,dr,M,Y,xe);if(un!==void 0){if(un)continue;Lr=!1;break}if(Jt){if(!tt(Y,function(ln,An){if(!Be(Jt,An)&&(pr===ln||gt(pr,ln,fe,Se,xe)))return Jt.push(An)})){Lr=!1;break}}else if(!(pr===gr||gt(pr,gr,fe,Se,xe))){Lr=!1;break}}return xe.delete(M),xe.delete(Y),Lr}function Xs(M,Y,fe,Se,gt,xe,It){switch(fe){case P:if(M.byteLength!=Y.byteLength||M.byteOffset!=Y.byteOffset)return!1;M=M.buffer,Y=Y.buffer;case g:return!(M.byteLength!=Y.byteLength||!xe(new Rt(M),new Rt(Y)));case S:case C:case q:return ea(+M,+Y);case R:return M.name==Y.name&&M.message==Y.message;case D:case u:return M==Y+"";case F:var $t=Le;case w:var zt=Se&o;if($t||($t=he),M.size!=Y.size&&!zt)return!1;var ft=It.get(M);if(ft)return ft==Y;Se|=c,It.set(M,Y);var dr=hs($t(M),$t(Y),Se,gt,xe,It);return It.delete(M),dr;case b:if(Tt)return Tt.call(M)==Tt.call(Y)}return!1}function Qs(M,Y,fe,Se,gt,xe){var It=fe&o,$t=fs(M),zt=$t.length,ft=fs(Y),dr=ft.length;if(zt!=dr&&!It)return!1;for(var Lr=zt;Lr--;){var Jt=$t[Lr];if(!(It?Jt in Y:ye.call(Y,Jt)))return!1}var pr=xe.get(M);if(pr&&xe.get(Y))return pr==Y;var gr=!0;xe.set(M,Y),xe.set(Y,M);for(var un=It;++Lr<zt;){Jt=$t[Lr];var ln=M[Jt],An=Y[Jt];if(Se)var sa=It?Se(An,ln,Jt,Y,M,xe):Se(ln,An,Jt,M,Y,xe);if(!(sa===void 0?ln===An||gt(ln,An,fe,Se,xe):sa)){gr=!1;break}un||(un=Jt=="constructor")}if(gr&&!un){var ps=M.constructor,Ii=Y.constructor;ps!=Ii&&"constructor"in M&&"constructor"in Y&&!(typeof ps=="function"&&ps instanceof ps&&typeof Ii=="function"&&Ii instanceof Ii)&&(gr=!1)}return xe.delete(M),xe.delete(Y),gr}function fs(M){return Ei(M,Zc,Wc)}function Gn(M,Y){var fe=M.__data__;return Gc(Y)?fe[typeof Y=="string"?"string":"hash"]:fe.map}function Jn(M,Y){var fe=qe(M,Y);return Gs(fe)?fe:void 0}function Kc(M){var Y=ye.call(M,Wt),fe=M[Wt];try{M[Wt]=void 0;var Se=!0}catch{}var gt=Ke.call(M);return Se&&(Y?M[Wt]=fe:delete M[Wt]),gt}var Wc=Ft?function(M){return M==null?[]:(M=Object(M),Qe(Ft(M),function(Y){return er.call(M,Y)}))}:eu,cn=Si;(it&&cn(new it(new ArrayBuffer(1)))!=P||ut&&cn(new ut)!=F||st&&cn(st.resolve())!=A||dt&&cn(new dt)!=w||at&&cn(new at)!=v)&&(cn=function(M){var Y=Si(M),fe=Y==_?M.constructor:void 0,Se=fe?mn(fe):"";if(Se)switch(Se){case Ct:return P;case Bt:return F;case qt:return A;case Ht:return w;case kt:return v}return Y});function Zo(M,Y){return Y=Y??f,!!Y&&(typeof M=="number"||Ie.test(M))&&M>-1&&M%1==0&&M<Y}function Gc(M){var Y=typeof M;return Y=="string"||Y=="number"||Y=="symbol"||Y=="boolean"?M!=="__proto__":M===null}function Jc(M){return!!Ae&&Ae in M}function Yc(M){var Y=M&&M.constructor,fe=typeof Y=="function"&&Y.prototype||G;return M===fe}function Xc(M){return Ke.call(M)}function mn(M){if(M!=null){try{return _e.call(M)}catch{}try{return M+""}catch{}}return""}function ea(M,Y){return M===Y||M!==M&&Y!==Y}var Qc=Wn(function(){return arguments}())?Wn:function(M){return Oi(M)&&ye.call(M,"callee")&&!er.call(M,"callee")},ds=Array.isArray;function Zs(M){return M!=null&&ra(M.length)&&!ta(M)}var eo=Rr||tu;function to(M,Y){return Cn(M,Y)}function ta(M){if(!na(M))return!1;var Y=Si(M);return Y==U||Y==x||Y==p||Y==I}function ra(M){return typeof M=="number"&&M>-1&&M%1==0&&M<=f}function na(M){var Y=typeof M;return M!=null&&(Y=="object"||Y=="function")}function Oi(M){return M!=null&&typeof M=="object"}var ia=ze?St(ze):Js;function Zc(M){return Zs(M)?us(M):Ys(M)}function eu(){return[]}function tu(){return!1}e.exports=to})(eh,eh.exports);const NC=eh.exports;function CC(e,t){return t=t||{},new Promise(function(n,s){var o=new XMLHttpRequest,c=[],f=[],h={},O=function(){return{ok:(o.status/100|0)==2,statusText:o.statusText,status:o.status,url:o.responseURL,text:function(){return Promise.resolve(o.responseText)},json:function(){return Promise.resolve(o.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([o.response]))},clone:O,headers:{keys:function(){return c},entries:function(){return f},get:function(S){return h[S.toLowerCase()]},has:function(S){return S.toLowerCase()in h}}}};for(var p in o.open(t.method||"get",e,!0),o.onload=function(){o.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(S,C,R){c.push(C=C.toLowerCase()),f.push([C,R]),h[C]=h[C]?h[C]+","+R:R}),n(O())},o.onerror=s,o.withCredentials=t.credentials=="include",t.headers)o.setRequestHeader(p,t.headers[p]);o.send(t.body||null)})}const AC=Object.freeze(Object.defineProperty({__proto__:null,default:CC},Symbol.toStringTag,{value:"Module"})),ny=Vn(AC);var TC=self.fetch||(self.fetch=ny.default||ny);function xC(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),s=0;s<n.length;s++)n[s]=255;for(var o=0;o<e.length;o++){var c=e.charAt(o),f=c.charCodeAt(0);if(n[f]!==255)throw new TypeError(c+" is ambiguous");n[f]=o}var h=e.length,O=e.charAt(0),p=Math.log(h)/Math.log(256),S=Math.log(256)/Math.log(h);function C(x){if(x instanceof Uint8Array||(ArrayBuffer.isView(x)?x=new Uint8Array(x.buffer,x.byteOffset,x.byteLength):Array.isArray(x)&&(x=Uint8Array.from(x))),!(x instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(x.length===0)return"";for(var F=0,q=0,te=0,_=x.length;te!==_&&x[te]===0;)te++,F++;for(var A=(_-te)*S+1>>>0,I=new Uint8Array(A);te!==_;){for(var D=x[te],w=0,u=A-1;(D!==0||w<q)&&u!==-1;u--,w++)D+=256*I[u]>>>0,I[u]=D%h>>>0,D=D/h>>>0;if(D!==0)throw new Error("Non-zero carry");q=w,te++}for(var b=A-q;b!==A&&I[b]===0;)b++;for(var K=O.repeat(F);b<A;++b)K+=e.charAt(I[b]);return K}function R(x){if(typeof x!="string")throw new TypeError("Expected String");if(x.length===0)return new Uint8Array;var F=0;if(x[F]!==" "){for(var q=0,te=0;x[F]===O;)q++,F++;for(var _=(x.length-F)*p+1>>>0,A=new Uint8Array(_);x[F];){var I=n[x.charCodeAt(F)];if(I===255)return;for(var D=0,w=_-1;(I!==0||D<te)&&w!==-1;w--,D++)I+=h*A[w]>>>0,A[w]=I%256>>>0,I=I/256>>>0;if(I!==0)throw new Error("Non-zero carry");te=D,F++}if(x[F]!==" "){for(var u=_-te;u!==_&&A[u]===0;)u++;for(var b=new Uint8Array(q+(_-u)),K=q;u!==_;)b[K++]=A[u++];return b}}}function U(x){var F=R(x);if(F)return F;throw new Error(`Non-${t} character`)}return{encode:C,decodeUnsafe:R,decode:U}}var RC=xC,jC=RC;const Vm=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},UC=e=>new TextEncoder().encode(e),LC=e=>new TextDecoder().decode(e);class MC{constructor(t,n,s){this.name=t,this.prefix=n,this.baseEncode=s}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class FC{constructor(t,n,s){if(this.name=t,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=s}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return Km(this,t)}}class BC{constructor(t){this.decoders=t}or(t){return Km(this,t)}decode(t){const n=t[0],s=this.decoders[n];if(s)return s.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Km=(e,t)=>new BC({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class qC{constructor(t,n,s,o){this.name=t,this.prefix=n,this.baseEncode=s,this.baseDecode=o,this.encoder=new MC(t,n,s),this.decoder=new FC(t,n,o)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const Nc=({name:e,prefix:t,encode:n,decode:s})=>new qC(e,t,n,s),Wo=({prefix:e,name:t,alphabet:n})=>{const{encode:s,decode:o}=jC(n,t);return Nc({prefix:e,name:t,encode:s,decode:c=>Vm(o(c))})},HC=(e,t,n,s)=>{const o={};for(let S=0;S<t.length;++S)o[t[S]]=S;let c=e.length;for(;e[c-1]==="=";)--c;const f=new Uint8Array(c*n/8|0);let h=0,O=0,p=0;for(let S=0;S<c;++S){const C=o[e[S]];if(C===void 0)throw new SyntaxError(`Non-${s} character`);O=O<<n|C,h+=n,h>=8&&(h-=8,f[p++]=255&O>>h)}if(h>=n||255&O<<8-h)throw new SyntaxError("Unexpected end of data");return f},kC=(e,t,n)=>{const s=t[t.length-1]==="=",o=(1<<n)-1;let c="",f=0,h=0;for(let O=0;O<e.length;++O)for(h=h<<8|e[O],f+=8;f>n;)f-=n,c+=t[o&h>>f];if(f&&(c+=t[o&h<<n-f]),s)for(;c.length*n&7;)c+="=";return c},ir=({name:e,prefix:t,bitsPerChar:n,alphabet:s})=>Nc({prefix:t,name:e,encode(o){return kC(o,s,n)},decode(o){return HC(o,s,n,e)}}),zC=Nc({prefix:"\0",name:"identity",encode:e=>LC(e),decode:e=>UC(e)});var VC=Object.freeze({__proto__:null,identity:zC});const KC=ir({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var WC=Object.freeze({__proto__:null,base2:KC});const GC=ir({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var JC=Object.freeze({__proto__:null,base8:GC});const YC=Wo({prefix:"9",name:"base10",alphabet:"0123456789"});var XC=Object.freeze({__proto__:null,base10:YC});const QC=ir({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),ZC=ir({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var eA=Object.freeze({__proto__:null,base16:QC,base16upper:ZC});const tA=ir({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),rA=ir({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),nA=ir({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),iA=ir({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),sA=ir({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),oA=ir({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),aA=ir({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),cA=ir({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),uA=ir({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var lA=Object.freeze({__proto__:null,base32:tA,base32upper:rA,base32pad:nA,base32padupper:iA,base32hex:sA,base32hexupper:oA,base32hexpad:aA,base32hexpadupper:cA,base32z:uA});const hA=Wo({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),fA=Wo({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var dA=Object.freeze({__proto__:null,base36:hA,base36upper:fA});const pA=Wo({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),gA=Wo({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var yA=Object.freeze({__proto__:null,base58btc:pA,base58flickr:gA});const mA=ir({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),vA=ir({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),bA=ir({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),_A=ir({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var wA=Object.freeze({__proto__:null,base64:mA,base64pad:vA,base64url:bA,base64urlpad:_A});const Wm=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),EA=Wm.reduce((e,t,n)=>(e[n]=t,e),[]),SA=Wm.reduce((e,t,n)=>(e[t.codePointAt(0)]=n,e),[]);function OA(e){return e.reduce((t,n)=>(t+=EA[n],t),"")}function IA(e){const t=[];for(const n of e){const s=SA[n.codePointAt(0)];if(s===void 0)throw new Error(`Non-base256emoji character: ${n}`);t.push(s)}return new Uint8Array(t)}const DA=Nc({prefix:"\u{1F680}",name:"base256emoji",encode:OA,decode:IA});var PA=Object.freeze({__proto__:null,base256emoji:DA}),$A=Gm,iy=128,NA=127,CA=~NA,AA=Math.pow(2,31);function Gm(e,t,n){t=t||[],n=n||0;for(var s=n;e>=AA;)t[n++]=e&255|iy,e/=128;for(;e&CA;)t[n++]=e&255|iy,e>>>=7;return t[n]=e|0,Gm.bytes=n-s+1,t}var TA=th,xA=128,sy=127;function th(e,s){var n=0,s=s||0,o=0,c=s,f,h=e.length;do{if(c>=h)throw th.bytes=0,new RangeError("Could not decode varint");f=e[c++],n+=o<28?(f&sy)<<o:(f&sy)*Math.pow(2,o),o+=7}while(f>=xA);return th.bytes=c-s,n}var RA=Math.pow(2,7),jA=Math.pow(2,14),UA=Math.pow(2,21),LA=Math.pow(2,28),MA=Math.pow(2,35),FA=Math.pow(2,42),BA=Math.pow(2,49),qA=Math.pow(2,56),HA=Math.pow(2,63),kA=function(e){return e<RA?1:e<jA?2:e<UA?3:e<LA?4:e<MA?5:e<FA?6:e<BA?7:e<qA?8:e<HA?9:10},zA={encode:$A,decode:TA,encodingLength:kA},Jm=zA;const oy=(e,t,n=0)=>(Jm.encode(e,t,n),t),ay=e=>Jm.encodingLength(e),rh=(e,t)=>{const n=t.byteLength,s=ay(e),o=s+ay(n),c=new Uint8Array(o+n);return oy(e,c,0),oy(n,c,s),c.set(t,o),new VA(e,n,t,c)};class VA{constructor(t,n,s,o){this.code=t,this.size=n,this.digest=s,this.bytes=o}}const Ym=({name:e,code:t,encode:n})=>new KA(e,t,n);class KA{constructor(t,n,s){this.name=t,this.code=n,this.encode=s}digest(t){if(t instanceof Uint8Array){const n=this.encode(t);return n instanceof Uint8Array?rh(this.code,n):n.then(s=>rh(this.code,s))}else throw Error("Unknown type, must be binary type")}}const Xm=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),WA=Ym({name:"sha2-256",code:18,encode:Xm("SHA-256")}),GA=Ym({name:"sha2-512",code:19,encode:Xm("SHA-512")});var JA=Object.freeze({__proto__:null,sha256:WA,sha512:GA});const Qm=0,YA="identity",Zm=Vm,XA=e=>rh(Qm,Zm(e)),QA={code:Qm,name:YA,encode:Zm,digest:XA};var ZA=Object.freeze({__proto__:null,identity:QA});new TextEncoder,new TextDecoder;const cy={...VC,...WC,...JC,...XC,...eA,...lA,...dA,...yA,...wA,...PA};({...JA,...ZA});function ev(e){return globalThis.Buffer!=null?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function e5(e=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?ev(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function tv(e,t,n,s){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:n},decoder:{decode:s}}}const uy=tv("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),$l=tv("ascii","a",e=>{let t="a";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},e=>{e=e.substring(1);const t=e5(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}),t5={utf8:uy,"utf-8":uy,hex:cy.base16,latin1:$l,ascii:$l,binary:$l,...cy};function r5(e,t="utf8"){const n=t5[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?ev(globalThis.Buffer.from(e,"utf-8")):n.decoder.decode(`${n.prefix}${e}`)}const rv="wc",n5=2,Gh="core",pi=`${rv}@2:${Gh}:`,i5={name:Gh,logger:"error"},s5={database:":memory:"},o5="crypto",ly="client_ed25519_seed",a5=we.ONE_DAY,c5="keychain",u5="0.3",l5="messages",h5="0.3",f5=we.SIX_HOURS,d5="publisher",nv="irn",p5="error",iv="wss://relay.walletconnect.com",hy="wss://relay.walletconnect.org",g5="relayer",hr={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},y5="_subscription",Hn={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},m5=we.ONE_SECOND,v5="2.11.1",b5=1e4,_5="0.3",w5="WALLETCONNECT_CLIENT_ID",gn={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},E5="subscription",S5="0.3",O5=we.FIVE_SECONDS*1e3,I5="pairing",D5="0.3",So={wc_pairingDelete:{req:{ttl:we.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:we.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:we.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:we.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:we.ONE_DAY,prompt:!1,tag:0},res:{ttl:we.ONE_DAY,prompt:!1,tag:0}}},Do={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},En={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},P5="history",$5="0.3",N5="expirer",sn={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},C5="0.3",Nl="verify-api",xs="https://verify.walletconnect.com",nh="https://verify.walletconnect.org",A5=[xs,nh],T5="echo",x5="https://echo.walletconnect.com";class R5{constructor(t,n){this.core=t,this.logger=n,this.keychain=new Map,this.name=c5,this.version=u5,this.initialized=!1,this.storagePrefix=pi,this.init=async()=>{if(!this.initialized){const s=await this.getKeyChain();typeof s<"u"&&(this.keychain=s),this.initialized=!0}},this.has=s=>(this.isInitialized(),this.keychain.has(s)),this.set=async(s,o)=>{this.isInitialized(),this.keychain.set(s,o),await this.persist()},this.get=s=>{this.isInitialized();const o=this.keychain.get(s);if(typeof o>"u"){const{message:c}=me("NO_MATCHING_KEY",`${this.name}: ${s}`);throw new Error(c)}return o},this.del=async s=>{this.isInitialized(),this.keychain.delete(s),await this.persist()},this.core=t,this.logger=nt.generateChildLogger(n,this.name)}get context(){return nt.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(t){await this.core.storage.setItem(this.storageKey,Fm(t))}async getKeyChain(){const t=await this.core.storage.getItem(this.storageKey);return typeof t<"u"?Bm(t):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:t}=me("NOT_INITIALIZED",this.name);throw new Error(t)}}}class j5{constructor(t,n,s){this.core=t,this.logger=n,this.name=o5,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=o=>(this.isInitialized(),this.keychain.has(o)),this.getClientId=async()=>{this.isInitialized();const o=await this.getClientSeed(),c=Ug(o);return Tm(c.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const o=sN();return this.setPrivateKey(o.publicKey,o.privateKey)},this.signJWT=async o=>{this.isInitialized();const c=await this.getClientSeed(),f=Ug(c),h=Ql();return await x6(h,o,a5,f)},this.generateSharedKey=(o,c,f)=>{this.isInitialized();const h=this.getPrivateKey(o),O=oN(h,c);return this.setSymKey(O,f)},this.setSymKey=async(o,c)=>{this.isInitialized();const f=c||aN(o);return await this.keychain.set(f,o),f},this.deleteKeyPair=async o=>{this.isInitialized(),await this.keychain.del(o)},this.deleteSymKey=async o=>{this.isInitialized(),await this.keychain.del(o)},this.encode=async(o,c,f)=>{this.isInitialized();const h=Mm(f),O=m6(c);if(kg(h)){const R=h.senderPublicKey,U=h.receiverPublicKey;o=await this.generateSharedKey(R,U)}const p=this.getSymKey(o),{type:S,senderPublicKey:C}=h;return uN({type:S,symKey:p,message:O,senderPublicKey:C})},this.decode=async(o,c,f)=>{this.isInitialized();const h=fN(c,f);if(kg(h)){const O=h.receiverPublicKey,p=h.senderPublicKey;o=await this.generateSharedKey(O,p)}try{const O=this.getSymKey(o),p=lN({symKey:O,encoded:c});return y6(p)}catch(O){this.logger.error(`Failed to decode message from topic: '${o}', clientId: '${await this.getClientId()}'`),this.logger.error(O)}},this.getPayloadType=o=>{const c=cc(o);return zo(c.type)},this.getPayloadSenderPublicKey=o=>{const c=cc(o);return c.senderPublicKey?Je(c.senderPublicKey,Ir):void 0},this.core=t,this.logger=nt.generateChildLogger(n,this.name),this.keychain=s||new R5(this.core,this.logger)}get context(){return nt.getLoggerContext(this.logger)}async setPrivateKey(t,n){return await this.keychain.set(t,n),t}getPrivateKey(t){return this.keychain.get(t)}async getClientSeed(){let t="";try{t=this.keychain.get(ly)}catch{t=Ql(),await this.keychain.set(ly,t)}return r5(t,"base16")}getSymKey(t){return this.keychain.get(t)}isInitialized(){if(!this.initialized){const{message:t}=me("NOT_INITIALIZED",this.name);throw new Error(t)}}}class U5 extends i6{constructor(t,n){super(t,n),this.logger=t,this.core=n,this.messages=new Map,this.name=l5,this.version=h5,this.initialized=!1,this.storagePrefix=pi,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const s=await this.getRelayerMessages();typeof s<"u"&&(this.messages=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(s){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(s)}finally{this.initialized=!0}}},this.set=async(s,o)=>{this.isInitialized();const c=Rs(o);let f=this.messages.get(s);return typeof f>"u"&&(f={}),typeof f[c]<"u"||(f[c]=o,this.messages.set(s,f),await this.persist()),c},this.get=s=>{this.isInitialized();let o=this.messages.get(s);return typeof o>"u"&&(o={}),o},this.has=(s,o)=>{this.isInitialized();const c=this.get(s),f=Rs(o);return typeof c[f]<"u"},this.del=async s=>{this.isInitialized(),this.messages.delete(s),await this.persist()},this.logger=nt.generateChildLogger(t,this.name),this.core=n}get context(){return nt.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setRelayerMessages(t){await this.core.storage.setItem(this.storageKey,Fm(t))}async getRelayerMessages(){const t=await this.core.storage.getItem(this.storageKey);return typeof t<"u"?Bm(t):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:t}=me("NOT_INITIALIZED",this.name);throw new Error(t)}}}class L5 extends s6{constructor(t,n){super(t,n),this.relayer=t,this.logger=n,this.events=new Pr.exports.EventEmitter,this.name=d5,this.queue=new Map,this.publishTimeout=we.toMiliseconds(we.TEN_SECONDS*2),this.needsTransportRestart=!1,this.publish=async(s,o,c)=>{var f;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:s,message:o,opts:c}});try{const h=c?.ttl||f5,O=Zl(c),p=c?.prompt||!1,S=c?.tag||0,C=c?.id||dh().toString(),R={topic:s,message:o,opts:{ttl:h,relay:O,prompt:p,tag:S,id:C}},U=setTimeout(()=>this.queue.set(C,R),this.publishTimeout);try{await await Ao(this.rpcPublish(s,o,h,O,p,S,C),this.publishTimeout,`Failed to publish payload, please try again. id:${C} tag:${S}`),this.removeRequestFromQueue(C),this.relayer.events.emit(hr.publish,R)}catch(x){if(this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0,(f=c?.internal)!=null&&f.throwOnFailedPublish)throw this.removeRequestFromQueue(C),x;return}finally{clearTimeout(U)}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:s,message:o,opts:c}})}catch(h){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(h),h}},this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.relayer=t,this.logger=nt.generateChildLogger(n,this.name),this.registerEventListeners()}get context(){return nt.getLoggerContext(this.logger)}rpcPublish(t,n,s,o,c,f,h){var O,p,S,C;const R={method:ec(o.protocol).publish,params:{topic:t,message:n,ttl:s,prompt:c,tag:f},id:h};return wr((O=R.params)==null?void 0:O.prompt)&&((p=R.params)==null||delete p.prompt),wr((S=R.params)==null?void 0:S.tag)&&((C=R.params)==null||delete C.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:R}),this.relayer.request(R)}removeRequestFromQueue(t){this.queue.delete(t)}checkQueue(){this.queue.forEach(async t=>{const{topic:n,message:s,opts:o}=t;await this.publish(n,s,o)})}registerEventListeners(){this.relayer.core.heartbeat.on(Fs.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(hr.connection_stalled);return}this.checkQueue()}),this.relayer.on(hr.message_ack,t=>{this.removeRequestFromQueue(t.id.toString())})}}class M5{constructor(){this.map=new Map,this.set=(t,n)=>{const s=this.get(t);this.exists(t,n)||this.map.set(t,[...s,n])},this.get=t=>this.map.get(t)||[],this.exists=(t,n)=>this.get(t).includes(n),this.delete=(t,n)=>{if(typeof n>"u"){this.map.delete(t);return}if(!this.map.has(t))return;const s=this.get(t);if(!this.exists(t,n))return;const o=s.filter(c=>c!==n);if(!o.length){this.map.delete(t);return}this.map.set(t,o)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var F5=Object.defineProperty,B5=Object.defineProperties,q5=Object.getOwnPropertyDescriptors,fy=Object.getOwnPropertySymbols,H5=Object.prototype.hasOwnProperty,k5=Object.prototype.propertyIsEnumerable,dy=(e,t,n)=>t in e?F5(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Oo=(e,t)=>{for(var n in t||(t={}))H5.call(t,n)&&dy(e,n,t[n]);if(fy)for(var n of fy(t))k5.call(t,n)&&dy(e,n,t[n]);return e},Cl=(e,t)=>B5(e,q5(t));class z5 extends c6{constructor(t,n){super(t,n),this.relayer=t,this.logger=n,this.subscriptions=new Map,this.topicMap=new M5,this.events=new Pr.exports.EventEmitter,this.name=E5,this.version=S5,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=pi,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(s,o)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:s,opts:o}});try{const c=Zl(o),f={topic:s,relay:c};this.pending.set(s,f);const h=await this.rpcSubscribe(s,c);return this.onSubscribe(h,f),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:s,opts:o}}),h}catch(c){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(c),c}},this.unsubscribe=async(s,o)=>{await this.restartToComplete(),this.isInitialized(),typeof o?.id<"u"?await this.unsubscribeById(s,o.id,o):await this.unsubscribeByTopic(s,o)},this.isSubscribed=async s=>{if(this.topics.includes(s))return!0;const o=`${this.pendingSubscriptionWatchLabel}_${s}`;return await new Promise((c,f)=>{const h=new we.Watch;h.start(o);const O=setInterval(()=>{!this.pending.has(s)&&this.topics.includes(s)&&(clearInterval(O),h.stop(o),c(!0)),h.elapsed(o)>=O5&&(clearInterval(O),h.stop(o),f(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1)},this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=t,this.logger=nt.generateChildLogger(n,this.name),this.clientId=""}get context(){return nt.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(t,n){let s=!1;try{s=this.getSubscription(t).topic===n}catch{}return s}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(t,n){const s=this.topicMap.get(t);await Promise.all(s.map(async o=>await this.unsubscribeById(t,o,n)))}async unsubscribeById(t,n,s){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:t,id:n,opts:s}});try{const o=Zl(s);await this.rpcUnsubscribe(t,n,o);const c=Mt("USER_DISCONNECTED",`${this.name}, ${t}`);await this.onUnsubscribe(t,n,c),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:t,id:n,opts:s}})}catch(o){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(o),o}}async rpcSubscribe(t,n){const s={method:ec(n.protocol).subscribe,params:{topic:t}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});try{await await Ao(this.relayer.request(s),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(hr.connection_stalled)}return Rs(t+this.clientId)}async rpcBatchSubscribe(t){if(!t.length)return;const n=t[0].relay,s={method:ec(n.protocol).batchSubscribe,params:{topics:t.map(o=>o.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});try{return await await Ao(this.relayer.request(s),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(hr.connection_stalled)}}rpcUnsubscribe(t,n,s){const o={method:ec(s.protocol).unsubscribe,params:{topic:t,id:n}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:o}),this.relayer.request(o)}onSubscribe(t,n){this.setSubscription(t,Cl(Oo({},n),{id:t})),this.pending.delete(n.topic)}onBatchSubscribe(t){t.length&&t.forEach(n=>{this.setSubscription(n.id,Oo({},n)),this.pending.delete(n.topic)})}async onUnsubscribe(t,n,s){this.events.removeAllListeners(n),this.hasSubscription(n,t)&&this.deleteSubscription(n,s),await this.relayer.messages.del(t)}async setRelayerSubscriptions(t){await this.relayer.core.storage.setItem(this.storageKey,t)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(t,n){this.subscriptions.has(t)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:t,subscription:n}),this.addSubscription(t,n))}addSubscription(t,n){this.subscriptions.set(t,Oo({},n)),this.topicMap.set(n.topic,t),this.events.emit(gn.created,n)}getSubscription(t){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:t});const n=this.subscriptions.get(t);if(!n){const{message:s}=me("NO_MATCHING_KEY",`${this.name}: ${t}`);throw new Error(s)}return n}deleteSubscription(t,n){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:t,reason:n});const s=this.getSubscription(t);this.subscriptions.delete(t),this.topicMap.delete(s.topic,t),this.events.emit(gn.deleted,Cl(Oo({},s),{reason:n}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(gn.sync)}async reset(){if(this.cached.length){const t=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let n=0;n<t;n++){const s=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(gn.resubscribed)}async restore(){try{const t=await this.getRelayerSubscriptions();if(typeof t>"u"||!t.length)return;if(this.subscriptions.size){const{message:n}=me("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(n)}this.cached=t,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(t){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(t)}}async batchSubscribe(t){if(!t.length)return;const n=await this.rpcBatchSubscribe(t);Ko(n)&&this.onBatchSubscribe(n.map((s,o)=>Cl(Oo({},t[o]),{id:s})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(!this.initialized||this.relayer.transportExplicitlyClosed)return;const t=[];this.pending.forEach(n=>{t.push(n)}),await this.batchSubscribe(t)}registerEventListeners(){this.relayer.core.heartbeat.on(Fs.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(hr.connect,async()=>{await this.onConnect()}),this.relayer.on(hr.disconnect,()=>{this.onDisconnect()}),this.events.on(gn.created,async t=>{const n=gn.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:t}),await this.persist()}),this.events.on(gn.deleted,async t=>{const n=gn.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:t}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:t}=me("NOT_INITIALIZED",this.name);throw new Error(t)}}async restartToComplete(){this.restartInProgress&&await new Promise(t=>{const n=setInterval(()=>{this.restartInProgress||(clearInterval(n),t())},this.pollingInterval)})}}var V5=Object.defineProperty,py=Object.getOwnPropertySymbols,K5=Object.prototype.hasOwnProperty,W5=Object.prototype.propertyIsEnumerable,gy=(e,t,n)=>t in e?V5(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,G5=(e,t)=>{for(var n in t||(t={}))K5.call(t,n)&&gy(e,n,t[n]);if(py)for(var n of py(t))W5.call(t,n)&&gy(e,n,t[n]);return e};class J5 extends o6{constructor(t){super(t),this.protocol="wc",this.version=2,this.events=new Pr.exports.EventEmitter,this.name=g5,this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.hasExperiencedNetworkDisruption=!1,this.requestsInFlight=new Map,this.request=async n=>{this.logger.debug("Publishing Request Payload");const s=n.id,o=this.provider.request(n);this.requestsInFlight.set(s,{promise:o,request:n});try{return await this.toEstablishConnection(),await o}catch(c){throw this.logger.debug("Failed to Publish Request"),this.logger.error(c),c}finally{this.requestsInFlight.delete(s)}},this.onPayloadHandler=n=>{this.onProviderPayload(n)},this.onConnectHandler=()=>{this.events.emit(hr.connect)},this.onDisconnectHandler=()=>{this.onProviderDisconnect()},this.onProviderErrorHandler=n=>{this.logger.error(n),this.events.emit(hr.error,n),this.logger.info("Fatal socket error received, closing transport"),this.transportClose()},this.registerProviderListeners=()=>{this.provider.on(Hn.payload,this.onPayloadHandler),this.provider.on(Hn.connect,this.onConnectHandler),this.provider.on(Hn.disconnect,this.onDisconnectHandler),this.provider.on(Hn.error,this.onProviderErrorHandler)},this.core=t.core,this.logger=typeof t.logger<"u"&&typeof t.logger!="string"?nt.generateChildLogger(t.logger,this.name):nt.pino(nt.getDefaultLoggerOptions({level:t.logger||p5})),this.messages=new U5(this.logger,t.core),this.subscriber=new z5(this,this.logger),this.publisher=new L5(this,this.logger),this.relayUrl=t?.relayUrl||iv,this.projectId=t.projectId,this.bundleId=vN(),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${hy}...`),await this.restartTransport(hy)}this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},b5)}get context(){return nt.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(t,n,s){this.isInitialized(),await this.publisher.publish(t,n,s),await this.recordMessageEvent({topic:t,message:n,publishedAt:Date.now()})}async subscribe(t,n){var s;this.isInitialized();let o=((s=this.subscriber.topicMap.get(t))==null?void 0:s[0])||"";if(o)return o;let c;const f=h=>{h.topic===t&&(this.subscriber.off(gn.created,f),c())};return await Promise.all([new Promise(h=>{c=h,this.subscriber.on(gn.created,f)}),new Promise(async h=>{o=await this.subscriber.subscribe(t,n),h()})]),o}async unsubscribe(t,n){this.isInitialized(),await this.subscriber.unsubscribe(t,n)}on(t,n){this.events.on(t,n)}once(t,n){this.events.once(t,n)}off(t,n){this.events.off(t,n)}removeListener(t,n){this.events.removeListener(t,n)}async transportClose(){this.requestsInFlight.size>0&&(this.logger.debug("Waiting for all in-flight requests to finish before closing transport..."),this.requestsInFlight.forEach(async t=>{await t.promise})),this.transportExplicitlyClosed=!0,this.hasExperiencedNetworkDisruption&&this.connected?await Ao(this.provider.disconnect(),1e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.connected&&await this.provider.disconnect()}async transportOpen(t){if(this.transportExplicitlyClosed=!1,await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress){t&&t!==this.relayUrl&&(this.relayUrl=t,await this.transportClose(),await this.createProvider()),this.connectionAttemptInProgress=!0;try{await Promise.all([new Promise(n=>{if(!this.initialized)return n();this.subscriber.once(gn.resubscribed,()=>{n()})}),new Promise(async(n,s)=>{try{await Ao(this.provider.connect(),1e4,`Socket stalled when trying to connect to ${this.relayUrl}`)}catch(o){s(o);return}n()})])}catch(n){this.logger.error(n);const s=n;if(!this.isConnectionStalled(s.message))throw n;this.provider.events.emit(Hn.disconnect)}finally{this.connectionAttemptInProgress=!1,this.hasExperiencedNetworkDisruption=!1}}}async restartTransport(t){await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress&&(this.relayUrl=t||this.relayUrl,await this.transportClose(),await this.createProvider(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await ey())throw new Error("No internet connection detected. Please restart your network and try again.")}isConnectionStalled(t){return this.staleConnectionErrors.some(n=>t.includes(n))}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const t=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Ll(new $C(ON({sdkVersion:v5,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:t,useOnCloseEvent:!0,bundleId:this.bundleId}))),this.registerProviderListeners()}async recordMessageEvent(t){const{topic:n,message:s}=t;await this.messages.set(n,s)}async shouldIgnoreMessageEvent(t){const{topic:n,message:s}=t;if(!s||s.length===0)return this.logger.debug(`Ignoring invalid/empty message: ${s}`),!0;if(!await this.subscriber.isSubscribed(n))return this.logger.debug(`Ignoring message for non-subscribed topic ${n}`),!0;const o=this.messages.has(n,s);return o&&this.logger.debug(`Ignoring duplicate message: ${s}`),o}async onProviderPayload(t){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:t}),mc(t)){if(!t.method.endsWith(y5))return;const n=t.params,{topic:s,message:o,publishedAt:c}=n.data,f={topic:s,message:o,publishedAt:c};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(G5({type:"event",event:n.id},f)),this.events.emit(n.id,f),await this.acknowledgePayload(t),await this.onMessageEvent(f)}else jo(t)&&this.events.emit(hr.message_ack,t)}async onMessageEvent(t){await this.shouldIgnoreMessageEvent(t)||(this.events.emit(hr.message,t),await this.recordMessageEvent(t))}async acknowledgePayload(t){const n=dc(t.id,!0);await this.provider.connection.send(n)}unregisterProviderListeners(){this.provider.off(Hn.payload,this.onPayloadHandler),this.provider.off(Hn.connect,this.onConnectHandler),this.provider.off(Hn.disconnect,this.onDisconnectHandler),this.provider.off(Hn.error,this.onProviderErrorHandler)}async registerEventListeners(){this.events.on(hr.connection_stalled,()=>{this.restartTransport().catch(n=>this.logger.error(n))});let t=await ey();vC(async n=>{this.initialized&&t!==n&&(t=n,n?await this.restartTransport().catch(s=>this.logger.error(s)):(this.hasExperiencedNetworkDisruption=!0,await this.transportClose().catch(s=>this.logger.error(s))))})}onProviderDisconnect(){this.events.emit(hr.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||(this.logger.info("attemptToReconnect called. Connecting..."),setTimeout(async()=>{await this.restartTransport().catch(t=>this.logger.error(t))},we.toMiliseconds(m5)))}isInitialized(){if(!this.initialized){const{message:t}=me("NOT_INITIALIZED",this.name);throw new Error(t)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectionAttemptInProgress)return await new Promise(t=>{const n=setInterval(()=>{this.connected&&(clearInterval(n),t())},this.connectionStatusPollingInterval)});await this.restartTransport()}}}var Y5=Object.defineProperty,yy=Object.getOwnPropertySymbols,X5=Object.prototype.hasOwnProperty,Q5=Object.prototype.propertyIsEnumerable,my=(e,t,n)=>t in e?Y5(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,vy=(e,t)=>{for(var n in t||(t={}))X5.call(t,n)&&my(e,n,t[n]);if(yy)for(var n of yy(t))Q5.call(t,n)&&my(e,n,t[n]);return e};class Cc extends a6{constructor(t,n,s,o=pi,c=void 0){super(t,n,s,o),this.core=t,this.logger=n,this.name=s,this.map=new Map,this.version=_5,this.cached=[],this.initialized=!1,this.storagePrefix=pi,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(f=>{this.getKey&&f!==null&&!wr(f)?this.map.set(this.getKey(f),f):JN(f)?this.map.set(f.id,f):YN(f)&&this.map.set(f.topic,f)}),this.cached=[],this.initialized=!0)},this.set=async(f,h)=>{this.isInitialized(),this.map.has(f)?await this.update(f,h):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:f,value:h}),this.map.set(f,h),await this.persist())},this.get=f=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:f}),this.getData(f)),this.getAll=f=>(this.isInitialized(),f?this.values.filter(h=>Object.keys(f).every(O=>NC(h[O],f[O]))):this.values),this.update=async(f,h)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:f,update:h});const O=vy(vy({},this.getData(f)),h);this.map.set(f,O),await this.persist()},this.delete=async(f,h)=>{this.isInitialized(),this.map.has(f)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:f,reason:h}),this.map.delete(f),await this.persist())},this.logger=nt.generateChildLogger(n,this.name),this.storagePrefix=o,this.getKey=c}get context(){return nt.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(t){await this.core.storage.setItem(this.storageKey,t)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(t){const n=this.map.get(t);if(!n){const{message:s}=me("NO_MATCHING_KEY",`${this.name}: ${t}`);throw this.logger.error(s),new Error(s)}return n}async persist(){await this.setDataStore(this.values)}async restore(){try{const t=await this.getDataStore();if(typeof t>"u"||!t.length)return;if(this.map.size){const{message:n}=me("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=t,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(t){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(t)}}isInitialized(){if(!this.initialized){const{message:t}=me("NOT_INITIALIZED",this.name);throw new Error(t)}}}class Z5{constructor(t,n){this.core=t,this.logger=n,this.name=I5,this.version=D5,this.events=new Pr.exports,this.initialized=!1,this.storagePrefix=pi,this.ignoredPayloadTypes=[es],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:s})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...s])]},this.create=async()=>{this.isInitialized();const s=Ql(),o=await this.core.crypto.setSymKey(s),c=zr(we.FIVE_MINUTES),f={protocol:nv},h={topic:o,expiry:c,relay:f,active:!1},O=BN({protocol:this.core.protocol,version:this.core.version,topic:o,symKey:s,relay:f,expiryTimestamp:c});return await this.pairings.set(o,h),await this.core.relayer.subscribe(o),this.core.expirer.set(o,c),{topic:o,uri:O}},this.pair=async s=>{this.isInitialized(),this.isValidPair(s);const{topic:o,symKey:c,relay:f,expiryTimestamp:h}=Jg(s.uri);let O;if(this.pairings.keys.includes(o)&&(O=this.pairings.get(o),O.active))throw new Error(`Pairing already exists: ${o}. Please try again with a new connection URI.`);const p=h||zr(we.FIVE_MINUTES),S={topic:o,relay:f,expiry:p,active:!1};return await this.pairings.set(o,S),this.core.expirer.set(o,p),s.activatePairing&&await this.activate({topic:o}),this.events.emit(Do.create,S),this.core.crypto.keychain.has(o)||(await this.core.crypto.setSymKey(c,o),await this.core.relayer.subscribe(o,{relay:f})),S},this.activate=async({topic:s})=>{this.isInitialized();const o=zr(we.THIRTY_DAYS);await this.pairings.update(s,{active:!0,expiry:o}),this.core.expirer.set(s,o)},this.ping=async s=>{this.isInitialized(),await this.isValidPing(s);const{topic:o}=s;if(this.pairings.keys.includes(o)){const c=await this.sendRequest(o,"wc_pairingPing",{}),{done:f,resolve:h,reject:O}=Ts();this.events.once(Lt("pairing_ping",c),({error:p})=>{p?O(p):h()}),await f()}},this.updateExpiry=async({topic:s,expiry:o})=>{this.isInitialized(),await this.pairings.update(s,{expiry:o})},this.updateMetadata=async({topic:s,metadata:o})=>{this.isInitialized(),await this.pairings.update(s,{peerMetadata:o})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async s=>{this.isInitialized(),await this.isValidDisconnect(s);const{topic:o}=s;this.pairings.keys.includes(o)&&(await this.sendRequest(o,"wc_pairingDelete",Mt("USER_DISCONNECTED")),await this.deletePairing(o))},this.sendRequest=async(s,o,c)=>{const f=Hi(o,c),h=await this.core.crypto.encode(s,f),O=So[o].req;return this.core.history.set(s,f),this.core.relayer.publish(s,h,O),f.id},this.sendResult=async(s,o,c)=>{const f=dc(s,c),h=await this.core.crypto.encode(o,f),O=await this.core.history.get(o,s),p=So[O.request.method].res;await this.core.relayer.publish(o,h,p),await this.core.history.resolve(f)},this.sendError=async(s,o,c)=>{const f=Ro(s,c),h=await this.core.crypto.encode(o,f),O=await this.core.history.get(o,s),p=So[O.request.method]?So[O.request.method].res:So.unregistered_method.res;await this.core.relayer.publish(o,h,p),await this.core.history.resolve(f)},this.deletePairing=async(s,o)=>{await this.core.relayer.unsubscribe(s),await Promise.all([this.pairings.delete(s,Mt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(s),o?Promise.resolve():this.core.expirer.del(s)])},this.cleanup=async()=>{const s=this.pairings.getAll().filter(o=>si(o.expiry));await Promise.all(s.map(o=>this.deletePairing(o.topic)))},this.onRelayEventRequest=s=>{const{topic:o,payload:c}=s;switch(c.method){case"wc_pairingPing":return this.onPairingPingRequest(o,c);case"wc_pairingDelete":return this.onPairingDeleteRequest(o,c);default:return this.onUnknownRpcMethodRequest(o,c)}},this.onRelayEventResponse=async s=>{const{topic:o,payload:c}=s,f=(await this.core.history.get(o,c.id)).request.method;switch(f){case"wc_pairingPing":return this.onPairingPingResponse(o,c);default:return this.onUnknownRpcMethodResponse(f)}},this.onPairingPingRequest=async(s,o)=>{const{id:c}=o;try{this.isValidPing({topic:s}),await this.sendResult(c,s,!0),this.events.emit(Do.ping,{id:c,topic:s})}catch(f){await this.sendError(c,s,f),this.logger.error(f)}},this.onPairingPingResponse=(s,o)=>{const{id:c}=o;setTimeout(()=>{Pn(o)?this.events.emit(Lt("pairing_ping",c),{}):on(o)&&this.events.emit(Lt("pairing_ping",c),{error:o.error})},500)},this.onPairingDeleteRequest=async(s,o)=>{const{id:c}=o;try{this.isValidDisconnect({topic:s}),await this.deletePairing(s),this.events.emit(Do.delete,{id:c,topic:s})}catch(f){await this.sendError(c,s,f),this.logger.error(f)}},this.onUnknownRpcMethodRequest=async(s,o)=>{const{id:c,method:f}=o;try{if(this.registeredMethods.includes(f))return;const h=Mt("WC_METHOD_UNSUPPORTED",f);await this.sendError(c,s,h),this.logger.error(h)}catch(h){await this.sendError(c,s,h),this.logger.error(h)}},this.onUnknownRpcMethodResponse=s=>{this.registeredMethods.includes(s)||this.logger.error(Mt("WC_METHOD_UNSUPPORTED",s))},this.isValidPair=s=>{var o;if(!xr(s)){const{message:f}=me("MISSING_OR_INVALID",`pair() params: ${s}`);throw new Error(f)}if(!GN(s.uri)){const{message:f}=me("MISSING_OR_INVALID",`pair() uri: ${s.uri}`);throw new Error(f)}const c=Jg(s.uri);if(!((o=c?.relay)!=null&&o.protocol)){const{message:f}=me("MISSING_OR_INVALID","pair() uri#relay-protocol");throw new Error(f)}if(!(c!=null&&c.symKey)){const{message:f}=me("MISSING_OR_INVALID","pair() uri#symKey");throw new Error(f)}if(c!=null&&c.expiryTimestamp&&we.toMiliseconds(c?.expiryTimestamp)<Date.now()){const{message:f}=me("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(f)}},this.isValidPing=async s=>{if(!xr(s)){const{message:c}=me("MISSING_OR_INVALID",`ping() params: ${s}`);throw new Error(c)}const{topic:o}=s;await this.isValidPairingTopic(o)},this.isValidDisconnect=async s=>{if(!xr(s)){const{message:c}=me("MISSING_OR_INVALID",`disconnect() params: ${s}`);throw new Error(c)}const{topic:o}=s;await this.isValidPairingTopic(o)},this.isValidPairingTopic=async s=>{if(!Zt(s,!1)){const{message:o}=me("MISSING_OR_INVALID",`pairing topic should be a string: ${s}`);throw new Error(o)}if(!this.pairings.keys.includes(s)){const{message:o}=me("NO_MATCHING_KEY",`pairing topic doesn't exist: ${s}`);throw new Error(o)}if(si(this.pairings.get(s).expiry)){await this.deletePairing(s);const{message:o}=me("EXPIRED",`pairing topic: ${s}`);throw new Error(o)}},this.core=t,this.logger=nt.generateChildLogger(n,this.name),this.pairings=new Cc(this.core,this.logger,this.name,this.storagePrefix)}get context(){return nt.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:t}=me("NOT_INITIALIZED",this.name);throw new Error(t)}}registerRelayerEvents(){this.core.relayer.on(hr.message,async t=>{const{topic:n,message:s}=t;if(!this.pairings.keys.includes(n)||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(s)))return;const o=await this.core.crypto.decode(n,s);try{mc(o)?(this.core.history.set(n,o),this.onRelayEventRequest({topic:n,payload:o})):jo(o)&&(await this.core.history.resolve(o),await this.onRelayEventResponse({topic:n,payload:o}),this.core.history.delete(n,o.id))}catch(c){this.logger.error(c)}})}registerExpirerEvents(){this.core.expirer.on(sn.expired,async t=>{const{topic:n}=Hm(t.target);n&&this.pairings.keys.includes(n)&&(await this.deletePairing(n,!0),this.events.emit(Do.expire,{topic:n}))})}}class eT extends n6{constructor(t,n){super(t,n),this.core=t,this.logger=n,this.records=new Map,this.events=new Pr.exports.EventEmitter,this.name=P5,this.version=$5,this.cached=[],this.initialized=!1,this.storagePrefix=pi,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(s=>this.records.set(s.id,s)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(s,o,c)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:s,request:o,chainId:c}),this.records.has(o.id))return;const f={id:o.id,topic:s,request:{method:o.method,params:o.params||null},chainId:c,expiry:zr(we.THIRTY_DAYS)};this.records.set(f.id,f),this.events.emit(En.created,f)},this.resolve=async s=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:s}),!this.records.has(s.id))return;const o=await this.getRecord(s.id);typeof o.response>"u"&&(o.response=on(s)?{error:s.error}:{result:s.result},this.records.set(o.id,o),this.events.emit(En.updated,o))},this.get=async(s,o)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:s,id:o}),await this.getRecord(o)),this.delete=(s,o)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:o}),this.values.forEach(c=>{if(c.topic===s){if(typeof o<"u"&&c.id!==o)return;this.records.delete(c.id),this.events.emit(En.deleted,c)}})},this.exists=async(s,o)=>(this.isInitialized(),this.records.has(o)?(await this.getRecord(o)).topic===s:!1),this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.logger=nt.generateChildLogger(n,this.name)}get context(){return nt.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const t=[];return this.values.forEach(n=>{if(typeof n.response<"u")return;const s={topic:n.topic,request:Hi(n.request.method,n.request.params,n.id),chainId:n.chainId};return t.push(s)}),t}async setJsonRpcRecords(t){await this.core.storage.setItem(this.storageKey,t)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(t){this.isInitialized();const n=this.records.get(t);if(!n){const{message:s}=me("NO_MATCHING_KEY",`${this.name}: ${t}`);throw new Error(s)}return n}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(En.sync)}async restore(){try{const t=await this.getJsonRpcRecords();if(typeof t>"u"||!t.length)return;if(this.records.size){const{message:n}=me("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=t,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(t){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(t)}}registerEventListeners(){this.events.on(En.created,t=>{const n=En.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:t}),this.persist()}),this.events.on(En.updated,t=>{const n=En.updated;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:t}),this.persist()}),this.events.on(En.deleted,t=>{const n=En.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:t}),this.persist()}),this.core.heartbeat.on(Fs.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(t=>{we.toMiliseconds(t.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${t.id}`),this.delete(t.topic,t.id))})}catch(t){this.logger.warn(t)}}isInitialized(){if(!this.initialized){const{message:t}=me("NOT_INITIALIZED",this.name);throw new Error(t)}}}class tT extends u6{constructor(t,n){super(t,n),this.core=t,this.logger=n,this.expirations=new Map,this.events=new Pr.exports.EventEmitter,this.name=N5,this.version=C5,this.cached=[],this.initialized=!1,this.storagePrefix=pi,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(s=>this.expirations.set(s.target,s)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=s=>{try{const o=this.formatTarget(s);return typeof this.getExpiration(o)<"u"}catch{return!1}},this.set=(s,o)=>{this.isInitialized();const c=this.formatTarget(s),f={target:c,expiry:o};this.expirations.set(c,f),this.checkExpiry(c,f),this.events.emit(sn.created,{target:c,expiration:f})},this.get=s=>{this.isInitialized();const o=this.formatTarget(s);return this.getExpiration(o)},this.del=s=>{if(this.isInitialized(),this.has(s)){const o=this.formatTarget(s),c=this.getExpiration(o);this.expirations.delete(o),this.events.emit(sn.deleted,{target:o,expiration:c})}},this.on=(s,o)=>{this.events.on(s,o)},this.once=(s,o)=>{this.events.once(s,o)},this.off=(s,o)=>{this.events.off(s,o)},this.removeListener=(s,o)=>{this.events.removeListener(s,o)},this.logger=nt.generateChildLogger(n,this.name)}get context(){return nt.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(t){if(typeof t=="string")return IN(t);if(typeof t=="number")return DN(t);const{message:n}=me("UNKNOWN_TYPE",`Target type: ${typeof t}`);throw new Error(n)}async setExpirations(t){await this.core.storage.setItem(this.storageKey,t)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(sn.sync)}async restore(){try{const t=await this.getExpirations();if(typeof t>"u"||!t.length)return;if(this.expirations.size){const{message:n}=me("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=t,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(t){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(t)}}getExpiration(t){const n=this.expirations.get(t);if(!n){const{message:s}=me("NO_MATCHING_KEY",`${this.name}: ${t}`);throw this.logger.error(s),new Error(s)}return n}checkExpiry(t,n){const{expiry:s}=n;we.toMiliseconds(s)-Date.now()<=0&&this.expire(t,n)}expire(t,n){this.expirations.delete(t),this.events.emit(sn.expired,{target:t,expiration:n})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((t,n)=>this.checkExpiry(n,t))}registerEventListeners(){this.core.heartbeat.on(Fs.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(sn.created,t=>{const n=sn.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:t}),this.persist()}),this.events.on(sn.expired,t=>{const n=sn.expired;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:t}),this.persist()}),this.events.on(sn.deleted,t=>{const n=sn.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:t}),this.persist()})}isInitialized(){if(!this.initialized){const{message:t}=me("NOT_INITIALIZED",this.name);throw new Error(t)}}}class rT extends l6{constructor(t,n){super(t,n),this.projectId=t,this.logger=n,this.name=Nl,this.initialized=!1,this.queue=[],this.verifyDisabled=!1,this.init=async s=>{if(this.verifyDisabled||qs()||!Hs())return;const o=this.getVerifyUrl(s?.verifyUrl);this.verifyUrl!==o&&this.removeIframe(),this.verifyUrl=o;try{await this.createIframe()}catch(c){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(c)}if(!this.initialized){this.removeIframe(),this.verifyUrl=nh;try{await this.createIframe()}catch(c){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(c),this.verifyDisabled=!0}}},this.register=async s=>{this.initialized?this.sendPost(s.attestationId):(this.addToQueue(s.attestationId),await this.init())},this.resolve=async s=>{if(this.isDevEnv)return"";const o=this.getVerifyUrl(s?.verifyUrl);let c;try{c=await this.fetchAttestation(s.attestationId,o)}catch(f){this.logger.info(`failed to resolve attestation: ${s.attestationId} from url: ${o}`),this.logger.info(f),c=await this.fetchAttestation(s.attestationId,nh)}return c},this.fetchAttestation=async(s,o)=>{this.logger.info(`resolving attestation: ${s} from url: ${o}`);const c=this.startAbortTimer(we.ONE_SECOND*2),f=await fetch(`${o}/attestation/${s}`,{signal:this.abortController.signal});return clearTimeout(c),f.status===200?await f.json():void 0},this.addToQueue=s=>{this.queue.push(s)},this.processQueue=()=>{this.queue.length!==0&&(this.queue.forEach(s=>this.sendPost(s)),this.queue=[])},this.sendPost=s=>{var o;try{if(!this.iframe)return;(o=this.iframe.contentWindow)==null||o.postMessage(s,"*"),this.logger.info(`postMessage sent: ${s} ${this.verifyUrl}`)}catch{}},this.createIframe=async()=>{let s;const o=c=>{c.data==="verify_ready"&&(this.initialized=!0,this.processQueue(),window.removeEventListener("message",o),s())};await Promise.race([new Promise(c=>{if(document.getElementById(Nl))return c();window.addEventListener("message",o);const f=document.createElement("iframe");f.id=Nl,f.src=`${this.verifyUrl}/${this.projectId}`,f.style.display="none",document.body.append(f),this.iframe=f,s=c}),new Promise((c,f)=>setTimeout(()=>{window.removeEventListener("message",o),f("verify iframe load timeout")},we.toMiliseconds(we.FIVE_SECONDS)))])},this.removeIframe=()=>{this.iframe&&(this.iframe.remove(),this.iframe=void 0,this.initialized=!1)},this.getVerifyUrl=s=>{let o=s||xs;return A5.includes(o)||(this.logger.info(`verify url: ${o}, not included in trusted list, assigning default: ${xs}`),o=xs),o},this.logger=nt.generateChildLogger(n,this.name),this.verifyUrl=xs,this.abortController=new AbortController,this.isDevEnv=Kh()&&{}.IS_VITEST}get context(){return nt.getLoggerContext(this.logger)}startAbortTimer(t){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),we.toMiliseconds(t))}}class nT extends h6{constructor(t,n){super(t,n),this.projectId=t,this.logger=n,this.context=T5,this.registerDeviceToken=async s=>{const{clientId:o,token:c,notificationType:f,enableEncrypted:h=!1}=s,O=`${x5}/${this.projectId}/clients`;await TC(O,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:o,type:f,token:c,always_raw:h})})},this.logger=nt.generateChildLogger(n,this.context)}}var iT=Object.defineProperty,by=Object.getOwnPropertySymbols,sT=Object.prototype.hasOwnProperty,oT=Object.prototype.propertyIsEnumerable,_y=(e,t,n)=>t in e?iT(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,wy=(e,t)=>{for(var n in t||(t={}))sT.call(t,n)&&_y(e,n,t[n]);if(by)for(var n of by(t))oT.call(t,n)&&_y(e,n,t[n]);return e};class Jh extends r6{constructor(t){super(t),this.protocol=rv,this.version=n5,this.name=Gh,this.events=new Pr.exports.EventEmitter,this.initialized=!1,this.on=(s,o)=>this.events.on(s,o),this.once=(s,o)=>this.events.once(s,o),this.off=(s,o)=>this.events.off(s,o),this.removeListener=(s,o)=>this.events.removeListener(s,o),this.projectId=t?.projectId,this.relayUrl=t?.relayUrl||iv,this.customStoragePrefix=t!=null&&t.customStoragePrefix?`:${t.customStoragePrefix}`:"";const n=typeof t?.logger<"u"&&typeof t?.logger!="string"?t.logger:nt.pino(nt.getDefaultLoggerOptions({level:t?.logger||i5.logger}));this.logger=nt.generateChildLogger(n,this.name),this.heartbeat=new Fs.HeartBeat,this.crypto=new j5(this,this.logger,t?.keychain),this.history=new eT(this,this.logger),this.expirer=new tT(this,this.logger),this.storage=t!=null&&t.storage?t.storage:new K$(wy(wy({},s5),t?.storageOptions)),this.relayer=new J5({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new Z5(this,this.logger),this.verify=new rT(this.projectId||"",this.logger),this.echoClient=new nT(this.projectId||"",this.logger)}static async init(t){const n=new Jh(t);await n.initialize();const s=await n.crypto.getClientId();return await n.storage.setItem(w5,s),n}get context(){return nt.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(t){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,t),this.logger.error(t.message),t}}}const aT=Jh,Yh="wc",Xh=2,Qh="client",Ac=`${Yh}@${Xh}:${Qh}:`,tc={name:Qh,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},cT={session_proposal:"session_proposal",session_update:"session_update",session_extend:"session_extend",session_ping:"session_ping",session_delete:"session_delete",session_expire:"session_expire",session_request:"session_request",session_request_sent:"session_request_sent",session_event:"session_event",proposal_expire:"proposal_expire",session_request_expire:"session_request_expire"},uT={database:":memory:"},ih="WALLETCONNECT_DEEPLINK_CHOICE",lT={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},hT="history",fT="0.3",sv="proposal",dT=we.THIRTY_DAYS,ov="Proposal expired",av="session",Po=we.SEVEN_DAYS,cv="engine",In={wc_sessionPropose:{req:{ttl:we.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:we.ONE_DAY,prompt:!1,tag:1104},res:{ttl:we.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:we.ONE_DAY,prompt:!1,tag:1106},res:{ttl:we.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:we.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:we.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:we.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:we.ONE_DAY,prompt:!1,tag:1112},res:{ttl:we.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:we.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:we.THIRTY_SECONDS,prompt:!1,tag:1115}}},rc={min:we.FIVE_MINUTES,max:we.SEVEN_DAYS},Dn={idle:"IDLE",active:"ACTIVE"},uv="request",lv=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var pT=Object.defineProperty,gT=Object.defineProperties,yT=Object.getOwnPropertyDescriptors,Ey=Object.getOwnPropertySymbols,mT=Object.prototype.hasOwnProperty,vT=Object.prototype.propertyIsEnumerable,Sy=(e,t,n)=>t in e?pT(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,_r=(e,t)=>{for(var n in t||(t={}))mT.call(t,n)&&Sy(e,n,t[n]);if(Ey)for(var n of Ey(t))vT.call(t,n)&&Sy(e,n,t[n]);return e},Cs=(e,t)=>gT(e,yT(t));class bT extends d6{constructor(t){super(t),this.name=cv,this.events=new Pr.exports,this.initialized=!1,this.ignoredPayloadTypes=[es],this.requestQueue={state:Dn.idle,queue:[]},this.sessionRequestQueue={state:Dn.idle,queue:[]},this.requestQueueDelay=we.ONE_SECOND,this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),this.client.core.pairing.register({methods:Object.keys(In)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},we.toMiliseconds(this.requestQueueDelay)))},this.connect=async n=>{await this.isInitialized();const s=Cs(_r({},n),{requiredNamespaces:n.requiredNamespaces||{},optionalNamespaces:n.optionalNamespaces||{}});await this.isValidConnect(s);const{pairingTopic:o,requiredNamespaces:c,optionalNamespaces:f,sessionProperties:h,relays:O}=s;let p=o,S,C=!1;if(p&&(C=this.client.core.pairing.pairings.get(p).active),!p||!C){const{topic:I,uri:D}=await this.client.core.pairing.create();p=I,S=D}const R=await this.client.core.crypto.generateKeyPair(),U=In.wc_sessionPropose.req.ttl||we.FIVE_MINUTES,x=zr(U),F=_r({requiredNamespaces:c,optionalNamespaces:f,relays:O??[{protocol:nv}],proposer:{publicKey:R,metadata:this.client.metadata},expiryTimestamp:x},h&&{sessionProperties:h}),{reject:q,resolve:te,done:_}=Ts(U,ov);if(this.events.once(Lt("session_connect"),async({error:I,session:D})=>{if(I)q(I);else if(D){D.self.publicKey=R;const w=Cs(_r({},D),{requiredNamespaces:F.requiredNamespaces,optionalNamespaces:F.optionalNamespaces});await this.client.session.set(D.topic,w),await this.setExpiry(D.topic,D.expiry),p&&await this.client.core.pairing.updateMetadata({topic:p,metadata:D.peer.metadata}),te(w)}}),!p){const{message:I}=me("NO_MATCHING_KEY",`connect() pairing topic: ${p}`);throw new Error(I)}const A=await this.sendRequest({topic:p,method:"wc_sessionPropose",params:F,throwOnFailedPublish:!0});return await this.setProposal(A,_r({id:A},F)),{uri:S,approval:_}},this.pair=async n=>(await this.isInitialized(),await this.client.core.pairing.pair(n)),this.approve=async n=>{await this.isInitialized(),await this.isValidApprove(n);const{id:s,relayProtocol:o,namespaces:c,sessionProperties:f}=n,h=this.client.proposal.get(s);let{pairingTopic:O,proposer:p,requiredNamespaces:S,optionalNamespaces:C}=h;O=O||"";const R=await this.client.core.crypto.generateKeyPair(),U=p.publicKey,x=await this.client.core.crypto.generateSharedKey(R,U);O&&s&&(await this.client.core.pairing.updateMetadata({topic:O,metadata:p.metadata}),await this.sendResult({id:s,topic:O,result:{relay:{protocol:o??"irn"},responderPublicKey:R}}),await this.client.proposal.delete(s,Mt("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:O}));const F=_r({relay:{protocol:o??"irn"},namespaces:c,pairingTopic:O,controller:{publicKey:R,metadata:this.client.metadata},expiry:zr(Po)},f&&{sessionProperties:f});await this.client.core.relayer.subscribe(x);const q=Cs(_r({},F),{topic:x,requiredNamespaces:S,optionalNamespaces:C,pairingTopic:O,acknowledged:!1,self:F.controller,peer:{publicKey:p.publicKey,metadata:p.metadata},controller:R});await this.client.session.set(x,q);try{await this.sendRequest({topic:x,method:"wc_sessionSettle",params:F,throwOnFailedPublish:!0})}catch(te){throw this.client.logger.error(te),this.client.session.delete(x,Mt("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(x),te}return await this.setExpiry(x,zr(Po)),{topic:x,acknowledged:()=>new Promise(te=>setTimeout(()=>te(this.client.session.get(x)),500))}},this.reject=async n=>{await this.isInitialized(),await this.isValidReject(n);const{id:s,reason:o}=n,{pairingTopic:c}=this.client.proposal.get(s);c&&(await this.sendError(s,c,o),await this.client.proposal.delete(s,Mt("USER_DISCONNECTED")))},this.update=async n=>{await this.isInitialized(),await this.isValidUpdate(n);const{topic:s,namespaces:o}=n,c=await this.sendRequest({topic:s,method:"wc_sessionUpdate",params:{namespaces:o}}),{done:f,resolve:h,reject:O}=Ts();return this.events.once(Lt("session_update",c),({error:p})=>{p?O(p):h()}),await this.client.session.update(s,{namespaces:o}),{acknowledged:f}},this.extend=async n=>{await this.isInitialized(),await this.isValidExtend(n);const{topic:s}=n,o=await this.sendRequest({topic:s,method:"wc_sessionExtend",params:{}}),{done:c,resolve:f,reject:h}=Ts();return this.events.once(Lt("session_extend",o),({error:O})=>{O?h(O):f()}),await this.setExpiry(s,zr(Po)),{acknowledged:c}},this.request=async n=>{await this.isInitialized(),await this.isValidRequest(n);const{chainId:s,request:o,topic:c,expiry:f=In.wc_sessionRequest.req.ttl}=n,h=Qy(),{done:O,resolve:p,reject:S}=Ts(f,"Request expired. Please try again.");return this.events.once(Lt("session_request",h),({error:C,result:R})=>{C?S(C):p(R)}),await Promise.all([new Promise(async C=>{await this.sendRequest({clientRpcId:h,topic:c,method:"wc_sessionRequest",params:{request:Cs(_r({},o),{expiryTimestamp:zr(f)}),chainId:s},expiry:f,throwOnFailedPublish:!0}).catch(R=>S(R)),this.client.events.emit("session_request_sent",{topic:c,request:o,chainId:s,id:h}),C()}),new Promise(async C=>{const R=await $N(this.client.core.storage,ih);PN({id:h,topic:c,wcDeepLink:R}),C()}),O()]).then(C=>C[2])},this.respond=async n=>{await this.isInitialized(),await this.isValidRespond(n);const{topic:s,response:o}=n,{id:c}=o;Pn(o)?await this.sendResult({id:c,topic:s,result:o.result,throwOnFailedPublish:!0}):on(o)&&await this.sendError(c,s,o.error),this.cleanupAfterResponse(n)},this.ping=async n=>{await this.isInitialized(),await this.isValidPing(n);const{topic:s}=n;if(this.client.session.keys.includes(s)){const o=await this.sendRequest({topic:s,method:"wc_sessionPing",params:{}}),{done:c,resolve:f,reject:h}=Ts();this.events.once(Lt("session_ping",o),({error:O})=>{O?h(O):f()}),await c()}else this.client.core.pairing.pairings.keys.includes(s)&&await this.client.core.pairing.ping({topic:s})},this.emit=async n=>{await this.isInitialized(),await this.isValidEmit(n);const{topic:s,event:o,chainId:c}=n;await this.sendRequest({topic:s,method:"wc_sessionEvent",params:{event:o,chainId:c}})},this.disconnect=async n=>{await this.isInitialized(),await this.isValidDisconnect(n);const{topic:s}=n;if(this.client.session.keys.includes(s))await this.sendRequest({topic:s,method:"wc_sessionDelete",params:Mt("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:s,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(s))await this.client.core.pairing.disconnect({topic:s});else{const{message:o}=me("MISMATCHED_TOPIC",`Session or pairing topic not found: ${s}`);throw new Error(o)}},this.find=n=>(this.isInitialized(),this.client.session.getAll().filter(s=>KN(s,n))),this.getPendingSessionRequests=()=>this.client.pendingRequest.getAll(),this.cleanupDuplicatePairings=async n=>{if(n.pairingTopic)try{const s=this.client.core.pairing.pairings.get(n.pairingTopic),o=this.client.core.pairing.pairings.getAll().filter(c=>{var f,h;return((f=c.peerMetadata)==null?void 0:f.url)&&((h=c.peerMetadata)==null?void 0:h.url)===n.peer.metadata.url&&c.topic&&c.topic!==s.topic});if(o.length===0)return;this.client.logger.info(`Cleaning up ${o.length} duplicate pairing(s)`),await Promise.all(o.map(c=>this.client.core.pairing.disconnect({topic:c.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(s){this.client.logger.error(s)}},this.deleteSession=async n=>{const{topic:s,expirerHasDeleted:o=!1,emitEvent:c=!0,id:f=0}=n,{self:h}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,Mt("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(h.publicKey)&&await this.client.core.crypto.deleteKeyPair(h.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),o||this.client.core.expirer.del(s),this.client.core.storage.removeItem(ih).catch(O=>this.client.logger.warn(O)),this.getPendingSessionRequests().forEach(O=>{O.topic===s&&this.deletePendingSessionRequest(O.id,Mt("USER_DISCONNECTED"))}),c&&this.client.events.emit("session_delete",{id:f,topic:s})},this.deleteProposal=async(n,s)=>{await Promise.all([this.client.proposal.delete(n,Mt("USER_DISCONNECTED")),s?Promise.resolve():this.client.core.expirer.del(n)])},this.deletePendingSessionRequest=async(n,s,o=!1)=>{await Promise.all([this.client.pendingRequest.delete(n,s),o?Promise.resolve():this.client.core.expirer.del(n)]),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(c=>c.id!==n),o&&(this.sessionRequestQueue.state=Dn.idle,this.client.events.emit("session_request_expire",{id:n}))},this.setExpiry=async(n,s)=>{this.client.session.keys.includes(n)&&await this.client.session.update(n,{expiry:s}),this.client.core.expirer.set(n,s)},this.setProposal=async(n,s)=>{await this.client.proposal.set(n,s),this.client.core.expirer.set(n,zr(In.wc_sessionPropose.req.ttl))},this.setPendingSessionRequest=async n=>{const{id:s,topic:o,params:c,verifyContext:f}=n,h=c.request.expiryTimestamp||zr(In.wc_sessionRequest.req.ttl);await this.client.pendingRequest.set(s,{id:s,topic:o,params:c,verifyContext:f}),h&&this.client.core.expirer.set(s,h)},this.sendRequest=async n=>{const{topic:s,method:o,params:c,expiry:f,relayRpcId:h,clientRpcId:O,throwOnFailedPublish:p}=n,S=Hi(o,c,O);if(Hs()&&lv.includes(o)){const U=Rs(JSON.stringify(S));this.client.core.verify.register({attestationId:U})}const C=await this.client.core.crypto.encode(s,S),R=In[o].req;return f&&(R.ttl=f),h&&(R.id=h),this.client.core.history.set(s,S),p?(R.internal=Cs(_r({},R.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,C,R)):this.client.core.relayer.publish(s,C,R).catch(U=>this.client.logger.error(U)),S.id},this.sendResult=async n=>{const{id:s,topic:o,result:c,throwOnFailedPublish:f}=n,h=dc(s,c),O=await this.client.core.crypto.encode(o,h),p=await this.client.core.history.get(o,s),S=In[p.request.method].res;f?(S.internal=Cs(_r({},S.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(o,O,S)):this.client.core.relayer.publish(o,O,S).catch(C=>this.client.logger.error(C)),await this.client.core.history.resolve(h)},this.sendError=async(n,s,o)=>{const c=Ro(n,o),f=await this.client.core.crypto.encode(s,c),h=await this.client.core.history.get(s,n),O=In[h.request.method].res;this.client.core.relayer.publish(s,f,O),await this.client.core.history.resolve(c)},this.cleanup=async()=>{const n=[],s=[];this.client.session.getAll().forEach(o=>{let c=!1;si(o.expiry)&&(c=!0),this.client.core.crypto.keychain.has(o.topic)||(c=!0),c&&n.push(o.topic)}),this.client.proposal.getAll().forEach(o=>{si(o.expiryTimestamp)&&s.push(o.id)}),await Promise.all([...n.map(o=>this.deleteSession({topic:o})),...s.map(o=>this.deleteProposal(o))])},this.onRelayEventRequest=async n=>{this.requestQueue.queue.push(n),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state===Dn.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=Dn.active;const n=this.requestQueue.queue.shift();if(n)try{this.processRequest(n),await new Promise(s=>setTimeout(s,300))}catch(s){this.client.logger.warn(s)}}this.requestQueue.state=Dn.idle},this.processRequest=n=>{const{topic:s,payload:o}=n,c=o.method;switch(c){case"wc_sessionPropose":return this.onSessionProposeRequest(s,o);case"wc_sessionSettle":return this.onSessionSettleRequest(s,o);case"wc_sessionUpdate":return this.onSessionUpdateRequest(s,o);case"wc_sessionExtend":return this.onSessionExtendRequest(s,o);case"wc_sessionPing":return this.onSessionPingRequest(s,o);case"wc_sessionDelete":return this.onSessionDeleteRequest(s,o);case"wc_sessionRequest":return this.onSessionRequest(s,o);case"wc_sessionEvent":return this.onSessionEventRequest(s,o);default:return this.client.logger.info(`Unsupported request method ${c}`)}},this.onRelayEventResponse=async n=>{const{topic:s,payload:o}=n,c=(await this.client.core.history.get(s,o.id)).request.method;switch(c){case"wc_sessionPropose":return this.onSessionProposeResponse(s,o);case"wc_sessionSettle":return this.onSessionSettleResponse(s,o);case"wc_sessionUpdate":return this.onSessionUpdateResponse(s,o);case"wc_sessionExtend":return this.onSessionExtendResponse(s,o);case"wc_sessionPing":return this.onSessionPingResponse(s,o);case"wc_sessionRequest":return this.onSessionRequestResponse(s,o);default:return this.client.logger.info(`Unsupported response method ${c}`)}},this.onRelayEventUnknownPayload=n=>{const{topic:s}=n,{message:o}=me("MISSING_OR_INVALID",`Decoded payload on topic ${s} is not identifiable as a JSON-RPC request or a response.`);throw new Error(o)},this.onSessionProposeRequest=async(n,s)=>{const{params:o,id:c}=s;try{this.isValidConnect(_r({},s.params));const f=o.expiryTimestamp||zr(In.wc_sessionPropose.req.ttl),h=_r({id:c,pairingTopic:n,expiryTimestamp:f},o);await this.setProposal(c,h);const O=Rs(JSON.stringify(s)),p=await this.getVerifyContext(O,h.proposer.metadata);this.client.events.emit("session_proposal",{id:c,params:h,verifyContext:p})}catch(f){await this.sendError(c,n,f),this.client.logger.error(f)}},this.onSessionProposeResponse=async(n,s)=>{const{id:o}=s;if(Pn(s)){const{result:c}=s;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:c});const f=this.client.proposal.get(o);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:f});const h=f.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:h});const O=c.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:O});const p=await this.client.core.crypto.generateSharedKey(h,O);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:p});const S=await this.client.core.relayer.subscribe(p);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:S}),await this.client.core.pairing.activate({topic:n})}else on(s)&&(await this.client.proposal.delete(o,Mt("USER_DISCONNECTED")),this.events.emit(Lt("session_connect"),{error:s.error}))},this.onSessionSettleRequest=async(n,s)=>{const{id:o,params:c}=s;try{this.isValidSessionSettleRequest(c);const{relay:f,controller:h,expiry:O,namespaces:p,sessionProperties:S,pairingTopic:C}=s.params,R=_r({topic:n,relay:f,expiry:O,namespaces:p,acknowledged:!0,pairingTopic:C,requiredNamespaces:{},optionalNamespaces:{},controller:h.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:h.publicKey,metadata:h.metadata}},S&&{sessionProperties:S});await this.sendResult({id:s.id,topic:n,result:!0}),this.events.emit(Lt("session_connect"),{session:R}),this.cleanupDuplicatePairings(R)}catch(f){await this.sendError(o,n,f),this.client.logger.error(f)}},this.onSessionSettleResponse=async(n,s)=>{const{id:o}=s;Pn(s)?(await this.client.session.update(n,{acknowledged:!0}),this.events.emit(Lt("session_approve",o),{})):on(s)&&(await this.client.session.delete(n,Mt("USER_DISCONNECTED")),this.events.emit(Lt("session_approve",o),{error:s.error}))},this.onSessionUpdateRequest=async(n,s)=>{const{params:o,id:c}=s;try{const f=`${n}_session_update`,h=Ga.get(f);if(h&&this.isRequestOutOfSync(h,c)){this.client.logger.info(`Discarding out of sync request - ${c}`);return}this.isValidUpdate(_r({topic:n},o)),await this.client.session.update(n,{namespaces:o.namespaces}),await this.sendResult({id:c,topic:n,result:!0}),this.client.events.emit("session_update",{id:c,topic:n,params:o}),Ga.set(f,c)}catch(f){await this.sendError(c,n,f),this.client.logger.error(f)}},this.isRequestOutOfSync=(n,s)=>parseInt(s.toString().slice(0,-3))<=parseInt(n.toString().slice(0,-3)),this.onSessionUpdateResponse=(n,s)=>{const{id:o}=s;Pn(s)?this.events.emit(Lt("session_update",o),{}):on(s)&&this.events.emit(Lt("session_update",o),{error:s.error})},this.onSessionExtendRequest=async(n,s)=>{const{id:o}=s;try{this.isValidExtend({topic:n}),await this.setExpiry(n,zr(Po)),await this.sendResult({id:o,topic:n,result:!0}),this.client.events.emit("session_extend",{id:o,topic:n})}catch(c){await this.sendError(o,n,c),this.client.logger.error(c)}},this.onSessionExtendResponse=(n,s)=>{const{id:o}=s;Pn(s)?this.events.emit(Lt("session_extend",o),{}):on(s)&&this.events.emit(Lt("session_extend",o),{error:s.error})},this.onSessionPingRequest=async(n,s)=>{const{id:o}=s;try{this.isValidPing({topic:n}),await this.sendResult({id:o,topic:n,result:!0}),this.client.events.emit("session_ping",{id:o,topic:n})}catch(c){await this.sendError(o,n,c),this.client.logger.error(c)}},this.onSessionPingResponse=(n,s)=>{const{id:o}=s;setTimeout(()=>{Pn(s)?this.events.emit(Lt("session_ping",o),{}):on(s)&&this.events.emit(Lt("session_ping",o),{error:s.error})},500)},this.onSessionDeleteRequest=async(n,s)=>{const{id:o}=s;try{this.isValidDisconnect({topic:n,reason:s.params}),await Promise.all([new Promise(c=>{this.client.core.relayer.once(hr.publish,async()=>{c(await this.deleteSession({topic:n,id:o}))})}),this.sendResult({id:o,topic:n,result:!0}),this.cleanupPendingSentRequestsForTopic({topic:n,error:Mt("USER_DISCONNECTED")})])}catch(c){this.client.logger.error(c)}},this.onSessionRequest=async(n,s)=>{const{id:o,params:c}=s;try{this.isValidRequest(_r({topic:n},c));const f=Rs(JSON.stringify(Hi("wc_sessionRequest",c,o))),h=this.client.session.get(n),O=await this.getVerifyContext(f,h.peer.metadata),p={id:o,topic:n,params:c,verifyContext:O};await this.setPendingSessionRequest(p),this.addSessionRequestToSessionRequestQueue(p),this.processSessionRequestQueue()}catch(f){await this.sendError(o,n,f),this.client.logger.error(f)}},this.onSessionRequestResponse=(n,s)=>{const{id:o}=s;Pn(s)?this.events.emit(Lt("session_request",o),{result:s.result}):on(s)&&this.events.emit(Lt("session_request",o),{error:s.error})},this.onSessionEventRequest=async(n,s)=>{const{id:o,params:c}=s;try{const f=`${n}_session_event_${c.event.name}`,h=Ga.get(f);if(h&&this.isRequestOutOfSync(h,o)){this.client.logger.info(`Discarding out of sync request - ${o}`);return}this.isValidEmit(_r({topic:n},c)),this.client.events.emit("session_event",{id:o,topic:n,params:c}),Ga.set(f,o)}catch(f){await this.sendError(o,n,f),this.client.logger.error(f)}},this.addSessionRequestToSessionRequestQueue=n=>{this.sessionRequestQueue.queue.push(n)},this.cleanupAfterResponse=n=>{this.deletePendingSessionRequest(n.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=Dn.idle,this.processSessionRequestQueue()},we.toMiliseconds(this.requestQueueDelay))},this.cleanupPendingSentRequestsForTopic=({topic:n,error:s})=>{const o=this.client.core.history.pending;o.length>0&&o.filter(c=>c.topic===n&&c.request.method==="wc_sessionRequest").forEach(c=>{this.events.emit(Lt("session_request",c.request.id),{error:s})})},this.processSessionRequestQueue=()=>{if(this.sessionRequestQueue.state===Dn.active){this.client.logger.info("session request queue is already active.");return}const n=this.sessionRequestQueue.queue[0];if(!n){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=Dn.active,this.client.events.emit("session_request",n)}catch(s){this.client.logger.error(s)}},this.onPairingCreated=n=>{if(n.active)return;const s=this.client.proposal.getAll().find(o=>o.pairingTopic===n.topic);s&&this.onSessionProposeRequest(n.topic,Hi("wc_sessionPropose",{requiredNamespaces:s.requiredNamespaces,optionalNamespaces:s.optionalNamespaces,relays:s.relays,proposer:s.proposer,sessionProperties:s.sessionProperties},s.id))},this.isValidConnect=async n=>{if(!xr(n)){const{message:O}=me("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(n)}`);throw new Error(O)}const{pairingTopic:s,requiredNamespaces:o,optionalNamespaces:c,sessionProperties:f,relays:h}=n;if(wr(s)||await this.isValidPairingTopic(s),!iC(h,!0)){const{message:O}=me("MISSING_OR_INVALID",`connect() relays: ${h}`);throw new Error(O)}!wr(o)&&uc(o)!==0&&this.validateNamespaces(o,"requiredNamespaces"),!wr(c)&&uc(c)!==0&&this.validateNamespaces(c,"optionalNamespaces"),wr(f)||this.validateSessionProps(f,"sessionProperties")},this.validateNamespaces=(n,s)=>{const o=nC(n,"connect()",s);if(o)throw new Error(o.message)},this.isValidApprove=async n=>{if(!xr(n))throw new Error(me("MISSING_OR_INVALID",`approve() params: ${n}`).message);const{id:s,namespaces:o,relayProtocol:c,sessionProperties:f}=n;await this.isValidProposalId(s);const h=this.client.proposal.get(s),O=Dl(o,"approve()");if(O)throw new Error(O.message);const p=Qg(h.requiredNamespaces,o,"approve()");if(p)throw new Error(p.message);if(!Zt(c,!0)){const{message:S}=me("MISSING_OR_INVALID",`approve() relayProtocol: ${c}`);throw new Error(S)}wr(f)||this.validateSessionProps(f,"sessionProperties")},this.isValidReject=async n=>{if(!xr(n)){const{message:c}=me("MISSING_OR_INVALID",`reject() params: ${n}`);throw new Error(c)}const{id:s,reason:o}=n;if(await this.isValidProposalId(s),!oC(o)){const{message:c}=me("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(o)}`);throw new Error(c)}},this.isValidSessionSettleRequest=n=>{if(!xr(n)){const{message:p}=me("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${n}`);throw new Error(p)}const{relay:s,controller:o,namespaces:c,expiry:f}=n;if(!zm(s)){const{message:p}=me("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(p)}const h=XN(o,"onSessionSettleRequest()");if(h)throw new Error(h.message);const O=Dl(c,"onSessionSettleRequest()");if(O)throw new Error(O.message);if(si(f)){const{message:p}=me("EXPIRED","onSessionSettleRequest()");throw new Error(p)}},this.isValidUpdate=async n=>{if(!xr(n)){const{message:O}=me("MISSING_OR_INVALID",`update() params: ${n}`);throw new Error(O)}const{topic:s,namespaces:o}=n;await this.isValidSessionTopic(s);const c=this.client.session.get(s),f=Dl(o,"update()");if(f)throw new Error(f.message);const h=Qg(c.requiredNamespaces,o,"update()");if(h)throw new Error(h.message)},this.isValidExtend=async n=>{if(!xr(n)){const{message:o}=me("MISSING_OR_INVALID",`extend() params: ${n}`);throw new Error(o)}const{topic:s}=n;await this.isValidSessionTopic(s)},this.isValidRequest=async n=>{if(!xr(n)){const{message:O}=me("MISSING_OR_INVALID",`request() params: ${n}`);throw new Error(O)}const{topic:s,request:o,chainId:c,expiry:f}=n;await this.isValidSessionTopic(s);const{namespaces:h}=this.client.session.get(s);if(!Xg(h,c)){const{message:O}=me("MISSING_OR_INVALID",`request() chainId: ${c}`);throw new Error(O)}if(!aC(o)){const{message:O}=me("MISSING_OR_INVALID",`request() ${JSON.stringify(o)}`);throw new Error(O)}if(!lC(h,c,o.method)){const{message:O}=me("MISSING_OR_INVALID",`request() method: ${o.method}`);throw new Error(O)}if(f&&!pC(f,rc)){const{message:O}=me("MISSING_OR_INVALID",`request() expiry: ${f}. Expiry must be a number (in seconds) between ${rc.min} and ${rc.max}`);throw new Error(O)}},this.isValidRespond=async n=>{var s;if(!xr(n)){const{message:f}=me("MISSING_OR_INVALID",`respond() params: ${n}`);throw new Error(f)}const{topic:o,response:c}=n;try{await this.isValidSessionTopic(o)}catch(f){throw(s=n?.response)!=null&&s.id&&this.cleanupAfterResponse(n),f}if(!cC(c)){const{message:f}=me("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(c)}`);throw new Error(f)}},this.isValidPing=async n=>{if(!xr(n)){const{message:o}=me("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(o)}const{topic:s}=n;await this.isValidSessionOrPairingTopic(s)},this.isValidEmit=async n=>{if(!xr(n)){const{message:h}=me("MISSING_OR_INVALID",`emit() params: ${n}`);throw new Error(h)}const{topic:s,event:o,chainId:c}=n;await this.isValidSessionTopic(s);const{namespaces:f}=this.client.session.get(s);if(!Xg(f,c)){const{message:h}=me("MISSING_OR_INVALID",`emit() chainId: ${c}`);throw new Error(h)}if(!uC(o)){const{message:h}=me("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(o)}`);throw new Error(h)}if(!hC(f,c,o.name)){const{message:h}=me("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(o)}`);throw new Error(h)}},this.isValidDisconnect=async n=>{if(!xr(n)){const{message:o}=me("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(o)}const{topic:s}=n;await this.isValidSessionOrPairingTopic(s)},this.getVerifyContext=async(n,s)=>{const o={verified:{verifyUrl:s.verifyUrl||xs,validation:"UNKNOWN",origin:s.url||""}};try{const c=await this.client.core.verify.resolve({attestationId:n,verifyUrl:s.verifyUrl});c&&(o.verified.origin=c.origin,o.verified.isScam=c.isScam,o.verified.validation=c.origin===new URL(s.url).origin?"VALID":"INVALID")}catch(c){this.client.logger.info(c)}return this.client.logger.info(`Verify context: ${JSON.stringify(o)}`),o},this.validateSessionProps=(n,s)=>{Object.values(n).forEach(o=>{if(!Zt(o,!1)){const{message:c}=me("MISSING_OR_INVALID",`${s} must be in Record<string, string> format. Received: ${JSON.stringify(o)}`);throw new Error(c)}})}}async isInitialized(){if(!this.initialized){const{message:t}=me("NOT_INITIALIZED",this.name);throw new Error(t)}await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(hr.message,async t=>{const{topic:n,message:s}=t;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(s)))return;const o=await this.client.core.crypto.decode(n,s);try{mc(o)?(this.client.core.history.set(n,o),this.onRelayEventRequest({topic:n,payload:o})):jo(o)?(await this.client.core.history.resolve(o),await this.onRelayEventResponse({topic:n,payload:o}),this.client.core.history.delete(n,o.id)):this.onRelayEventUnknownPayload({topic:n,payload:o})}catch(c){this.client.logger.error(c)}})}registerExpirerEvents(){this.client.core.expirer.on(sn.expired,async t=>{const{topic:n,id:s}=Hm(t.target);if(s&&this.client.pendingRequest.keys.includes(s))return await this.deletePendingSessionRequest(s,me("EXPIRED"),!0);n?this.client.session.keys.includes(n)&&(await this.deleteSession({topic:n,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:n})):s&&(await this.deleteProposal(s,!0),this.client.events.emit("proposal_expire",{id:s}))})}registerPairingEvents(){this.client.core.pairing.events.on(Do.create,t=>this.onPairingCreated(t))}isValidPairingTopic(t){if(!Zt(t,!1)){const{message:n}=me("MISSING_OR_INVALID",`pairing topic should be a string: ${t}`);throw new Error(n)}if(!this.client.core.pairing.pairings.keys.includes(t)){const{message:n}=me("NO_MATCHING_KEY",`pairing topic doesn't exist: ${t}`);throw new Error(n)}if(si(this.client.core.pairing.pairings.get(t).expiry)){const{message:n}=me("EXPIRED",`pairing topic: ${t}`);throw new Error(n)}}async isValidSessionTopic(t){if(!Zt(t,!1)){const{message:n}=me("MISSING_OR_INVALID",`session topic should be a string: ${t}`);throw new Error(n)}if(!this.client.session.keys.includes(t)){const{message:n}=me("NO_MATCHING_KEY",`session topic doesn't exist: ${t}`);throw new Error(n)}if(si(this.client.session.get(t).expiry)){await this.deleteSession({topic:t});const{message:n}=me("EXPIRED",`session topic: ${t}`);throw new Error(n)}if(!this.client.core.crypto.keychain.has(t)){const{message:n}=me("MISSING_OR_INVALID",`session topic does not exist in keychain: ${t}`);throw await this.deleteSession({topic:t}),new Error(n)}}async isValidSessionOrPairingTopic(t){if(this.client.session.keys.includes(t))await this.isValidSessionTopic(t);else if(this.client.core.pairing.pairings.keys.includes(t))this.isValidPairingTopic(t);else if(Zt(t,!1)){const{message:n}=me("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${t}`);throw new Error(n)}else{const{message:n}=me("MISSING_OR_INVALID",`session or pairing topic should be a string: ${t}`);throw new Error(n)}}async isValidProposalId(t){if(!sC(t)){const{message:n}=me("MISSING_OR_INVALID",`proposal id should be a number: ${t}`);throw new Error(n)}if(!this.client.proposal.keys.includes(t)){const{message:n}=me("NO_MATCHING_KEY",`proposal id doesn't exist: ${t}`);throw new Error(n)}if(si(this.client.proposal.get(t).expiryTimestamp)){await this.deleteProposal(t);const{message:n}=me("EXPIRED",`proposal id: ${t}`);throw new Error(n)}}}class _T extends Cc{constructor(t,n){super(t,n,sv,Ac),this.core=t,this.logger=n}}class hv extends Cc{constructor(t,n){super(t,n,av,Ac),this.core=t,this.logger=n}}class wT extends Cc{constructor(t,n){super(t,n,uv,Ac,s=>s.id),this.core=t,this.logger=n}}class Tc extends f6{constructor(t){super(t),this.protocol=Yh,this.version=Xh,this.name=tc.name,this.events=new Pr.exports.EventEmitter,this.on=(s,o)=>this.events.on(s,o),this.once=(s,o)=>this.events.once(s,o),this.off=(s,o)=>this.events.off(s,o),this.removeListener=(s,o)=>this.events.removeListener(s,o),this.removeAllListeners=s=>this.events.removeAllListeners(s),this.connect=async s=>{try{return await this.engine.connect(s)}catch(o){throw this.logger.error(o.message),o}},this.pair=async s=>{try{return await this.engine.pair(s)}catch(o){throw this.logger.error(o.message),o}},this.approve=async s=>{try{return await this.engine.approve(s)}catch(o){throw this.logger.error(o.message),o}},this.reject=async s=>{try{return await this.engine.reject(s)}catch(o){throw this.logger.error(o.message),o}},this.update=async s=>{try{return await this.engine.update(s)}catch(o){throw this.logger.error(o.message),o}},this.extend=async s=>{try{return await this.engine.extend(s)}catch(o){throw this.logger.error(o.message),o}},this.request=async s=>{try{return await this.engine.request(s)}catch(o){throw this.logger.error(o.message),o}},this.respond=async s=>{try{return await this.engine.respond(s)}catch(o){throw this.logger.error(o.message),o}},this.ping=async s=>{try{return await this.engine.ping(s)}catch(o){throw this.logger.error(o.message),o}},this.emit=async s=>{try{return await this.engine.emit(s)}catch(o){throw this.logger.error(o.message),o}},this.disconnect=async s=>{try{return await this.engine.disconnect(s)}catch(o){throw this.logger.error(o.message),o}},this.find=s=>{try{return this.engine.find(s)}catch(o){throw this.logger.error(o.message),o}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(s){throw this.logger.error(s.message),s}},this.name=t?.name||tc.name,this.metadata=t?.metadata||_N();const n=typeof t?.logger<"u"&&typeof t?.logger!="string"?t.logger:nt.pino(nt.getDefaultLoggerOptions({level:t?.logger||tc.logger}));this.core=t?.core||new aT(t),this.logger=nt.generateChildLogger(n,this.name),this.session=new hv(this.core,this.logger),this.proposal=new _T(this.core,this.logger),this.pendingRequest=new wT(this.core,this.logger),this.engine=new bT(this)}static async init(t){const n=new Tc(t);return await n.initialize(),n}get context(){return nt.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(t){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(t.message),t}}}const ET=hv,ST=Tc,OT=Object.freeze(Object.defineProperty({__proto__:null,ENGINE_CONTEXT:cv,ENGINE_QUEUE_STATES:Dn,ENGINE_RPC_OPTS:In,HISTORY_CONTEXT:hT,HISTORY_EVENTS:lT,HISTORY_STORAGE_VERSION:fT,METHODS_TO_VERIFY:lv,PROPOSAL_CONTEXT:sv,PROPOSAL_EXPIRY:dT,PROPOSAL_EXPIRY_MESSAGE:ov,REQUEST_CONTEXT:uv,SESSION_CONTEXT:av,SESSION_EXPIRY:Po,SESSION_REQUEST_EXPIRY_BOUNDARIES:rc,SIGN_CLIENT_CONTEXT:Qh,SIGN_CLIENT_DEFAULT:tc,SIGN_CLIENT_EVENTS:cT,SIGN_CLIENT_PROTOCOL:Yh,SIGN_CLIENT_STORAGE_OPTIONS:uT,SIGN_CLIENT_STORAGE_PREFIX:Ac,SIGN_CLIENT_VERSION:Xh,SessionStore:ET,SignClient:ST,WALLETCONNECT_DEEPLINK_CHOICE:ih,default:Tc},Symbol.toStringTag,{value:"Module"})),IT=Vn(OT);var Oy=globalThis&&globalThis.__spreadArray||function(e,t,n){if(n||arguments.length===2)for(var s=0,o=t.length,c;s<o;s++)(c||!(s in t))&&(c||(c=Array.prototype.slice.call(t,0,s)),c[s]=t[s]);return e.concat(c||Array.prototype.slice.call(t))},DT=function(){function e(t,n,s){this.name=t,this.version=n,this.os=s,this.type="browser"}return e}(),PT=function(){function e(t){this.version=t,this.type="node",this.name="node",this.os=process.platform}return e}(),$T=function(){function e(t,n,s,o){this.name=t,this.version=n,this.os=s,this.bot=o,this.type="bot-device"}return e}(),NT=function(){function e(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return e}(),CT=function(){function e(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return e}(),AT=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,TT=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Iy=3,xT=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",AT]],Dy=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function RT(e){return e?Py(e):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new CT:typeof navigator<"u"?Py(navigator.userAgent):LT()}function jT(e){return e!==""&&xT.reduce(function(t,n){var s=n[0],o=n[1];if(t)return t;var c=o.exec(e);return!!c&&[s,c]},!1)}function Py(e){var t=jT(e);if(!t)return null;var n=t[0],s=t[1];if(n==="searchbot")return new NT;var o=s[1]&&s[1].split(".").join("_").split("_").slice(0,3);o?o.length<Iy&&(o=Oy(Oy([],o,!0),MT(Iy-o.length),!0)):o=[];var c=o.join("."),f=UT(e),h=TT.exec(e);return h&&h[1]?new $T(n,c,f,h[1]):new DT(n,c,f)}function UT(e){for(var t=0,n=Dy.length;t<n;t++){var s=Dy[t],o=s[0],c=s[1],f=c.exec(e);if(f)return o}return null}function LT(){var e=typeof process<"u"&&process.version;return e?new PT(process.version.slice(1)):null}function MT(e){for(var t=[],n=0;n<e;n++)t.push("0");return t}var Et={};Object.defineProperty(Et,"__esModule",{value:!0});Et.getLocalStorage=Et.getLocalStorageOrThrow=Et.getCrypto=Et.getCryptoOrThrow=tf=Et.getLocation=Et.getLocationOrThrow=ef=Et.getNavigator=Et.getNavigatorOrThrow=Zh=Et.getDocument=Et.getDocumentOrThrow=Et.getFromWindowOrThrow=Et.getFromWindow=void 0;function ts(e){let t;return typeof window<"u"&&typeof window[e]<"u"&&(t=window[e]),t}Et.getFromWindow=ts;function zs(e){const t=ts(e);if(!t)throw new Error(`${e} is not defined in Window`);return t}Et.getFromWindowOrThrow=zs;function FT(){return zs("document")}Et.getDocumentOrThrow=FT;function BT(){return ts("document")}var Zh=Et.getDocument=BT;function qT(){return zs("navigator")}Et.getNavigatorOrThrow=qT;function HT(){return ts("navigator")}var ef=Et.getNavigator=HT;function kT(){return zs("location")}Et.getLocationOrThrow=kT;function zT(){return ts("location")}var tf=Et.getLocation=zT;function VT(){return zs("crypto")}Et.getCryptoOrThrow=VT;function KT(){return ts("crypto")}Et.getCrypto=KT;function WT(){return zs("localStorage")}Et.getLocalStorageOrThrow=WT;function GT(){return ts("localStorage")}Et.getLocalStorage=GT;var rf={};Object.defineProperty(rf,"__esModule",{value:!0});var fv=rf.getWindowMetadata=void 0;const $y=Et;function JT(){let e,t;try{e=$y.getDocumentOrThrow(),t=$y.getLocationOrThrow()}catch{return null}function n(){const C=e.getElementsByTagName("link"),R=[];for(let U=0;U<C.length;U++){const x=C[U],F=x.getAttribute("rel");if(F&&F.toLowerCase().indexOf("icon")>-1){const q=x.getAttribute("href");if(q)if(q.toLowerCase().indexOf("https:")===-1&&q.toLowerCase().indexOf("http:")===-1&&q.indexOf("//")!==0){let te=t.protocol+"//"+t.host;if(q.indexOf("/")===0)te+=q;else{const _=t.pathname.split("/");_.pop();const A=_.join("/");te+=A+"/"+q}R.push(te)}else if(q.indexOf("//")===0){const te=t.protocol+q;R.push(te)}else R.push(q)}}return R}function s(...C){const R=e.getElementsByTagName("meta");for(let U=0;U<R.length;U++){const x=R[U],F=["itemprop","property","name"].map(q=>x.getAttribute(q)).filter(q=>q?C.includes(q):!1);if(F.length&&F){const q=x.getAttribute("content");if(q)return q}}return""}function o(){let C=s("name","og:site_name","og:title","twitter:title");return C||(C=e.title),C}function c(){return s("description","og:description","twitter:description","keywords")}const f=o(),h=c(),O=t.origin,p=n();return{description:h,url:O,icons:p,name:f}}fv=rf.getWindowMetadata=JT;var To={};(function(e){const t=gh,n=yh,s=ph,o=Ph,c=_=>_==null,f=Symbol("encodeFragmentIdentifier");function h(_){switch(_.arrayFormat){case"index":return A=>(I,D)=>{const w=I.length;return D===void 0||_.skipNull&&D===null||_.skipEmptyString&&D===""?I:D===null?[...I,[S(A,_),"[",w,"]"].join("")]:[...I,[S(A,_),"[",S(w,_),"]=",S(D,_)].join("")]};case"bracket":return A=>(I,D)=>D===void 0||_.skipNull&&D===null||_.skipEmptyString&&D===""?I:D===null?[...I,[S(A,_),"[]"].join("")]:[...I,[S(A,_),"[]=",S(D,_)].join("")];case"colon-list-separator":return A=>(I,D)=>D===void 0||_.skipNull&&D===null||_.skipEmptyString&&D===""?I:D===null?[...I,[S(A,_),":list="].join("")]:[...I,[S(A,_),":list=",S(D,_)].join("")];case"comma":case"separator":case"bracket-separator":{const A=_.arrayFormat==="bracket-separator"?"[]=":"=";return I=>(D,w)=>w===void 0||_.skipNull&&w===null||_.skipEmptyString&&w===""?D:(w=w===null?"":w,D.length===0?[[S(I,_),A,S(w,_)].join("")]:[[D,S(w,_)].join(_.arrayFormatSeparator)])}default:return A=>(I,D)=>D===void 0||_.skipNull&&D===null||_.skipEmptyString&&D===""?I:D===null?[...I,S(A,_)]:[...I,[S(A,_),"=",S(D,_)].join("")]}}function O(_){let A;switch(_.arrayFormat){case"index":return(I,D,w)=>{if(A=/\[(\d*)\]$/.exec(I),I=I.replace(/\[\d*\]$/,""),!A){w[I]=D;return}w[I]===void 0&&(w[I]={}),w[I][A[1]]=D};case"bracket":return(I,D,w)=>{if(A=/(\[\])$/.exec(I),I=I.replace(/\[\]$/,""),!A){w[I]=D;return}if(w[I]===void 0){w[I]=[D];return}w[I]=[].concat(w[I],D)};case"colon-list-separator":return(I,D,w)=>{if(A=/(:list)$/.exec(I),I=I.replace(/:list$/,""),!A){w[I]=D;return}if(w[I]===void 0){w[I]=[D];return}w[I]=[].concat(w[I],D)};case"comma":case"separator":return(I,D,w)=>{const u=typeof D=="string"&&D.includes(_.arrayFormatSeparator),b=typeof D=="string"&&!u&&C(D,_).includes(_.arrayFormatSeparator);D=b?C(D,_):D;const K=u||b?D.split(_.arrayFormatSeparator).map(v=>C(v,_)):D===null?D:C(D,_);w[I]=K};case"bracket-separator":return(I,D,w)=>{const u=/(\[\])$/.test(I);if(I=I.replace(/\[\]$/,""),!u){w[I]=D&&C(D,_);return}const b=D===null?[]:D.split(_.arrayFormatSeparator).map(K=>C(K,_));if(w[I]===void 0){w[I]=b;return}w[I]=[].concat(w[I],b)};default:return(I,D,w)=>{if(w[I]===void 0){w[I]=D;return}w[I]=[].concat(w[I],D)}}}function p(_){if(typeof _!="string"||_.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function S(_,A){return A.encode?A.strict?t(_):encodeURIComponent(_):_}function C(_,A){return A.decode?n(_):_}function R(_){return Array.isArray(_)?_.sort():typeof _=="object"?R(Object.keys(_)).sort((A,I)=>Number(A)-Number(I)).map(A=>_[A]):_}function U(_){const A=_.indexOf("#");return A!==-1&&(_=_.slice(0,A)),_}function x(_){let A="";const I=_.indexOf("#");return I!==-1&&(A=_.slice(I)),A}function F(_){_=U(_);const A=_.indexOf("?");return A===-1?"":_.slice(A+1)}function q(_,A){return A.parseNumbers&&!Number.isNaN(Number(_))&&typeof _=="string"&&_.trim()!==""?_=Number(_):A.parseBooleans&&_!==null&&(_.toLowerCase()==="true"||_.toLowerCase()==="false")&&(_=_.toLowerCase()==="true"),_}function te(_,A){A=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},A),p(A.arrayFormatSeparator);const I=O(A),D=Object.create(null);if(typeof _!="string"||(_=_.trim().replace(/^[?#&]/,""),!_))return D;for(const w of _.split("&")){if(w==="")continue;let[u,b]=s(A.decode?w.replace(/\+/g," "):w,"=");b=b===void 0?null:["comma","separator","bracket-separator"].includes(A.arrayFormat)?b:C(b,A),I(C(u,A),b,D)}for(const w of Object.keys(D)){const u=D[w];if(typeof u=="object"&&u!==null)for(const b of Object.keys(u))u[b]=q(u[b],A);else D[w]=q(u,A)}return A.sort===!1?D:(A.sort===!0?Object.keys(D).sort():Object.keys(D).sort(A.sort)).reduce((w,u)=>{const b=D[u];return Boolean(b)&&typeof b=="object"&&!Array.isArray(b)?w[u]=R(b):w[u]=b,w},Object.create(null))}e.extract=F,e.parse=te,e.stringify=(_,A)=>{if(!_)return"";A=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},A),p(A.arrayFormatSeparator);const I=b=>A.skipNull&&c(_[b])||A.skipEmptyString&&_[b]==="",D=h(A),w={};for(const b of Object.keys(_))I(b)||(w[b]=_[b]);const u=Object.keys(w);return A.sort!==!1&&u.sort(A.sort),u.map(b=>{const K=_[b];return K===void 0?"":K===null?S(b,A):Array.isArray(K)?K.length===0&&A.arrayFormat==="bracket-separator"?S(b,A)+"[]":K.reduce(D(b),[]).join("&"):S(b,A)+"="+S(K,A)}).filter(b=>b.length>0).join("&")},e.parseUrl=(_,A)=>{A=Object.assign({decode:!0},A);const[I,D]=s(_,"#");return Object.assign({url:I.split("?")[0]||"",query:te(F(_),A)},A&&A.parseFragmentIdentifier&&D?{fragmentIdentifier:C(D,A)}:{})},e.stringifyUrl=(_,A)=>{A=Object.assign({encode:!0,strict:!0,[f]:!0},A);const I=U(_.url).split("?")[0]||"",D=e.extract(_.url),w=e.parse(D,{sort:!1}),u=Object.assign(w,_.query);let b=e.stringify(u,A);b&&(b=`?${b}`);let K=x(_.url);return _.fragmentIdentifier&&(K=`#${A[f]?S(_.fragmentIdentifier,A):_.fragmentIdentifier}`),`${I}${b}${K}`},e.pick=(_,A,I)=>{I=Object.assign({parseFragmentIdentifier:!0,[f]:!1},I);const{url:D,query:w,fragmentIdentifier:u}=e.parseUrl(_,I);return e.stringifyUrl({url:D,query:o(w,A),fragmentIdentifier:u},I)},e.exclude=(_,A,I)=>{const D=Array.isArray(A)?w=>!A.includes(w):(w,u)=>!A(w,u);return e.pick(_,D,I)}})(To);const xc=":";function dv(e){const[t,n]=e.split(xc);return{namespace:t,reference:n}}function pv(e){const{namespace:t,reference:n}=e;return[t,n].join(xc)}function nf(e){const[t,n,s]=e.split(xc);return{namespace:t,reference:n,address:s}}function gv(e){const{namespace:t,reference:n,address:s}=e;return[t,n,s].join(xc)}function sf(e,t){const n=[];return e.forEach(s=>{const o=t(s);n.includes(o)||n.push(o)}),n}function yv(e){const{address:t}=nf(e);return t}function mv(e){const{namespace:t,reference:n}=nf(e);return pv({namespace:t,reference:n})}function YT(e,t){const{namespace:n,reference:s}=dv(t);return gv({namespace:n,reference:s,address:e})}function XT(e){return sf(e,yv)}function vv(e){return sf(e,mv)}function QT(e,t=[]){const n=[];return Object.keys(e).forEach(s=>{if(t.length&&!t.includes(s))return;const o=e[s];n.push(...o.accounts)}),n}function ZT(e,t=[]){const n=[];return Object.keys(e).forEach(s=>{if(t.length&&!t.includes(s))return;const o=e[s];n.push(...vv(o.accounts))}),n}function ex(e,t=[]){const n=[];return Object.keys(e).forEach(s=>{if(t.length&&!t.includes(s))return;const o=e[s];n.push(...Rc(s,o))}),n}function Rc(e,t){return e.includes(":")?[e]:t.chains||[]}const jc=e=>e?.split(":"),bv=e=>{const t=e&&jc(e);if(t)return t[3]},tx=e=>{const t=e&&jc(e);if(t)return t[2]+":"+t[3]},_v=e=>{const t=e&&jc(e);if(t)return t.pop()},rx=(e,t)=>{const n=`${e.domain} wants you to sign in with your Ethereum account:`,s=_v(t),o=e.statement,c=`URI: ${e.aud}`,f=`Version: ${e.version}`,h=`Chain ID: ${bv(t)}`,O=`Nonce: ${e.nonce}`,p=`Issued At: ${e.iat}`,S=e.resources&&e.resources.length>0?`Resources:
${e.resources.map(C=>`- ${C}`).join(`
`)}`:void 0;return[n,s,"",o,"",c,f,h,O,p,S].filter(C=>C!=null).join(`
`)},of="base10",Dr="base16",hc="base64pad",Uc="utf8",af=0,Vs=1,nx=0,Ny=1,sh=12,cf=32;function ix(){const e=Wi.generateKeyPair();return{privateKey:Je(e.secretKey,Dr),publicKey:Je(e.publicKey,Dr)}}function sx(){const e=$n.randomBytes(cf);return Je(e,Dr)}function ox(e,t){const n=Wi.sharedKey(Xe(e,Dr),Xe(t,Dr),!0),s=new wh(Nn.SHA256,n).expand(cf);return Je(s,Dr)}function ax(e){const t=Nn.hash(Xe(e,Dr));return Je(t,Dr)}function cx(e){const t=Nn.hash(Xe(e,Uc));return Je(t,Dr)}function wv(e){return Xe(`${e}`,of)}function Go(e){return Number(Je(e,of))}function ux(e){const t=wv(typeof e.type<"u"?e.type:af);if(Go(t)===Vs&&typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof e.senderPublicKey<"u"?Xe(e.senderPublicKey,Dr):void 0,s=typeof e.iv<"u"?Xe(e.iv,Dr):$n.randomBytes(sh),o=new Ki.ChaCha20Poly1305(Xe(e.symKey,Dr)).seal(s,Xe(e.message,Uc));return Ev({type:t,sealed:o,iv:s,senderPublicKey:n})}function lx(e){const t=new Ki.ChaCha20Poly1305(Xe(e.symKey,Dr)),{sealed:n,iv:s}=uf(e.encoded),o=t.open(s,n);if(o===null)throw new Error("Failed to decrypt");return Je(o,Uc)}function Ev(e){if(Go(e.type)===Vs){if(typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Je(ki([e.type,e.senderPublicKey,e.iv,e.sealed]),hc)}return Je(ki([e.type,e.iv,e.sealed]),hc)}function uf(e){const t=Xe(e,hc),n=t.slice(nx,Ny),s=Ny;if(Go(n)===Vs){const h=s+cf,O=h+sh,p=t.slice(s,h),S=t.slice(h,O),C=t.slice(O);return{type:n,sealed:C,iv:S,senderPublicKey:p}}const o=s+sh,c=t.slice(s,o),f=t.slice(o);return{type:n,sealed:f,iv:c}}function hx(e,t){const n=uf(e);return Sv({type:Go(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?Je(n.senderPublicKey,Dr):void 0,receiverPublicKey:t?.receiverPublicKey})}function Sv(e){const t=e?.type||af;if(t===Vs){if(typeof e?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof e?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:t,senderPublicKey:e?.senderPublicKey,receiverPublicKey:e?.receiverPublicKey}}function fx(e){return e.type===Vs&&typeof e.senderPublicKey=="string"&&typeof e.receiverPublicKey=="string"}var dx=Object.defineProperty,Cy=Object.getOwnPropertySymbols,px=Object.prototype.hasOwnProperty,gx=Object.prototype.propertyIsEnumerable,Ay=(e,t,n)=>t in e?dx(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ty=(e,t)=>{for(var n in t||(t={}))px.call(t,n)&&Ay(e,n,t[n]);if(Cy)for(var n of Cy(t))gx.call(t,n)&&Ay(e,n,t[n]);return e};const Ov="ReactNative",Sr={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},fc=" ",yx=":",Iv="/",lf=2,mx=1e3,Dv="js";function hf(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Ks(){return!Zh()&&!!ef()&&navigator.product===Ov}function Jo(){return!hf()&&!!ef()&&!!Zh()}function rs(){return Ks()?Sr.reactNative:hf()?Sr.node:Jo()?Sr.browser:Sr.unknown}function vx(){var e;try{return Ks()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(e=global.Application)==null?void 0:e.applicationId:void 0}catch{return}}function Pv(e,t){let n=To.parse(e);return n=Ty(Ty({},n),t),e=To.stringify(n),e}function bx(){return fv()||{name:"",description:"",url:"",icons:[""]}}function _x(e,t){var n;const s=rs(),o={protocol:e,version:t,env:s};return s==="browser"&&(o.host=((n=tf())==null?void 0:n.host)||"unknown"),o}function $v(){if(rs()===Sr.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:n,Version:s}=global.Platform;return[n,s].join("-")}const e=RT();if(e===null)return"unknown";const t=e.os?e.os.replace(" ","").toLowerCase():"unknown";return e.type==="browser"?[t,e.name,e.version].join("-"):[t,e.version].join("-")}function Nv(){var e;const t=rs();return t===Sr.browser?[t,((e=tf())==null?void 0:e.host)||"unknown"].join(":"):t}function Cv(e,t,n){const s=$v(),o=Nv();return[[e,t].join("-"),[Dv,n].join("-"),s,o].join("/")}function wx({protocol:e,version:t,relayUrl:n,sdkVersion:s,auth:o,projectId:c,useOnCloseEvent:f,bundleId:h}){const O=n.split("?"),p=Cv(e,t,s),S={auth:o,ua:p,projectId:c,useOnCloseEvent:f||void 0,origin:h||void 0},C=Pv(O[1]||"",S);return O[0]+"?"+C}function Ex(e){let t=(e.match(/^[^:]+(?=:\/\/)/gi)||[])[0];const n=typeof t<"u"?e.split("://")[1]:e;return t=t==="wss"?"https":"http",[t,n].join("://")}function Sx(e,t,n){if(!e[t]||typeof e[t]!==n)throw new Error(`Missing or invalid "${t}" param`)}function Av(e,t=lf){return Tv(e.split(Iv),t)}function Ox(e){return Av(e).join(fc)}function ui(e,t){return e.filter(n=>t.includes(n)).length===e.length}function Tv(e,t=lf){return e.slice(Math.max(e.length-t,0))}function Ix(e){return Object.fromEntries(e.entries())}function Dx(e){return new Map(Object.entries(e))}function Px(e,t){const n={};return Object.keys(e).forEach(s=>{n[s]=t(e[s])}),n}const $x=e=>e;function xv(e){return e.trim().replace(/^\w/,t=>t.toUpperCase())}function Nx(e){return e.split(fc).map(t=>xv(t)).join(fc)}function Cx(e=we.FIVE_MINUTES,t){const n=we.toMiliseconds(e||we.FIVE_MINUTES);let s,o,c;return{resolve:f=>{c&&s&&(clearTimeout(c),s(f))},reject:f=>{c&&o&&(clearTimeout(c),o(f))},done:()=>new Promise((f,h)=>{c=setTimeout(()=>{h(new Error(t))},n),s=f,o=h})}}function Ax(e,t,n){return new Promise(async(s,o)=>{const c=setTimeout(()=>o(new Error(n)),t);try{const f=await e;s(f)}catch(f){o(f)}clearTimeout(c)})}function ff(e,t){if(typeof t=="string"&&t.startsWith(`${e}:`))return t;if(e.toLowerCase()==="topic"){if(typeof t!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${t}`}else if(e.toLowerCase()==="id"){if(typeof t!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${t}`}throw new Error(`Unknown expirer target type: ${e}`)}function Tx(e){return ff("topic",e)}function xx(e){return ff("id",e)}function Rx(e){const[t,n]=e.split(":"),s={id:void 0,topic:void 0};if(t==="topic"&&typeof n=="string")s.topic=n;else if(t==="id"&&Number.isInteger(Number(n)))s.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${t}:${n}`);return s}function jx(e,t){return we.fromMiliseconds((t||Date.now())+we.toMiliseconds(e))}function Ux(e){return Date.now()>=we.toMiliseconds(e)}function Lx(e,t){return`${e}${t?`:${t}`:""}`}function li(e=[],t=[]){return[...new Set([...e,...t])]}async function Mx({id:e,topic:t,wcDeepLink:n}){try{if(!n)return;let o=(typeof n=="string"?JSON.parse(n):n)?.href;if(typeof o!="string")return;o.endsWith("/")&&(o=o.slice(0,-1));const c=`${o}/wc?requestId=${e}&sessionTopic=${t}`,f=rs();f===Sr.browser?c.startsWith("https://")?window.open(c,"_blank","noreferrer noopener"):window.open(c,"_self","noreferrer noopener"):f===Sr.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(c)}catch(s){console.error(s)}}async function Fx(e,t){try{return await e.getItem(t)||(Jo()?localStorage.getItem(t):void 0)}catch(n){console.error(n)}}const Rv="irn";function Bx(e){return e?.relay||{protocol:Rv}}function qx(e){const t=$h[e];if(typeof t>"u")throw new Error(`Relay Protocol not supported: ${e}`);return t}var Hx=Object.defineProperty,kx=Object.defineProperties,zx=Object.getOwnPropertyDescriptors,xy=Object.getOwnPropertySymbols,Vx=Object.prototype.hasOwnProperty,Kx=Object.prototype.propertyIsEnumerable,Ry=(e,t,n)=>t in e?Hx(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Wx=(e,t)=>{for(var n in t||(t={}))Vx.call(t,n)&&Ry(e,n,t[n]);if(xy)for(var n of xy(t))Kx.call(t,n)&&Ry(e,n,t[n]);return e},Gx=(e,t)=>kx(e,zx(t));function jv(e,t="-"){const n={},s="relay"+t;return Object.keys(e).forEach(o=>{if(o.startsWith(s)){const c=o.replace(s,""),f=e[o];n[c]=f}}),n}function Jx(e){e=e.includes("wc://")?e.replace("wc://",""):e,e=e.includes("wc:")?e.replace("wc:",""):e;const t=e.indexOf(":"),n=e.indexOf("?")!==-1?e.indexOf("?"):void 0,s=e.substring(0,t),o=e.substring(t+1,n).split("@"),c=typeof n<"u"?e.substring(n):"",f=To.parse(c);return{protocol:s,topic:Uv(o[0]),version:parseInt(o[1],10),symKey:f.symKey,relay:jv(f),expiryTimestamp:f.expiryTimestamp?parseInt(f.expiryTimestamp,10):void 0}}function Uv(e){return e.startsWith("//")?e.substring(2):e}function Lv(e,t="-"){const n="relay",s={};return Object.keys(e).forEach(o=>{const c=n+t+o;e[o]&&(s[c]=e[o])}),s}function Yx(e){return`${e.protocol}:${e.topic}@${e.version}?`+To.stringify(Gx(Wx({symKey:e.symKey},Lv(e.relay)),{expiryTimestamp:e.expiryTimestamp}))}var Xx=Object.defineProperty,Qx=Object.defineProperties,Zx=Object.getOwnPropertyDescriptors,jy=Object.getOwnPropertySymbols,eR=Object.prototype.hasOwnProperty,tR=Object.prototype.propertyIsEnumerable,Uy=(e,t,n)=>t in e?Xx(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,rR=(e,t)=>{for(var n in t||(t={}))eR.call(t,n)&&Uy(e,n,t[n]);if(jy)for(var n of jy(t))tR.call(t,n)&&Uy(e,n,t[n]);return e},nR=(e,t)=>Qx(e,Zx(t));function ns(e){const t=[];return e.forEach(n=>{const[s,o]=n.split(":");t.push(`${s}:${o}`)}),t}function Mv(e){const t=[];return Object.values(e).forEach(n=>{t.push(...ns(n.accounts))}),t}function Fv(e,t){const n=[];return Object.values(e).forEach(s=>{ns(s.accounts).includes(t)&&n.push(...s.methods)}),n}function Bv(e,t){const n=[];return Object.values(e).forEach(s=>{ns(s.accounts).includes(t)&&n.push(...s.events)}),n}function iR(e,t){const n=Yv(e,t);if(n)throw new Error(n.message);const s={};for(const[o,c]of Object.entries(e))s[o]={methods:c.methods,events:c.events,chains:c.accounts.map(f=>`${f.split(":")[0]}:${f.split(":")[1]}`)};return s}function sR(e){const{proposal:{requiredNamespaces:t,optionalNamespaces:n={}},supportedNamespaces:s}=e,o=oh(t),c=oh(n),f={};Object.keys(s).forEach(p=>{const S=s[p].chains,C=s[p].methods,R=s[p].events,U=s[p].accounts;S.forEach(x=>{if(!U.some(F=>F.includes(x)))throw new Error(`No accounts provided for chain ${x} in namespace ${p}`)}),f[p]={chains:S,methods:C,events:R,accounts:U}});const h=Qv(t,f,"approve()");if(h)throw new Error(h.message);const O={};return!Object.keys(t).length&&!Object.keys(n).length?f:(Object.keys(o).forEach(p=>{const S=s[p].chains.filter(x=>{var F,q;return(q=(F=o[p])==null?void 0:F.chains)==null?void 0:q.includes(x)}),C=s[p].methods.filter(x=>{var F,q;return(q=(F=o[p])==null?void 0:F.methods)==null?void 0:q.includes(x)}),R=s[p].events.filter(x=>{var F,q;return(q=(F=o[p])==null?void 0:F.events)==null?void 0:q.includes(x)}),U=S.map(x=>s[p].accounts.filter(F=>F.includes(`${x}:`))).flat();O[p]={chains:S,methods:C,events:R,accounts:U}}),Object.keys(c).forEach(p=>{var S,C,R,U,x,F;if(!s[p])return;const q=(C=(S=c[p])==null?void 0:S.chains)==null?void 0:C.filter(I=>s[p].chains.includes(I)),te=s[p].methods.filter(I=>{var D,w;return(w=(D=c[p])==null?void 0:D.methods)==null?void 0:w.includes(I)}),_=s[p].events.filter(I=>{var D,w;return(w=(D=c[p])==null?void 0:D.events)==null?void 0:w.includes(I)}),A=q?.map(I=>s[p].accounts.filter(D=>D.includes(`${I}:`))).flat();O[p]={chains:li((R=O[p])==null?void 0:R.chains,q),methods:li((U=O[p])==null?void 0:U.methods,te),events:li((x=O[p])==null?void 0:x.events,_),accounts:li((F=O[p])==null?void 0:F.accounts,A)}}),O)}function df(e){return e.includes(":")}function qv(e){return df(e)?e.split(":")[0]:e}function oh(e){var t,n,s;const o={};if(!Lc(e))return o;for(const[c,f]of Object.entries(e)){const h=df(c)?[c]:f.chains,O=f.methods||[],p=f.events||[],S=qv(c);o[S]=nR(rR({},o[S]),{chains:li(h,(t=o[S])==null?void 0:t.chains),methods:li(O,(n=o[S])==null?void 0:n.methods),events:li(p,(s=o[S])==null?void 0:s.events)})}return o}const Hv={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},kv={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function zn(e,t){const{message:n,code:s}=kv[e];return{message:t?`${n} ${t}`:n,code:s}}function Vi(e,t){const{message:n,code:s}=Hv[e];return{message:t?`${n} ${t}`:n,code:s}}function Yo(e,t){return Array.isArray(e)?typeof t<"u"&&e.length?e.every(t):!0:!1}function Lc(e){return Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length}function di(e){return typeof e>"u"}function Gr(e,t){return t&&di(e)?!0:typeof e=="string"&&!!e.trim().length}function Mc(e,t){return t&&di(e)?!0:typeof e=="number"&&!isNaN(e)}function oR(e,t){const{requiredNamespaces:n}=t,s=Object.keys(e.namespaces),o=Object.keys(n);let c=!0;return ui(o,s)?(s.forEach(f=>{const{accounts:h,methods:O,events:p}=e.namespaces[f],S=ns(h),C=n[f];(!ui(Rc(f,C),S)||!ui(C.methods,O)||!ui(C.events,p))&&(c=!1)}),c):!1}function xo(e){return Gr(e,!1)&&e.includes(":")?e.split(":").length===2:!1}function zv(e){if(Gr(e,!1)&&e.includes(":")){const t=e.split(":");if(t.length===3){const n=t[0]+":"+t[1];return!!t[2]&&xo(n)}}return!1}function aR(e){if(Gr(e,!1))try{return typeof new URL(e)<"u"}catch{return!1}return!1}function cR(e){var t;return(t=e?.proposer)==null?void 0:t.publicKey}function uR(e){return e?.topic}function lR(e,t){let n=null;return Gr(e?.publicKey,!1)||(n=zn("MISSING_OR_INVALID",`${t} controller public key should be a string`)),n}function ah(e){let t=!0;return Yo(e)?e.length&&(t=e.every(n=>Gr(n,!1))):t=!1,t}function Vv(e,t,n){let s=null;return Yo(t)&&t.length?t.forEach(o=>{s||xo(o)||(s=Vi("UNSUPPORTED_CHAINS",`${n}, chain ${o} should be a string and conform to "namespace:chainId" format`))}):xo(e)||(s=Vi("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),s}function Kv(e,t,n){let s=null;return Object.entries(e).forEach(([o,c])=>{if(s)return;const f=Vv(o,Rc(o,c),`${t} ${n}`);f&&(s=f)}),s}function Wv(e,t){let n=null;return Yo(e)?e.forEach(s=>{n||zv(s)||(n=Vi("UNSUPPORTED_ACCOUNTS",`${t}, account ${s} should be a string and conform to "namespace:chainId:address" format`))}):n=Vi("UNSUPPORTED_ACCOUNTS",`${t}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function Gv(e,t){let n=null;return Object.values(e).forEach(s=>{if(n)return;const o=Wv(s?.accounts,`${t} namespace`);o&&(n=o)}),n}function Jv(e,t){let n=null;return ah(e?.methods)?ah(e?.events)||(n=Vi("UNSUPPORTED_EVENTS",`${t}, events should be an array of strings or empty array for no events`)):n=Vi("UNSUPPORTED_METHODS",`${t}, methods should be an array of strings or empty array for no methods`),n}function pf(e,t){let n=null;return Object.values(e).forEach(s=>{if(n)return;const o=Jv(s,`${t}, namespace`);o&&(n=o)}),n}function hR(e,t,n){let s=null;if(e&&Lc(e)){const o=pf(e,t);o&&(s=o);const c=Kv(e,t,n);c&&(s=c)}else s=zn("MISSING_OR_INVALID",`${t}, ${n} should be an object with data`);return s}function Yv(e,t){let n=null;if(e&&Lc(e)){const s=pf(e,t);s&&(n=s);const o=Gv(e,t);o&&(n=o)}else n=zn("MISSING_OR_INVALID",`${t}, namespaces should be an object with data`);return n}function Xv(e){return Gr(e.protocol,!0)}function fR(e,t){let n=!1;return t&&!e?n=!0:e&&Yo(e)&&e.length&&e.forEach(s=>{n=Xv(s)}),n}function dR(e){return typeof e=="number"}function pR(e){return typeof e<"u"&&typeof e!==null}function gR(e){return!(!e||typeof e!="object"||!e.code||!Mc(e.code,!1)||!e.message||!Gr(e.message,!1))}function yR(e){return!(di(e)||!Gr(e.method,!1))}function mR(e){return!(di(e)||di(e.result)&&di(e.error)||!Mc(e.id,!1)||!Gr(e.jsonrpc,!1))}function vR(e){return!(di(e)||!Gr(e.name,!1))}function bR(e,t){return!(!xo(t)||!Mv(e).includes(t))}function _R(e,t,n){return Gr(n,!1)?Fv(e,t).includes(n):!1}function wR(e,t,n){return Gr(n,!1)?Bv(e,t).includes(n):!1}function Qv(e,t,n){let s=null;const o=ER(e),c=SR(t),f=Object.keys(o),h=Object.keys(c),O=Ly(Object.keys(e)),p=Ly(Object.keys(t)),S=O.filter(C=>!p.includes(C));return S.length&&(s=zn("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.
      Required: ${S.toString()}
      Received: ${Object.keys(t).toString()}`)),ui(f,h)||(s=zn("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.
      Required: ${f.toString()}
      Approved: ${h.toString()}`)),Object.keys(t).forEach(C=>{if(!C.includes(":")||s)return;const R=ns(t[C].accounts);R.includes(C)||(s=zn("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${C}
        Required: ${C}
        Approved: ${R.toString()}`))}),f.forEach(C=>{s||(ui(o[C].methods,c[C].methods)?ui(o[C].events,c[C].events)||(s=zn("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${C}`)):s=zn("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${C}`))}),s}function ER(e){const t={};return Object.keys(e).forEach(n=>{var s;n.includes(":")?t[n]=e[n]:(s=e[n].chains)==null||s.forEach(o=>{t[o]={methods:e[n].methods,events:e[n].events}})}),t}function Ly(e){return[...new Set(e.map(t=>t.includes(":")?t.split(":")[0]:t))]}function SR(e){const t={};return Object.keys(e).forEach(n=>{n.includes(":")?t[n]=e[n]:ns(e[n].accounts)?.forEach(o=>{t[o]={accounts:e[n].accounts.filter(c=>c.includes(`${o}:`)),methods:e[n].methods,events:e[n].events}})}),t}function OR(e,t){return Mc(e,!1)&&e<=t.max&&e>=t.min}function IR(){const e=rs();return new Promise(t=>{switch(e){case Sr.browser:t(Zv());break;case Sr.reactNative:t(e1());break;case Sr.node:t(t1());break;default:t(!0)}})}function Zv(){return Jo()&&navigator?.onLine}async function e1(){return Ks()&&typeof global<"u"&&global!=null&&global.NetInfo?(await(global==null?void 0:global.NetInfo.fetch()))?.isConnected:!0}function t1(){return!0}function DR(e){switch(rs()){case Sr.browser:r1(e);break;case Sr.reactNative:n1(e);break;case Sr.node:break}}function r1(e){!Ks()&&Jo()&&(window.addEventListener("online",()=>e(!0)),window.addEventListener("offline",()=>e(!1)))}function n1(e){Ks()&&typeof global<"u"&&global!=null&&global.NetInfo&&global?.NetInfo.addEventListener(t=>e(t?.isConnected))}const Al={};class PR{static get(t){return Al[t]}static set(t,n){Al[t]=n}static delete(t){delete Al[t]}}const $R=Object.freeze(Object.defineProperty({__proto__:null,BASE10:of,BASE16:Dr,BASE64:hc,COLON:yx,DEFAULT_DEPTH:lf,EMPTY_SPACE:fc,ENV_MAP:Sr,INTERNAL_ERRORS:kv,MemoryStore:PR,ONE_THOUSAND:mx,REACT_NATIVE_PRODUCT:Ov,RELAYER_DEFAULT_PROTOCOL:Rv,SDK_ERRORS:Hv,SDK_TYPE:Dv,SLASH:Iv,TYPE_0:af,TYPE_1:Vs,UTF8:Uc,appendToQueryString:Pv,assertType:Sx,buildApprovedNamespaces:sR,calcExpiry:jx,capitalize:Nx,capitalizeWord:xv,createDelayedPromise:Cx,createExpiringPromise:Ax,decodeTypeByte:Go,decrypt:lx,deriveSymKey:ox,deserialize:uf,encodeTypeByte:wv,encrypt:ux,engineEvent:Lx,enumify:$x,formatAccountId:gv,formatAccountWithChain:YT,formatChainId:pv,formatExpirerTarget:ff,formatIdTarget:xx,formatMessage:rx,formatMessageContext:Ox,formatRelayParams:Lv,formatRelayRpcUrl:wx,formatTopicTarget:Tx,formatUA:Cv,formatUri:Yx,generateKeyPair:ix,generateRandomBytes32:sx,getAccountsChains:ns,getAccountsFromNamespaces:QT,getAddressFromAccount:yv,getAddressesFromAccounts:XT,getAppMetadata:bx,getBrowserOnlineStatus:Zv,getBundleId:vx,getChainFromAccount:mv,getChainsFromAccounts:vv,getChainsFromNamespace:Rc,getChainsFromNamespaces:ZT,getChainsFromRequiredNamespaces:ex,getDeepLink:Fx,getDidAddress:_v,getDidAddressSegments:jc,getDidChainId:bv,getEnvironment:rs,getHttpUrl:Ex,getInternalError:zn,getJavascriptID:Nv,getJavascriptOS:$v,getLastItems:Tv,getNamespacedDidChainId:tx,getNamespacesChains:Mv,getNamespacesEventsForChainId:Bv,getNamespacesMethodsForChainId:Fv,getNodeOnlineStatus:t1,getReactNativeOnlineStatus:e1,getRelayClientMetadata:_x,getRelayProtocolApi:qx,getRelayProtocolName:Bx,getRequiredNamespacesFromNamespaces:iR,getSdkError:Vi,getUniqueValues:sf,handleDeeplinkRedirect:Mx,hasOverlap:ui,hashKey:ax,hashMessage:cx,isBrowser:Jo,isCaipNamespace:df,isConformingNamespaces:Qv,isExpired:Ux,isNode:hf,isOnline:IR,isProposalStruct:cR,isReactNative:Ks,isSessionCompatible:oR,isSessionStruct:uR,isTypeOneEnvelope:fx,isUndefined:di,isValidAccountId:zv,isValidAccounts:Wv,isValidActions:Jv,isValidArray:Yo,isValidChainId:xo,isValidChains:Vv,isValidController:lR,isValidErrorReason:gR,isValidEvent:vR,isValidId:dR,isValidNamespaceAccounts:Gv,isValidNamespaceActions:pf,isValidNamespaceChains:Kv,isValidNamespaceMethodsOrEvents:ah,isValidNamespaces:Yv,isValidNamespacesChainId:bR,isValidNamespacesEvent:wR,isValidNamespacesRequest:_R,isValidNumber:Mc,isValidObject:Lc,isValidParams:pR,isValidRelay:Xv,isValidRelays:fR,isValidRequest:yR,isValidRequestExpiry:OR,isValidRequiredNamespaces:hR,isValidResponse:mR,isValidString:Gr,isValidUrl:aR,mapEntries:Px,mapToObj:Ix,mergeArrays:li,normalizeNamespaces:oh,objToMap:Dx,parseAccountId:nf,parseChainId:dv,parseContextNames:Av,parseExpirerTarget:Rx,parseNamespaceKey:qv,parseRelayParams:jv,parseTopic:Uv,parseUri:Jx,serialize:Ev,subscribeToBrowserNetworkChange:r1,subscribeToNetworkChange:DR,subscribeToReactNativeNetworkChange:n1,validateDecoding:hx,validateEncoding:Sv},Symbol.toStringTag,{value:"Module"})),NR=Vn($R),CR=Vn(BI);var My;function AR(){if(My)return _o;My=1,Object.defineProperty(_o,"__esModule",{value:!0});var e=IT,t=NR,n=$m(),s=n0,o=i0,c=Pr.exports,f=CR;function h(he){return he&&typeof he=="object"&&"default"in he?he:{default:he}}var O=h(e),p=h(s),S=h(c);const C="error",R="wss://relay.walletconnect.com",U="wc",x="universal_provider",F=`${U}@2:${x}:`,q="https://rpc.walletconnect.com/v1/",te={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var _=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof rt<"u"?rt:typeof self<"u"?self:{},A={exports:{}};/**
* @license
* Lodash <https://lodash.com/>
* Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
* Released under MIT license <https://lodash.com/license>
* Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
* Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
*/(function(he,$){(function(){var m,G="4.17.21",ce=200,_e="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",ye="Expected a function",Ae="Invalid `variable` option passed into `_.template`",Ke="__lodash_hash_undefined__",et=500,We="__lodash_placeholder__",je=1,Rt=2,er=4,fr=1,Wt=2,Ft=1,Rr=2,mi=4,it=8,ut=16,st=32,dt=64,at=128,ht=256,Ct=512,Bt=30,qt="...",Ht=800,kt=16,At=1,Tt=2,mt=3,vt=1/0,pt=9007199254740991,Fc=17976931348623157e292,ss=0/0,Jr=4294967295,an=Jr-1,Bc=Jr>>>1,qc=[["ary",at],["bind",Ft],["bindKey",Rr],["curry",it],["curryRight",ut],["flip",Ct],["partial",st],["partialRight",dt],["rearg",ht]],Kn="[object Arguments]",os="[object Array]",Hc="[object AsyncFunction]",jr="[object Boolean]",vi="[object Date]",kc="[object DOMException]",as="[object Error]",cs="[object Function]",Xo="[object GeneratorFunction]",sr="[object Map]",bi="[object Number]",zc="[object Null]",Gt="[object Object]",Qo="[object Promise]",Vc="[object Proxy]",_i="[object RegExp]",Ur="[object Set]",wi="[object String]",us="[object Symbol]",ls="[object Undefined]",Ei="[object WeakMap]",Si="[object WeakSet]",Wn="[object ArrayBuffer]",Cn="[object DataView]",Ws="[object Float32Array]",Gs="[object Float64Array]",Js="[object Int8Array]",Ys="[object Int16Array]",hs="[object Int32Array]",Xs="[object Uint8Array]",Qs="[object Uint8ClampedArray]",fs="[object Uint16Array]",Gn="[object Uint32Array]",Jn=/\b__p \+= '';/g,Kc=/\b(__p \+=) '' \+/g,Wc=/(__e\(.*?\)|\b__t\)) \+\n'';/g,cn=/&(?:amp|lt|gt|quot|#39);/g,Zo=/[&<>"']/g,Gc=RegExp(cn.source),Jc=RegExp(Zo.source),Yc=/<%-([\s\S]+?)%>/g,Xc=/<%([\s\S]+?)%>/g,mn=/<%=([\s\S]+?)%>/g,ea=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Qc=/^\w*$/,ds=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Zs=/[\\^$.*+?()[\]{}|]/g,eo=RegExp(Zs.source),to=/^\s+/,ta=/\s/,ra=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,na=/\{\n\/\* \[wrapped with (.+)\] \*/,Oi=/,? & /,ia=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Zc=/[()=,{}\[\]\/\s]/,eu=/\\(\\)?/g,tu=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,M=/\w*$/,Y=/^[-+]0x[0-9a-f]+$/i,fe=/^0b[01]+$/i,Se=/^\[object .+?Constructor\]$/,gt=/^0o[0-7]+$/i,xe=/^(?:0|[1-9]\d*)$/,It=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,$t=/($^)/,zt=/['\n\r\u2028\u2029\\]/g,ft="\\ud800-\\udfff",dr="\\u0300-\\u036f",Lr="\\ufe20-\\ufe2f",Jt="\\u20d0-\\u20ff",pr=dr+Lr+Jt,gr="\\u2700-\\u27bf",un="a-z\\xdf-\\xf6\\xf8-\\xff",ln="\\xac\\xb1\\xd7\\xf7",An="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",sa="\\u2000-\\u206f",ps=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ii="A-Z\\xc0-\\xd6\\xd8-\\xde",gf="\\ufe0e\\ufe0f",yf=ln+An+sa+ps,ru="['\u2019]",s1="["+ft+"]",mf="["+yf+"]",oa="["+pr+"]",vf="\\d+",o1="["+gr+"]",bf="["+un+"]",_f="[^"+ft+yf+vf+gr+un+Ii+"]",nu="\\ud83c[\\udffb-\\udfff]",a1="(?:"+oa+"|"+nu+")",wf="[^"+ft+"]",iu="(?:\\ud83c[\\udde6-\\uddff]){2}",su="[\\ud800-\\udbff][\\udc00-\\udfff]",gs="["+Ii+"]",Ef="\\u200d",Sf="(?:"+bf+"|"+_f+")",c1="(?:"+gs+"|"+_f+")",Of="(?:"+ru+"(?:d|ll|m|re|s|t|ve))?",If="(?:"+ru+"(?:D|LL|M|RE|S|T|VE))?",Df=a1+"?",Pf="["+gf+"]?",u1="(?:"+Ef+"(?:"+[wf,iu,su].join("|")+")"+Pf+Df+")*",l1="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",h1="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",$f=Pf+Df+u1,f1="(?:"+[o1,iu,su].join("|")+")"+$f,d1="(?:"+[wf+oa+"?",oa,iu,su,s1].join("|")+")",p1=RegExp(ru,"g"),g1=RegExp(oa,"g"),ou=RegExp(nu+"(?="+nu+")|"+d1+$f,"g"),y1=RegExp([gs+"?"+bf+"+"+Of+"(?="+[mf,gs,"$"].join("|")+")",c1+"+"+If+"(?="+[mf,gs+Sf,"$"].join("|")+")",gs+"?"+Sf+"+"+Of,gs+"+"+If,h1,l1,vf,f1].join("|"),"g"),m1=RegExp("["+Ef+ft+pr+gf+"]"),v1=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,b1=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],_1=-1,Ot={};Ot[Ws]=Ot[Gs]=Ot[Js]=Ot[Ys]=Ot[hs]=Ot[Xs]=Ot[Qs]=Ot[fs]=Ot[Gn]=!0,Ot[Kn]=Ot[os]=Ot[Wn]=Ot[jr]=Ot[Cn]=Ot[vi]=Ot[as]=Ot[cs]=Ot[sr]=Ot[bi]=Ot[Gt]=Ot[_i]=Ot[Ur]=Ot[wi]=Ot[Ei]=!1;var bt={};bt[Kn]=bt[os]=bt[Wn]=bt[Cn]=bt[jr]=bt[vi]=bt[Ws]=bt[Gs]=bt[Js]=bt[Ys]=bt[hs]=bt[sr]=bt[bi]=bt[Gt]=bt[_i]=bt[Ur]=bt[wi]=bt[us]=bt[Xs]=bt[Qs]=bt[fs]=bt[Gn]=!0,bt[as]=bt[cs]=bt[Ei]=!1;var w1={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},E1={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},S1={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},O1={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},I1=parseFloat,D1=parseInt,Nf=typeof _=="object"&&_&&_.Object===Object&&_,P1=typeof self=="object"&&self&&self.Object===Object&&self,tr=Nf||P1||Function("return this")(),au=$&&!$.nodeType&&$,Di=au&&!0&&he&&!he.nodeType&&he,Cf=Di&&Di.exports===au,cu=Cf&&Nf.process,Yr=function(){try{var X=Di&&Di.require&&Di.require("util").types;return X||cu&&cu.binding&&cu.binding("util")}catch{}}(),Af=Yr&&Yr.isArrayBuffer,Tf=Yr&&Yr.isDate,xf=Yr&&Yr.isMap,Rf=Yr&&Yr.isRegExp,jf=Yr&&Yr.isSet,Uf=Yr&&Yr.isTypedArray;function Mr(X,ae,se){switch(se.length){case 0:return X.call(ae);case 1:return X.call(ae,se[0]);case 2:return X.call(ae,se[0],se[1]);case 3:return X.call(ae,se[0],se[1],se[2])}return X.apply(ae,se)}function $1(X,ae,se,Oe){for(var Te=-1,ot=X==null?0:X.length;++Te<ot;){var Vt=X[Te];ae(Oe,Vt,se(Vt),X)}return Oe}function Xr(X,ae){for(var se=-1,Oe=X==null?0:X.length;++se<Oe&&ae(X[se],se,X)!==!1;);return X}function N1(X,ae){for(var se=X==null?0:X.length;se--&&ae(X[se],se,X)!==!1;);return X}function Lf(X,ae){for(var se=-1,Oe=X==null?0:X.length;++se<Oe;)if(!ae(X[se],se,X))return!1;return!0}function Yn(X,ae){for(var se=-1,Oe=X==null?0:X.length,Te=0,ot=[];++se<Oe;){var Vt=X[se];ae(Vt,se,X)&&(ot[Te++]=Vt)}return ot}function aa(X,ae){var se=X==null?0:X.length;return!!se&&ys(X,ae,0)>-1}function uu(X,ae,se){for(var Oe=-1,Te=X==null?0:X.length;++Oe<Te;)if(se(ae,X[Oe]))return!0;return!1}function Dt(X,ae){for(var se=-1,Oe=X==null?0:X.length,Te=Array(Oe);++se<Oe;)Te[se]=ae(X[se],se,X);return Te}function Xn(X,ae){for(var se=-1,Oe=ae.length,Te=X.length;++se<Oe;)X[Te+se]=ae[se];return X}function lu(X,ae,se,Oe){var Te=-1,ot=X==null?0:X.length;for(Oe&&ot&&(se=X[++Te]);++Te<ot;)se=ae(se,X[Te],Te,X);return se}function C1(X,ae,se,Oe){var Te=X==null?0:X.length;for(Oe&&Te&&(se=X[--Te]);Te--;)se=ae(se,X[Te],Te,X);return se}function hu(X,ae){for(var se=-1,Oe=X==null?0:X.length;++se<Oe;)if(ae(X[se],se,X))return!0;return!1}var A1=fu("length");function T1(X){return X.split("")}function x1(X){return X.match(ia)||[]}function Mf(X,ae,se){var Oe;return se(X,function(Te,ot,Vt){if(ae(Te,ot,Vt))return Oe=ot,!1}),Oe}function ca(X,ae,se,Oe){for(var Te=X.length,ot=se+(Oe?1:-1);Oe?ot--:++ot<Te;)if(ae(X[ot],ot,X))return ot;return-1}function ys(X,ae,se){return ae===ae?V1(X,ae,se):ca(X,Ff,se)}function R1(X,ae,se,Oe){for(var Te=se-1,ot=X.length;++Te<ot;)if(Oe(X[Te],ae))return Te;return-1}function Ff(X){return X!==X}function Bf(X,ae){var se=X==null?0:X.length;return se?pu(X,ae)/se:ss}function fu(X){return function(ae){return ae==null?m:ae[X]}}function du(X){return function(ae){return X==null?m:X[ae]}}function qf(X,ae,se,Oe,Te){return Te(X,function(ot,Vt,yt){se=Oe?(Oe=!1,ot):ae(se,ot,Vt,yt)}),se}function j1(X,ae){var se=X.length;for(X.sort(ae);se--;)X[se]=X[se].value;return X}function pu(X,ae){for(var se,Oe=-1,Te=X.length;++Oe<Te;){var ot=ae(X[Oe]);ot!==m&&(se=se===m?ot:se+ot)}return se}function gu(X,ae){for(var se=-1,Oe=Array(X);++se<X;)Oe[se]=ae(se);return Oe}function U1(X,ae){return Dt(ae,function(se){return[se,X[se]]})}function Hf(X){return X&&X.slice(0,Kf(X)+1).replace(to,"")}function Fr(X){return function(ae){return X(ae)}}function yu(X,ae){return Dt(ae,function(se){return X[se]})}function ro(X,ae){return X.has(ae)}function kf(X,ae){for(var se=-1,Oe=X.length;++se<Oe&&ys(ae,X[se],0)>-1;);return se}function zf(X,ae){for(var se=X.length;se--&&ys(ae,X[se],0)>-1;);return se}function L1(X,ae){for(var se=X.length,Oe=0;se--;)X[se]===ae&&++Oe;return Oe}var M1=du(w1),F1=du(E1);function B1(X){return"\\"+O1[X]}function q1(X,ae){return X==null?m:X[ae]}function ms(X){return m1.test(X)}function H1(X){return v1.test(X)}function k1(X){for(var ae,se=[];!(ae=X.next()).done;)se.push(ae.value);return se}function mu(X){var ae=-1,se=Array(X.size);return X.forEach(function(Oe,Te){se[++ae]=[Te,Oe]}),se}function Vf(X,ae){return function(se){return X(ae(se))}}function Qn(X,ae){for(var se=-1,Oe=X.length,Te=0,ot=[];++se<Oe;){var Vt=X[se];(Vt===ae||Vt===We)&&(X[se]=We,ot[Te++]=se)}return ot}function ua(X){var ae=-1,se=Array(X.size);return X.forEach(function(Oe){se[++ae]=Oe}),se}function z1(X){var ae=-1,se=Array(X.size);return X.forEach(function(Oe){se[++ae]=[Oe,Oe]}),se}function V1(X,ae,se){for(var Oe=se-1,Te=X.length;++Oe<Te;)if(X[Oe]===ae)return Oe;return-1}function K1(X,ae,se){for(var Oe=se+1;Oe--;)if(X[Oe]===ae)return Oe;return Oe}function vs(X){return ms(X)?G1(X):A1(X)}function hn(X){return ms(X)?J1(X):T1(X)}function Kf(X){for(var ae=X.length;ae--&&ta.test(X.charAt(ae)););return ae}var W1=du(S1);function G1(X){for(var ae=ou.lastIndex=0;ou.test(X);)++ae;return ae}function J1(X){return X.match(ou)||[]}function Y1(X){return X.match(y1)||[]}var X1=function X(ae){ae=ae==null?tr:bs.defaults(tr.Object(),ae,bs.pick(tr,b1));var se=ae.Array,Oe=ae.Date,Te=ae.Error,ot=ae.Function,Vt=ae.Math,yt=ae.Object,vu=ae.RegExp,Q1=ae.String,Qr=ae.TypeError,la=se.prototype,Z1=ot.prototype,_s=yt.prototype,ha=ae["__core-js_shared__"],fa=Z1.toString,lt=_s.hasOwnProperty,eb=0,Wf=function(){var r=/[^.]+$/.exec(ha&&ha.keys&&ha.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}(),da=_s.toString,tb=fa.call(yt),rb=tr._,nb=vu("^"+fa.call(lt).replace(Zs,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),pa=Cf?ae.Buffer:m,Zn=ae.Symbol,ga=ae.Uint8Array,Gf=pa?pa.allocUnsafe:m,ya=Vf(yt.getPrototypeOf,yt),Jf=yt.create,Yf=_s.propertyIsEnumerable,ma=la.splice,Xf=Zn?Zn.isConcatSpreadable:m,no=Zn?Zn.iterator:m,Pi=Zn?Zn.toStringTag:m,va=function(){try{var r=Ti(yt,"defineProperty");return r({},"",{}),r}catch{}}(),ib=ae.clearTimeout!==tr.clearTimeout&&ae.clearTimeout,sb=Oe&&Oe.now!==tr.Date.now&&Oe.now,ob=ae.setTimeout!==tr.setTimeout&&ae.setTimeout,ba=Vt.ceil,_a=Vt.floor,bu=yt.getOwnPropertySymbols,ab=pa?pa.isBuffer:m,Qf=ae.isFinite,cb=la.join,ub=Vf(yt.keys,yt),Kt=Vt.max,or=Vt.min,lb=Oe.now,hb=ae.parseInt,Zf=Vt.random,fb=la.reverse,_u=Ti(ae,"DataView"),io=Ti(ae,"Map"),wu=Ti(ae,"Promise"),ws=Ti(ae,"Set"),so=Ti(ae,"WeakMap"),oo=Ti(yt,"create"),wa=so&&new so,Es={},db=xi(_u),pb=xi(io),gb=xi(wu),yb=xi(ws),mb=xi(so),Ea=Zn?Zn.prototype:m,ao=Ea?Ea.valueOf:m,ed=Ea?Ea.toString:m;function T(r){if(xt(r)&&!Re(r)&&!(r instanceof Ye)){if(r instanceof Zr)return r;if(lt.call(r,"__wrapped__"))return tp(r)}return new Zr(r)}var Ss=function(){function r(){}return function(i){if(!Nt(i))return{};if(Jf)return Jf(i);r.prototype=i;var a=new r;return r.prototype=m,a}}();function Sa(){}function Zr(r,i){this.__wrapped__=r,this.__actions__=[],this.__chain__=!!i,this.__index__=0,this.__values__=m}T.templateSettings={escape:Yc,evaluate:Xc,interpolate:mn,variable:"",imports:{_:T}},T.prototype=Sa.prototype,T.prototype.constructor=T,Zr.prototype=Ss(Sa.prototype),Zr.prototype.constructor=Zr;function Ye(r){this.__wrapped__=r,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Jr,this.__views__=[]}function vb(){var r=new Ye(this.__wrapped__);return r.__actions__=$r(this.__actions__),r.__dir__=this.__dir__,r.__filtered__=this.__filtered__,r.__iteratees__=$r(this.__iteratees__),r.__takeCount__=this.__takeCount__,r.__views__=$r(this.__views__),r}function bb(){if(this.__filtered__){var r=new Ye(this);r.__dir__=-1,r.__filtered__=!0}else r=this.clone(),r.__dir__*=-1;return r}function _b(){var r=this.__wrapped__.value(),i=this.__dir__,a=Re(r),l=i<0,N=a?r.length:0,j=T_(0,N,this.__views__),H=j.start,V=j.end,Q=V-H,ue=l?V:H-1,le=this.__iteratees__,pe=le.length,ve=0,De=or(Q,this.__takeCount__);if(!a||!l&&N==Q&&De==Q)return Od(r,this.__actions__);var $e=[];e:for(;Q--&&ve<De;){ue+=i;for(var Fe=-1,Ne=r[ue];++Fe<pe;){var Ge=le[Fe],Ze=Ge.iteratee,Hr=Ge.type,vr=Ze(Ne);if(Hr==Tt)Ne=vr;else if(!vr){if(Hr==At)continue e;break e}}$e[ve++]=Ne}return $e}Ye.prototype=Ss(Sa.prototype),Ye.prototype.constructor=Ye;function $i(r){var i=-1,a=r==null?0:r.length;for(this.clear();++i<a;){var l=r[i];this.set(l[0],l[1])}}function wb(){this.__data__=oo?oo(null):{},this.size=0}function Eb(r){var i=this.has(r)&&delete this.__data__[r];return this.size-=i?1:0,i}function Sb(r){var i=this.__data__;if(oo){var a=i[r];return a===Ke?m:a}return lt.call(i,r)?i[r]:m}function Ob(r){var i=this.__data__;return oo?i[r]!==m:lt.call(i,r)}function Ib(r,i){var a=this.__data__;return this.size+=this.has(r)?0:1,a[r]=oo&&i===m?Ke:i,this}$i.prototype.clear=wb,$i.prototype.delete=Eb,$i.prototype.get=Sb,$i.prototype.has=Ob,$i.prototype.set=Ib;function Tn(r){var i=-1,a=r==null?0:r.length;for(this.clear();++i<a;){var l=r[i];this.set(l[0],l[1])}}function Db(){this.__data__=[],this.size=0}function Pb(r){var i=this.__data__,a=Oa(i,r);if(a<0)return!1;var l=i.length-1;return a==l?i.pop():ma.call(i,a,1),--this.size,!0}function $b(r){var i=this.__data__,a=Oa(i,r);return a<0?m:i[a][1]}function Nb(r){return Oa(this.__data__,r)>-1}function Cb(r,i){var a=this.__data__,l=Oa(a,r);return l<0?(++this.size,a.push([r,i])):a[l][1]=i,this}Tn.prototype.clear=Db,Tn.prototype.delete=Pb,Tn.prototype.get=$b,Tn.prototype.has=Nb,Tn.prototype.set=Cb;function xn(r){var i=-1,a=r==null?0:r.length;for(this.clear();++i<a;){var l=r[i];this.set(l[0],l[1])}}function Ab(){this.size=0,this.__data__={hash:new $i,map:new(io||Tn),string:new $i}}function Tb(r){var i=Ua(this,r).delete(r);return this.size-=i?1:0,i}function xb(r){return Ua(this,r).get(r)}function Rb(r){return Ua(this,r).has(r)}function jb(r,i){var a=Ua(this,r),l=a.size;return a.set(r,i),this.size+=a.size==l?0:1,this}xn.prototype.clear=Ab,xn.prototype.delete=Tb,xn.prototype.get=xb,xn.prototype.has=Rb,xn.prototype.set=jb;function Ni(r){var i=-1,a=r==null?0:r.length;for(this.__data__=new xn;++i<a;)this.add(r[i])}function Ub(r){return this.__data__.set(r,Ke),this}function Lb(r){return this.__data__.has(r)}Ni.prototype.add=Ni.prototype.push=Ub,Ni.prototype.has=Lb;function fn(r){var i=this.__data__=new Tn(r);this.size=i.size}function Mb(){this.__data__=new Tn,this.size=0}function Fb(r){var i=this.__data__,a=i.delete(r);return this.size=i.size,a}function Bb(r){return this.__data__.get(r)}function qb(r){return this.__data__.has(r)}function Hb(r,i){var a=this.__data__;if(a instanceof Tn){var l=a.__data__;if(!io||l.length<ce-1)return l.push([r,i]),this.size=++a.size,this;a=this.__data__=new xn(l)}return a.set(r,i),this.size=a.size,this}fn.prototype.clear=Mb,fn.prototype.delete=Fb,fn.prototype.get=Bb,fn.prototype.has=qb,fn.prototype.set=Hb;function td(r,i){var a=Re(r),l=!a&&Ri(r),N=!a&&!l&&ii(r),j=!a&&!l&&!N&&Ps(r),H=a||l||N||j,V=H?gu(r.length,Q1):[],Q=V.length;for(var ue in r)(i||lt.call(r,ue))&&!(H&&(ue=="length"||N&&(ue=="offset"||ue=="parent")||j&&(ue=="buffer"||ue=="byteLength"||ue=="byteOffset")||Ln(ue,Q)))&&V.push(ue);return V}function rd(r){var i=r.length;return i?r[Tu(0,i-1)]:m}function kb(r,i){return La($r(r),Ci(i,0,r.length))}function zb(r){return La($r(r))}function Eu(r,i,a){(a!==m&&!dn(r[i],a)||a===m&&!(i in r))&&Rn(r,i,a)}function co(r,i,a){var l=r[i];(!(lt.call(r,i)&&dn(l,a))||a===m&&!(i in r))&&Rn(r,i,a)}function Oa(r,i){for(var a=r.length;a--;)if(dn(r[a][0],i))return a;return-1}function Vb(r,i,a,l){return ei(r,function(N,j,H){i(l,N,a(N),H)}),l}function nd(r,i){return r&&bn(i,Yt(i),r)}function Kb(r,i){return r&&bn(i,Cr(i),r)}function Rn(r,i,a){i=="__proto__"&&va?va(r,i,{configurable:!0,enumerable:!0,value:a,writable:!0}):r[i]=a}function Su(r,i){for(var a=-1,l=i.length,N=se(l),j=r==null;++a<l;)N[a]=j?m:nl(r,i[a]);return N}function Ci(r,i,a){return r===r&&(a!==m&&(r=r<=a?r:a),i!==m&&(r=r>=i?r:i)),r}function en(r,i,a,l,N,j){var H,V=i&je,Q=i&Rt,ue=i&er;if(a&&(H=N?a(r,l,N,j):a(r)),H!==m)return H;if(!Nt(r))return r;var le=Re(r);if(le){if(H=R_(r),!V)return $r(r,H)}else{var pe=ar(r),ve=pe==cs||pe==Xo;if(ii(r))return Pd(r,V);if(pe==Gt||pe==Kn||ve&&!N){if(H=Q||ve?{}:Kd(r),!V)return Q?S_(r,Kb(H,r)):E_(r,nd(H,r))}else{if(!bt[pe])return N?r:{};H=j_(r,pe,V)}}j||(j=new fn);var De=j.get(r);if(De)return De;j.set(r,H),wp(r)?r.forEach(function(Ne){H.add(en(Ne,i,a,Ne,r,j))}):bp(r)&&r.forEach(function(Ne,Ge){H.set(Ge,en(Ne,i,a,Ge,r,j))});var $e=ue?Q?ku:Hu:Q?Cr:Yt,Fe=le?m:$e(r);return Xr(Fe||r,function(Ne,Ge){Fe&&(Ge=Ne,Ne=r[Ge]),co(H,Ge,en(Ne,i,a,Ge,r,j))}),H}function Wb(r){var i=Yt(r);return function(a){return id(a,r,i)}}function id(r,i,a){var l=a.length;if(r==null)return!l;for(r=yt(r);l--;){var N=a[l],j=i[N],H=r[N];if(H===m&&!(N in r)||!j(H))return!1}return!0}function sd(r,i,a){if(typeof r!="function")throw new Qr(ye);return yo(function(){r.apply(m,a)},i)}function uo(r,i,a,l){var N=-1,j=aa,H=!0,V=r.length,Q=[],ue=i.length;if(!V)return Q;a&&(i=Dt(i,Fr(a))),l?(j=uu,H=!1):i.length>=ce&&(j=ro,H=!1,i=new Ni(i));e:for(;++N<V;){var le=r[N],pe=a==null?le:a(le);if(le=l||le!==0?le:0,H&&pe===pe){for(var ve=ue;ve--;)if(i[ve]===pe)continue e;Q.push(le)}else j(i,pe,l)||Q.push(le)}return Q}var ei=Td(vn),od=Td(Iu,!0);function Gb(r,i){var a=!0;return ei(r,function(l,N,j){return a=!!i(l,N,j),a}),a}function Ia(r,i,a){for(var l=-1,N=r.length;++l<N;){var j=r[l],H=i(j);if(H!=null&&(V===m?H===H&&!qr(H):a(H,V)))var V=H,Q=j}return Q}function Jb(r,i,a,l){var N=r.length;for(a=Me(a),a<0&&(a=-a>N?0:N+a),l=l===m||l>N?N:Me(l),l<0&&(l+=N),l=a>l?0:Sp(l);a<l;)r[a++]=i;return r}function ad(r,i){var a=[];return ei(r,function(l,N,j){i(l,N,j)&&a.push(l)}),a}function rr(r,i,a,l,N){var j=-1,H=r.length;for(a||(a=L_),N||(N=[]);++j<H;){var V=r[j];i>0&&a(V)?i>1?rr(V,i-1,a,l,N):Xn(N,V):l||(N[N.length]=V)}return N}var Ou=xd(),cd=xd(!0);function vn(r,i){return r&&Ou(r,i,Yt)}function Iu(r,i){return r&&cd(r,i,Yt)}function Da(r,i){return Yn(i,function(a){return Mn(r[a])})}function Ai(r,i){i=ri(i,r);for(var a=0,l=i.length;r!=null&&a<l;)r=r[_n(i[a++])];return a&&a==l?r:m}function ud(r,i,a){var l=i(r);return Re(r)?l:Xn(l,a(r))}function yr(r){return r==null?r===m?ls:zc:Pi&&Pi in yt(r)?A_(r):z_(r)}function Du(r,i){return r>i}function Yb(r,i){return r!=null&&lt.call(r,i)}function Xb(r,i){return r!=null&&i in yt(r)}function Qb(r,i,a){return r>=or(i,a)&&r<Kt(i,a)}function Pu(r,i,a){for(var l=a?uu:aa,N=r[0].length,j=r.length,H=j,V=se(j),Q=1/0,ue=[];H--;){var le=r[H];H&&i&&(le=Dt(le,Fr(i))),Q=or(le.length,Q),V[H]=!a&&(i||N>=120&&le.length>=120)?new Ni(H&&le):m}le=r[0];var pe=-1,ve=V[0];e:for(;++pe<N&&ue.length<Q;){var De=le[pe],$e=i?i(De):De;if(De=a||De!==0?De:0,!(ve?ro(ve,$e):l(ue,$e,a))){for(H=j;--H;){var Fe=V[H];if(!(Fe?ro(Fe,$e):l(r[H],$e,a)))continue e}ve&&ve.push($e),ue.push(De)}}return ue}function Zb(r,i,a,l){return vn(r,function(N,j,H){i(l,a(N),j,H)}),l}function lo(r,i,a){i=ri(i,r),r=Yd(r,i);var l=r==null?r:r[_n(rn(i))];return l==null?m:Mr(l,r,a)}function ld(r){return xt(r)&&yr(r)==Kn}function e_(r){return xt(r)&&yr(r)==Wn}function t_(r){return xt(r)&&yr(r)==vi}function ho(r,i,a,l,N){return r===i?!0:r==null||i==null||!xt(r)&&!xt(i)?r!==r&&i!==i:r_(r,i,a,l,ho,N)}function r_(r,i,a,l,N,j){var H=Re(r),V=Re(i),Q=H?os:ar(r),ue=V?os:ar(i);Q=Q==Kn?Gt:Q,ue=ue==Kn?Gt:ue;var le=Q==Gt,pe=ue==Gt,ve=Q==ue;if(ve&&ii(r)){if(!ii(i))return!1;H=!0,le=!1}if(ve&&!le)return j||(j=new fn),H||Ps(r)?kd(r,i,a,l,N,j):N_(r,i,Q,a,l,N,j);if(!(a&fr)){var De=le&&lt.call(r,"__wrapped__"),$e=pe&&lt.call(i,"__wrapped__");if(De||$e){var Fe=De?r.value():r,Ne=$e?i.value():i;return j||(j=new fn),N(Fe,Ne,a,l,j)}}return ve?(j||(j=new fn),C_(r,i,a,l,N,j)):!1}function n_(r){return xt(r)&&ar(r)==sr}function $u(r,i,a,l){var N=a.length,j=N,H=!l;if(r==null)return!j;for(r=yt(r);N--;){var V=a[N];if(H&&V[2]?V[1]!==r[V[0]]:!(V[0]in r))return!1}for(;++N<j;){V=a[N];var Q=V[0],ue=r[Q],le=V[1];if(H&&V[2]){if(ue===m&&!(Q in r))return!1}else{var pe=new fn;if(l)var ve=l(ue,le,Q,r,i,pe);if(!(ve===m?ho(le,ue,fr|Wt,l,pe):ve))return!1}}return!0}function hd(r){if(!Nt(r)||F_(r))return!1;var i=Mn(r)?nb:Se;return i.test(xi(r))}function i_(r){return xt(r)&&yr(r)==_i}function s_(r){return xt(r)&&ar(r)==Ur}function o_(r){return xt(r)&&ka(r.length)&&!!Ot[yr(r)]}function fd(r){return typeof r=="function"?r:r==null?Ar:typeof r=="object"?Re(r)?gd(r[0],r[1]):pd(r):Rp(r)}function Nu(r){if(!go(r))return ub(r);var i=[];for(var a in yt(r))lt.call(r,a)&&a!="constructor"&&i.push(a);return i}function a_(r){if(!Nt(r))return k_(r);var i=go(r),a=[];for(var l in r)l=="constructor"&&(i||!lt.call(r,l))||a.push(l);return a}function Cu(r,i){return r<i}function dd(r,i){var a=-1,l=Nr(r)?se(r.length):[];return ei(r,function(N,j,H){l[++a]=i(N,j,H)}),l}function pd(r){var i=Vu(r);return i.length==1&&i[0][2]?Gd(i[0][0],i[0][1]):function(a){return a===r||$u(a,r,i)}}function gd(r,i){return Wu(r)&&Wd(i)?Gd(_n(r),i):function(a){var l=nl(a,r);return l===m&&l===i?il(a,r):ho(i,l,fr|Wt)}}function Pa(r,i,a,l,N){r!==i&&Ou(i,function(j,H){if(N||(N=new fn),Nt(j))c_(r,i,H,a,Pa,l,N);else{var V=l?l(Ju(r,H),j,H+"",r,i,N):m;V===m&&(V=j),Eu(r,H,V)}},Cr)}function c_(r,i,a,l,N,j,H){var V=Ju(r,a),Q=Ju(i,a),ue=H.get(Q);if(ue){Eu(r,a,ue);return}var le=j?j(V,Q,a+"",r,i,H):m,pe=le===m;if(pe){var ve=Re(Q),De=!ve&&ii(Q),$e=!ve&&!De&&Ps(Q);le=Q,ve||De||$e?Re(V)?le=V:jt(V)?le=$r(V):De?(pe=!1,le=Pd(Q,!0)):$e?(pe=!1,le=$d(Q,!0)):le=[]:mo(Q)||Ri(Q)?(le=V,Ri(V)?le=Op(V):(!Nt(V)||Mn(V))&&(le=Kd(Q))):pe=!1}pe&&(H.set(Q,le),N(le,Q,l,j,H),H.delete(Q)),Eu(r,a,le)}function yd(r,i){var a=r.length;if(a)return i+=i<0?a:0,Ln(i,a)?r[i]:m}function md(r,i,a){i.length?i=Dt(i,function(j){return Re(j)?function(H){return Ai(H,j.length===1?j[0]:j)}:j}):i=[Ar];var l=-1;i=Dt(i,Fr(Pe()));var N=dd(r,function(j,H,V){var Q=Dt(i,function(ue){return ue(j)});return{criteria:Q,index:++l,value:j}});return j1(N,function(j,H){return w_(j,H,a)})}function u_(r,i){return vd(r,i,function(a,l){return il(r,l)})}function vd(r,i,a){for(var l=-1,N=i.length,j={};++l<N;){var H=i[l],V=Ai(r,H);a(V,H)&&fo(j,ri(H,r),V)}return j}function l_(r){return function(i){return Ai(i,r)}}function Au(r,i,a,l){var N=l?R1:ys,j=-1,H=i.length,V=r;for(r===i&&(i=$r(i)),a&&(V=Dt(r,Fr(a)));++j<H;)for(var Q=0,ue=i[j],le=a?a(ue):ue;(Q=N(V,le,Q,l))>-1;)V!==r&&ma.call(V,Q,1),ma.call(r,Q,1);return r}function bd(r,i){for(var a=r?i.length:0,l=a-1;a--;){var N=i[a];if(a==l||N!==j){var j=N;Ln(N)?ma.call(r,N,1):ju(r,N)}}return r}function Tu(r,i){return r+_a(Zf()*(i-r+1))}function h_(r,i,a,l){for(var N=-1,j=Kt(ba((i-r)/(a||1)),0),H=se(j);j--;)H[l?j:++N]=r,r+=a;return H}function xu(r,i){var a="";if(!r||i<1||i>pt)return a;do i%2&&(a+=r),i=_a(i/2),i&&(r+=r);while(i);return a}function ke(r,i){return Yu(Jd(r,i,Ar),r+"")}function f_(r){return rd($s(r))}function d_(r,i){var a=$s(r);return La(a,Ci(i,0,a.length))}function fo(r,i,a,l){if(!Nt(r))return r;i=ri(i,r);for(var N=-1,j=i.length,H=j-1,V=r;V!=null&&++N<j;){var Q=_n(i[N]),ue=a;if(Q==="__proto__"||Q==="constructor"||Q==="prototype")return r;if(N!=H){var le=V[Q];ue=l?l(le,Q,V):m,ue===m&&(ue=Nt(le)?le:Ln(i[N+1])?[]:{})}co(V,Q,ue),V=V[Q]}return r}var _d=wa?function(r,i){return wa.set(r,i),r}:Ar,p_=va?function(r,i){return va(r,"toString",{configurable:!0,enumerable:!1,value:ol(i),writable:!0})}:Ar;function g_(r){return La($s(r))}function tn(r,i,a){var l=-1,N=r.length;i<0&&(i=-i>N?0:N+i),a=a>N?N:a,a<0&&(a+=N),N=i>a?0:a-i>>>0,i>>>=0;for(var j=se(N);++l<N;)j[l]=r[l+i];return j}function y_(r,i){var a;return ei(r,function(l,N,j){return a=i(l,N,j),!a}),!!a}function $a(r,i,a){var l=0,N=r==null?l:r.length;if(typeof i=="number"&&i===i&&N<=Bc){for(;l<N;){var j=l+N>>>1,H=r[j];H!==null&&!qr(H)&&(a?H<=i:H<i)?l=j+1:N=j}return N}return Ru(r,i,Ar,a)}function Ru(r,i,a,l){var N=0,j=r==null?0:r.length;if(j===0)return 0;i=a(i);for(var H=i!==i,V=i===null,Q=qr(i),ue=i===m;N<j;){var le=_a((N+j)/2),pe=a(r[le]),ve=pe!==m,De=pe===null,$e=pe===pe,Fe=qr(pe);if(H)var Ne=l||$e;else ue?Ne=$e&&(l||ve):V?Ne=$e&&ve&&(l||!De):Q?Ne=$e&&ve&&!De&&(l||!Fe):De||Fe?Ne=!1:Ne=l?pe<=i:pe<i;Ne?N=le+1:j=le}return or(j,an)}function wd(r,i){for(var a=-1,l=r.length,N=0,j=[];++a<l;){var H=r[a],V=i?i(H):H;if(!a||!dn(V,Q)){var Q=V;j[N++]=H===0?0:H}}return j}function Ed(r){return typeof r=="number"?r:qr(r)?ss:+r}function Br(r){if(typeof r=="string")return r;if(Re(r))return Dt(r,Br)+"";if(qr(r))return ed?ed.call(r):"";var i=r+"";return i=="0"&&1/r==-vt?"-0":i}function ti(r,i,a){var l=-1,N=aa,j=r.length,H=!0,V=[],Q=V;if(a)H=!1,N=uu;else if(j>=ce){var ue=i?null:P_(r);if(ue)return ua(ue);H=!1,N=ro,Q=new Ni}else Q=i?[]:V;e:for(;++l<j;){var le=r[l],pe=i?i(le):le;if(le=a||le!==0?le:0,H&&pe===pe){for(var ve=Q.length;ve--;)if(Q[ve]===pe)continue e;i&&Q.push(pe),V.push(le)}else N(Q,pe,a)||(Q!==V&&Q.push(pe),V.push(le))}return V}function ju(r,i){return i=ri(i,r),r=Yd(r,i),r==null||delete r[_n(rn(i))]}function Sd(r,i,a,l){return fo(r,i,a(Ai(r,i)),l)}function Na(r,i,a,l){for(var N=r.length,j=l?N:-1;(l?j--:++j<N)&&i(r[j],j,r););return a?tn(r,l?0:j,l?j+1:N):tn(r,l?j+1:0,l?N:j)}function Od(r,i){var a=r;return a instanceof Ye&&(a=a.value()),lu(i,function(l,N){return N.func.apply(N.thisArg,Xn([l],N.args))},a)}function Uu(r,i,a){var l=r.length;if(l<2)return l?ti(r[0]):[];for(var N=-1,j=se(l);++N<l;)for(var H=r[N],V=-1;++V<l;)V!=N&&(j[N]=uo(j[N]||H,r[V],i,a));return ti(rr(j,1),i,a)}function Id(r,i,a){for(var l=-1,N=r.length,j=i.length,H={};++l<N;){var V=l<j?i[l]:m;a(H,r[l],V)}return H}function Lu(r){return jt(r)?r:[]}function Mu(r){return typeof r=="function"?r:Ar}function ri(r,i){return Re(r)?r:Wu(r,i)?[r]:ep(ct(r))}var m_=ke;function ni(r,i,a){var l=r.length;return a=a===m?l:a,!i&&a>=l?r:tn(r,i,a)}var Dd=ib||function(r){return tr.clearTimeout(r)};function Pd(r,i){if(i)return r.slice();var a=r.length,l=Gf?Gf(a):new r.constructor(a);return r.copy(l),l}function Fu(r){var i=new r.constructor(r.byteLength);return new ga(i).set(new ga(r)),i}function v_(r,i){var a=i?Fu(r.buffer):r.buffer;return new r.constructor(a,r.byteOffset,r.byteLength)}function b_(r){var i=new r.constructor(r.source,M.exec(r));return i.lastIndex=r.lastIndex,i}function __(r){return ao?yt(ao.call(r)):{}}function $d(r,i){var a=i?Fu(r.buffer):r.buffer;return new r.constructor(a,r.byteOffset,r.length)}function Nd(r,i){if(r!==i){var a=r!==m,l=r===null,N=r===r,j=qr(r),H=i!==m,V=i===null,Q=i===i,ue=qr(i);if(!V&&!ue&&!j&&r>i||j&&H&&Q&&!V&&!ue||l&&H&&Q||!a&&Q||!N)return 1;if(!l&&!j&&!ue&&r<i||ue&&a&&N&&!l&&!j||V&&a&&N||!H&&N||!Q)return-1}return 0}function w_(r,i,a){for(var l=-1,N=r.criteria,j=i.criteria,H=N.length,V=a.length;++l<H;){var Q=Nd(N[l],j[l]);if(Q){if(l>=V)return Q;var ue=a[l];return Q*(ue=="desc"?-1:1)}}return r.index-i.index}function Cd(r,i,a,l){for(var N=-1,j=r.length,H=a.length,V=-1,Q=i.length,ue=Kt(j-H,0),le=se(Q+ue),pe=!l;++V<Q;)le[V]=i[V];for(;++N<H;)(pe||N<j)&&(le[a[N]]=r[N]);for(;ue--;)le[V++]=r[N++];return le}function Ad(r,i,a,l){for(var N=-1,j=r.length,H=-1,V=a.length,Q=-1,ue=i.length,le=Kt(j-V,0),pe=se(le+ue),ve=!l;++N<le;)pe[N]=r[N];for(var De=N;++Q<ue;)pe[De+Q]=i[Q];for(;++H<V;)(ve||N<j)&&(pe[De+a[H]]=r[N++]);return pe}function $r(r,i){var a=-1,l=r.length;for(i||(i=se(l));++a<l;)i[a]=r[a];return i}function bn(r,i,a,l){var N=!a;a||(a={});for(var j=-1,H=i.length;++j<H;){var V=i[j],Q=l?l(a[V],r[V],V,a,r):m;Q===m&&(Q=r[V]),N?Rn(a,V,Q):co(a,V,Q)}return a}function E_(r,i){return bn(r,Ku(r),i)}function S_(r,i){return bn(r,zd(r),i)}function Ca(r,i){return function(a,l){var N=Re(a)?$1:Vb,j=i?i():{};return N(a,r,Pe(l,2),j)}}function Os(r){return ke(function(i,a){var l=-1,N=a.length,j=N>1?a[N-1]:m,H=N>2?a[2]:m;for(j=r.length>3&&typeof j=="function"?(N--,j):m,H&&mr(a[0],a[1],H)&&(j=N<3?m:j,N=1),i=yt(i);++l<N;){var V=a[l];V&&r(i,V,l,j)}return i})}function Td(r,i){return function(a,l){if(a==null)return a;if(!Nr(a))return r(a,l);for(var N=a.length,j=i?N:-1,H=yt(a);(i?j--:++j<N)&&l(H[j],j,H)!==!1;);return a}}function xd(r){return function(i,a,l){for(var N=-1,j=yt(i),H=l(i),V=H.length;V--;){var Q=H[r?V:++N];if(a(j[Q],Q,j)===!1)break}return i}}function O_(r,i,a){var l=i&Ft,N=po(r);function j(){var H=this&&this!==tr&&this instanceof j?N:r;return H.apply(l?a:this,arguments)}return j}function Rd(r){return function(i){i=ct(i);var a=ms(i)?hn(i):m,l=a?a[0]:i.charAt(0),N=a?ni(a,1).join(""):i.slice(1);return l[r]()+N}}function Is(r){return function(i){return lu(Tp(Ap(i).replace(p1,"")),r,"")}}function po(r){return function(){var i=arguments;switch(i.length){case 0:return new r;case 1:return new r(i[0]);case 2:return new r(i[0],i[1]);case 3:return new r(i[0],i[1],i[2]);case 4:return new r(i[0],i[1],i[2],i[3]);case 5:return new r(i[0],i[1],i[2],i[3],i[4]);case 6:return new r(i[0],i[1],i[2],i[3],i[4],i[5]);case 7:return new r(i[0],i[1],i[2],i[3],i[4],i[5],i[6])}var a=Ss(r.prototype),l=r.apply(a,i);return Nt(l)?l:a}}function I_(r,i,a){var l=po(r);function N(){for(var j=arguments.length,H=se(j),V=j,Q=Ds(N);V--;)H[V]=arguments[V];var ue=j<3&&H[0]!==Q&&H[j-1]!==Q?[]:Qn(H,Q);if(j-=ue.length,j<a)return Fd(r,i,Aa,N.placeholder,m,H,ue,m,m,a-j);var le=this&&this!==tr&&this instanceof N?l:r;return Mr(le,this,H)}return N}function jd(r){return function(i,a,l){var N=yt(i);if(!Nr(i)){var j=Pe(a,3);i=Yt(i),a=function(V){return j(N[V],V,N)}}var H=r(i,a,l);return H>-1?N[j?i[H]:H]:m}}function Ud(r){return Un(function(i){var a=i.length,l=a,N=Zr.prototype.thru;for(r&&i.reverse();l--;){var j=i[l];if(typeof j!="function")throw new Qr(ye);if(N&&!H&&ja(j)=="wrapper")var H=new Zr([],!0)}for(l=H?l:a;++l<a;){j=i[l];var V=ja(j),Q=V=="wrapper"?zu(j):m;Q&&Gu(Q[0])&&Q[1]==(at|it|st|ht)&&!Q[4].length&&Q[9]==1?H=H[ja(Q[0])].apply(H,Q[3]):H=j.length==1&&Gu(j)?H[V]():H.thru(j)}return function(){var ue=arguments,le=ue[0];if(H&&ue.length==1&&Re(le))return H.plant(le).value();for(var pe=0,ve=a?i[pe].apply(this,ue):le;++pe<a;)ve=i[pe].call(this,ve);return ve}})}function Aa(r,i,a,l,N,j,H,V,Q,ue){var le=i&at,pe=i&Ft,ve=i&Rr,De=i&(it|ut),$e=i&Ct,Fe=ve?m:po(r);function Ne(){for(var Ge=arguments.length,Ze=se(Ge),Hr=Ge;Hr--;)Ze[Hr]=arguments[Hr];if(De)var vr=Ds(Ne),kr=L1(Ze,vr);if(l&&(Ze=Cd(Ze,l,N,De)),j&&(Ze=Ad(Ze,j,H,De)),Ge-=kr,De&&Ge<ue){var Ut=Qn(Ze,vr);return Fd(r,i,Aa,Ne.placeholder,a,Ze,Ut,V,Q,ue-Ge)}var pn=pe?a:this,Bn=ve?pn[r]:r;return Ge=Ze.length,V?Ze=V_(Ze,V):$e&&Ge>1&&Ze.reverse(),le&&Q<Ge&&(Ze.length=Q),this&&this!==tr&&this instanceof Ne&&(Bn=Fe||po(Bn)),Bn.apply(pn,Ze)}return Ne}function Ld(r,i){return function(a,l){return Zb(a,r,i(l),{})}}function Ta(r,i){return function(a,l){var N;if(a===m&&l===m)return i;if(a!==m&&(N=a),l!==m){if(N===m)return l;typeof a=="string"||typeof l=="string"?(a=Br(a),l=Br(l)):(a=Ed(a),l=Ed(l)),N=r(a,l)}return N}}function Bu(r){return Un(function(i){return i=Dt(i,Fr(Pe())),ke(function(a){var l=this;return r(i,function(N){return Mr(N,l,a)})})})}function xa(r,i){i=i===m?" ":Br(i);var a=i.length;if(a<2)return a?xu(i,r):i;var l=xu(i,ba(r/vs(i)));return ms(i)?ni(hn(l),0,r).join(""):l.slice(0,r)}function D_(r,i,a,l){var N=i&Ft,j=po(r);function H(){for(var V=-1,Q=arguments.length,ue=-1,le=l.length,pe=se(le+Q),ve=this&&this!==tr&&this instanceof H?j:r;++ue<le;)pe[ue]=l[ue];for(;Q--;)pe[ue++]=arguments[++V];return Mr(ve,N?a:this,pe)}return H}function Md(r){return function(i,a,l){return l&&typeof l!="number"&&mr(i,a,l)&&(a=l=m),i=Fn(i),a===m?(a=i,i=0):a=Fn(a),l=l===m?i<a?1:-1:Fn(l),h_(i,a,l,r)}}function Ra(r){return function(i,a){return typeof i=="string"&&typeof a=="string"||(i=nn(i),a=nn(a)),r(i,a)}}function Fd(r,i,a,l,N,j,H,V,Q,ue){var le=i&it,pe=le?H:m,ve=le?m:H,De=le?j:m,$e=le?m:j;i|=le?st:dt,i&=~(le?dt:st),i&mi||(i&=~(Ft|Rr));var Fe=[r,i,N,De,pe,$e,ve,V,Q,ue],Ne=a.apply(m,Fe);return Gu(r)&&Xd(Ne,Fe),Ne.placeholder=l,Qd(Ne,r,i)}function qu(r){var i=Vt[r];return function(a,l){if(a=nn(a),l=l==null?0:or(Me(l),292),l&&Qf(a)){var N=(ct(a)+"e").split("e"),j=i(N[0]+"e"+(+N[1]+l));return N=(ct(j)+"e").split("e"),+(N[0]+"e"+(+N[1]-l))}return i(a)}}var P_=ws&&1/ua(new ws([,-0]))[1]==vt?function(r){return new ws(r)}:ul;function Bd(r){return function(i){var a=ar(i);return a==sr?mu(i):a==Ur?z1(i):U1(i,r(i))}}function jn(r,i,a,l,N,j,H,V){var Q=i&Rr;if(!Q&&typeof r!="function")throw new Qr(ye);var ue=l?l.length:0;if(ue||(i&=~(st|dt),l=N=m),H=H===m?H:Kt(Me(H),0),V=V===m?V:Me(V),ue-=N?N.length:0,i&dt){var le=l,pe=N;l=N=m}var ve=Q?m:zu(r),De=[r,i,a,l,N,le,pe,j,H,V];if(ve&&H_(De,ve),r=De[0],i=De[1],a=De[2],l=De[3],N=De[4],V=De[9]=De[9]===m?Q?0:r.length:Kt(De[9]-ue,0),!V&&i&(it|ut)&&(i&=~(it|ut)),!i||i==Ft)var $e=O_(r,i,a);else i==it||i==ut?$e=I_(r,i,V):(i==st||i==(Ft|st))&&!N.length?$e=D_(r,i,a,l):$e=Aa.apply(m,De);var Fe=ve?_d:Xd;return Qd(Fe($e,De),r,i)}function qd(r,i,a,l){return r===m||dn(r,_s[a])&&!lt.call(l,a)?i:r}function Hd(r,i,a,l,N,j){return Nt(r)&&Nt(i)&&(j.set(i,r),Pa(r,i,m,Hd,j),j.delete(i)),r}function $_(r){return mo(r)?m:r}function kd(r,i,a,l,N,j){var H=a&fr,V=r.length,Q=i.length;if(V!=Q&&!(H&&Q>V))return!1;var ue=j.get(r),le=j.get(i);if(ue&&le)return ue==i&&le==r;var pe=-1,ve=!0,De=a&Wt?new Ni:m;for(j.set(r,i),j.set(i,r);++pe<V;){var $e=r[pe],Fe=i[pe];if(l)var Ne=H?l(Fe,$e,pe,i,r,j):l($e,Fe,pe,r,i,j);if(Ne!==m){if(Ne)continue;ve=!1;break}if(De){if(!hu(i,function(Ge,Ze){if(!ro(De,Ze)&&($e===Ge||N($e,Ge,a,l,j)))return De.push(Ze)})){ve=!1;break}}else if(!($e===Fe||N($e,Fe,a,l,j))){ve=!1;break}}return j.delete(r),j.delete(i),ve}function N_(r,i,a,l,N,j,H){switch(a){case Cn:if(r.byteLength!=i.byteLength||r.byteOffset!=i.byteOffset)return!1;r=r.buffer,i=i.buffer;case Wn:return!(r.byteLength!=i.byteLength||!j(new ga(r),new ga(i)));case jr:case vi:case bi:return dn(+r,+i);case as:return r.name==i.name&&r.message==i.message;case _i:case wi:return r==i+"";case sr:var V=mu;case Ur:var Q=l&fr;if(V||(V=ua),r.size!=i.size&&!Q)return!1;var ue=H.get(r);if(ue)return ue==i;l|=Wt,H.set(r,i);var le=kd(V(r),V(i),l,N,j,H);return H.delete(r),le;case us:if(ao)return ao.call(r)==ao.call(i)}return!1}function C_(r,i,a,l,N,j){var H=a&fr,V=Hu(r),Q=V.length,ue=Hu(i),le=ue.length;if(Q!=le&&!H)return!1;for(var pe=Q;pe--;){var ve=V[pe];if(!(H?ve in i:lt.call(i,ve)))return!1}var De=j.get(r),$e=j.get(i);if(De&&$e)return De==i&&$e==r;var Fe=!0;j.set(r,i),j.set(i,r);for(var Ne=H;++pe<Q;){ve=V[pe];var Ge=r[ve],Ze=i[ve];if(l)var Hr=H?l(Ze,Ge,ve,i,r,j):l(Ge,Ze,ve,r,i,j);if(!(Hr===m?Ge===Ze||N(Ge,Ze,a,l,j):Hr)){Fe=!1;break}Ne||(Ne=ve=="constructor")}if(Fe&&!Ne){var vr=r.constructor,kr=i.constructor;vr!=kr&&"constructor"in r&&"constructor"in i&&!(typeof vr=="function"&&vr instanceof vr&&typeof kr=="function"&&kr instanceof kr)&&(Fe=!1)}return j.delete(r),j.delete(i),Fe}function Un(r){return Yu(Jd(r,m,ip),r+"")}function Hu(r){return ud(r,Yt,Ku)}function ku(r){return ud(r,Cr,zd)}var zu=wa?function(r){return wa.get(r)}:ul;function ja(r){for(var i=r.name+"",a=Es[i],l=lt.call(Es,i)?a.length:0;l--;){var N=a[l],j=N.func;if(j==null||j==r)return N.name}return i}function Ds(r){var i=lt.call(T,"placeholder")?T:r;return i.placeholder}function Pe(){var r=T.iteratee||al;return r=r===al?fd:r,arguments.length?r(arguments[0],arguments[1]):r}function Ua(r,i){var a=r.__data__;return M_(i)?a[typeof i=="string"?"string":"hash"]:a.map}function Vu(r){for(var i=Yt(r),a=i.length;a--;){var l=i[a],N=r[l];i[a]=[l,N,Wd(N)]}return i}function Ti(r,i){var a=q1(r,i);return hd(a)?a:m}function A_(r){var i=lt.call(r,Pi),a=r[Pi];try{r[Pi]=m;var l=!0}catch{}var N=da.call(r);return l&&(i?r[Pi]=a:delete r[Pi]),N}var Ku=bu?function(r){return r==null?[]:(r=yt(r),Yn(bu(r),function(i){return Yf.call(r,i)}))}:ll,zd=bu?function(r){for(var i=[];r;)Xn(i,Ku(r)),r=ya(r);return i}:ll,ar=yr;(_u&&ar(new _u(new ArrayBuffer(1)))!=Cn||io&&ar(new io)!=sr||wu&&ar(wu.resolve())!=Qo||ws&&ar(new ws)!=Ur||so&&ar(new so)!=Ei)&&(ar=function(r){var i=yr(r),a=i==Gt?r.constructor:m,l=a?xi(a):"";if(l)switch(l){case db:return Cn;case pb:return sr;case gb:return Qo;case yb:return Ur;case mb:return Ei}return i});function T_(r,i,a){for(var l=-1,N=a.length;++l<N;){var j=a[l],H=j.size;switch(j.type){case"drop":r+=H;break;case"dropRight":i-=H;break;case"take":i=or(i,r+H);break;case"takeRight":r=Kt(r,i-H);break}}return{start:r,end:i}}function x_(r){var i=r.match(na);return i?i[1].split(Oi):[]}function Vd(r,i,a){i=ri(i,r);for(var l=-1,N=i.length,j=!1;++l<N;){var H=_n(i[l]);if(!(j=r!=null&&a(r,H)))break;r=r[H]}return j||++l!=N?j:(N=r==null?0:r.length,!!N&&ka(N)&&Ln(H,N)&&(Re(r)||Ri(r)))}function R_(r){var i=r.length,a=new r.constructor(i);return i&&typeof r[0]=="string"&&lt.call(r,"index")&&(a.index=r.index,a.input=r.input),a}function Kd(r){return typeof r.constructor=="function"&&!go(r)?Ss(ya(r)):{}}function j_(r,i,a){var l=r.constructor;switch(i){case Wn:return Fu(r);case jr:case vi:return new l(+r);case Cn:return v_(r,a);case Ws:case Gs:case Js:case Ys:case hs:case Xs:case Qs:case fs:case Gn:return $d(r,a);case sr:return new l;case bi:case wi:return new l(r);case _i:return b_(r);case Ur:return new l;case us:return __(r)}}function U_(r,i){var a=i.length;if(!a)return r;var l=a-1;return i[l]=(a>1?"& ":"")+i[l],i=i.join(a>2?", ":" "),r.replace(ra,`{
/* [wrapped with `+i+`] */
`)}function L_(r){return Re(r)||Ri(r)||!!(Xf&&r&&r[Xf])}function Ln(r,i){var a=typeof r;return i=i??pt,!!i&&(a=="number"||a!="symbol"&&xe.test(r))&&r>-1&&r%1==0&&r<i}function mr(r,i,a){if(!Nt(a))return!1;var l=typeof i;return(l=="number"?Nr(a)&&Ln(i,a.length):l=="string"&&i in a)?dn(a[i],r):!1}function Wu(r,i){if(Re(r))return!1;var a=typeof r;return a=="number"||a=="symbol"||a=="boolean"||r==null||qr(r)?!0:Qc.test(r)||!ea.test(r)||i!=null&&r in yt(i)}function M_(r){var i=typeof r;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?r!=="__proto__":r===null}function Gu(r){var i=ja(r),a=T[i];if(typeof a!="function"||!(i in Ye.prototype))return!1;if(r===a)return!0;var l=zu(a);return!!l&&r===l[0]}function F_(r){return!!Wf&&Wf in r}var B_=ha?Mn:hl;function go(r){var i=r&&r.constructor,a=typeof i=="function"&&i.prototype||_s;return r===a}function Wd(r){return r===r&&!Nt(r)}function Gd(r,i){return function(a){return a==null?!1:a[r]===i&&(i!==m||r in yt(a))}}function q_(r){var i=qa(r,function(l){return a.size===et&&a.clear(),l}),a=i.cache;return i}function H_(r,i){var a=r[1],l=i[1],N=a|l,j=N<(Ft|Rr|at),H=l==at&&a==it||l==at&&a==ht&&r[7].length<=i[8]||l==(at|ht)&&i[7].length<=i[8]&&a==it;if(!(j||H))return r;l&Ft&&(r[2]=i[2],N|=a&Ft?0:mi);var V=i[3];if(V){var Q=r[3];r[3]=Q?Cd(Q,V,i[4]):V,r[4]=Q?Qn(r[3],We):i[4]}return V=i[5],V&&(Q=r[5],r[5]=Q?Ad(Q,V,i[6]):V,r[6]=Q?Qn(r[5],We):i[6]),V=i[7],V&&(r[7]=V),l&at&&(r[8]=r[8]==null?i[8]:or(r[8],i[8])),r[9]==null&&(r[9]=i[9]),r[0]=i[0],r[1]=N,r}function k_(r){var i=[];if(r!=null)for(var a in yt(r))i.push(a);return i}function z_(r){return da.call(r)}function Jd(r,i,a){return i=Kt(i===m?r.length-1:i,0),function(){for(var l=arguments,N=-1,j=Kt(l.length-i,0),H=se(j);++N<j;)H[N]=l[i+N];N=-1;for(var V=se(i+1);++N<i;)V[N]=l[N];return V[i]=a(H),Mr(r,this,V)}}function Yd(r,i){return i.length<2?r:Ai(r,tn(i,0,-1))}function V_(r,i){for(var a=r.length,l=or(i.length,a),N=$r(r);l--;){var j=i[l];r[l]=Ln(j,a)?N[j]:m}return r}function Ju(r,i){if(!(i==="constructor"&&typeof r[i]=="function")&&i!="__proto__")return r[i]}var Xd=Zd(_d),yo=ob||function(r,i){return tr.setTimeout(r,i)},Yu=Zd(p_);function Qd(r,i,a){var l=i+"";return Yu(r,U_(l,K_(x_(l),a)))}function Zd(r){var i=0,a=0;return function(){var l=lb(),N=kt-(l-a);if(a=l,N>0){if(++i>=Ht)return arguments[0]}else i=0;return r.apply(m,arguments)}}function La(r,i){var a=-1,l=r.length,N=l-1;for(i=i===m?l:i;++a<i;){var j=Tu(a,N),H=r[j];r[j]=r[a],r[a]=H}return r.length=i,r}var ep=q_(function(r){var i=[];return r.charCodeAt(0)===46&&i.push(""),r.replace(ds,function(a,l,N,j){i.push(N?j.replace(eu,"$1"):l||a)}),i});function _n(r){if(typeof r=="string"||qr(r))return r;var i=r+"";return i=="0"&&1/r==-vt?"-0":i}function xi(r){if(r!=null){try{return fa.call(r)}catch{}try{return r+""}catch{}}return""}function K_(r,i){return Xr(qc,function(a){var l="_."+a[0];i&a[1]&&!aa(r,l)&&r.push(l)}),r.sort()}function tp(r){if(r instanceof Ye)return r.clone();var i=new Zr(r.__wrapped__,r.__chain__);return i.__actions__=$r(r.__actions__),i.__index__=r.__index__,i.__values__=r.__values__,i}function W_(r,i,a){(a?mr(r,i,a):i===m)?i=1:i=Kt(Me(i),0);var l=r==null?0:r.length;if(!l||i<1)return[];for(var N=0,j=0,H=se(ba(l/i));N<l;)H[j++]=tn(r,N,N+=i);return H}function G_(r){for(var i=-1,a=r==null?0:r.length,l=0,N=[];++i<a;){var j=r[i];j&&(N[l++]=j)}return N}function J_(){var r=arguments.length;if(!r)return[];for(var i=se(r-1),a=arguments[0],l=r;l--;)i[l-1]=arguments[l];return Xn(Re(a)?$r(a):[a],rr(i,1))}var Y_=ke(function(r,i){return jt(r)?uo(r,rr(i,1,jt,!0)):[]}),X_=ke(function(r,i){var a=rn(i);return jt(a)&&(a=m),jt(r)?uo(r,rr(i,1,jt,!0),Pe(a,2)):[]}),Q_=ke(function(r,i){var a=rn(i);return jt(a)&&(a=m),jt(r)?uo(r,rr(i,1,jt,!0),m,a):[]});function Z_(r,i,a){var l=r==null?0:r.length;return l?(i=a||i===m?1:Me(i),tn(r,i<0?0:i,l)):[]}function ew(r,i,a){var l=r==null?0:r.length;return l?(i=a||i===m?1:Me(i),i=l-i,tn(r,0,i<0?0:i)):[]}function tw(r,i){return r&&r.length?Na(r,Pe(i,3),!0,!0):[]}function rw(r,i){return r&&r.length?Na(r,Pe(i,3),!0):[]}function nw(r,i,a,l){var N=r==null?0:r.length;return N?(a&&typeof a!="number"&&mr(r,i,a)&&(a=0,l=N),Jb(r,i,a,l)):[]}function rp(r,i,a){var l=r==null?0:r.length;if(!l)return-1;var N=a==null?0:Me(a);return N<0&&(N=Kt(l+N,0)),ca(r,Pe(i,3),N)}function np(r,i,a){var l=r==null?0:r.length;if(!l)return-1;var N=l-1;return a!==m&&(N=Me(a),N=a<0?Kt(l+N,0):or(N,l-1)),ca(r,Pe(i,3),N,!0)}function ip(r){var i=r==null?0:r.length;return i?rr(r,1):[]}function iw(r){var i=r==null?0:r.length;return i?rr(r,vt):[]}function sw(r,i){var a=r==null?0:r.length;return a?(i=i===m?1:Me(i),rr(r,i)):[]}function ow(r){for(var i=-1,a=r==null?0:r.length,l={};++i<a;){var N=r[i];l[N[0]]=N[1]}return l}function sp(r){return r&&r.length?r[0]:m}function aw(r,i,a){var l=r==null?0:r.length;if(!l)return-1;var N=a==null?0:Me(a);return N<0&&(N=Kt(l+N,0)),ys(r,i,N)}function cw(r){var i=r==null?0:r.length;return i?tn(r,0,-1):[]}var uw=ke(function(r){var i=Dt(r,Lu);return i.length&&i[0]===r[0]?Pu(i):[]}),lw=ke(function(r){var i=rn(r),a=Dt(r,Lu);return i===rn(a)?i=m:a.pop(),a.length&&a[0]===r[0]?Pu(a,Pe(i,2)):[]}),hw=ke(function(r){var i=rn(r),a=Dt(r,Lu);return i=typeof i=="function"?i:m,i&&a.pop(),a.length&&a[0]===r[0]?Pu(a,m,i):[]});function fw(r,i){return r==null?"":cb.call(r,i)}function rn(r){var i=r==null?0:r.length;return i?r[i-1]:m}function dw(r,i,a){var l=r==null?0:r.length;if(!l)return-1;var N=l;return a!==m&&(N=Me(a),N=N<0?Kt(l+N,0):or(N,l-1)),i===i?K1(r,i,N):ca(r,Ff,N,!0)}function pw(r,i){return r&&r.length?yd(r,Me(i)):m}var gw=ke(op);function op(r,i){return r&&r.length&&i&&i.length?Au(r,i):r}function yw(r,i,a){return r&&r.length&&i&&i.length?Au(r,i,Pe(a,2)):r}function mw(r,i,a){return r&&r.length&&i&&i.length?Au(r,i,m,a):r}var vw=Un(function(r,i){var a=r==null?0:r.length,l=Su(r,i);return bd(r,Dt(i,function(N){return Ln(N,a)?+N:N}).sort(Nd)),l});function bw(r,i){var a=[];if(!(r&&r.length))return a;var l=-1,N=[],j=r.length;for(i=Pe(i,3);++l<j;){var H=r[l];i(H,l,r)&&(a.push(H),N.push(l))}return bd(r,N),a}function Xu(r){return r==null?r:fb.call(r)}function _w(r,i,a){var l=r==null?0:r.length;return l?(a&&typeof a!="number"&&mr(r,i,a)?(i=0,a=l):(i=i==null?0:Me(i),a=a===m?l:Me(a)),tn(r,i,a)):[]}function ww(r,i){return $a(r,i)}function Ew(r,i,a){return Ru(r,i,Pe(a,2))}function Sw(r,i){var a=r==null?0:r.length;if(a){var l=$a(r,i);if(l<a&&dn(r[l],i))return l}return-1}function Ow(r,i){return $a(r,i,!0)}function Iw(r,i,a){return Ru(r,i,Pe(a,2),!0)}function Dw(r,i){var a=r==null?0:r.length;if(a){var l=$a(r,i,!0)-1;if(dn(r[l],i))return l}return-1}function Pw(r){return r&&r.length?wd(r):[]}function $w(r,i){return r&&r.length?wd(r,Pe(i,2)):[]}function Nw(r){var i=r==null?0:r.length;return i?tn(r,1,i):[]}function Cw(r,i,a){return r&&r.length?(i=a||i===m?1:Me(i),tn(r,0,i<0?0:i)):[]}function Aw(r,i,a){var l=r==null?0:r.length;return l?(i=a||i===m?1:Me(i),i=l-i,tn(r,i<0?0:i,l)):[]}function Tw(r,i){return r&&r.length?Na(r,Pe(i,3),!1,!0):[]}function xw(r,i){return r&&r.length?Na(r,Pe(i,3)):[]}var Rw=ke(function(r){return ti(rr(r,1,jt,!0))}),jw=ke(function(r){var i=rn(r);return jt(i)&&(i=m),ti(rr(r,1,jt,!0),Pe(i,2))}),Uw=ke(function(r){var i=rn(r);return i=typeof i=="function"?i:m,ti(rr(r,1,jt,!0),m,i)});function Lw(r){return r&&r.length?ti(r):[]}function Mw(r,i){return r&&r.length?ti(r,Pe(i,2)):[]}function Fw(r,i){return i=typeof i=="function"?i:m,r&&r.length?ti(r,m,i):[]}function Qu(r){if(!(r&&r.length))return[];var i=0;return r=Yn(r,function(a){if(jt(a))return i=Kt(a.length,i),!0}),gu(i,function(a){return Dt(r,fu(a))})}function ap(r,i){if(!(r&&r.length))return[];var a=Qu(r);return i==null?a:Dt(a,function(l){return Mr(i,m,l)})}var Bw=ke(function(r,i){return jt(r)?uo(r,i):[]}),qw=ke(function(r){return Uu(Yn(r,jt))}),Hw=ke(function(r){var i=rn(r);return jt(i)&&(i=m),Uu(Yn(r,jt),Pe(i,2))}),kw=ke(function(r){var i=rn(r);return i=typeof i=="function"?i:m,Uu(Yn(r,jt),m,i)}),zw=ke(Qu);function Vw(r,i){return Id(r||[],i||[],co)}function Kw(r,i){return Id(r||[],i||[],fo)}var Ww=ke(function(r){var i=r.length,a=i>1?r[i-1]:m;return a=typeof a=="function"?(r.pop(),a):m,ap(r,a)});function cp(r){var i=T(r);return i.__chain__=!0,i}function Gw(r,i){return i(r),r}function Ma(r,i){return i(r)}var Jw=Un(function(r){var i=r.length,a=i?r[0]:0,l=this.__wrapped__,N=function(j){return Su(j,r)};return i>1||this.__actions__.length||!(l instanceof Ye)||!Ln(a)?this.thru(N):(l=l.slice(a,+a+(i?1:0)),l.__actions__.push({func:Ma,args:[N],thisArg:m}),new Zr(l,this.__chain__).thru(function(j){return i&&!j.length&&j.push(m),j}))});function Yw(){return cp(this)}function Xw(){return new Zr(this.value(),this.__chain__)}function Qw(){this.__values__===m&&(this.__values__=Ep(this.value()));var r=this.__index__>=this.__values__.length,i=r?m:this.__values__[this.__index__++];return{done:r,value:i}}function Zw(){return this}function eE(r){for(var i,a=this;a instanceof Sa;){var l=tp(a);l.__index__=0,l.__values__=m,i?N.__wrapped__=l:i=l;var N=l;a=a.__wrapped__}return N.__wrapped__=r,i}function tE(){var r=this.__wrapped__;if(r instanceof Ye){var i=r;return this.__actions__.length&&(i=new Ye(this)),i=i.reverse(),i.__actions__.push({func:Ma,args:[Xu],thisArg:m}),new Zr(i,this.__chain__)}return this.thru(Xu)}function rE(){return Od(this.__wrapped__,this.__actions__)}var nE=Ca(function(r,i,a){lt.call(r,a)?++r[a]:Rn(r,a,1)});function iE(r,i,a){var l=Re(r)?Lf:Gb;return a&&mr(r,i,a)&&(i=m),l(r,Pe(i,3))}function sE(r,i){var a=Re(r)?Yn:ad;return a(r,Pe(i,3))}var oE=jd(rp),aE=jd(np);function cE(r,i){return rr(Fa(r,i),1)}function uE(r,i){return rr(Fa(r,i),vt)}function lE(r,i,a){return a=a===m?1:Me(a),rr(Fa(r,i),a)}function up(r,i){var a=Re(r)?Xr:ei;return a(r,Pe(i,3))}function lp(r,i){var a=Re(r)?N1:od;return a(r,Pe(i,3))}var hE=Ca(function(r,i,a){lt.call(r,a)?r[a].push(i):Rn(r,a,[i])});function fE(r,i,a,l){r=Nr(r)?r:$s(r),a=a&&!l?Me(a):0;var N=r.length;return a<0&&(a=Kt(N+a,0)),za(r)?a<=N&&r.indexOf(i,a)>-1:!!N&&ys(r,i,a)>-1}var dE=ke(function(r,i,a){var l=-1,N=typeof i=="function",j=Nr(r)?se(r.length):[];return ei(r,function(H){j[++l]=N?Mr(i,H,a):lo(H,i,a)}),j}),pE=Ca(function(r,i,a){Rn(r,a,i)});function Fa(r,i){var a=Re(r)?Dt:dd;return a(r,Pe(i,3))}function gE(r,i,a,l){return r==null?[]:(Re(i)||(i=i==null?[]:[i]),a=l?m:a,Re(a)||(a=a==null?[]:[a]),md(r,i,a))}var yE=Ca(function(r,i,a){r[a?0:1].push(i)},function(){return[[],[]]});function mE(r,i,a){var l=Re(r)?lu:qf,N=arguments.length<3;return l(r,Pe(i,4),a,N,ei)}function vE(r,i,a){var l=Re(r)?C1:qf,N=arguments.length<3;return l(r,Pe(i,4),a,N,od)}function bE(r,i){var a=Re(r)?Yn:ad;return a(r,Ha(Pe(i,3)))}function _E(r){var i=Re(r)?rd:f_;return i(r)}function wE(r,i,a){(a?mr(r,i,a):i===m)?i=1:i=Me(i);var l=Re(r)?kb:d_;return l(r,i)}function EE(r){var i=Re(r)?zb:g_;return i(r)}function SE(r){if(r==null)return 0;if(Nr(r))return za(r)?vs(r):r.length;var i=ar(r);return i==sr||i==Ur?r.size:Nu(r).length}function OE(r,i,a){var l=Re(r)?hu:y_;return a&&mr(r,i,a)&&(i=m),l(r,Pe(i,3))}var IE=ke(function(r,i){if(r==null)return[];var a=i.length;return a>1&&mr(r,i[0],i[1])?i=[]:a>2&&mr(i[0],i[1],i[2])&&(i=[i[0]]),md(r,rr(i,1),[])}),Ba=sb||function(){return tr.Date.now()};function DE(r,i){if(typeof i!="function")throw new Qr(ye);return r=Me(r),function(){if(--r<1)return i.apply(this,arguments)}}function hp(r,i,a){return i=a?m:i,i=r&&i==null?r.length:i,jn(r,at,m,m,m,m,i)}function fp(r,i){var a;if(typeof i!="function")throw new Qr(ye);return r=Me(r),function(){return--r>0&&(a=i.apply(this,arguments)),r<=1&&(i=m),a}}var Zu=ke(function(r,i,a){var l=Ft;if(a.length){var N=Qn(a,Ds(Zu));l|=st}return jn(r,l,i,a,N)}),dp=ke(function(r,i,a){var l=Ft|Rr;if(a.length){var N=Qn(a,Ds(dp));l|=st}return jn(i,l,r,a,N)});function pp(r,i,a){i=a?m:i;var l=jn(r,it,m,m,m,m,m,i);return l.placeholder=pp.placeholder,l}function gp(r,i,a){i=a?m:i;var l=jn(r,ut,m,m,m,m,m,i);return l.placeholder=gp.placeholder,l}function yp(r,i,a){var l,N,j,H,V,Q,ue=0,le=!1,pe=!1,ve=!0;if(typeof r!="function")throw new Qr(ye);i=nn(i)||0,Nt(a)&&(le=!!a.leading,pe="maxWait"in a,j=pe?Kt(nn(a.maxWait)||0,i):j,ve="trailing"in a?!!a.trailing:ve);function De(Ut){var pn=l,Bn=N;return l=N=m,ue=Ut,H=r.apply(Bn,pn),H}function $e(Ut){return ue=Ut,V=yo(Ge,i),le?De(Ut):H}function Fe(Ut){var pn=Ut-Q,Bn=Ut-ue,jp=i-pn;return pe?or(jp,j-Bn):jp}function Ne(Ut){var pn=Ut-Q,Bn=Ut-ue;return Q===m||pn>=i||pn<0||pe&&Bn>=j}function Ge(){var Ut=Ba();if(Ne(Ut))return Ze(Ut);V=yo(Ge,Fe(Ut))}function Ze(Ut){return V=m,ve&&l?De(Ut):(l=N=m,H)}function Hr(){V!==m&&Dd(V),ue=0,l=Q=N=V=m}function vr(){return V===m?H:Ze(Ba())}function kr(){var Ut=Ba(),pn=Ne(Ut);if(l=arguments,N=this,Q=Ut,pn){if(V===m)return $e(Q);if(pe)return Dd(V),V=yo(Ge,i),De(Q)}return V===m&&(V=yo(Ge,i)),H}return kr.cancel=Hr,kr.flush=vr,kr}var PE=ke(function(r,i){return sd(r,1,i)}),$E=ke(function(r,i,a){return sd(r,nn(i)||0,a)});function NE(r){return jn(r,Ct)}function qa(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new Qr(ye);var a=function(){var l=arguments,N=i?i.apply(this,l):l[0],j=a.cache;if(j.has(N))return j.get(N);var H=r.apply(this,l);return a.cache=j.set(N,H)||j,H};return a.cache=new(qa.Cache||xn),a}qa.Cache=xn;function Ha(r){if(typeof r!="function")throw new Qr(ye);return function(){var i=arguments;switch(i.length){case 0:return!r.call(this);case 1:return!r.call(this,i[0]);case 2:return!r.call(this,i[0],i[1]);case 3:return!r.call(this,i[0],i[1],i[2])}return!r.apply(this,i)}}function CE(r){return fp(2,r)}var AE=m_(function(r,i){i=i.length==1&&Re(i[0])?Dt(i[0],Fr(Pe())):Dt(rr(i,1),Fr(Pe()));var a=i.length;return ke(function(l){for(var N=-1,j=or(l.length,a);++N<j;)l[N]=i[N].call(this,l[N]);return Mr(r,this,l)})}),el=ke(function(r,i){var a=Qn(i,Ds(el));return jn(r,st,m,i,a)}),mp=ke(function(r,i){var a=Qn(i,Ds(mp));return jn(r,dt,m,i,a)}),TE=Un(function(r,i){return jn(r,ht,m,m,m,i)});function xE(r,i){if(typeof r!="function")throw new Qr(ye);return i=i===m?i:Me(i),ke(r,i)}function RE(r,i){if(typeof r!="function")throw new Qr(ye);return i=i==null?0:Kt(Me(i),0),ke(function(a){var l=a[i],N=ni(a,0,i);return l&&Xn(N,l),Mr(r,this,N)})}function jE(r,i,a){var l=!0,N=!0;if(typeof r!="function")throw new Qr(ye);return Nt(a)&&(l="leading"in a?!!a.leading:l,N="trailing"in a?!!a.trailing:N),yp(r,i,{leading:l,maxWait:i,trailing:N})}function UE(r){return hp(r,1)}function LE(r,i){return el(Mu(i),r)}function ME(){if(!arguments.length)return[];var r=arguments[0];return Re(r)?r:[r]}function FE(r){return en(r,er)}function BE(r,i){return i=typeof i=="function"?i:m,en(r,er,i)}function qE(r){return en(r,je|er)}function HE(r,i){return i=typeof i=="function"?i:m,en(r,je|er,i)}function kE(r,i){return i==null||id(r,i,Yt(i))}function dn(r,i){return r===i||r!==r&&i!==i}var zE=Ra(Du),VE=Ra(function(r,i){return r>=i}),Ri=ld(function(){return arguments}())?ld:function(r){return xt(r)&&lt.call(r,"callee")&&!Yf.call(r,"callee")},Re=se.isArray,KE=Af?Fr(Af):e_;function Nr(r){return r!=null&&ka(r.length)&&!Mn(r)}function jt(r){return xt(r)&&Nr(r)}function WE(r){return r===!0||r===!1||xt(r)&&yr(r)==jr}var ii=ab||hl,GE=Tf?Fr(Tf):t_;function JE(r){return xt(r)&&r.nodeType===1&&!mo(r)}function YE(r){if(r==null)return!0;if(Nr(r)&&(Re(r)||typeof r=="string"||typeof r.splice=="function"||ii(r)||Ps(r)||Ri(r)))return!r.length;var i=ar(r);if(i==sr||i==Ur)return!r.size;if(go(r))return!Nu(r).length;for(var a in r)if(lt.call(r,a))return!1;return!0}function XE(r,i){return ho(r,i)}function QE(r,i,a){a=typeof a=="function"?a:m;var l=a?a(r,i):m;return l===m?ho(r,i,m,a):!!l}function tl(r){if(!xt(r))return!1;var i=yr(r);return i==as||i==kc||typeof r.message=="string"&&typeof r.name=="string"&&!mo(r)}function ZE(r){return typeof r=="number"&&Qf(r)}function Mn(r){if(!Nt(r))return!1;var i=yr(r);return i==cs||i==Xo||i==Hc||i==Vc}function vp(r){return typeof r=="number"&&r==Me(r)}function ka(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=pt}function Nt(r){var i=typeof r;return r!=null&&(i=="object"||i=="function")}function xt(r){return r!=null&&typeof r=="object"}var bp=xf?Fr(xf):n_;function eS(r,i){return r===i||$u(r,i,Vu(i))}function tS(r,i,a){return a=typeof a=="function"?a:m,$u(r,i,Vu(i),a)}function rS(r){return _p(r)&&r!=+r}function nS(r){if(B_(r))throw new Te(_e);return hd(r)}function iS(r){return r===null}function sS(r){return r==null}function _p(r){return typeof r=="number"||xt(r)&&yr(r)==bi}function mo(r){if(!xt(r)||yr(r)!=Gt)return!1;var i=ya(r);if(i===null)return!0;var a=lt.call(i,"constructor")&&i.constructor;return typeof a=="function"&&a instanceof a&&fa.call(a)==tb}var rl=Rf?Fr(Rf):i_;function oS(r){return vp(r)&&r>=-pt&&r<=pt}var wp=jf?Fr(jf):s_;function za(r){return typeof r=="string"||!Re(r)&&xt(r)&&yr(r)==wi}function qr(r){return typeof r=="symbol"||xt(r)&&yr(r)==us}var Ps=Uf?Fr(Uf):o_;function aS(r){return r===m}function cS(r){return xt(r)&&ar(r)==Ei}function uS(r){return xt(r)&&yr(r)==Si}var lS=Ra(Cu),hS=Ra(function(r,i){return r<=i});function Ep(r){if(!r)return[];if(Nr(r))return za(r)?hn(r):$r(r);if(no&&r[no])return k1(r[no]());var i=ar(r),a=i==sr?mu:i==Ur?ua:$s;return a(r)}function Fn(r){if(!r)return r===0?r:0;if(r=nn(r),r===vt||r===-vt){var i=r<0?-1:1;return i*Fc}return r===r?r:0}function Me(r){var i=Fn(r),a=i%1;return i===i?a?i-a:i:0}function Sp(r){return r?Ci(Me(r),0,Jr):0}function nn(r){if(typeof r=="number")return r;if(qr(r))return ss;if(Nt(r)){var i=typeof r.valueOf=="function"?r.valueOf():r;r=Nt(i)?i+"":i}if(typeof r!="string")return r===0?r:+r;r=Hf(r);var a=fe.test(r);return a||gt.test(r)?D1(r.slice(2),a?2:8):Y.test(r)?ss:+r}function Op(r){return bn(r,Cr(r))}function fS(r){return r?Ci(Me(r),-pt,pt):r===0?r:0}function ct(r){return r==null?"":Br(r)}var dS=Os(function(r,i){if(go(i)||Nr(i)){bn(i,Yt(i),r);return}for(var a in i)lt.call(i,a)&&co(r,a,i[a])}),Ip=Os(function(r,i){bn(i,Cr(i),r)}),Va=Os(function(r,i,a,l){bn(i,Cr(i),r,l)}),pS=Os(function(r,i,a,l){bn(i,Yt(i),r,l)}),gS=Un(Su);function yS(r,i){var a=Ss(r);return i==null?a:nd(a,i)}var mS=ke(function(r,i){r=yt(r);var a=-1,l=i.length,N=l>2?i[2]:m;for(N&&mr(i[0],i[1],N)&&(l=1);++a<l;)for(var j=i[a],H=Cr(j),V=-1,Q=H.length;++V<Q;){var ue=H[V],le=r[ue];(le===m||dn(le,_s[ue])&&!lt.call(r,ue))&&(r[ue]=j[ue])}return r}),vS=ke(function(r){return r.push(m,Hd),Mr(Dp,m,r)});function bS(r,i){return Mf(r,Pe(i,3),vn)}function _S(r,i){return Mf(r,Pe(i,3),Iu)}function wS(r,i){return r==null?r:Ou(r,Pe(i,3),Cr)}function ES(r,i){return r==null?r:cd(r,Pe(i,3),Cr)}function SS(r,i){return r&&vn(r,Pe(i,3))}function OS(r,i){return r&&Iu(r,Pe(i,3))}function IS(r){return r==null?[]:Da(r,Yt(r))}function DS(r){return r==null?[]:Da(r,Cr(r))}function nl(r,i,a){var l=r==null?m:Ai(r,i);return l===m?a:l}function PS(r,i){return r!=null&&Vd(r,i,Yb)}function il(r,i){return r!=null&&Vd(r,i,Xb)}var $S=Ld(function(r,i,a){i!=null&&typeof i.toString!="function"&&(i=da.call(i)),r[i]=a},ol(Ar)),NS=Ld(function(r,i,a){i!=null&&typeof i.toString!="function"&&(i=da.call(i)),lt.call(r,i)?r[i].push(a):r[i]=[a]},Pe),CS=ke(lo);function Yt(r){return Nr(r)?td(r):Nu(r)}function Cr(r){return Nr(r)?td(r,!0):a_(r)}function AS(r,i){var a={};return i=Pe(i,3),vn(r,function(l,N,j){Rn(a,i(l,N,j),l)}),a}function TS(r,i){var a={};return i=Pe(i,3),vn(r,function(l,N,j){Rn(a,N,i(l,N,j))}),a}var xS=Os(function(r,i,a){Pa(r,i,a)}),Dp=Os(function(r,i,a,l){Pa(r,i,a,l)}),RS=Un(function(r,i){var a={};if(r==null)return a;var l=!1;i=Dt(i,function(j){return j=ri(j,r),l||(l=j.length>1),j}),bn(r,ku(r),a),l&&(a=en(a,je|Rt|er,$_));for(var N=i.length;N--;)ju(a,i[N]);return a});function jS(r,i){return Pp(r,Ha(Pe(i)))}var US=Un(function(r,i){return r==null?{}:u_(r,i)});function Pp(r,i){if(r==null)return{};var a=Dt(ku(r),function(l){return[l]});return i=Pe(i),vd(r,a,function(l,N){return i(l,N[0])})}function LS(r,i,a){i=ri(i,r);var l=-1,N=i.length;for(N||(N=1,r=m);++l<N;){var j=r==null?m:r[_n(i[l])];j===m&&(l=N,j=a),r=Mn(j)?j.call(r):j}return r}function MS(r,i,a){return r==null?r:fo(r,i,a)}function FS(r,i,a,l){return l=typeof l=="function"?l:m,r==null?r:fo(r,i,a,l)}var $p=Bd(Yt),Np=Bd(Cr);function BS(r,i,a){var l=Re(r),N=l||ii(r)||Ps(r);if(i=Pe(i,4),a==null){var j=r&&r.constructor;N?a=l?new j:[]:Nt(r)?a=Mn(j)?Ss(ya(r)):{}:a={}}return(N?Xr:vn)(r,function(H,V,Q){return i(a,H,V,Q)}),a}function qS(r,i){return r==null?!0:ju(r,i)}function HS(r,i,a){return r==null?r:Sd(r,i,Mu(a))}function kS(r,i,a,l){return l=typeof l=="function"?l:m,r==null?r:Sd(r,i,Mu(a),l)}function $s(r){return r==null?[]:yu(r,Yt(r))}function zS(r){return r==null?[]:yu(r,Cr(r))}function VS(r,i,a){return a===m&&(a=i,i=m),a!==m&&(a=nn(a),a=a===a?a:0),i!==m&&(i=nn(i),i=i===i?i:0),Ci(nn(r),i,a)}function KS(r,i,a){return i=Fn(i),a===m?(a=i,i=0):a=Fn(a),r=nn(r),Qb(r,i,a)}function WS(r,i,a){if(a&&typeof a!="boolean"&&mr(r,i,a)&&(i=a=m),a===m&&(typeof i=="boolean"?(a=i,i=m):typeof r=="boolean"&&(a=r,r=m)),r===m&&i===m?(r=0,i=1):(r=Fn(r),i===m?(i=r,r=0):i=Fn(i)),r>i){var l=r;r=i,i=l}if(a||r%1||i%1){var N=Zf();return or(r+N*(i-r+I1("1e-"+((N+"").length-1))),i)}return Tu(r,i)}var GS=Is(function(r,i,a){return i=i.toLowerCase(),r+(a?Cp(i):i)});function Cp(r){return sl(ct(r).toLowerCase())}function Ap(r){return r=ct(r),r&&r.replace(It,M1).replace(g1,"")}function JS(r,i,a){r=ct(r),i=Br(i);var l=r.length;a=a===m?l:Ci(Me(a),0,l);var N=a;return a-=i.length,a>=0&&r.slice(a,N)==i}function YS(r){return r=ct(r),r&&Jc.test(r)?r.replace(Zo,F1):r}function XS(r){return r=ct(r),r&&eo.test(r)?r.replace(Zs,"\\$&"):r}var QS=Is(function(r,i,a){return r+(a?"-":"")+i.toLowerCase()}),ZS=Is(function(r,i,a){return r+(a?" ":"")+i.toLowerCase()}),eO=Rd("toLowerCase");function tO(r,i,a){r=ct(r),i=Me(i);var l=i?vs(r):0;if(!i||l>=i)return r;var N=(i-l)/2;return xa(_a(N),a)+r+xa(ba(N),a)}function rO(r,i,a){r=ct(r),i=Me(i);var l=i?vs(r):0;return i&&l<i?r+xa(i-l,a):r}function nO(r,i,a){r=ct(r),i=Me(i);var l=i?vs(r):0;return i&&l<i?xa(i-l,a)+r:r}function iO(r,i,a){return a||i==null?i=0:i&&(i=+i),hb(ct(r).replace(to,""),i||0)}function sO(r,i,a){return(a?mr(r,i,a):i===m)?i=1:i=Me(i),xu(ct(r),i)}function oO(){var r=arguments,i=ct(r[0]);return r.length<3?i:i.replace(r[1],r[2])}var aO=Is(function(r,i,a){return r+(a?"_":"")+i.toLowerCase()});function cO(r,i,a){return a&&typeof a!="number"&&mr(r,i,a)&&(i=a=m),a=a===m?Jr:a>>>0,a?(r=ct(r),r&&(typeof i=="string"||i!=null&&!rl(i))&&(i=Br(i),!i&&ms(r))?ni(hn(r),0,a):r.split(i,a)):[]}var uO=Is(function(r,i,a){return r+(a?" ":"")+sl(i)});function lO(r,i,a){return r=ct(r),a=a==null?0:Ci(Me(a),0,r.length),i=Br(i),r.slice(a,a+i.length)==i}function hO(r,i,a){var l=T.templateSettings;a&&mr(r,i,a)&&(i=m),r=ct(r),i=Va({},i,l,qd);var N=Va({},i.imports,l.imports,qd),j=Yt(N),H=yu(N,j),V,Q,ue=0,le=i.interpolate||$t,pe="__p += '",ve=vu((i.escape||$t).source+"|"+le.source+"|"+(le===mn?tu:$t).source+"|"+(i.evaluate||$t).source+"|$","g"),De="//# sourceURL="+(lt.call(i,"sourceURL")?(i.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++_1+"]")+`
`;r.replace(ve,function(Ne,Ge,Ze,Hr,vr,kr){return Ze||(Ze=Hr),pe+=r.slice(ue,kr).replace(zt,B1),Ge&&(V=!0,pe+=`' +
__e(`+Ge+`) +
'`),vr&&(Q=!0,pe+=`';
`+vr+`;
__p += '`),Ze&&(pe+=`' +
((__t = (`+Ze+`)) == null ? '' : __t) +
'`),ue=kr+Ne.length,Ne}),pe+=`';
`;var $e=lt.call(i,"variable")&&i.variable;if(!$e)pe=`with (obj) {
`+pe+`
}
`;else if(Zc.test($e))throw new Te(Ae);pe=(Q?pe.replace(Jn,""):pe).replace(Kc,"$1").replace(Wc,"$1;"),pe="function("+($e||"obj")+`) {
`+($e?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(V?", __e = _.escape":"")+(Q?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+pe+`return __p
}`;var Fe=xp(function(){return ot(j,De+"return "+pe).apply(m,H)});if(Fe.source=pe,tl(Fe))throw Fe;return Fe}function fO(r){return ct(r).toLowerCase()}function dO(r){return ct(r).toUpperCase()}function pO(r,i,a){if(r=ct(r),r&&(a||i===m))return Hf(r);if(!r||!(i=Br(i)))return r;var l=hn(r),N=hn(i),j=kf(l,N),H=zf(l,N)+1;return ni(l,j,H).join("")}function gO(r,i,a){if(r=ct(r),r&&(a||i===m))return r.slice(0,Kf(r)+1);if(!r||!(i=Br(i)))return r;var l=hn(r),N=zf(l,hn(i))+1;return ni(l,0,N).join("")}function yO(r,i,a){if(r=ct(r),r&&(a||i===m))return r.replace(to,"");if(!r||!(i=Br(i)))return r;var l=hn(r),N=kf(l,hn(i));return ni(l,N).join("")}function mO(r,i){var a=Bt,l=qt;if(Nt(i)){var N="separator"in i?i.separator:N;a="length"in i?Me(i.length):a,l="omission"in i?Br(i.omission):l}r=ct(r);var j=r.length;if(ms(r)){var H=hn(r);j=H.length}if(a>=j)return r;var V=a-vs(l);if(V<1)return l;var Q=H?ni(H,0,V).join(""):r.slice(0,V);if(N===m)return Q+l;if(H&&(V+=Q.length-V),rl(N)){if(r.slice(V).search(N)){var ue,le=Q;for(N.global||(N=vu(N.source,ct(M.exec(N))+"g")),N.lastIndex=0;ue=N.exec(le);)var pe=ue.index;Q=Q.slice(0,pe===m?V:pe)}}else if(r.indexOf(Br(N),V)!=V){var ve=Q.lastIndexOf(N);ve>-1&&(Q=Q.slice(0,ve))}return Q+l}function vO(r){return r=ct(r),r&&Gc.test(r)?r.replace(cn,W1):r}var bO=Is(function(r,i,a){return r+(a?" ":"")+i.toUpperCase()}),sl=Rd("toUpperCase");function Tp(r,i,a){return r=ct(r),i=a?m:i,i===m?H1(r)?Y1(r):x1(r):r.match(i)||[]}var xp=ke(function(r,i){try{return Mr(r,m,i)}catch(a){return tl(a)?a:new Te(a)}}),_O=Un(function(r,i){return Xr(i,function(a){a=_n(a),Rn(r,a,Zu(r[a],r))}),r});function wO(r){var i=r==null?0:r.length,a=Pe();return r=i?Dt(r,function(l){if(typeof l[1]!="function")throw new Qr(ye);return[a(l[0]),l[1]]}):[],ke(function(l){for(var N=-1;++N<i;){var j=r[N];if(Mr(j[0],this,l))return Mr(j[1],this,l)}})}function EO(r){return Wb(en(r,je))}function ol(r){return function(){return r}}function SO(r,i){return r==null||r!==r?i:r}var OO=Ud(),IO=Ud(!0);function Ar(r){return r}function al(r){return fd(typeof r=="function"?r:en(r,je))}function DO(r){return pd(en(r,je))}function PO(r,i){return gd(r,en(i,je))}var $O=ke(function(r,i){return function(a){return lo(a,r,i)}}),NO=ke(function(r,i){return function(a){return lo(r,a,i)}});function cl(r,i,a){var l=Yt(i),N=Da(i,l);a==null&&!(Nt(i)&&(N.length||!l.length))&&(a=i,i=r,r=this,N=Da(i,Yt(i)));var j=!(Nt(a)&&"chain"in a)||!!a.chain,H=Mn(r);return Xr(N,function(V){var Q=i[V];r[V]=Q,H&&(r.prototype[V]=function(){var ue=this.__chain__;if(j||ue){var le=r(this.__wrapped__),pe=le.__actions__=$r(this.__actions__);return pe.push({func:Q,args:arguments,thisArg:r}),le.__chain__=ue,le}return Q.apply(r,Xn([this.value()],arguments))})}),r}function CO(){return tr._===this&&(tr._=rb),this}function ul(){}function AO(r){return r=Me(r),ke(function(i){return yd(i,r)})}var TO=Bu(Dt),xO=Bu(Lf),RO=Bu(hu);function Rp(r){return Wu(r)?fu(_n(r)):l_(r)}function jO(r){return function(i){return r==null?m:Ai(r,i)}}var UO=Md(),LO=Md(!0);function ll(){return[]}function hl(){return!1}function MO(){return{}}function FO(){return""}function BO(){return!0}function qO(r,i){if(r=Me(r),r<1||r>pt)return[];var a=Jr,l=or(r,Jr);i=Pe(i),r-=Jr;for(var N=gu(l,i);++a<r;)i(a);return N}function HO(r){return Re(r)?Dt(r,_n):qr(r)?[r]:$r(ep(ct(r)))}function kO(r){var i=++eb;return ct(r)+i}var zO=Ta(function(r,i){return r+i},0),VO=qu("ceil"),KO=Ta(function(r,i){return r/i},1),WO=qu("floor");function GO(r){return r&&r.length?Ia(r,Ar,Du):m}function JO(r,i){return r&&r.length?Ia(r,Pe(i,2),Du):m}function YO(r){return Bf(r,Ar)}function XO(r,i){return Bf(r,Pe(i,2))}function QO(r){return r&&r.length?Ia(r,Ar,Cu):m}function ZO(r,i){return r&&r.length?Ia(r,Pe(i,2),Cu):m}var eI=Ta(function(r,i){return r*i},1),tI=qu("round"),rI=Ta(function(r,i){return r-i},0);function nI(r){return r&&r.length?pu(r,Ar):0}function iI(r,i){return r&&r.length?pu(r,Pe(i,2)):0}return T.after=DE,T.ary=hp,T.assign=dS,T.assignIn=Ip,T.assignInWith=Va,T.assignWith=pS,T.at=gS,T.before=fp,T.bind=Zu,T.bindAll=_O,T.bindKey=dp,T.castArray=ME,T.chain=cp,T.chunk=W_,T.compact=G_,T.concat=J_,T.cond=wO,T.conforms=EO,T.constant=ol,T.countBy=nE,T.create=yS,T.curry=pp,T.curryRight=gp,T.debounce=yp,T.defaults=mS,T.defaultsDeep=vS,T.defer=PE,T.delay=$E,T.difference=Y_,T.differenceBy=X_,T.differenceWith=Q_,T.drop=Z_,T.dropRight=ew,T.dropRightWhile=tw,T.dropWhile=rw,T.fill=nw,T.filter=sE,T.flatMap=cE,T.flatMapDeep=uE,T.flatMapDepth=lE,T.flatten=ip,T.flattenDeep=iw,T.flattenDepth=sw,T.flip=NE,T.flow=OO,T.flowRight=IO,T.fromPairs=ow,T.functions=IS,T.functionsIn=DS,T.groupBy=hE,T.initial=cw,T.intersection=uw,T.intersectionBy=lw,T.intersectionWith=hw,T.invert=$S,T.invertBy=NS,T.invokeMap=dE,T.iteratee=al,T.keyBy=pE,T.keys=Yt,T.keysIn=Cr,T.map=Fa,T.mapKeys=AS,T.mapValues=TS,T.matches=DO,T.matchesProperty=PO,T.memoize=qa,T.merge=xS,T.mergeWith=Dp,T.method=$O,T.methodOf=NO,T.mixin=cl,T.negate=Ha,T.nthArg=AO,T.omit=RS,T.omitBy=jS,T.once=CE,T.orderBy=gE,T.over=TO,T.overArgs=AE,T.overEvery=xO,T.overSome=RO,T.partial=el,T.partialRight=mp,T.partition=yE,T.pick=US,T.pickBy=Pp,T.property=Rp,T.propertyOf=jO,T.pull=gw,T.pullAll=op,T.pullAllBy=yw,T.pullAllWith=mw,T.pullAt=vw,T.range=UO,T.rangeRight=LO,T.rearg=TE,T.reject=bE,T.remove=bw,T.rest=xE,T.reverse=Xu,T.sampleSize=wE,T.set=MS,T.setWith=FS,T.shuffle=EE,T.slice=_w,T.sortBy=IE,T.sortedUniq=Pw,T.sortedUniqBy=$w,T.split=cO,T.spread=RE,T.tail=Nw,T.take=Cw,T.takeRight=Aw,T.takeRightWhile=Tw,T.takeWhile=xw,T.tap=Gw,T.throttle=jE,T.thru=Ma,T.toArray=Ep,T.toPairs=$p,T.toPairsIn=Np,T.toPath=HO,T.toPlainObject=Op,T.transform=BS,T.unary=UE,T.union=Rw,T.unionBy=jw,T.unionWith=Uw,T.uniq=Lw,T.uniqBy=Mw,T.uniqWith=Fw,T.unset=qS,T.unzip=Qu,T.unzipWith=ap,T.update=HS,T.updateWith=kS,T.values=$s,T.valuesIn=zS,T.without=Bw,T.words=Tp,T.wrap=LE,T.xor=qw,T.xorBy=Hw,T.xorWith=kw,T.zip=zw,T.zipObject=Vw,T.zipObjectDeep=Kw,T.zipWith=Ww,T.entries=$p,T.entriesIn=Np,T.extend=Ip,T.extendWith=Va,cl(T,T),T.add=zO,T.attempt=xp,T.camelCase=GS,T.capitalize=Cp,T.ceil=VO,T.clamp=VS,T.clone=FE,T.cloneDeep=qE,T.cloneDeepWith=HE,T.cloneWith=BE,T.conformsTo=kE,T.deburr=Ap,T.defaultTo=SO,T.divide=KO,T.endsWith=JS,T.eq=dn,T.escape=YS,T.escapeRegExp=XS,T.every=iE,T.find=oE,T.findIndex=rp,T.findKey=bS,T.findLast=aE,T.findLastIndex=np,T.findLastKey=_S,T.floor=WO,T.forEach=up,T.forEachRight=lp,T.forIn=wS,T.forInRight=ES,T.forOwn=SS,T.forOwnRight=OS,T.get=nl,T.gt=zE,T.gte=VE,T.has=PS,T.hasIn=il,T.head=sp,T.identity=Ar,T.includes=fE,T.indexOf=aw,T.inRange=KS,T.invoke=CS,T.isArguments=Ri,T.isArray=Re,T.isArrayBuffer=KE,T.isArrayLike=Nr,T.isArrayLikeObject=jt,T.isBoolean=WE,T.isBuffer=ii,T.isDate=GE,T.isElement=JE,T.isEmpty=YE,T.isEqual=XE,T.isEqualWith=QE,T.isError=tl,T.isFinite=ZE,T.isFunction=Mn,T.isInteger=vp,T.isLength=ka,T.isMap=bp,T.isMatch=eS,T.isMatchWith=tS,T.isNaN=rS,T.isNative=nS,T.isNil=sS,T.isNull=iS,T.isNumber=_p,T.isObject=Nt,T.isObjectLike=xt,T.isPlainObject=mo,T.isRegExp=rl,T.isSafeInteger=oS,T.isSet=wp,T.isString=za,T.isSymbol=qr,T.isTypedArray=Ps,T.isUndefined=aS,T.isWeakMap=cS,T.isWeakSet=uS,T.join=fw,T.kebabCase=QS,T.last=rn,T.lastIndexOf=dw,T.lowerCase=ZS,T.lowerFirst=eO,T.lt=lS,T.lte=hS,T.max=GO,T.maxBy=JO,T.mean=YO,T.meanBy=XO,T.min=QO,T.minBy=ZO,T.stubArray=ll,T.stubFalse=hl,T.stubObject=MO,T.stubString=FO,T.stubTrue=BO,T.multiply=eI,T.nth=pw,T.noConflict=CO,T.noop=ul,T.now=Ba,T.pad=tO,T.padEnd=rO,T.padStart=nO,T.parseInt=iO,T.random=WS,T.reduce=mE,T.reduceRight=vE,T.repeat=sO,T.replace=oO,T.result=LS,T.round=tI,T.runInContext=X,T.sample=_E,T.size=SE,T.snakeCase=aO,T.some=OE,T.sortedIndex=ww,T.sortedIndexBy=Ew,T.sortedIndexOf=Sw,T.sortedLastIndex=Ow,T.sortedLastIndexBy=Iw,T.sortedLastIndexOf=Dw,T.startCase=uO,T.startsWith=lO,T.subtract=rI,T.sum=nI,T.sumBy=iI,T.template=hO,T.times=qO,T.toFinite=Fn,T.toInteger=Me,T.toLength=Sp,T.toLower=fO,T.toNumber=nn,T.toSafeInteger=fS,T.toString=ct,T.toUpper=dO,T.trim=pO,T.trimEnd=gO,T.trimStart=yO,T.truncate=mO,T.unescape=vO,T.uniqueId=kO,T.upperCase=bO,T.upperFirst=sl,T.each=up,T.eachRight=lp,T.first=sp,cl(T,function(){var r={};return vn(T,function(i,a){lt.call(T.prototype,a)||(r[a]=i)}),r}(),{chain:!1}),T.VERSION=G,Xr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(r){T[r].placeholder=T}),Xr(["drop","take"],function(r,i){Ye.prototype[r]=function(a){a=a===m?1:Kt(Me(a),0);var l=this.__filtered__&&!i?new Ye(this):this.clone();return l.__filtered__?l.__takeCount__=or(a,l.__takeCount__):l.__views__.push({size:or(a,Jr),type:r+(l.__dir__<0?"Right":"")}),l},Ye.prototype[r+"Right"]=function(a){return this.reverse()[r](a).reverse()}}),Xr(["filter","map","takeWhile"],function(r,i){var a=i+1,l=a==At||a==mt;Ye.prototype[r]=function(N){var j=this.clone();return j.__iteratees__.push({iteratee:Pe(N,3),type:a}),j.__filtered__=j.__filtered__||l,j}}),Xr(["head","last"],function(r,i){var a="take"+(i?"Right":"");Ye.prototype[r]=function(){return this[a](1).value()[0]}}),Xr(["initial","tail"],function(r,i){var a="drop"+(i?"":"Right");Ye.prototype[r]=function(){return this.__filtered__?new Ye(this):this[a](1)}}),Ye.prototype.compact=function(){return this.filter(Ar)},Ye.prototype.find=function(r){return this.filter(r).head()},Ye.prototype.findLast=function(r){return this.reverse().find(r)},Ye.prototype.invokeMap=ke(function(r,i){return typeof r=="function"?new Ye(this):this.map(function(a){return lo(a,r,i)})}),Ye.prototype.reject=function(r){return this.filter(Ha(Pe(r)))},Ye.prototype.slice=function(r,i){r=Me(r);var a=this;return a.__filtered__&&(r>0||i<0)?new Ye(a):(r<0?a=a.takeRight(-r):r&&(a=a.drop(r)),i!==m&&(i=Me(i),a=i<0?a.dropRight(-i):a.take(i-r)),a)},Ye.prototype.takeRightWhile=function(r){return this.reverse().takeWhile(r).reverse()},Ye.prototype.toArray=function(){return this.take(Jr)},vn(Ye.prototype,function(r,i){var a=/^(?:filter|find|map|reject)|While$/.test(i),l=/^(?:head|last)$/.test(i),N=T[l?"take"+(i=="last"?"Right":""):i],j=l||/^find/.test(i);N&&(T.prototype[i]=function(){var H=this.__wrapped__,V=l?[1]:arguments,Q=H instanceof Ye,ue=V[0],le=Q||Re(H),pe=function(Ge){var Ze=N.apply(T,Xn([Ge],V));return l&&ve?Ze[0]:Ze};le&&a&&typeof ue=="function"&&ue.length!=1&&(Q=le=!1);var ve=this.__chain__,De=!!this.__actions__.length,$e=j&&!ve,Fe=Q&&!De;if(!j&&le){H=Fe?H:new Ye(this);var Ne=r.apply(H,V);return Ne.__actions__.push({func:Ma,args:[pe],thisArg:m}),new Zr(Ne,ve)}return $e&&Fe?r.apply(this,V):(Ne=this.thru(pe),$e?l?Ne.value()[0]:Ne.value():Ne)})}),Xr(["pop","push","shift","sort","splice","unshift"],function(r){var i=la[r],a=/^(?:push|sort|unshift)$/.test(r)?"tap":"thru",l=/^(?:pop|shift)$/.test(r);T.prototype[r]=function(){var N=arguments;if(l&&!this.__chain__){var j=this.value();return i.apply(Re(j)?j:[],N)}return this[a](function(H){return i.apply(Re(H)?H:[],N)})}}),vn(Ye.prototype,function(r,i){var a=T[i];if(a){var l=a.name+"";lt.call(Es,l)||(Es[l]=[]),Es[l].push({name:i,func:a})}}),Es[Aa(m,Rr).name]=[{name:"wrapper",func:m}],Ye.prototype.clone=vb,Ye.prototype.reverse=bb,Ye.prototype.value=_b,T.prototype.at=Jw,T.prototype.chain=Yw,T.prototype.commit=Xw,T.prototype.next=Qw,T.prototype.plant=eE,T.prototype.reverse=tE,T.prototype.toJSON=T.prototype.valueOf=T.prototype.value=rE,T.prototype.first=T.prototype.head,no&&(T.prototype[no]=Zw),T},bs=X1();Di?((Di.exports=bs)._=bs,au._=bs):tr._=bs}).call(_)})(A,A.exports);var I=Object.defineProperty,D=Object.defineProperties,w=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,b=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable,v=(he,$,m)=>$ in he?I(he,$,{enumerable:!0,configurable:!0,writable:!0,value:m}):he[$]=m,g=(he,$)=>{for(var m in $||($={}))b.call($,m)&&v(he,m,$[m]);if(u)for(var m of u($))K.call($,m)&&v(he,m,$[m]);return he},P=(he,$)=>D(he,w($));function L(he,$,m){var G;const ce=t.parseChainId(he);return((G=$.rpcMap)==null?void 0:G[ce.reference])||`${q}?chainId=${ce.namespace}:${ce.reference}&projectId=${m}`}function y(he){return he.includes(":")?he.split(":")[1]:he}function E(he){return he.map($=>`${$.split(":")[0]}:${$.split(":")[1]}`)}function k(he,$){const m=Object.keys($.namespaces).filter(ce=>ce.includes(he));if(!m.length)return[];const G=[];return m.forEach(ce=>{const _e=$.namespaces[ce].accounts;G.push(..._e)}),G}function W(he={},$={}){const m=Z(he),G=Z($);return A.exports.merge(m,G)}function Z(he){var $,m,G,ce;const _e={};if(!t.isValidObject(he))return _e;for(const[ye,Ae]of Object.entries(he)){const Ke=t.isCaipNamespace(ye)?[ye]:Ae.chains,et=Ae.methods||[],We=Ae.events||[],je=Ae.rpcMap||{},Rt=t.parseNamespaceKey(ye);_e[Rt]=P(g(g({},_e[Rt]),Ae),{chains:t.mergeArrays(Ke,($=_e[Rt])==null?void 0:$.chains),methods:t.mergeArrays(et,(m=_e[Rt])==null?void 0:m.methods),events:t.mergeArrays(We,(G=_e[Rt])==null?void 0:G.events),rpcMap:g(g({},je),(ce=_e[Rt])==null?void 0:ce.rpcMap)})}return _e}function B(he){return he.includes(":")?he.split(":")[2]:he}function ee(he){const $={};for(const[m,G]of Object.entries(he)){const ce=G.methods||[],_e=G.events||[],ye=G.accounts||[],Ae=t.isCaipNamespace(m)?[m]:G.chains?G.chains:E(G.accounts);$[m]={chains:Ae,methods:ce,events:_e,accounts:ye}}return $}function oe(he){return typeof he=="number"?he:he.includes("0x")?parseInt(he,16):(he=he.includes(":")?he.split(":")[1]:he,isNaN(Number(he))?he:Number(he))}const de={},ie=he=>de[he],Ie=(he,$)=>{de[he]=$};class be{constructor($){this.name="polkadot",this.namespace=$.namespace,this.events=ie("events"),this.client=ie("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace($){this.namespace=Object.assign(this.namespace,$)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const $=this.namespace.chains[0];if(!$)throw new Error("ChainId not found");return $.split(":")[1]}request($){return this.namespace.methods.includes($.request.method)?this.client.request($):this.getHttpProvider().request($.request)}setDefaultChain($,m){this.httpProviders[$]||this.setHttpProvider($,m),this.chainId=$,this.events.emit(te.DEFAULT_CHAIN_CHANGED,`${this.name}:${$}`)}getAccounts(){const $=this.namespace.accounts;return $?$.filter(m=>m.split(":")[1]===this.chainId.toString()).map(m=>m.split(":")[2])||[]:[]}createHttpProviders(){const $={};return this.namespace.chains.forEach(m=>{var G;const ce=y(m);$[ce]=this.createHttpProvider(ce,(G=this.namespace.rpcMap)==null?void 0:G[m])}),$}getHttpProvider(){const $=`${this.name}:${this.chainId}`,m=this.httpProviders[$];if(typeof m>"u")throw new Error(`JSON-RPC provider for ${$} not found`);return m}setHttpProvider($,m){const G=this.createHttpProvider($,m);G&&(this.httpProviders[$]=G)}createHttpProvider($,m){const G=m||L($,this.namespace,this.client.core.projectId);if(!G)throw new Error(`No RPC url provided for chainId: ${$}`);return new o.JsonRpcProvider(new p.default(G,ie("disableProviderPing")))}}class Ce{constructor($){this.name="eip155",this.namespace=$.namespace,this.events=ie("events"),this.client=ie("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request($){switch($.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain($);case"eth_chainId":return parseInt(this.getDefaultChain())}return this.namespace.methods.includes($.request.method)?await this.client.request($):this.getHttpProvider().request($.request)}updateNamespace($){this.namespace=Object.assign(this.namespace,$)}setDefaultChain($,m){this.httpProviders[$]||this.setHttpProvider(parseInt($),m),this.chainId=parseInt($),this.events.emit(te.DEFAULT_CHAIN_CHANGED,`${this.name}:${$}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const $=this.namespace.chains[0];if(!$)throw new Error("ChainId not found");return $.split(":")[1]}createHttpProvider($,m){const G=m||L(`${this.name}:${$}`,this.namespace,this.client.core.projectId);if(!G)throw new Error(`No RPC url provided for chainId: ${$}`);return new o.JsonRpcProvider(new s.HttpConnection(G,ie("disableProviderPing")))}setHttpProvider($,m){const G=this.createHttpProvider($,m);G&&(this.httpProviders[$]=G)}createHttpProviders(){const $={};return this.namespace.chains.forEach(m=>{var G;const ce=parseInt(y(m));$[ce]=this.createHttpProvider(ce,(G=this.namespace.rpcMap)==null?void 0:G[m])}),$}getAccounts(){const $=this.namespace.accounts;return $?[...new Set($.filter(m=>m.split(":")[1]===this.chainId.toString()).map(m=>m.split(":")[2]))]:[]}getHttpProvider(){const $=this.chainId,m=this.httpProviders[$];if(typeof m>"u")throw new Error(`JSON-RPC provider for ${$} not found`);return m}async handleSwitchChain($){var m,G;let ce=$.request.params?(m=$.request.params[0])==null?void 0:m.chainId:"0x0";ce=ce.startsWith("0x")?ce:`0x${ce}`;const _e=parseInt(ce,16);if(this.isChainApproved(_e))this.setDefaultChain(`${_e}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:$.topic,request:{method:$.request.method,params:[{chainId:ce}]},chainId:(G=this.namespace.chains)==null?void 0:G[0]}),this.setDefaultChain(`${_e}`);else throw new Error(`Failed to switch to chain 'eip155:${_e}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved($){return this.namespace.chains.includes(`${this.name}:${$}`)}}class ne{constructor($){this.name="solana",this.namespace=$.namespace,this.events=ie("events"),this.client=ie("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace($){this.namespace=Object.assign(this.namespace,$)}requestAccounts(){return this.getAccounts()}request($){return this.namespace.methods.includes($.request.method)?this.client.request($):this.getHttpProvider().request($.request)}setDefaultChain($,m){this.httpProviders[$]||this.setHttpProvider($,m),this.chainId=$,this.events.emit(te.DEFAULT_CHAIN_CHANGED,`${this.name}:${$}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const $=this.namespace.chains[0];if(!$)throw new Error("ChainId not found");return $.split(":")[1]}getAccounts(){const $=this.namespace.accounts;return $?[...new Set($.filter(m=>m.split(":")[1]===this.chainId.toString()).map(m=>m.split(":")[2]))]:[]}createHttpProviders(){const $={};return this.namespace.chains.forEach(m=>{var G;const ce=y(m);$[ce]=this.createHttpProvider(ce,(G=this.namespace.rpcMap)==null?void 0:G[m])}),$}getHttpProvider(){const $=`${this.name}:${this.chainId}`,m=this.httpProviders[$];if(typeof m>"u")throw new Error(`JSON-RPC provider for ${$} not found`);return m}setHttpProvider($,m){const G=this.createHttpProvider($,m);G&&(this.httpProviders[$]=G)}createHttpProvider($,m){const G=m||L($,this.namespace,this.client.core.projectId);if(!G)throw new Error(`No RPC url provided for chainId: ${$}`);return new o.JsonRpcProvider(new p.default(G,ie("disableProviderPing")))}}class re{constructor($){this.name="cosmos",this.namespace=$.namespace,this.events=ie("events"),this.client=ie("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace($){this.namespace=Object.assign(this.namespace,$)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const $=this.namespace.chains[0];if(!$)throw new Error("ChainId not found");return $.split(":")[1]}request($){return this.namespace.methods.includes($.request.method)?this.client.request($):this.getHttpProvider().request($.request)}setDefaultChain($,m){this.httpProviders[$]||this.setHttpProvider($,m),this.chainId=$,this.events.emit(te.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const $=this.namespace.accounts;return $?[...new Set($.filter(m=>m.split(":")[1]===this.chainId.toString()).map(m=>m.split(":")[2]))]:[]}createHttpProviders(){const $={};return this.namespace.chains.forEach(m=>{var G;const ce=y(m);$[ce]=this.createHttpProvider(ce,(G=this.namespace.rpcMap)==null?void 0:G[m])}),$}getHttpProvider(){const $=`${this.name}:${this.chainId}`,m=this.httpProviders[$];if(typeof m>"u")throw new Error(`JSON-RPC provider for ${$} not found`);return m}setHttpProvider($,m){const G=this.createHttpProvider($,m);G&&(this.httpProviders[$]=G)}createHttpProvider($,m){const G=m||L($,this.namespace,this.client.core.projectId);if(!G)throw new Error(`No RPC url provided for chainId: ${$}`);return new o.JsonRpcProvider(new p.default(G,ie("disableProviderPing")))}}class J{constructor($){this.name="cip34",this.namespace=$.namespace,this.events=ie("events"),this.client=ie("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace($){this.namespace=Object.assign(this.namespace,$)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const $=this.namespace.chains[0];if(!$)throw new Error("ChainId not found");return $.split(":")[1]}request($){return this.namespace.methods.includes($.request.method)?this.client.request($):this.getHttpProvider().request($.request)}setDefaultChain($,m){this.httpProviders[$]||this.setHttpProvider($,m),this.chainId=$,this.events.emit(te.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const $=this.namespace.accounts;return $?[...new Set($.filter(m=>m.split(":")[1]===this.chainId.toString()).map(m=>m.split(":")[2]))]:[]}createHttpProviders(){const $={};return this.namespace.chains.forEach(m=>{const G=this.getCardanoRPCUrl(m),ce=y(m);$[ce]=this.createHttpProvider(ce,G)}),$}getHttpProvider(){const $=`${this.name}:${this.chainId}`,m=this.httpProviders[$];if(typeof m>"u")throw new Error(`JSON-RPC provider for ${$} not found`);return m}getCardanoRPCUrl($){const m=this.namespace.rpcMap;if(m)return m[$]}setHttpProvider($,m){const G=this.createHttpProvider($,m);G&&(this.httpProviders[$]=G)}createHttpProvider($,m){const G=m||this.getCardanoRPCUrl($);if(!G)throw new Error(`No RPC url provided for chainId: ${$}`);return new o.JsonRpcProvider(new p.default(G,ie("disableProviderPing")))}}class d{constructor($){this.name="elrond",this.namespace=$.namespace,this.events=ie("events"),this.client=ie("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace($){this.namespace=Object.assign(this.namespace,$)}requestAccounts(){return this.getAccounts()}request($){return this.namespace.methods.includes($.request.method)?this.client.request($):this.getHttpProvider().request($.request)}setDefaultChain($,m){this.httpProviders[$]||this.setHttpProvider($,m),this.chainId=$,this.events.emit(te.DEFAULT_CHAIN_CHANGED,`${this.name}:${$}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const $=this.namespace.chains[0];if(!$)throw new Error("ChainId not found");return $.split(":")[1]}getAccounts(){const $=this.namespace.accounts;return $?[...new Set($.filter(m=>m.split(":")[1]===this.chainId.toString()).map(m=>m.split(":")[2]))]:[]}createHttpProviders(){const $={};return this.namespace.chains.forEach(m=>{var G;const ce=y(m);$[ce]=this.createHttpProvider(ce,(G=this.namespace.rpcMap)==null?void 0:G[m])}),$}getHttpProvider(){const $=`${this.name}:${this.chainId}`,m=this.httpProviders[$];if(typeof m>"u")throw new Error(`JSON-RPC provider for ${$} not found`);return m}setHttpProvider($,m){const G=this.createHttpProvider($,m);G&&(this.httpProviders[$]=G)}createHttpProvider($,m){const G=m||L($,this.namespace,this.client.core.projectId);if(!G)throw new Error(`No RPC url provided for chainId: ${$}`);return new o.JsonRpcProvider(new p.default(G,ie("disableProviderPing")))}}class z{constructor($){this.name="multiversx",this.namespace=$.namespace,this.events=ie("events"),this.client=ie("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace($){this.namespace=Object.assign(this.namespace,$)}requestAccounts(){return this.getAccounts()}request($){return this.namespace.methods.includes($.request.method)?this.client.request($):this.getHttpProvider().request($.request)}setDefaultChain($,m){this.httpProviders[$]||this.setHttpProvider($,m),this.chainId=$,this.events.emit(te.DEFAULT_CHAIN_CHANGED,`${this.name}:${$}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const $=this.namespace.chains[0];if(!$)throw new Error("ChainId not found");return $.split(":")[1]}getAccounts(){const $=this.namespace.accounts;return $?[...new Set($.filter(m=>m.split(":")[1]===this.chainId.toString()).map(m=>m.split(":")[2]))]:[]}createHttpProviders(){const $={};return this.namespace.chains.forEach(m=>{var G;const ce=y(m);$[ce]=this.createHttpProvider(ce,(G=this.namespace.rpcMap)==null?void 0:G[m])}),$}getHttpProvider(){const $=`${this.name}:${this.chainId}`,m=this.httpProviders[$];if(typeof m>"u")throw new Error(`JSON-RPC provider for ${$} not found`);return m}setHttpProvider($,m){const G=this.createHttpProvider($,m);G&&(this.httpProviders[$]=G)}createHttpProvider($,m){const G=m||L($,this.namespace,this.client.core.projectId);if(!G)throw new Error(`No RPC url provided for chainId: ${$}`);return new o.JsonRpcProvider(new p.default(G,ie("disableProviderPing")))}}class ge{constructor($){this.name="near",this.namespace=$.namespace,this.events=ie("events"),this.client=ie("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace($){this.namespace=Object.assign(this.namespace,$)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const $=this.namespace.chains[0];if(!$)throw new Error("ChainId not found");return $.split(":")[1]}request($){return this.namespace.methods.includes($.request.method)?this.client.request($):this.getHttpProvider().request($.request)}setDefaultChain($,m){if(this.chainId=$,!this.httpProviders[$]){const G=m||L(`${this.name}:${$}`,this.namespace);if(!G)throw new Error(`No RPC url provided for chainId: ${$}`);this.setHttpProvider($,G)}this.events.emit(te.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const $=this.namespace.accounts;return $?$.filter(m=>m.split(":")[1]===this.chainId.toString()).map(m=>m.split(":")[2])||[]:[]}createHttpProviders(){const $={};return this.namespace.chains.forEach(m=>{var G;$[m]=this.createHttpProvider(m,(G=this.namespace.rpcMap)==null?void 0:G[m])}),$}getHttpProvider(){const $=`${this.name}:${this.chainId}`,m=this.httpProviders[$];if(typeof m>"u")throw new Error(`JSON-RPC provider for ${$} not found`);return m}setHttpProvider($,m){const G=this.createHttpProvider($,m);G&&(this.httpProviders[$]=G)}createHttpProvider($,m){const G=m||L($,this.namespace);return typeof G>"u"?void 0:new o.JsonRpcProvider(new p.default(G,ie("disableProviderPing")))}}var Ee=Object.defineProperty,ze=Object.defineProperties,Qe=Object.getOwnPropertyDescriptors,Ve=Object.getOwnPropertySymbols,tt=Object.prototype.hasOwnProperty,Pt=Object.prototype.propertyIsEnumerable,St=(he,$,m)=>$ in he?Ee(he,$,{enumerable:!0,configurable:!0,writable:!0,value:m}):he[$]=m,Be=(he,$)=>{for(var m in $||($={}))tt.call($,m)&&St(he,m,$[m]);if(Ve)for(var m of Ve($))Pt.call($,m)&&St(he,m,$[m]);return he},qe=(he,$)=>ze(he,Qe($));class Le{constructor($){this.events=new S.default,this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=$,this.logger=typeof $?.logger<"u"&&typeof $?.logger!="string"?$.logger:n.pino(n.getDefaultLoggerOptions({level:$?.logger||C})),this.disableProviderPing=$?.disableProviderPing||!1}static async init($){const m=new Le($);return await m.initialize(),m}async request($,m,G){const[ce,_e]=this.validateChain(m);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(ce).request({request:Be({},$),chainId:`${ce}:${_e}`,topic:this.session.topic,expiry:G})}sendAsync($,m,G,ce){const _e=new Date().getTime();this.request($,G,ce).then(ye=>m(null,f.formatJsonRpcResult(_e,ye))).catch(ye=>m(ye,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var $;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:($=this.session)==null?void 0:$.topic,reason:t.getSdkError("USER_DISCONNECTED")}),await this.cleanup()}async connect($){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces($),await this.cleanupPendingPairings(),!$.skipPairing)return await this.pair($.pairingTopic)}on($,m){this.events.on($,m)}once($,m){this.events.once($,m)}removeListener($,m){this.events.removeListener($,m)}off($,m){this.events.off($,m)}get isWalletConnect(){return!0}async pair($){this.shouldAbortPairingAttempt=!1;let m=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(m>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:G,approval:ce}=await this.client.connect({pairingTopic:$,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});G&&(this.uri=G,this.events.emit("display_uri",G)),await ce().then(_e=>{this.session=_e;const ye=ee(_e.namespaces);this.namespaces=W(this.namespaces,ye),this.persist("namespaces",this.namespaces)}).catch(_e=>{if(_e.message!==e.PROPOSAL_EXPIRY_MESSAGE)throw _e;m++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain($,m){try{if(!this.session)return;const[G,ce]=this.validateChain($);this.getProvider(G).setDefaultChain(ce,m)}catch(G){if(!/Please call connect/.test(G.message))throw G}}async cleanupPendingPairings($={}){this.logger.info("Cleaning up inactive pairings...");const m=this.client.pairing.getAll();if(t.isValidArray(m)){for(const G of m)$.deletePairings?this.client.core.expirer.set(G.topic,0):await this.client.core.relayer.subscriber.unsubscribe(G.topic);this.logger.info(`Inactive pairings cleared: ${m.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces"),this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const $=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[$]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await O.default.init({logger:this.providerOpts.logger||C,relayUrl:this.providerOpts.relayUrl||R,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const $=[...new Set(Object.keys(this.session.namespaces).map(m=>t.parseNamespaceKey(m)))];Ie("client",this.client),Ie("events",this.events),Ie("disableProviderPing",this.disableProviderPing),$.forEach(m=>{if(!this.session)return;const G=k(m,this.session),ce=E(G),_e=W(this.namespaces,this.optionalNamespaces),ye=qe(Be({},_e[m]),{accounts:G,chains:ce});switch(m){case"eip155":this.rpcProviders[m]=new Ce({namespace:ye});break;case"solana":this.rpcProviders[m]=new ne({namespace:ye});break;case"cosmos":this.rpcProviders[m]=new re({namespace:ye});break;case"polkadot":this.rpcProviders[m]=new be({namespace:ye});break;case"cip34":this.rpcProviders[m]=new J({namespace:ye});break;case"elrond":this.rpcProviders[m]=new d({namespace:ye});break;case"multiversx":this.rpcProviders[m]=new z({namespace:ye});break;case"near":this.rpcProviders[m]=new ge({namespace:ye});break}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",$=>{this.events.emit("session_ping",$)}),this.client.on("session_event",$=>{const{params:m}=$,{event:G}=m;if(G.name==="accountsChanged"){const ce=G.data;ce&&t.isValidArray(ce)&&this.events.emit("accountsChanged",ce.map(B))}else if(G.name==="chainChanged"){const ce=m.chainId,_e=m.event.data,ye=t.parseNamespaceKey(ce),Ae=oe(ce)!==oe(_e)?`${ye}:${oe(_e)}`:ce;this.onChainChanged(Ae)}else this.events.emit(G.name,G.data);this.events.emit("session_event",$)}),this.client.on("session_update",({topic:$,params:m})=>{var G;const{namespaces:ce}=m,_e=(G=this.client)==null?void 0:G.session.get($);this.session=qe(Be({},_e),{namespaces:ce}),this.onSessionUpdate(),this.events.emit("session_update",{topic:$,params:m})}),this.client.on("session_delete",async $=>{await this.cleanup(),this.events.emit("session_delete",$),this.events.emit("disconnect",qe(Be({},t.getSdkError("USER_DISCONNECTED")),{data:$.topic}))}),this.on(te.DEFAULT_CHAIN_CHANGED,$=>{this.onChainChanged($,!0)})}getProvider($){if(!this.rpcProviders[$])throw new Error(`Provider not found: ${$}`);return this.rpcProviders[$]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach($=>{var m;this.getProvider($).updateNamespace((m=this.session)==null?void 0:m.namespaces[$])})}setNamespaces($){const{namespaces:m,optionalNamespaces:G,sessionProperties:ce}=$;m&&Object.keys(m).length&&(this.namespaces=m),G&&Object.keys(G).length&&(this.optionalNamespaces=G),this.sessionProperties=ce,this.persist("namespaces",m),this.persist("optionalNamespaces",G)}validateChain($){const[m,G]=$?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[m,G];if(m&&!Object.keys(this.namespaces||{}).map(ye=>t.parseNamespaceKey(ye)).includes(m))throw new Error(`Namespace '${m}' is not configured. Please call connect() first with namespace config.`);if(m&&G)return[m,G];const ce=t.parseNamespaceKey(Object.keys(this.namespaces)[0]),_e=this.rpcProviders[ce].getDefaultChain();return[ce,_e]}async requestAccounts(){const[$]=this.validateChain();return await this.getProvider($).requestAccounts()}onChainChanged($,m=!1){if(!this.namespaces)return;const[G,ce]=this.validateChain($);ce&&(m||this.getProvider(G).setDefaultChain(ce),this.namespaces[G]?this.namespaces[G].defaultChain=ce:this.namespaces[`${G}:${ce}`]?this.namespaces[`${G}:${ce}`].defaultChain=ce:this.namespaces[`${G}:${ce}`]={defaultChain:ce},this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",ce))}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),await this.cleanupPendingPairings({deletePairings:!0})}persist($,m){this.client.core.storage.setItem(`${F}/${$}`,m)}async getFromStore($){return await this.client.core.storage.getItem(`${F}/${$}`)}}const He=Le;return _o.UniversalProvider=He,_o.default=Le,_o}const TR=Symbol(),Fy=Object.getPrototypeOf,ch=new WeakMap,xR=e=>e&&(ch.has(e)?ch.get(e):Fy(e)===Object.prototype||Fy(e)===Array.prototype),RR=e=>xR(e)&&e[TR]||null,By=(e,t=!0)=>{ch.set(e,t)},Tl=e=>typeof e=="object"&&e!==null,oi=new WeakMap,Ja=new WeakSet,jR=(e=Object.is,t=(p,S)=>new Proxy(p,S),n=p=>Tl(p)&&!Ja.has(p)&&(Array.isArray(p)||!(Symbol.iterator in p))&&!(p instanceof WeakMap)&&!(p instanceof WeakSet)&&!(p instanceof Error)&&!(p instanceof Number)&&!(p instanceof Date)&&!(p instanceof String)&&!(p instanceof RegExp)&&!(p instanceof ArrayBuffer),s=p=>{switch(p.status){case"fulfilled":return p.value;case"rejected":throw p.reason;default:throw p}},o=new WeakMap,c=(p,S,C=s)=>{const R=o.get(p);if(R?.[0]===S)return R[1];const U=Array.isArray(p)?[]:Object.create(Object.getPrototypeOf(p));return By(U,!0),o.set(p,[S,U]),Reflect.ownKeys(p).forEach(x=>{if(Object.getOwnPropertyDescriptor(U,x))return;const F=Reflect.get(p,x),q={value:F,enumerable:!0,configurable:!0};if(Ja.has(F))By(F,!1);else if(F instanceof Promise)delete q.value,q.get=()=>C(F);else if(oi.has(F)){const[te,_]=oi.get(F);q.value=c(te,_(),C)}Object.defineProperty(U,x,q)}),Object.preventExtensions(U)},f=new WeakMap,h=[1,1],O=p=>{if(!Tl(p))throw new Error("object required");const S=f.get(p);if(S)return S;let C=h[0];const R=new Set,U=(K,v=++h[0])=>{C!==v&&(C=v,R.forEach(g=>g(K,v)))};let x=h[1];const F=(K=++h[1])=>(x!==K&&!R.size&&(x=K,te.forEach(([v])=>{const g=v[1](K);g>C&&(C=g)})),C),q=K=>(v,g)=>{const P=[...v];P[1]=[K,...P[1]],U(P,g)},te=new Map,_=(K,v)=>{if(R.size){const g=v[3](q(K));te.set(K,[v,g])}else te.set(K,[v])},A=K=>{var v;const g=te.get(K);g&&(te.delete(K),(v=g[1])==null||v.call(g))},I=K=>(R.add(K),R.size===1&&te.forEach(([g,P],L)=>{const y=g[3](q(L));te.set(L,[g,y])}),()=>{R.delete(K),R.size===0&&te.forEach(([g,P],L)=>{P&&(P(),te.set(L,[g]))})}),D=Array.isArray(p)?[]:Object.create(Object.getPrototypeOf(p)),u=t(D,{deleteProperty(K,v){const g=Reflect.get(K,v);A(v);const P=Reflect.deleteProperty(K,v);return P&&U(["delete",[v],g]),P},set(K,v,g,P){const L=Reflect.has(K,v),y=Reflect.get(K,v,P);if(L&&(e(y,g)||f.has(g)&&e(y,f.get(g))))return!0;A(v),Tl(g)&&(g=RR(g)||g);let E=g;if(g instanceof Promise)g.then(k=>{g.status="fulfilled",g.value=k,U(["resolve",[v],k])}).catch(k=>{g.status="rejected",g.reason=k,U(["reject",[v],k])});else{!oi.has(g)&&n(g)&&(E=O(g));const k=!Ja.has(E)&&oi.get(E);k&&_(v,k)}return Reflect.set(K,v,E,P),U(["set",[v],g,y]),!0}});f.set(p,u);const b=[D,F,c,I];return oi.set(u,b),Reflect.ownKeys(p).forEach(K=>{const v=Object.getOwnPropertyDescriptor(p,K);"value"in v&&(u[K]=p[K],delete v.value,delete v.writable),Object.defineProperty(D,K,v)}),u})=>[O,oi,Ja,e,t,n,s,o,c,f,h],[UR]=jR();function yi(e={}){return UR(e)}function is(e,t,n){const s=oi.get(e);let o;const c=[],f=s[3];let h=!1;const p=f(S=>{if(c.push(S),n){t(c.splice(0));return}o||(o=Promise.resolve().then(()=>{o=void 0,h&&t(c.splice(0))}))});return h=!0,()=>{h=!1,p()}}function LR(e,t){const n=oi.get(e),[s,o,c]=n;return c(s,o(),t)}const Xt=yi({history:["ConnectWallet"],view:"ConnectWallet",data:void 0}),i1={state:Xt,subscribe(e){return is(Xt,()=>e(Xt))},push(e,t){e!==Xt.view&&(Xt.view=e,t&&(Xt.data=t),Xt.history.push(e))},reset(e){Xt.view=e,Xt.history=[e]},replace(e){Xt.history.length>1&&(Xt.history[Xt.history.length-1]=e,Xt.view=e)},goBack(){if(Xt.history.length>1){Xt.history.pop();const[e]=Xt.history.slice(-1);Xt.view=e}},setData(e){Xt.data=e}},lr={WALLETCONNECT_DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",WCM_VERSION:"WCM_VERSION",RECOMMENDED_WALLET_AMOUNT:9,isMobile(){return typeof window<"u"?Boolean(window.matchMedia("(pointer:coarse)").matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},isAndroid(){return lr.isMobile()&&navigator.userAgent.toLowerCase().includes("android")},isIos(){const e=navigator.userAgent.toLowerCase();return lr.isMobile()&&(e.includes("iphone")||e.includes("ipad"))},isHttpUrl(e){return e.startsWith("http://")||e.startsWith("https://")},isArray(e){return Array.isArray(e)&&e.length>0},formatNativeUrl(e,t,n){if(lr.isHttpUrl(e))return this.formatUniversalUrl(e,t,n);let s=e;s.includes("://")||(s=e.replaceAll("/","").replaceAll(":",""),s=`${s}://`),s.endsWith("/")||(s=`${s}/`),this.setWalletConnectDeepLink(s,n);const o=encodeURIComponent(t);return`${s}wc?uri=${o}`},formatUniversalUrl(e,t,n){if(!lr.isHttpUrl(e))return this.formatNativeUrl(e,t,n);let s=e;s.endsWith("/")||(s=`${s}/`),this.setWalletConnectDeepLink(s,n);const o=encodeURIComponent(t);return`${s}wc?uri=${o}`},async wait(e){return new Promise(t=>{setTimeout(t,e)})},openHref(e,t){window.open(e,t,"noreferrer noopener")},setWalletConnectDeepLink(e,t){try{localStorage.setItem(lr.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},setWalletConnectAndroidDeepLink(e){try{const[t]=e.split("?");localStorage.setItem(lr.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:t,name:"Android"}))}catch{console.info("Unable to set WalletConnect android deep link")}},removeWalletConnectDeepLink(){try{localStorage.removeItem(lr.WALLETCONNECT_DEEPLINK_CHOICE)}catch{console.info("Unable to remove WalletConnect deep link")}},setModalVersionInStorage(){try{typeof localStorage<"u"&&localStorage.setItem(lr.WCM_VERSION,"2.6.2")}catch{console.info("Unable to set Web3Modal version in storage")}},getWalletRouterData(){var e;const t=(e=i1.state.data)==null?void 0:e.Wallet;if(!t)throw new Error('Missing "Wallet" view data');return t}},MR=typeof location<"u"&&(location.hostname.includes("localhost")||location.protocol.includes("https")),ur=yi({enabled:MR,userSessionId:"",events:[],connectedWalletId:void 0}),FR={state:ur,subscribe(e){return is(ur.events,()=>e(LR(ur.events[ur.events.length-1])))},initialize(){ur.enabled&&typeof(crypto==null?void 0:crypto.randomUUID)<"u"&&(ur.userSessionId=crypto.randomUUID())},setConnectedWalletId(e){ur.connectedWalletId=e},click(e){if(ur.enabled){const t={type:"CLICK",name:e.name,userSessionId:ur.userSessionId,timestamp:Date.now(),data:e};ur.events.push(t)}},track(e){if(ur.enabled){const t={type:"TRACK",name:e.name,userSessionId:ur.userSessionId,timestamp:Date.now(),data:e};ur.events.push(t)}},view(e){if(ur.enabled){const t={type:"VIEW",name:e.name,userSessionId:ur.userSessionId,timestamp:Date.now(),data:e};ur.events.push(t)}}},Sn=yi({chains:void 0,walletConnectUri:void 0,isAuth:!1,isCustomDesktop:!1,isCustomMobile:!1,isDataLoaded:!1,isUiLoaded:!1}),yn={state:Sn,subscribe(e){return is(Sn,()=>e(Sn))},setChains(e){Sn.chains=e},setWalletConnectUri(e){Sn.walletConnectUri=e},setIsCustomDesktop(e){Sn.isCustomDesktop=e},setIsCustomMobile(e){Sn.isCustomMobile=e},setIsDataLoaded(e){Sn.isDataLoaded=e},setIsUiLoaded(e){Sn.isUiLoaded=e},setIsAuth(e){Sn.isAuth=e}},Ya=yi({projectId:"",mobileWallets:void 0,desktopWallets:void 0,walletImages:void 0,chains:void 0,enableAuthMode:!1,enableExplorer:!0,explorerExcludedWalletIds:void 0,explorerRecommendedWalletIds:void 0,termsOfServiceUrl:void 0,privacyPolicyUrl:void 0}),js={state:Ya,subscribe(e){return is(Ya,()=>e(Ya))},setConfig(e){var t,n;FR.initialize(),yn.setChains(e.chains),yn.setIsAuth(Boolean(e.enableAuthMode)),yn.setIsCustomMobile(Boolean((t=e.mobileWallets)==null?void 0:t.length)),yn.setIsCustomDesktop(Boolean((n=e.desktopWallets)==null?void 0:n.length)),lr.setModalVersionInStorage(),Object.assign(Ya,e)}};var BR=Object.defineProperty,qy=Object.getOwnPropertySymbols,qR=Object.prototype.hasOwnProperty,HR=Object.prototype.propertyIsEnumerable,Hy=(e,t,n)=>t in e?BR(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,kR=(e,t)=>{for(var n in t||(t={}))qR.call(t,n)&&Hy(e,n,t[n]);if(qy)for(var n of qy(t))HR.call(t,n)&&Hy(e,n,t[n]);return e};const uh="https://explorer-api.walletconnect.com",lh="wcm",hh="js-2.6.2";async function Xa(e,t){const n=kR({sdkType:lh,sdkVersion:hh},t),s=new URL(e,uh);return s.searchParams.append("projectId",js.state.projectId),Object.entries(n).forEach(([o,c])=>{c&&s.searchParams.append(o,String(c))}),(await fetch(s)).json()}const Fi={async getDesktopListings(e){return Xa("/w3m/v1/getDesktopListings",e)},async getMobileListings(e){return Xa("/w3m/v1/getMobileListings",e)},async getInjectedListings(e){return Xa("/w3m/v1/getInjectedListings",e)},async getAllListings(e){return Xa("/w3m/v1/getAllListings",e)},getWalletImageUrl(e){return`${uh}/w3m/v1/getWalletImage/${e}?projectId=${js.state.projectId}&sdkType=${lh}&sdkVersion=${hh}`},getAssetImageUrl(e){return`${uh}/w3m/v1/getAssetImage/${e}?projectId=${js.state.projectId}&sdkType=${lh}&sdkVersion=${hh}`}};var zR=Object.defineProperty,ky=Object.getOwnPropertySymbols,VR=Object.prototype.hasOwnProperty,KR=Object.prototype.propertyIsEnumerable,zy=(e,t,n)=>t in e?zR(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,WR=(e,t)=>{for(var n in t||(t={}))VR.call(t,n)&&zy(e,n,t[n]);if(ky)for(var n of ky(t))KR.call(t,n)&&zy(e,n,t[n]);return e};const Vy=lr.isMobile(),On=yi({wallets:{listings:[],total:0,page:1},search:{listings:[],total:0,page:1},recomendedWallets:[]}),c8={state:On,async getRecomendedWallets(){const{explorerRecommendedWalletIds:e,explorerExcludedWalletIds:t}=js.state;if(e==="NONE"||t==="ALL"&&!e)return On.recomendedWallets;if(lr.isArray(e)){const n={recommendedIds:e.join(",")},{listings:s}=await Fi.getAllListings(n),o=Object.values(s);o.sort((c,f)=>{const h=e.indexOf(c.id),O=e.indexOf(f.id);return h-O}),On.recomendedWallets=o}else{const{chains:n,isAuth:s}=yn.state,o=n?.join(","),c=lr.isArray(t),f={page:1,sdks:s?"auth_v1":void 0,entries:lr.RECOMMENDED_WALLET_AMOUNT,chains:o,version:2,excludedIds:c?t.join(","):void 0},{listings:h}=Vy?await Fi.getMobileListings(f):await Fi.getDesktopListings(f);On.recomendedWallets=Object.values(h)}return On.recomendedWallets},async getWallets(e){const t=WR({},e),{explorerRecommendedWalletIds:n,explorerExcludedWalletIds:s}=js.state,{recomendedWallets:o}=On;if(s==="ALL")return On.wallets;o.length?t.excludedIds=o.map(C=>C.id).join(","):lr.isArray(n)&&(t.excludedIds=n.join(",")),lr.isArray(s)&&(t.excludedIds=[t.excludedIds,s].filter(Boolean).join(",")),yn.state.isAuth&&(t.sdks="auth_v1");const{page:c,search:f}=e,{listings:h,total:O}=Vy?await Fi.getMobileListings(t):await Fi.getDesktopListings(t),p=Object.values(h),S=f?"search":"wallets";return On[S]={listings:[...On[S].listings,...p],total:O,page:c??1},{listings:p,total:O}},getWalletImageUrl(e){return Fi.getWalletImageUrl(e)},getAssetImageUrl(e){return Fi.getAssetImageUrl(e)},resetSearch(){On.search={listings:[],total:0,page:1}}},As=yi({open:!1}),xl={state:As,subscribe(e){return is(As,()=>e(As))},async open(e){return new Promise(t=>{const{isUiLoaded:n,isDataLoaded:s}=yn.state;if(lr.removeWalletConnectDeepLink(),yn.setWalletConnectUri(e?.uri),yn.setChains(e?.chains),i1.reset("ConnectWallet"),n&&s)As.open=!0,t();else{const o=setInterval(()=>{const c=yn.state;c.isUiLoaded&&c.isDataLoaded&&(clearInterval(o),As.open=!0,t())},200)}})},close(){As.open=!1}};var GR=Object.defineProperty,Ky=Object.getOwnPropertySymbols,JR=Object.prototype.hasOwnProperty,YR=Object.prototype.propertyIsEnumerable,Wy=(e,t,n)=>t in e?GR(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,XR=(e,t)=>{for(var n in t||(t={}))JR.call(t,n)&&Wy(e,n,t[n]);if(Ky)for(var n of Ky(t))YR.call(t,n)&&Wy(e,n,t[n]);return e};function QR(){return typeof matchMedia<"u"&&matchMedia("(prefers-color-scheme: dark)").matches}const Io=yi({themeMode:QR()?"dark":"light"}),Gy={state:Io,subscribe(e){return is(Io,()=>e(Io))},setThemeConfig(e){const{themeMode:t,themeVariables:n}=e;t&&(Io.themeMode=t),n&&(Io.themeVariables=XR({},n))}},Bi=yi({open:!1,message:"",variant:"success"}),u8={state:Bi,subscribe(e){return is(Bi,()=>e(Bi))},openToast(e,t){Bi.open=!0,Bi.message=e,Bi.variant=t},closeToast(){Bi.open=!1}};class ZR{constructor(t){this.openModal=xl.open,this.closeModal=xl.close,this.subscribeModal=xl.subscribe,this.setTheme=Gy.setThemeConfig,Gy.setThemeConfig(t),js.setConfig(t),this.initUi()}async initUi(){if(typeof window<"u"){await sI(()=>import("./index.d22f82ba.js"),["assets/index.d22f82ba.js","assets/dijkstra.e1aa8e0e.js","assets/main.147f2eb4.js","assets/main.e3b0c442.css","assets/index.85b2ee11.js","assets/_commonjs-dynamic-modules.30ae7933.js","assets/___vite-browser-external_commonjs-proxy.fb838188.js"]);const t=document.createElement("wcm-modal");document.body.insertAdjacentElement("beforeend",t),yn.setIsUiLoaded(!0)}}}const e8=Object.freeze(Object.defineProperty({__proto__:null,WalletConnectModal:ZR},Symbol.toStringTag,{value:"Module"})),t8=Vn(e8);var Jy;function r8(){if(Jy)return qn;Jy=1,Object.defineProperty(qn,"__esModule",{value:!0});var e=Pr.exports,t=p$,n=AR();function s(v){if(v&&v.__esModule)return v;var g=Object.create(null);return v&&Object.keys(v).forEach(function(P){if(P!=="default"){var L=Object.getOwnPropertyDescriptor(v,P);Object.defineProperty(g,P,L.get?L:{enumerable:!0,get:function(){return v[P]}})}}),g.default=v,Object.freeze(g)}const o="wc",c="ethereum_provider",f=`${o}@2:${c}:`,h="https://rpc.walletconnect.com/v1/",O=["eth_sendTransaction","personal_sign"],p=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],S=["chainChanged","accountsChanged"],C=["chainChanged","accountsChanged","message","disconnect","connect"];var R=Object.defineProperty,U=Object.defineProperties,x=Object.getOwnPropertyDescriptors,F=Object.getOwnPropertySymbols,q=Object.prototype.hasOwnProperty,te=Object.prototype.propertyIsEnumerable,_=(v,g,P)=>g in v?R(v,g,{enumerable:!0,configurable:!0,writable:!0,value:P}):v[g]=P,A=(v,g)=>{for(var P in g||(g={}))q.call(g,P)&&_(v,P,g[P]);if(F)for(var P of F(g))te.call(g,P)&&_(v,P,g[P]);return v},I=(v,g)=>U(v,x(g));function D(v){return Number(v[0].split(":")[1])}function w(v){return`0x${v.toString(16)}`}function u(v){const{chains:g,optionalChains:P,methods:L,optionalMethods:y,events:E,optionalEvents:k,rpcMap:W}=v;if(!t.isValidArray(g))throw new Error("Invalid chains");const Z={chains:g,methods:L||O,events:E||S,rpcMap:A({},g.length?{[D(g)]:W[D(g)]}:{})},B=E?.filter(ie=>!S.includes(ie)),ee=L?.filter(ie=>!O.includes(ie));if(!P&&!k&&!y&&!(B!=null&&B.length)&&!(ee!=null&&ee.length))return{required:g.length?Z:void 0};const oe=B?.length&&ee?.length||!P,de={chains:[...new Set(oe?Z.chains.concat(P||[]):P)],methods:[...new Set(Z.methods.concat(y!=null&&y.length?y:p))],events:[...new Set(Z.events.concat(k!=null&&k.length?k:C))],rpcMap:W};return{required:g.length?Z:void 0,optional:P.length?de:void 0}}class b{constructor(){this.events=new e.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY=f,this.on=(g,P)=>(this.events.on(g,P),this),this.once=(g,P)=>(this.events.once(g,P),this),this.removeListener=(g,P)=>(this.events.removeListener(g,P),this),this.off=(g,P)=>(this.events.off(g,P),this),this.parseAccount=g=>this.isCompatibleChainId(g)?this.parseAccountId(g).address:g,this.signer={},this.rpc={}}static async init(g){const P=new b;return await P.initialize(g),P}async request(g,P){return await this.signer.request(g,this.formatChainId(this.chainId),P)}sendAsync(g,P,L){this.signer.sendAsync(g,P,this.formatChainId(this.chainId),L)}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(g){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(g);const{required:P,optional:L}=u(this.rpc);try{const y=await new Promise(async(k,W)=>{var Z;this.rpc.showQrModal&&((Z=this.modal)==null||Z.subscribeModal(B=>{!B.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),W(new Error("Connection request reset. Please try again.")))})),await this.signer.connect(I(A({namespaces:A({},P&&{[this.namespace]:P})},L&&{optionalNamespaces:{[this.namespace]:L}}),{pairingTopic:g?.pairingTopic})).then(B=>{k(B)}).catch(B=>{W(new Error(B.message))})});if(!y)return;const E=t.getAccountsFromNamespaces(y.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:E),this.setAccounts(E),this.events.emit("connect",{chainId:w(this.chainId)})}catch(y){throw this.signer.logger.error(y),y}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",g=>{const{params:P}=g,{event:L}=P;L.name==="accountsChanged"?(this.accounts=this.parseAccounts(L.data),this.events.emit("accountsChanged",this.accounts)):L.name==="chainChanged"?this.setChainId(this.formatChainId(L.data)):this.events.emit(L.name,L.data),this.events.emit("session_event",g)}),this.signer.on("chainChanged",g=>{const P=parseInt(g);this.chainId=P,this.events.emit("chainChanged",w(this.chainId)),this.persist()}),this.signer.on("session_update",g=>{this.events.emit("session_update",g)}),this.signer.on("session_delete",g=>{this.reset(),this.events.emit("session_delete",g),this.events.emit("disconnect",I(A({},t.getSdkError("USER_DISCONNECTED")),{data:g.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",g=>{var P,L;this.rpc.showQrModal&&((P=this.modal)==null||P.closeModal(),(L=this.modal)==null||L.openModal({uri:g})),this.events.emit("display_uri",g)})}switchEthereumChain(g){this.request({method:"wallet_switchEthereumChain",params:[{chainId:g.toString(16)}]})}isCompatibleChainId(g){return typeof g=="string"?g.startsWith(`${this.namespace}:`):!1}formatChainId(g){return`${this.namespace}:${g}`}parseChainId(g){return Number(g.split(":")[1])}setChainIds(g){const P=g.filter(L=>this.isCompatibleChainId(L)).map(L=>this.parseChainId(L));P.length&&(this.chainId=P[0],this.events.emit("chainChanged",w(this.chainId)),this.persist())}setChainId(g){if(this.isCompatibleChainId(g)){const P=this.parseChainId(g);this.chainId=P,this.switchEthereumChain(P)}}parseAccountId(g){const[P,L,y]=g.split(":");return{chainId:`${P}:${L}`,address:y}}setAccounts(g){this.accounts=g.filter(P=>this.parseChainId(this.parseAccountId(P).chainId)===this.chainId).map(P=>this.parseAccountId(P).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(g){var P,L;const y=(P=g?.chains)!=null?P:[],E=(L=g?.optionalChains)!=null?L:[],k=y.concat(E);if(!k.length)throw new Error("No chains specified in either `chains` or `optionalChains`");const W=y.length?g?.methods||O:[],Z=y.length?g?.events||S:[],B=g?.optionalMethods||[],ee=g?.optionalEvents||[],oe=g?.rpcMap||this.buildRpcMap(k,g.projectId),de=g?.qrModalOptions||void 0;return{chains:y?.map(ie=>this.formatChainId(ie)),optionalChains:E.map(ie=>this.formatChainId(ie)),methods:W,events:Z,optionalMethods:B,optionalEvents:ee,rpcMap:oe,showQrModal:!!(g!=null&&g.showQrModal),qrModalOptions:de,projectId:g.projectId,metadata:g.metadata}}buildRpcMap(g,P){const L={};return g.forEach(y=>{L[y]=this.getRpcUrl(y,P)}),L}async initialize(g){if(this.rpc=this.getRpcConfig(g),this.chainId=this.rpc.chains.length?D(this.rpc.chains):D(this.rpc.optionalChains),this.signer=await n.UniversalProvider.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:g.disableProviderPing,relayUrl:g.relayUrl,storageOptions:g.storageOptions}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let P;try{const{WalletConnectModal:L}=await Promise.resolve().then(function(){return s(t8)});P=L}catch{throw new Error("To use QR modal, please install @walletconnect/modal package")}if(P)try{this.modal=new P(A({projectId:this.rpc.projectId},this.rpc.qrModalOptions))}catch(L){throw this.signer.logger.error(L),new Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(g){if(!g)return;const{chains:P,optionalChains:L,rpcMap:y}=g;P&&t.isValidArray(P)&&(this.rpc.chains=P.map(E=>this.formatChainId(E)),P.forEach(E=>{this.rpc.rpcMap[E]=y?.[E]||this.getRpcUrl(E)})),L&&t.isValidArray(L)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=L?.map(E=>this.formatChainId(E)),L.forEach(E=>{this.rpc.rpcMap[E]=y?.[E]||this.getRpcUrl(E)}))}getRpcUrl(g,P){var L;return((L=this.rpc.rpcMap)==null?void 0:L[g])||`${h}?chainId=eip155:${g}&projectId=${P||this.rpc.projectId}`}async loadPersistedSession(){if(!this.session)return;const g=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),P=this.session.namespaces[`${this.namespace}:${g}`]?this.session.namespaces[`${this.namespace}:${g}`]:this.session.namespaces[this.namespace];this.setChainIds(g?[this.formatChainId(g)]:P?.accounts),this.setAccounts(P?.accounts)}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(g){return typeof g=="string"||g instanceof String?[this.parseAccount(g)]:g.map(P=>this.parseAccount(P))}}const K=b;return qn.EthereumProvider=K,qn.OPTIONAL_EVENTS=C,qn.OPTIONAL_METHODS=p,qn.REQUIRED_EVENTS=S,qn.REQUIRED_METHODS=O,qn.default=b,qn}(function(e){var t=rt&&rt.__createBinding||(Object.create?function(R,U,x,F){F===void 0&&(F=x);var q=Object.getOwnPropertyDescriptor(U,x);(!q||("get"in q?!U.__esModule:q.writable||q.configurable))&&(q={enumerable:!0,get:function(){return U[x]}}),Object.defineProperty(R,F,q)}:function(R,U,x,F){F===void 0&&(F=x),R[F]=U[x]}),n=rt&&rt.__setModuleDefault||(Object.create?function(R,U){Object.defineProperty(R,"default",{enumerable:!0,value:U})}:function(R,U){R.default=U}),s=rt&&rt.__importStar||function(R){if(R&&R.__esModule)return R;var U={};if(R!=null)for(var x in R)x!=="default"&&Object.prototype.hasOwnProperty.call(R,x)&&t(U,R,x);return n(U,R),U},o=rt&&rt.__awaiter||function(R,U,x,F){function q(te){return te instanceof x?te:new x(function(_){_(te)})}return new(x||(x=Promise))(function(te,_){function A(w){try{D(F.next(w))}catch(u){_(u)}}function I(w){try{D(F.throw(w))}catch(u){_(u)}}function D(w){w.done?te(w.value):q(w.value).then(A,I)}D((F=F.apply(R,U||[])).next())})},c=rt&&rt.__rest||function(R,U){var x={};for(var F in R)Object.prototype.hasOwnProperty.call(R,F)&&U.indexOf(F)<0&&(x[F]=R[F]);if(R!=null&&typeof Object.getOwnPropertySymbols=="function")for(var q=0,F=Object.getOwnPropertySymbols(R);q<F.length;q++)U.indexOf(F[q])<0&&Object.prototype.propertyIsEnumerable.call(R,F[q])&&(x[F[q]]=R[F[q]]);return x},f=rt&&rt.__importDefault||function(R){return R&&R.__esModule?R:{default:R}};Object.defineProperty(e,"__esModule",{value:!0}),e.WalletConnect=e.URI_AVAILABLE=void 0;const h=pc,O=f(SI.exports),p=hi;e.URI_AVAILABLE="URI_AVAILABLE";const S=5e3;class C extends h.Connector{constructor({actions:U,defaultChainId:x,options:F,timeout:q=S,onError:te}){super(U,te),this.events=new O.default,this.disconnectListener=u=>{var b;this.actions.resetState(),u&&((b=this.onError)===null||b===void 0||b.call(this,u))},this.chainChangedListener=u=>{this.actions.update({chainId:Number.parseInt(u,16)})},this.accountsChangedListener=u=>{this.actions.update({accounts:u})},this.URIListener=u=>{this.events.emit(e.URI_AVAILABLE,u)};const{rpcMap:_,rpc:A}=F,I=c(F,["rpcMap","rpc"]);this.options=I,this.defaultChainId=x,this.rpcMap=_||A,this.timeout=q;const{chains:D,optionalChains:w}=this.getChainProps(I.chains,I.optionalChains,x);this.chains=D,this.optionalChains=w}initializeProvider(U=this.defaultChainId){return o(this,void 0,void 0,function*(){const x=this.rpcMap?(0,p.getBestUrlMap)(this.rpcMap,this.timeout):void 0,F=this.getChainProps(this.chains,this.optionalChains,U),q=yield Promise.resolve().then(()=>s(r8()));return this.provider=yield q.default.init(Object.assign(Object.assign(Object.assign({},this.options),F),{rpcMap:yield x})),this.provider.on("disconnect",this.disconnectListener).on("chainChanged",this.chainChangedListener).on("accountsChanged",this.accountsChangedListener).on("display_uri",this.URIListener)})}getChainProps(U,x,F=this.defaultChainId){const q=(0,p.getChainsWithDefault)(U,F),te=(0,p.getChainsWithDefault)(x,F);if((0,p.isArrayOneOrMore)(q))return{chains:q,optionalChains:te};if((0,p.isArrayOneOrMore)(te))return{chains:q,optionalChains:te};throw new Error("Either chains or optionalChains must have at least one item.")}isomorphicInitialize(U=this.defaultChainId){return this.eagerConnection?this.eagerConnection:this.eagerConnection=this.initializeProvider(U)}connectEagerly(){return o(this,void 0,void 0,function*(){const U=this.actions.startActivation();try{const x=yield this.isomorphicInitialize();if(!x.session)throw new Error("No active session found. Connect your wallet first.");this.actions.update({accounts:x.accounts,chainId:x.chainId})}catch(x){throw yield this.deactivate(),U(),x}})}activate(U){var x;return o(this,void 0,void 0,function*(){const F=yield this.isomorphicInitialize(U);if(F.session){if(!U||U===F.chainId)return;if(!F.session.namespaces.eip155.accounts.some(_=>_.startsWith(`eip155:${U}:`)))throw!((x=this.options.optionalChains)===null||x===void 0)&&x.includes(U)?new Error(`Cannot activate an optional chain (${U}), as the wallet is not connected to it.
	You should handle this error in application code, as there is no guarantee that a wallet is connected to a chain configured in "optionalChains".`):new Error(`Unknown chain (${U}). Make sure to include any chains you might connect to in the "chains" or "optionalChains" parameters when initializing WalletConnect.`);return F.request({method:"wallet_switchEthereumChain",params:[{chainId:`0x${U.toString(16)}`}]})}const q=this.actions.startActivation();try{yield F.enable(),this.actions.update({chainId:F.chainId,accounts:F.accounts})}catch(te){throw yield this.deactivate(),q(),te}})}deactivate(){var U;return o(this,void 0,void 0,function*(){(U=this.provider)===null||U===void 0||U.removeListener("disconnect",this.disconnectListener).removeListener("chainChanged",this.chainChangedListener).removeListener("accountsChanged",this.accountsChangedListener).removeListener("display_uri",this.URIListener).disconnect(),this.provider=void 0,this.eagerConnection=void 0,this.actions.resetState()})}}e.WalletConnect=C})(mh);const n8=Yy(mh),l8=DI({__proto__:null,default:n8},[mh]);export{FR as R,i1 as T,lr as a,l8 as i,Gy as n,u8 as o,yn as p,xl as s,c8 as t,js as y};
